(window["webpackJsonp"] = window["webpackJsonp"] || []).push([["ui-kendo-module"],{

/***/ "../../node_modules/@progress/kendo-angular-common/dist/fesm2015/index.js":
/*!*************************************************************************************************************!*\
  !*** /home/abdel/www/project/formly/lib/node_modules/@progress/kendo-angular-common/dist/fesm2015/index.js ***!
  \*************************************************************************************************************/
/*! exports provided: ResizeService, DraggableDirective, DraggableModule, EventsOutsideAngularDirective, EventsModule, ResizeSensorComponent, ResizeBatchService, ResizeCompatService, ResizeObserverService, ResizeSensorModule, KendoInput, isDocumentAvailable, isChanged, anyChanged, hasObservers, guid, Keys */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ResizeService", function() { return ResizeService; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "DraggableDirective", function() { return DraggableDirective; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "DraggableModule", function() { return DraggableModule; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "EventsOutsideAngularDirective", function() { return EventsOutsideAngularDirective; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "EventsModule", function() { return EventsModule; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ResizeSensorComponent", function() { return ResizeSensorComponent; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ResizeBatchService", function() { return ResizeBatchService; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ResizeCompatService", function() { return ResizeCompatService; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ResizeObserverService", function() { return ResizeObserverService; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ResizeSensorModule", function() { return ResizeSensorModule; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "KendoInput", function() { return KendoInput; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "isDocumentAvailable", function() { return isDocumentAvailable; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "isChanged", function() { return isChanged; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "anyChanged", function() { return anyChanged; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "hasObservers", function() { return hasObservers; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "guid", function() { return guid; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Keys", function() { return Keys; });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/core */ "../../node_modules/@angular/core/__ivy_ngcc__/fesm2015/core.js");
/* harmony import */ var _telerik_kendo_draggable__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @telerik/kendo-draggable */ "../../node_modules/@telerik/kendo-draggable/dist/es2015/main.js");
/* harmony import */ var _angular_common__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @angular/common */ "../../node_modules/@angular/common/__ivy_ngcc__/fesm2015/common.js");
/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! rxjs/operators */ "../../node_modules/rxjs/_esm2015/operators/index.js");
/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! rxjs */ "../../node_modules/rxjs/_esm2015/index.js");
/**-----------------------------------------------------------------------------------------
* Copyright © 2020 Progress Software Corporation. All rights reserved.
* Licensed under commercial license. See LICENSE.md in the project root for more information
*-------------------------------------------------------------------------------------------*/







const isDocumentAvailable = () => typeof document !== 'undefined';

const isChanged = (propertyName, changes, skipFirstChange = true) => (typeof changes[propertyName] !== 'undefined' &&
    (!changes[propertyName].isFirstChange() || !skipFirstChange) &&
    changes[propertyName].previousValue !== changes[propertyName].currentValue);

const anyChanged = (propertyNames, changes, skipFirstChange = true) => propertyNames.some(name => isChanged(name, changes, skipFirstChange));

const hasObservers = (emitter) => emitter && emitter.observers.length > 0;

const guid = () => {
    let id = "";
    for (let i = 0; i < 32; i++) {
        const random = Math.random() * 16 | 0; // tslint:disable-line:no-bitwise
        if (i === 8 || i === 12 || i === 16 || i === 20) {
            id += "-";
        }
        // tslint:disable-next-line:no-bitwise
        id += (i === 12 ? 4 : (i === 16 ? (random & 3 | 8) : random)).toString(16);
    }
    return id;
};

class DraggableDirective {
    constructor(element, ngZone) {
        this.element = element;
        this.ngZone = ngZone;
        this.enableDrag = true;
        this.kendoPress = new _angular_core__WEBPACK_IMPORTED_MODULE_0__["EventEmitter"]();
        this.kendoDrag = new _angular_core__WEBPACK_IMPORTED_MODULE_0__["EventEmitter"]();
        this.kendoRelease = new _angular_core__WEBPACK_IMPORTED_MODULE_0__["EventEmitter"]();
    }
    ngOnInit() {
        this.toggleDraggable();
    }
    ngOnChanges(changes) {
        if (isChanged('enableDrag', changes)) {
            this.toggleDraggable();
        }
    }
    ngOnDestroy() {
        this.destroyDraggable();
    }
    toggleDraggable() {
        if (isDocumentAvailable()) {
            this.destroyDraggable();
            if (this.enableDrag) {
                this.draggable = new _telerik_kendo_draggable__WEBPACK_IMPORTED_MODULE_1__["default"]({
                    drag: (e) => this.kendoDrag.next(e),
                    press: (e) => this.kendoPress.next(e),
                    release: (e) => this.kendoRelease.next(e)
                });
                this.ngZone.runOutsideAngular(() => this.draggable.bindTo(this.element.nativeElement));
            }
        }
    }
    destroyDraggable() {
        if (this.draggable) {
            this.draggable.destroy();
            this.draggable = null;
        }
    }
}
DraggableDirective.ɵfac = function DraggableDirective_Factory(t) { return new (t || DraggableDirective)(_angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](_angular_core__WEBPACK_IMPORTED_MODULE_0__["ElementRef"]), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](_angular_core__WEBPACK_IMPORTED_MODULE_0__["NgZone"])); };
DraggableDirective.ɵdir = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdefineDirective"]({ type: DraggableDirective, selectors: [["", "kendoDraggable", ""]], inputs: { enableDrag: "enableDrag" }, outputs: { kendoPress: "kendoPress", kendoDrag: "kendoDrag", kendoRelease: "kendoRelease" }, features: [_angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵNgOnChangesFeature"]] });
/** @nocollapse */
DraggableDirective.ctorParameters = () => [
    { type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["ElementRef"] },
    { type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["NgZone"] }
];
DraggableDirective.propDecorators = {
    enableDrag: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"] }],
    kendoPress: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Output"] }],
    kendoDrag: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Output"] }],
    kendoRelease: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Output"] }]
};
/*@__PURE__*/ (function () { _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵsetClassMetadata"](DraggableDirective, [{
        type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Directive"],
        args: [{
                selector: '[kendoDraggable]'
            }]
    }], function () { return [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["ElementRef"] }, { type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["NgZone"] }]; }, { enableDrag: [{
            type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"]
        }], kendoPress: [{
            type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Output"]
        }], kendoDrag: [{
            type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Output"]
        }], kendoRelease: [{
            type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Output"]
        }] }); })();

/**
 * @hidden
 */
class DraggableModule {
}
DraggableModule.ɵmod = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdefineNgModule"]({ type: DraggableModule });
DraggableModule.ɵinj = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdefineInjector"]({ factory: function DraggableModule_Factory(t) { return new (t || DraggableModule)(); }, imports: [[_angular_common__WEBPACK_IMPORTED_MODULE_2__["CommonModule"]]] });
(function () { (typeof ngJitMode === "undefined" || ngJitMode) && _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵsetNgModuleScope"](DraggableModule, { declarations: function () { return [DraggableDirective]; }, imports: function () { return [_angular_common__WEBPACK_IMPORTED_MODULE_2__["CommonModule"]]; }, exports: function () { return [DraggableDirective]; } }); })();
/*@__PURE__*/ (function () { _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵsetClassMetadata"](DraggableModule, [{
        type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["NgModule"],
        args: [{
                declarations: [DraggableDirective],
                exports: [DraggableDirective],
                imports: [_angular_common__WEBPACK_IMPORTED_MODULE_2__["CommonModule"]]
            }]
    }], null, null); })();

/* tslint:disable:no-input-rename */
/**
 * @hidden
 */
class EventsOutsideAngularDirective {
    constructor(element, ngZone, renderer) {
        this.element = element;
        this.ngZone = ngZone;
        this.renderer = renderer;
        this.events = {};
    }
    ngOnInit() {
        if (!this.element || !this.element.nativeElement) {
            return;
        }
        const events = this.events;
        this.subscriptions = [];
        this.ngZone.runOutsideAngular(() => {
            for (let name in events) {
                if (events.hasOwnProperty(name)) {
                    this.subscriptions.push(this.renderer.listen(this.element.nativeElement, name, this.scope ? events[name].bind(this.scope) : events[name]));
                }
            }
        });
    }
    ngOnDestroy() {
        if (this.subscriptions) {
            for (let idx = 0; idx < this.subscriptions.length; idx++) {
                this.subscriptions[idx]();
            }
            this.subscriptions = null;
        }
    }
}
EventsOutsideAngularDirective.ɵfac = function EventsOutsideAngularDirective_Factory(t) { return new (t || EventsOutsideAngularDirective)(_angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](_angular_core__WEBPACK_IMPORTED_MODULE_0__["ElementRef"]), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](_angular_core__WEBPACK_IMPORTED_MODULE_0__["NgZone"]), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](_angular_core__WEBPACK_IMPORTED_MODULE_0__["Renderer2"])); };
EventsOutsideAngularDirective.ɵdir = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdefineDirective"]({ type: EventsOutsideAngularDirective, selectors: [["", "kendoEventsOutsideAngular", ""]], inputs: { events: ["kendoEventsOutsideAngular", "events"], scope: "scope" } });
/** @nocollapse */
EventsOutsideAngularDirective.ctorParameters = () => [
    { type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["ElementRef"] },
    { type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["NgZone"] },
    { type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Renderer2"] }
];
EventsOutsideAngularDirective.propDecorators = {
    events: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"], args: ['kendoEventsOutsideAngular',] }],
    scope: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"] }]
};
/*@__PURE__*/ (function () { _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵsetClassMetadata"](EventsOutsideAngularDirective, [{
        type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Directive"],
        args: [{
                selector: '[kendoEventsOutsideAngular]'
            }]
    }], function () { return [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["ElementRef"] }, { type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["NgZone"] }, { type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Renderer2"] }]; }, { events: [{
            type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"],
            args: ['kendoEventsOutsideAngular']
        }], scope: [{
            type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"]
        }] }); })();

/**
 * @hidden
 */
class EventsModule {
}
EventsModule.ɵmod = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdefineNgModule"]({ type: EventsModule });
EventsModule.ɵinj = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdefineInjector"]({ factory: function EventsModule_Factory(t) { return new (t || EventsModule)(); } });
(function () { (typeof ngJitMode === "undefined" || ngJitMode) && _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵsetNgModuleScope"](EventsModule, { declarations: [EventsOutsideAngularDirective], exports: [EventsOutsideAngularDirective] }); })();
/*@__PURE__*/ (function () { _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵsetClassMetadata"](EventsModule, [{
        type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["NgModule"],
        args: [{
                declarations: [EventsOutsideAngularDirective],
                exports: [EventsOutsideAngularDirective]
            }]
    }], null, null); })();

class ResizeService {
    constructor(resizeBatchService) {
        this.resizeBatchService = resizeBatchService;
        this.resize = new _angular_core__WEBPACK_IMPORTED_MODULE_0__["EventEmitter"]();
        this.acceptedSize = false;
        this.state = 0 /* Initial */;
    }
    acceptSize(size = this.measure()) {
        this.lastWidth = size.width;
        this.lastHeight = size.height;
        this.acceptedSize = true;
    }
    checkChanges() {
        if (!isDocumentAvailable()) {
            return;
        }
        if (this.state === 0 /* Initial */) {
            this.state = 1 /* Initializing */;
            // batch initial measure
            this.resizeBatchService.schedule(this, this.init);
        }
    }
    destroy() {
        this.resizeBatchService.cancel(this);
    }
    checkSize() {
        if (!this.parentElement) {
            return;
        }
        const { width, height } = this.measure();
        const sameSize = width === this.lastWidth && height === this.lastHeight;
        if (sameSize) {
            return;
        }
        this.lastWidth = width;
        this.lastHeight = height;
        this.acceptedSize = false;
        this.resize.emit();
        return true;
    }
    initSize() {
        const size = this.measure();
        this.lastWidth = size.width;
        this.lastHeight = size.height;
    }
    measure() {
        let width = 0;
        let height = 0;
        if (this.parentElement) {
            height = this.parentElement.offsetHeight;
            width = this.parentElement.offsetWidth;
        }
        return { height, width };
    }
}

// tslint:disable:deprecation
const div = style => {
    const el = document.createElement('div');
    el.style.cssText = style;
    return el;
};
const computedProp = (elem, prop) => getComputedStyle(elem, null).getPropertyValue(prop);
const WRAP_STYLE = 'position: absolute; display: block; left: 0; top: 0; right: 0; bottom: 0; z-index: -1;' +
    'overflow: hidden; visibility: hidden;';
const EXPAND_CHILD_STYLE = 'position: absolute; left: 0; top: 0; transition: 0s;';
const SHRINK_CHILD_STYLE = EXPAND_CHILD_STYLE + 'width: 200%; height: 200%;';
class ResizeCompatService extends ResizeService {
    constructor(resizeBatchService, element, ngZone) {
        super(resizeBatchService);
        this.element = element;
        this.ngZone = ngZone;
    }
    checkChanges() {
        if (this.state === 2 /* Initialized */) {
            if (!this.resizeBatchService.isScheduled(this)) {
                this.resizeBatchService.schedule(this, this.checkSize);
            }
            return;
        }
        super.checkChanges();
    }
    destroy() {
        super.destroy();
        if (this.subscription) {
            this.subscription.unsubscribe();
        }
        if (this.expand) {
            const element = this.element.nativeElement;
            element.removeChild(this.expand);
            element.removeChild(this.shrink);
            this.expand.removeChild(this.expandChild);
            this.expand = this.expandChild = this.shrink = this.element = null;
        }
    }
    checkSize() {
        if (super.checkSize()) {
            this.reset();
            return true;
        }
    }
    init() {
        const parentElement = this.parentElement = this.element.nativeElement.parentElement;
        if (computedProp(parentElement, 'position') === 'static') {
            parentElement.style.position = 'relative';
        }
        this.state = 2 /* Initialized */;
        this.render();
        this.reset();
        this.initSize();
        this.subscribe();
    }
    render() {
        const element = this.element.nativeElement;
        element.style.cssText = WRAP_STYLE;
        element.setAttribute('dir', 'ltr');
        this.expand = div(WRAP_STYLE);
        this.expandChild = div(EXPAND_CHILD_STYLE);
        this.expand.appendChild(this.expandChild);
        element.appendChild(this.expand);
        this.shrink = div(WRAP_STYLE);
        const shrinkChild = div(SHRINK_CHILD_STYLE);
        this.shrink.appendChild(shrinkChild);
        element.appendChild(this.shrink);
    }
    reset() {
        const expandChild = this.expandChild;
        expandChild.style.width = 100000 + 'px';
        expandChild.style.height = 100000 + 'px';
        const expand = this.expand;
        expand.scrollLeft = 100000;
        expand.scrollTop = 100000;
        const shrink = this.shrink;
        shrink.scrollLeft = 100000;
        shrink.scrollTop = 100000;
    }
    subscribe() {
        this.ngZone.runOutsideAngular(() => {
            this.subscription = Object(rxjs__WEBPACK_IMPORTED_MODULE_4__["merge"])(Object(rxjs__WEBPACK_IMPORTED_MODULE_4__["fromEvent"])(this.shrink, 'scroll'), Object(rxjs__WEBPACK_IMPORTED_MODULE_4__["fromEvent"])(this.expand, 'scroll'))
                .subscribe(() => {
                this.checkSize();
            });
        });
    }
}

const HAS_OBSERVER = typeof ResizeObserver !== 'undefined';
/**
 * @hidden
 */
class ResizeObserverService extends ResizeService {
    constructor(resizeBatchService, element, ngZone) {
        super(resizeBatchService);
        this.element = element;
        this.ngZone = ngZone;
    }
    static supported() {
        return HAS_OBSERVER;
    }
    destroy() {
        super.destroy();
        if (this.resizeObserver) {
            this.resizeObserver.disconnect();
            this.resizeObserver = null;
        }
        this.parentElement = null;
    }
    init() {
        this.parentElement = this.element.nativeElement.parentElement;
        this.initSize();
        this.state = 2 /* Initialized */;
        this.ngZone.runOutsideAngular(() => {
            this.resizeObserver = new ResizeObserver(() => {
                this.checkSize();
            });
            this.resizeObserver.observe(this.parentElement);
        });
    }
}

/* tslint:disable:align */
/**
 * @hidden
 */
class ResizeBatchService {
    constructor(ngZone) {
        this.ngZone = ngZone;
        this.scheduled = [];
        this.resolvedPromise = Promise.resolve(null);
        this.flush = this.flush.bind(this);
    }
    schedule(instance, method) {
        this.scheduled.push({ instance, method });
        if (!this.subscription) {
            this.ngZone.runOutsideAngular(() => {
                this.subscription = Object(rxjs__WEBPACK_IMPORTED_MODULE_4__["from"])(this.resolvedPromise)
                    .subscribe(this.flush);
            });
        }
    }
    isScheduled(instance) {
        return Boolean(this.scheduled.find(item => item.instance === instance));
    }
    cancel(instance) {
        const scheduled = this.scheduled;
        const count = scheduled.length;
        for (let idx = 0; idx < count; idx++) {
            if (scheduled[idx].instance === instance) {
                scheduled.splice(idx, 1);
                if (!scheduled.length) {
                    this.unsubscribe();
                }
                return;
            }
        }
    }
    ngOnDestroy() {
        this.unsubscribe();
    }
    unsubscribe() {
        if (this.subscription) {
            this.subscription.unsubscribe();
            this.subscription = null;
        }
    }
    flush() {
        this.scheduled.forEach(item => {
            item.method.call(item.instance);
        });
        this.scheduled = [];
        this.unsubscribe();
    }
}
ResizeBatchService.ɵfac = function ResizeBatchService_Factory(t) { return new (t || ResizeBatchService)(_angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵinject"](_angular_core__WEBPACK_IMPORTED_MODULE_0__["NgZone"])); };
ResizeBatchService.ɵprov = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdefineInjectable"]({ token: ResizeBatchService, factory: ResizeBatchService.ɵfac });
/** @nocollapse */
ResizeBatchService.ctorParameters = () => [
    { type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["NgZone"] }
];
/*@__PURE__*/ (function () { _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵsetClassMetadata"](ResizeBatchService, [{
        type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Injectable"]
    }], function () { return [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["NgZone"] }]; }, null); })();

/**
 * Emit up to 10 resize events per second by default.
 * Chosen as a compromise between responsiveness and performance.
 */
const DEFAULT_RATE_LIMIT = 10;
/**
 * Resize Sensor Component
 *
 * Triggers a "resize" event whenever the parent DOM element size changes.
 */
class ResizeSensorComponent {
    constructor(resizeBatchService, element, ngZone) {
        /**
         * The maximum number of resize events to emit per second.
         *
         * Defaults to 10.
         */
        this.rateLimit = DEFAULT_RATE_LIMIT;
        /**
         * Fires when the parent DOM element has been resized.
         */
        this.resize = new _angular_core__WEBPACK_IMPORTED_MODULE_0__["EventEmitter"]();
        const serviceType = ResizeObserverService.supported() ? ResizeObserverService : ResizeCompatService;
        this.resizeService = new serviceType(resizeBatchService, element, ngZone);
        const throttleTime = 1000 / (this.rateLimit || DEFAULT_RATE_LIMIT);
        this.subscription = this.resizeService.resize
            .pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_3__["auditTime"])(throttleTime))
            .subscribe(() => {
            if (!this.resizeService.acceptedSize) {
                this.resize.emit();
            }
        });
    }
    ngAfterViewChecked() {
        this.resizeService.checkChanges();
    }
    ngOnDestroy() {
        this.subscription.unsubscribe();
        this.resizeService.destroy();
    }
    acceptSize(size) {
        this.resizeService.acceptSize(size);
    }
}
ResizeSensorComponent.ɵfac = function ResizeSensorComponent_Factory(t) { return new (t || ResizeSensorComponent)(_angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](ResizeBatchService), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](_angular_core__WEBPACK_IMPORTED_MODULE_0__["ElementRef"]), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](_angular_core__WEBPACK_IMPORTED_MODULE_0__["NgZone"])); };
ResizeSensorComponent.ɵcmp = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdefineComponent"]({ type: ResizeSensorComponent, selectors: [["kendo-resize-sensor"]], inputs: { rateLimit: "rateLimit" }, outputs: { resize: "resize" }, decls: 0, vars: 0, template: function ResizeSensorComponent_Template(rf, ctx) { }, encapsulation: 2 });
/** @nocollapse */
ResizeSensorComponent.ctorParameters = () => [
    { type: ResizeBatchService },
    { type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["ElementRef"] },
    { type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["NgZone"] }
];
ResizeSensorComponent.propDecorators = {
    rateLimit: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"] }],
    resize: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Output"] }]
};
/*@__PURE__*/ (function () { _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵsetClassMetadata"](ResizeSensorComponent, [{
        type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Component"],
        args: [{
                selector: 'kendo-resize-sensor',
                template: ''
            }]
    }], function () { return [{ type: ResizeBatchService }, { type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["ElementRef"] }, { type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["NgZone"] }]; }, { rateLimit: [{
            type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"]
        }], resize: [{
            type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Output"]
        }] }); })();

const COMPONENT_DIRECTIVES = [ResizeSensorComponent];
/**
 * Resize Sensor module
 */
class ResizeSensorModule {
}
ResizeSensorModule.ɵmod = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdefineNgModule"]({ type: ResizeSensorModule });
ResizeSensorModule.ɵinj = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdefineInjector"]({ factory: function ResizeSensorModule_Factory(t) { return new (t || ResizeSensorModule)(); }, providers: [ResizeBatchService] });
(function () { (typeof ngJitMode === "undefined" || ngJitMode) && _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵsetNgModuleScope"](ResizeSensorModule, { declarations: [ResizeSensorComponent], exports: [ResizeSensorComponent] }); })();
/*@__PURE__*/ (function () { _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵsetClassMetadata"](ResizeSensorModule, [{
        type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["NgModule"],
        args: [{
                declarations: [COMPONENT_DIRECTIVES],
                exports: [COMPONENT_DIRECTIVES],
                providers: [ResizeBatchService]
            }]
    }], null, null); })();

class KendoInput {
}

/**
 * Enum with key codes.
 */
var Keys;
(function (Keys) {
    Keys[Keys["Alt"] = 18] = "Alt";
    Keys[Keys["ArrowDown"] = 40] = "ArrowDown";
    Keys[Keys["ArrowLeft"] = 37] = "ArrowLeft";
    Keys[Keys["ArrowRight"] = 39] = "ArrowRight";
    Keys[Keys["ArrowUp"] = 38] = "ArrowUp";
    Keys[Keys["Backspace"] = 8] = "Backspace";
    Keys[Keys["Control"] = 17] = "Control";
    Keys[Keys["Delete"] = 46] = "Delete";
    Keys[Keys["Digit0"] = 48] = "Digit0";
    Keys[Keys["Digit1"] = 49] = "Digit1";
    Keys[Keys["Digit2"] = 50] = "Digit2";
    Keys[Keys["Digit3"] = 51] = "Digit3";
    Keys[Keys["Digit4"] = 52] = "Digit4";
    Keys[Keys["Digit5"] = 53] = "Digit5";
    Keys[Keys["Digit6"] = 54] = "Digit6";
    Keys[Keys["Digit7"] = 55] = "Digit7";
    Keys[Keys["Digit8"] = 56] = "Digit8";
    Keys[Keys["Digit9"] = 57] = "Digit9";
    Keys[Keys["End"] = 35] = "End";
    Keys[Keys["Enter"] = 13] = "Enter";
    Keys[Keys["Escape"] = 27] = "Escape";
    Keys[Keys["F1"] = 112] = "F1";
    Keys[Keys["F2"] = 113] = "F2";
    Keys[Keys["F10"] = 121] = "F10";
    Keys[Keys["Home"] = 36] = "Home";
    Keys[Keys["Insert"] = 45] = "Insert";
    Keys[Keys["KeyA"] = 65] = "KeyA";
    Keys[Keys["KeyB"] = 66] = "KeyB";
    Keys[Keys["KeyC"] = 67] = "KeyC";
    Keys[Keys["KeyD"] = 68] = "KeyD";
    Keys[Keys["KeyE"] = 69] = "KeyE";
    Keys[Keys["KeyF"] = 70] = "KeyF";
    Keys[Keys["KeyG"] = 71] = "KeyG";
    Keys[Keys["KeyH"] = 72] = "KeyH";
    Keys[Keys["KeyI"] = 73] = "KeyI";
    Keys[Keys["KeyJ"] = 74] = "KeyJ";
    Keys[Keys["KeyK"] = 75] = "KeyK";
    Keys[Keys["KeyL"] = 76] = "KeyL";
    Keys[Keys["KeyM"] = 77] = "KeyM";
    Keys[Keys["KeyN"] = 78] = "KeyN";
    Keys[Keys["KeyO"] = 79] = "KeyO";
    Keys[Keys["KeyP"] = 80] = "KeyP";
    Keys[Keys["KeyQ"] = 81] = "KeyQ";
    Keys[Keys["KeyR"] = 82] = "KeyR";
    Keys[Keys["KeyS"] = 83] = "KeyS";
    Keys[Keys["KeyT"] = 84] = "KeyT";
    Keys[Keys["KeyU"] = 85] = "KeyU";
    Keys[Keys["KeyV"] = 86] = "KeyV";
    Keys[Keys["KeyW"] = 87] = "KeyW";
    Keys[Keys["KeyX"] = 88] = "KeyX";
    Keys[Keys["KeyY"] = 89] = "KeyY";
    Keys[Keys["KeyZ"] = 90] = "KeyZ";
    Keys[Keys["NumpadDecimal"] = 110] = "NumpadDecimal";
    Keys[Keys["PageDown"] = 34] = "PageDown";
    Keys[Keys["PageUp"] = 33] = "PageUp";
    Keys[Keys["Shift"] = 16] = "Shift";
    Keys[Keys["Space"] = 32] = "Space";
    Keys[Keys["Tab"] = 9] = "Tab";
})(Keys || (Keys = {}));

/**
 * Generated bundle index. Do not edit.
 */



//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaW5kZXguanMiLCJzb3VyY2VzIjpbImluZGV4LmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7c1NBS0U7QUFDRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7OztvQkFBRTtBQUNGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7MEJBT0U7QUFDRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzt3T0FLRTtBQUNGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7OztvQkFBRTtBQUNGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7OzswQkFNRTtBQUNGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7c0hBR0U7QUFDRjtBQUNBO0FBQ0E7QUFDQTs7O3VFQUFFO0FBQ0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztxU0FNRTtBQUNGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7OztvQkFBRTtBQUNGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7OzswQkFPRTtBQUNGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VzQ29udGVudCI6WyIvKiotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuKiBDb3B5cmlnaHQgwqkgMjAyMCBQcm9ncmVzcyBTb2Z0d2FyZSBDb3Jwb3JhdGlvbi4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiogTGljZW5zZWQgdW5kZXIgY29tbWVyY2lhbCBsaWNlbnNlLiBTZWUgTElDRU5TRS5tZCBpbiB0aGUgcHJvamVjdCByb290IGZvciBtb3JlIGluZm9ybWF0aW9uXG4qLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXG5pbXBvcnQgeyBFdmVudEVtaXR0ZXIsIERpcmVjdGl2ZSwgRWxlbWVudFJlZiwgTmdab25lLCBJbnB1dCwgT3V0cHV0LCBOZ01vZHVsZSwgUmVuZGVyZXIyLCBJbmplY3RhYmxlLCBDb21wb25lbnQgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcbmltcG9ydCBEcmFnZ2FibGUgZnJvbSAnQHRlbGVyaWsva2VuZG8tZHJhZ2dhYmxlJztcbmltcG9ydCB7IENvbW1vbk1vZHVsZSB9IGZyb20gJ0Bhbmd1bGFyL2NvbW1vbic7XG5pbXBvcnQgeyBhdWRpdFRpbWUgfSBmcm9tICdyeGpzL29wZXJhdG9ycyc7XG5pbXBvcnQgeyBtZXJnZSwgZnJvbUV2ZW50LCBmcm9tIH0gZnJvbSAncnhqcyc7XG5cbmNvbnN0IGlzRG9jdW1lbnRBdmFpbGFibGUgPSAoKSA9PiB0eXBlb2YgZG9jdW1lbnQgIT09ICd1bmRlZmluZWQnO1xuXG5jb25zdCBpc0NoYW5nZWQgPSAocHJvcGVydHlOYW1lLCBjaGFuZ2VzLCBza2lwRmlyc3RDaGFuZ2UgPSB0cnVlKSA9PiAodHlwZW9mIGNoYW5nZXNbcHJvcGVydHlOYW1lXSAhPT0gJ3VuZGVmaW5lZCcgJiZcbiAgICAoIWNoYW5nZXNbcHJvcGVydHlOYW1lXS5pc0ZpcnN0Q2hhbmdlKCkgfHwgIXNraXBGaXJzdENoYW5nZSkgJiZcbiAgICBjaGFuZ2VzW3Byb3BlcnR5TmFtZV0ucHJldmlvdXNWYWx1ZSAhPT0gY2hhbmdlc1twcm9wZXJ0eU5hbWVdLmN1cnJlbnRWYWx1ZSk7XG5cbmNvbnN0IGFueUNoYW5nZWQgPSAocHJvcGVydHlOYW1lcywgY2hhbmdlcywgc2tpcEZpcnN0Q2hhbmdlID0gdHJ1ZSkgPT4gcHJvcGVydHlOYW1lcy5zb21lKG5hbWUgPT4gaXNDaGFuZ2VkKG5hbWUsIGNoYW5nZXMsIHNraXBGaXJzdENoYW5nZSkpO1xuXG5jb25zdCBoYXNPYnNlcnZlcnMgPSAoZW1pdHRlcikgPT4gZW1pdHRlciAmJiBlbWl0dGVyLm9ic2VydmVycy5sZW5ndGggPiAwO1xuXG5jb25zdCBndWlkID0gKCkgPT4ge1xuICAgIGxldCBpZCA9IFwiXCI7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCAzMjsgaSsrKSB7XG4gICAgICAgIGNvbnN0IHJhbmRvbSA9IE1hdGgucmFuZG9tKCkgKiAxNiB8IDA7IC8vIHRzbGludDpkaXNhYmxlLWxpbmU6bm8tYml0d2lzZVxuICAgICAgICBpZiAoaSA9PT0gOCB8fCBpID09PSAxMiB8fCBpID09PSAxNiB8fCBpID09PSAyMCkge1xuICAgICAgICAgICAgaWQgKz0gXCItXCI7XG4gICAgICAgIH1cbiAgICAgICAgLy8gdHNsaW50OmRpc2FibGUtbmV4dC1saW5lOm5vLWJpdHdpc2VcbiAgICAgICAgaWQgKz0gKGkgPT09IDEyID8gNCA6IChpID09PSAxNiA/IChyYW5kb20gJiAzIHwgOCkgOiByYW5kb20pKS50b1N0cmluZygxNik7XG4gICAgfVxuICAgIHJldHVybiBpZDtcbn07XG5cbmNsYXNzIERyYWdnYWJsZURpcmVjdGl2ZSB7XG4gICAgY29uc3RydWN0b3IoZWxlbWVudCwgbmdab25lKSB7XG4gICAgICAgIHRoaXMuZWxlbWVudCA9IGVsZW1lbnQ7XG4gICAgICAgIHRoaXMubmdab25lID0gbmdab25lO1xuICAgICAgICB0aGlzLmVuYWJsZURyYWcgPSB0cnVlO1xuICAgICAgICB0aGlzLmtlbmRvUHJlc3MgPSBuZXcgRXZlbnRFbWl0dGVyKCk7XG4gICAgICAgIHRoaXMua2VuZG9EcmFnID0gbmV3IEV2ZW50RW1pdHRlcigpO1xuICAgICAgICB0aGlzLmtlbmRvUmVsZWFzZSA9IG5ldyBFdmVudEVtaXR0ZXIoKTtcbiAgICB9XG4gICAgbmdPbkluaXQoKSB7XG4gICAgICAgIHRoaXMudG9nZ2xlRHJhZ2dhYmxlKCk7XG4gICAgfVxuICAgIG5nT25DaGFuZ2VzKGNoYW5nZXMpIHtcbiAgICAgICAgaWYgKGlzQ2hhbmdlZCgnZW5hYmxlRHJhZycsIGNoYW5nZXMpKSB7XG4gICAgICAgICAgICB0aGlzLnRvZ2dsZURyYWdnYWJsZSgpO1xuICAgICAgICB9XG4gICAgfVxuICAgIG5nT25EZXN0cm95KCkge1xuICAgICAgICB0aGlzLmRlc3Ryb3lEcmFnZ2FibGUoKTtcbiAgICB9XG4gICAgdG9nZ2xlRHJhZ2dhYmxlKCkge1xuICAgICAgICBpZiAoaXNEb2N1bWVudEF2YWlsYWJsZSgpKSB7XG4gICAgICAgICAgICB0aGlzLmRlc3Ryb3lEcmFnZ2FibGUoKTtcbiAgICAgICAgICAgIGlmICh0aGlzLmVuYWJsZURyYWcpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmRyYWdnYWJsZSA9IG5ldyBEcmFnZ2FibGUoe1xuICAgICAgICAgICAgICAgICAgICBkcmFnOiAoZSkgPT4gdGhpcy5rZW5kb0RyYWcubmV4dChlKSxcbiAgICAgICAgICAgICAgICAgICAgcHJlc3M6IChlKSA9PiB0aGlzLmtlbmRvUHJlc3MubmV4dChlKSxcbiAgICAgICAgICAgICAgICAgICAgcmVsZWFzZTogKGUpID0+IHRoaXMua2VuZG9SZWxlYXNlLm5leHQoZSlcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB0aGlzLm5nWm9uZS5ydW5PdXRzaWRlQW5ndWxhcigoKSA9PiB0aGlzLmRyYWdnYWJsZS5iaW5kVG8odGhpcy5lbGVtZW50Lm5hdGl2ZUVsZW1lbnQpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICBkZXN0cm95RHJhZ2dhYmxlKCkge1xuICAgICAgICBpZiAodGhpcy5kcmFnZ2FibGUpIHtcbiAgICAgICAgICAgIHRoaXMuZHJhZ2dhYmxlLmRlc3Ryb3koKTtcbiAgICAgICAgICAgIHRoaXMuZHJhZ2dhYmxlID0gbnVsbDtcbiAgICAgICAgfVxuICAgIH1cbn1cbkRyYWdnYWJsZURpcmVjdGl2ZS5kZWNvcmF0b3JzID0gW1xuICAgIHsgdHlwZTogRGlyZWN0aXZlLCBhcmdzOiBbe1xuICAgICAgICAgICAgICAgIHNlbGVjdG9yOiAnW2tlbmRvRHJhZ2dhYmxlXSdcbiAgICAgICAgICAgIH0sXSB9LFxuXTtcbi8qKiBAbm9jb2xsYXBzZSAqL1xuRHJhZ2dhYmxlRGlyZWN0aXZlLmN0b3JQYXJhbWV0ZXJzID0gKCkgPT4gW1xuICAgIHsgdHlwZTogRWxlbWVudFJlZiB9LFxuICAgIHsgdHlwZTogTmdab25lIH1cbl07XG5EcmFnZ2FibGVEaXJlY3RpdmUucHJvcERlY29yYXRvcnMgPSB7XG4gICAgZW5hYmxlRHJhZzogW3sgdHlwZTogSW5wdXQgfV0sXG4gICAga2VuZG9QcmVzczogW3sgdHlwZTogT3V0cHV0IH1dLFxuICAgIGtlbmRvRHJhZzogW3sgdHlwZTogT3V0cHV0IH1dLFxuICAgIGtlbmRvUmVsZWFzZTogW3sgdHlwZTogT3V0cHV0IH1dXG59O1xuXG4vKipcbiAqIEBoaWRkZW5cbiAqL1xuY2xhc3MgRHJhZ2dhYmxlTW9kdWxlIHtcbn1cbkRyYWdnYWJsZU1vZHVsZS5kZWNvcmF0b3JzID0gW1xuICAgIHsgdHlwZTogTmdNb2R1bGUsIGFyZ3M6IFt7XG4gICAgICAgICAgICAgICAgZGVjbGFyYXRpb25zOiBbRHJhZ2dhYmxlRGlyZWN0aXZlXSxcbiAgICAgICAgICAgICAgICBleHBvcnRzOiBbRHJhZ2dhYmxlRGlyZWN0aXZlXSxcbiAgICAgICAgICAgICAgICBpbXBvcnRzOiBbQ29tbW9uTW9kdWxlXVxuICAgICAgICAgICAgfSxdIH0sXG5dO1xuXG4vKiB0c2xpbnQ6ZGlzYWJsZTpuby1pbnB1dC1yZW5hbWUgKi9cbi8qKlxuICogQGhpZGRlblxuICovXG5jbGFzcyBFdmVudHNPdXRzaWRlQW5ndWxhckRpcmVjdGl2ZSB7XG4gICAgY29uc3RydWN0b3IoZWxlbWVudCwgbmdab25lLCByZW5kZXJlcikge1xuICAgICAgICB0aGlzLmVsZW1lbnQgPSBlbGVtZW50O1xuICAgICAgICB0aGlzLm5nWm9uZSA9IG5nWm9uZTtcbiAgICAgICAgdGhpcy5yZW5kZXJlciA9IHJlbmRlcmVyO1xuICAgICAgICB0aGlzLmV2ZW50cyA9IHt9O1xuICAgIH1cbiAgICBuZ09uSW5pdCgpIHtcbiAgICAgICAgaWYgKCF0aGlzLmVsZW1lbnQgfHwgIXRoaXMuZWxlbWVudC5uYXRpdmVFbGVtZW50KSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgZXZlbnRzID0gdGhpcy5ldmVudHM7XG4gICAgICAgIHRoaXMuc3Vic2NyaXB0aW9ucyA9IFtdO1xuICAgICAgICB0aGlzLm5nWm9uZS5ydW5PdXRzaWRlQW5ndWxhcigoKSA9PiB7XG4gICAgICAgICAgICBmb3IgKGxldCBuYW1lIGluIGV2ZW50cykge1xuICAgICAgICAgICAgICAgIGlmIChldmVudHMuaGFzT3duUHJvcGVydHkobmFtZSkpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zdWJzY3JpcHRpb25zLnB1c2godGhpcy5yZW5kZXJlci5saXN0ZW4odGhpcy5lbGVtZW50Lm5hdGl2ZUVsZW1lbnQsIG5hbWUsIHRoaXMuc2NvcGUgPyBldmVudHNbbmFtZV0uYmluZCh0aGlzLnNjb3BlKSA6IGV2ZW50c1tuYW1lXSkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxuICAgIG5nT25EZXN0cm95KCkge1xuICAgICAgICBpZiAodGhpcy5zdWJzY3JpcHRpb25zKSB7XG4gICAgICAgICAgICBmb3IgKGxldCBpZHggPSAwOyBpZHggPCB0aGlzLnN1YnNjcmlwdGlvbnMubGVuZ3RoOyBpZHgrKykge1xuICAgICAgICAgICAgICAgIHRoaXMuc3Vic2NyaXB0aW9uc1tpZHhdKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnN1YnNjcmlwdGlvbnMgPSBudWxsO1xuICAgICAgICB9XG4gICAgfVxufVxuRXZlbnRzT3V0c2lkZUFuZ3VsYXJEaXJlY3RpdmUuZGVjb3JhdG9ycyA9IFtcbiAgICB7IHR5cGU6IERpcmVjdGl2ZSwgYXJnczogW3tcbiAgICAgICAgICAgICAgICBzZWxlY3RvcjogJ1trZW5kb0V2ZW50c091dHNpZGVBbmd1bGFyXSdcbiAgICAgICAgICAgIH0sXSB9LFxuXTtcbi8qKiBAbm9jb2xsYXBzZSAqL1xuRXZlbnRzT3V0c2lkZUFuZ3VsYXJEaXJlY3RpdmUuY3RvclBhcmFtZXRlcnMgPSAoKSA9PiBbXG4gICAgeyB0eXBlOiBFbGVtZW50UmVmIH0sXG4gICAgeyB0eXBlOiBOZ1pvbmUgfSxcbiAgICB7IHR5cGU6IFJlbmRlcmVyMiB9XG5dO1xuRXZlbnRzT3V0c2lkZUFuZ3VsYXJEaXJlY3RpdmUucHJvcERlY29yYXRvcnMgPSB7XG4gICAgZXZlbnRzOiBbeyB0eXBlOiBJbnB1dCwgYXJnczogWydrZW5kb0V2ZW50c091dHNpZGVBbmd1bGFyJyxdIH1dLFxuICAgIHNjb3BlOiBbeyB0eXBlOiBJbnB1dCB9XVxufTtcblxuLyoqXG4gKiBAaGlkZGVuXG4gKi9cbmNsYXNzIEV2ZW50c01vZHVsZSB7XG59XG5FdmVudHNNb2R1bGUuZGVjb3JhdG9ycyA9IFtcbiAgICB7IHR5cGU6IE5nTW9kdWxlLCBhcmdzOiBbe1xuICAgICAgICAgICAgICAgIGRlY2xhcmF0aW9uczogW0V2ZW50c091dHNpZGVBbmd1bGFyRGlyZWN0aXZlXSxcbiAgICAgICAgICAgICAgICBleHBvcnRzOiBbRXZlbnRzT3V0c2lkZUFuZ3VsYXJEaXJlY3RpdmVdXG4gICAgICAgICAgICB9LF0gfSxcbl07XG5cbmNsYXNzIFJlc2l6ZVNlcnZpY2Uge1xuICAgIGNvbnN0cnVjdG9yKHJlc2l6ZUJhdGNoU2VydmljZSkge1xuICAgICAgICB0aGlzLnJlc2l6ZUJhdGNoU2VydmljZSA9IHJlc2l6ZUJhdGNoU2VydmljZTtcbiAgICAgICAgdGhpcy5yZXNpemUgPSBuZXcgRXZlbnRFbWl0dGVyKCk7XG4gICAgICAgIHRoaXMuYWNjZXB0ZWRTaXplID0gZmFsc2U7XG4gICAgICAgIHRoaXMuc3RhdGUgPSAwIC8qIEluaXRpYWwgKi87XG4gICAgfVxuICAgIGFjY2VwdFNpemUoc2l6ZSA9IHRoaXMubWVhc3VyZSgpKSB7XG4gICAgICAgIHRoaXMubGFzdFdpZHRoID0gc2l6ZS53aWR0aDtcbiAgICAgICAgdGhpcy5sYXN0SGVpZ2h0ID0gc2l6ZS5oZWlnaHQ7XG4gICAgICAgIHRoaXMuYWNjZXB0ZWRTaXplID0gdHJ1ZTtcbiAgICB9XG4gICAgY2hlY2tDaGFuZ2VzKCkge1xuICAgICAgICBpZiAoIWlzRG9jdW1lbnRBdmFpbGFibGUoKSkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLnN0YXRlID09PSAwIC8qIEluaXRpYWwgKi8pIHtcbiAgICAgICAgICAgIHRoaXMuc3RhdGUgPSAxIC8qIEluaXRpYWxpemluZyAqLztcbiAgICAgICAgICAgIC8vIGJhdGNoIGluaXRpYWwgbWVhc3VyZVxuICAgICAgICAgICAgdGhpcy5yZXNpemVCYXRjaFNlcnZpY2Uuc2NoZWR1bGUodGhpcywgdGhpcy5pbml0KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBkZXN0cm95KCkge1xuICAgICAgICB0aGlzLnJlc2l6ZUJhdGNoU2VydmljZS5jYW5jZWwodGhpcyk7XG4gICAgfVxuICAgIGNoZWNrU2l6ZSgpIHtcbiAgICAgICAgaWYgKCF0aGlzLnBhcmVudEVsZW1lbnQpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCB7IHdpZHRoLCBoZWlnaHQgfSA9IHRoaXMubWVhc3VyZSgpO1xuICAgICAgICBjb25zdCBzYW1lU2l6ZSA9IHdpZHRoID09PSB0aGlzLmxhc3RXaWR0aCAmJiBoZWlnaHQgPT09IHRoaXMubGFzdEhlaWdodDtcbiAgICAgICAgaWYgKHNhbWVTaXplKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5sYXN0V2lkdGggPSB3aWR0aDtcbiAgICAgICAgdGhpcy5sYXN0SGVpZ2h0ID0gaGVpZ2h0O1xuICAgICAgICB0aGlzLmFjY2VwdGVkU2l6ZSA9IGZhbHNlO1xuICAgICAgICB0aGlzLnJlc2l6ZS5lbWl0KCk7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICBpbml0U2l6ZSgpIHtcbiAgICAgICAgY29uc3Qgc2l6ZSA9IHRoaXMubWVhc3VyZSgpO1xuICAgICAgICB0aGlzLmxhc3RXaWR0aCA9IHNpemUud2lkdGg7XG4gICAgICAgIHRoaXMubGFzdEhlaWdodCA9IHNpemUuaGVpZ2h0O1xuICAgIH1cbiAgICBtZWFzdXJlKCkge1xuICAgICAgICBsZXQgd2lkdGggPSAwO1xuICAgICAgICBsZXQgaGVpZ2h0ID0gMDtcbiAgICAgICAgaWYgKHRoaXMucGFyZW50RWxlbWVudCkge1xuICAgICAgICAgICAgaGVpZ2h0ID0gdGhpcy5wYXJlbnRFbGVtZW50Lm9mZnNldEhlaWdodDtcbiAgICAgICAgICAgIHdpZHRoID0gdGhpcy5wYXJlbnRFbGVtZW50Lm9mZnNldFdpZHRoO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB7IGhlaWdodCwgd2lkdGggfTtcbiAgICB9XG59XG5cbi8vIHRzbGludDpkaXNhYmxlOmRlcHJlY2F0aW9uXG5jb25zdCBkaXYgPSBzdHlsZSA9PiB7XG4gICAgY29uc3QgZWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICBlbC5zdHlsZS5jc3NUZXh0ID0gc3R5bGU7XG4gICAgcmV0dXJuIGVsO1xufTtcbmNvbnN0IGNvbXB1dGVkUHJvcCA9IChlbGVtLCBwcm9wKSA9PiBnZXRDb21wdXRlZFN0eWxlKGVsZW0sIG51bGwpLmdldFByb3BlcnR5VmFsdWUocHJvcCk7XG5jb25zdCBXUkFQX1NUWUxFID0gJ3Bvc2l0aW9uOiBhYnNvbHV0ZTsgZGlzcGxheTogYmxvY2s7IGxlZnQ6IDA7IHRvcDogMDsgcmlnaHQ6IDA7IGJvdHRvbTogMDsgei1pbmRleDogLTE7JyArXG4gICAgJ292ZXJmbG93OiBoaWRkZW47IHZpc2liaWxpdHk6IGhpZGRlbjsnO1xuY29uc3QgRVhQQU5EX0NISUxEX1NUWUxFID0gJ3Bvc2l0aW9uOiBhYnNvbHV0ZTsgbGVmdDogMDsgdG9wOiAwOyB0cmFuc2l0aW9uOiAwczsnO1xuY29uc3QgU0hSSU5LX0NISUxEX1NUWUxFID0gRVhQQU5EX0NISUxEX1NUWUxFICsgJ3dpZHRoOiAyMDAlOyBoZWlnaHQ6IDIwMCU7JztcbmNsYXNzIFJlc2l6ZUNvbXBhdFNlcnZpY2UgZXh0ZW5kcyBSZXNpemVTZXJ2aWNlIHtcbiAgICBjb25zdHJ1Y3RvcihyZXNpemVCYXRjaFNlcnZpY2UsIGVsZW1lbnQsIG5nWm9uZSkge1xuICAgICAgICBzdXBlcihyZXNpemVCYXRjaFNlcnZpY2UpO1xuICAgICAgICB0aGlzLmVsZW1lbnQgPSBlbGVtZW50O1xuICAgICAgICB0aGlzLm5nWm9uZSA9IG5nWm9uZTtcbiAgICB9XG4gICAgY2hlY2tDaGFuZ2VzKCkge1xuICAgICAgICBpZiAodGhpcy5zdGF0ZSA9PT0gMiAvKiBJbml0aWFsaXplZCAqLykge1xuICAgICAgICAgICAgaWYgKCF0aGlzLnJlc2l6ZUJhdGNoU2VydmljZS5pc1NjaGVkdWxlZCh0aGlzKSkge1xuICAgICAgICAgICAgICAgIHRoaXMucmVzaXplQmF0Y2hTZXJ2aWNlLnNjaGVkdWxlKHRoaXMsIHRoaXMuY2hlY2tTaXplKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBzdXBlci5jaGVja0NoYW5nZXMoKTtcbiAgICB9XG4gICAgZGVzdHJveSgpIHtcbiAgICAgICAgc3VwZXIuZGVzdHJveSgpO1xuICAgICAgICBpZiAodGhpcy5zdWJzY3JpcHRpb24pIHtcbiAgICAgICAgICAgIHRoaXMuc3Vic2NyaXB0aW9uLnVuc3Vic2NyaWJlKCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMuZXhwYW5kKSB7XG4gICAgICAgICAgICBjb25zdCBlbGVtZW50ID0gdGhpcy5lbGVtZW50Lm5hdGl2ZUVsZW1lbnQ7XG4gICAgICAgICAgICBlbGVtZW50LnJlbW92ZUNoaWxkKHRoaXMuZXhwYW5kKTtcbiAgICAgICAgICAgIGVsZW1lbnQucmVtb3ZlQ2hpbGQodGhpcy5zaHJpbmspO1xuICAgICAgICAgICAgdGhpcy5leHBhbmQucmVtb3ZlQ2hpbGQodGhpcy5leHBhbmRDaGlsZCk7XG4gICAgICAgICAgICB0aGlzLmV4cGFuZCA9IHRoaXMuZXhwYW5kQ2hpbGQgPSB0aGlzLnNocmluayA9IHRoaXMuZWxlbWVudCA9IG51bGw7XG4gICAgICAgIH1cbiAgICB9XG4gICAgY2hlY2tTaXplKCkge1xuICAgICAgICBpZiAoc3VwZXIuY2hlY2tTaXplKCkpIHtcbiAgICAgICAgICAgIHRoaXMucmVzZXQoKTtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgfVxuICAgIGluaXQoKSB7XG4gICAgICAgIGNvbnN0IHBhcmVudEVsZW1lbnQgPSB0aGlzLnBhcmVudEVsZW1lbnQgPSB0aGlzLmVsZW1lbnQubmF0aXZlRWxlbWVudC5wYXJlbnRFbGVtZW50O1xuICAgICAgICBpZiAoY29tcHV0ZWRQcm9wKHBhcmVudEVsZW1lbnQsICdwb3NpdGlvbicpID09PSAnc3RhdGljJykge1xuICAgICAgICAgICAgcGFyZW50RWxlbWVudC5zdHlsZS5wb3NpdGlvbiA9ICdyZWxhdGl2ZSc7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5zdGF0ZSA9IDIgLyogSW5pdGlhbGl6ZWQgKi87XG4gICAgICAgIHRoaXMucmVuZGVyKCk7XG4gICAgICAgIHRoaXMucmVzZXQoKTtcbiAgICAgICAgdGhpcy5pbml0U2l6ZSgpO1xuICAgICAgICB0aGlzLnN1YnNjcmliZSgpO1xuICAgIH1cbiAgICByZW5kZXIoKSB7XG4gICAgICAgIGNvbnN0IGVsZW1lbnQgPSB0aGlzLmVsZW1lbnQubmF0aXZlRWxlbWVudDtcbiAgICAgICAgZWxlbWVudC5zdHlsZS5jc3NUZXh0ID0gV1JBUF9TVFlMRTtcbiAgICAgICAgZWxlbWVudC5zZXRBdHRyaWJ1dGUoJ2RpcicsICdsdHInKTtcbiAgICAgICAgdGhpcy5leHBhbmQgPSBkaXYoV1JBUF9TVFlMRSk7XG4gICAgICAgIHRoaXMuZXhwYW5kQ2hpbGQgPSBkaXYoRVhQQU5EX0NISUxEX1NUWUxFKTtcbiAgICAgICAgdGhpcy5leHBhbmQuYXBwZW5kQ2hpbGQodGhpcy5leHBhbmRDaGlsZCk7XG4gICAgICAgIGVsZW1lbnQuYXBwZW5kQ2hpbGQodGhpcy5leHBhbmQpO1xuICAgICAgICB0aGlzLnNocmluayA9IGRpdihXUkFQX1NUWUxFKTtcbiAgICAgICAgY29uc3Qgc2hyaW5rQ2hpbGQgPSBkaXYoU0hSSU5LX0NISUxEX1NUWUxFKTtcbiAgICAgICAgdGhpcy5zaHJpbmsuYXBwZW5kQ2hpbGQoc2hyaW5rQ2hpbGQpO1xuICAgICAgICBlbGVtZW50LmFwcGVuZENoaWxkKHRoaXMuc2hyaW5rKTtcbiAgICB9XG4gICAgcmVzZXQoKSB7XG4gICAgICAgIGNvbnN0IGV4cGFuZENoaWxkID0gdGhpcy5leHBhbmRDaGlsZDtcbiAgICAgICAgZXhwYW5kQ2hpbGQuc3R5bGUud2lkdGggPSAxMDAwMDAgKyAncHgnO1xuICAgICAgICBleHBhbmRDaGlsZC5zdHlsZS5oZWlnaHQgPSAxMDAwMDAgKyAncHgnO1xuICAgICAgICBjb25zdCBleHBhbmQgPSB0aGlzLmV4cGFuZDtcbiAgICAgICAgZXhwYW5kLnNjcm9sbExlZnQgPSAxMDAwMDA7XG4gICAgICAgIGV4cGFuZC5zY3JvbGxUb3AgPSAxMDAwMDA7XG4gICAgICAgIGNvbnN0IHNocmluayA9IHRoaXMuc2hyaW5rO1xuICAgICAgICBzaHJpbmsuc2Nyb2xsTGVmdCA9IDEwMDAwMDtcbiAgICAgICAgc2hyaW5rLnNjcm9sbFRvcCA9IDEwMDAwMDtcbiAgICB9XG4gICAgc3Vic2NyaWJlKCkge1xuICAgICAgICB0aGlzLm5nWm9uZS5ydW5PdXRzaWRlQW5ndWxhcigoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLnN1YnNjcmlwdGlvbiA9IG1lcmdlKGZyb21FdmVudCh0aGlzLnNocmluaywgJ3Njcm9sbCcpLCBmcm9tRXZlbnQodGhpcy5leHBhbmQsICdzY3JvbGwnKSlcbiAgICAgICAgICAgICAgICAuc3Vic2NyaWJlKCgpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLmNoZWNrU2l6ZSgpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgIH1cbn1cblxuY29uc3QgSEFTX09CU0VSVkVSID0gdHlwZW9mIFJlc2l6ZU9ic2VydmVyICE9PSAndW5kZWZpbmVkJztcbi8qKlxuICogQGhpZGRlblxuICovXG5jbGFzcyBSZXNpemVPYnNlcnZlclNlcnZpY2UgZXh0ZW5kcyBSZXNpemVTZXJ2aWNlIHtcbiAgICBjb25zdHJ1Y3RvcihyZXNpemVCYXRjaFNlcnZpY2UsIGVsZW1lbnQsIG5nWm9uZSkge1xuICAgICAgICBzdXBlcihyZXNpemVCYXRjaFNlcnZpY2UpO1xuICAgICAgICB0aGlzLmVsZW1lbnQgPSBlbGVtZW50O1xuICAgICAgICB0aGlzLm5nWm9uZSA9IG5nWm9uZTtcbiAgICB9XG4gICAgc3RhdGljIHN1cHBvcnRlZCgpIHtcbiAgICAgICAgcmV0dXJuIEhBU19PQlNFUlZFUjtcbiAgICB9XG4gICAgZGVzdHJveSgpIHtcbiAgICAgICAgc3VwZXIuZGVzdHJveSgpO1xuICAgICAgICBpZiAodGhpcy5yZXNpemVPYnNlcnZlcikge1xuICAgICAgICAgICAgdGhpcy5yZXNpemVPYnNlcnZlci5kaXNjb25uZWN0KCk7XG4gICAgICAgICAgICB0aGlzLnJlc2l6ZU9ic2VydmVyID0gbnVsbDtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnBhcmVudEVsZW1lbnQgPSBudWxsO1xuICAgIH1cbiAgICBpbml0KCkge1xuICAgICAgICB0aGlzLnBhcmVudEVsZW1lbnQgPSB0aGlzLmVsZW1lbnQubmF0aXZlRWxlbWVudC5wYXJlbnRFbGVtZW50O1xuICAgICAgICB0aGlzLmluaXRTaXplKCk7XG4gICAgICAgIHRoaXMuc3RhdGUgPSAyIC8qIEluaXRpYWxpemVkICovO1xuICAgICAgICB0aGlzLm5nWm9uZS5ydW5PdXRzaWRlQW5ndWxhcigoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLnJlc2l6ZU9ic2VydmVyID0gbmV3IFJlc2l6ZU9ic2VydmVyKCgpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLmNoZWNrU2l6ZSgpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB0aGlzLnJlc2l6ZU9ic2VydmVyLm9ic2VydmUodGhpcy5wYXJlbnRFbGVtZW50KTtcbiAgICAgICAgfSk7XG4gICAgfVxufVxuXG4vKiB0c2xpbnQ6ZGlzYWJsZTphbGlnbiAqL1xuLyoqXG4gKiBAaGlkZGVuXG4gKi9cbmNsYXNzIFJlc2l6ZUJhdGNoU2VydmljZSB7XG4gICAgY29uc3RydWN0b3Iobmdab25lKSB7XG4gICAgICAgIHRoaXMubmdab25lID0gbmdab25lO1xuICAgICAgICB0aGlzLnNjaGVkdWxlZCA9IFtdO1xuICAgICAgICB0aGlzLnJlc29sdmVkUHJvbWlzZSA9IFByb21pc2UucmVzb2x2ZShudWxsKTtcbiAgICAgICAgdGhpcy5mbHVzaCA9IHRoaXMuZmx1c2guYmluZCh0aGlzKTtcbiAgICB9XG4gICAgc2NoZWR1bGUoaW5zdGFuY2UsIG1ldGhvZCkge1xuICAgICAgICB0aGlzLnNjaGVkdWxlZC5wdXNoKHsgaW5zdGFuY2UsIG1ldGhvZCB9KTtcbiAgICAgICAgaWYgKCF0aGlzLnN1YnNjcmlwdGlvbikge1xuICAgICAgICAgICAgdGhpcy5uZ1pvbmUucnVuT3V0c2lkZUFuZ3VsYXIoKCkgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMuc3Vic2NyaXB0aW9uID0gZnJvbSh0aGlzLnJlc29sdmVkUHJvbWlzZSlcbiAgICAgICAgICAgICAgICAgICAgLnN1YnNjcmliZSh0aGlzLmZsdXNoKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfVxuICAgIGlzU2NoZWR1bGVkKGluc3RhbmNlKSB7XG4gICAgICAgIHJldHVybiBCb29sZWFuKHRoaXMuc2NoZWR1bGVkLmZpbmQoaXRlbSA9PiBpdGVtLmluc3RhbmNlID09PSBpbnN0YW5jZSkpO1xuICAgIH1cbiAgICBjYW5jZWwoaW5zdGFuY2UpIHtcbiAgICAgICAgY29uc3Qgc2NoZWR1bGVkID0gdGhpcy5zY2hlZHVsZWQ7XG4gICAgICAgIGNvbnN0IGNvdW50ID0gc2NoZWR1bGVkLmxlbmd0aDtcbiAgICAgICAgZm9yIChsZXQgaWR4ID0gMDsgaWR4IDwgY291bnQ7IGlkeCsrKSB7XG4gICAgICAgICAgICBpZiAoc2NoZWR1bGVkW2lkeF0uaW5zdGFuY2UgPT09IGluc3RhbmNlKSB7XG4gICAgICAgICAgICAgICAgc2NoZWR1bGVkLnNwbGljZShpZHgsIDEpO1xuICAgICAgICAgICAgICAgIGlmICghc2NoZWR1bGVkLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnVuc3Vic2NyaWJlKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICBuZ09uRGVzdHJveSgpIHtcbiAgICAgICAgdGhpcy51bnN1YnNjcmliZSgpO1xuICAgIH1cbiAgICB1bnN1YnNjcmliZSgpIHtcbiAgICAgICAgaWYgKHRoaXMuc3Vic2NyaXB0aW9uKSB7XG4gICAgICAgICAgICB0aGlzLnN1YnNjcmlwdGlvbi51bnN1YnNjcmliZSgpO1xuICAgICAgICAgICAgdGhpcy5zdWJzY3JpcHRpb24gPSBudWxsO1xuICAgICAgICB9XG4gICAgfVxuICAgIGZsdXNoKCkge1xuICAgICAgICB0aGlzLnNjaGVkdWxlZC5mb3JFYWNoKGl0ZW0gPT4ge1xuICAgICAgICAgICAgaXRlbS5tZXRob2QuY2FsbChpdGVtLmluc3RhbmNlKTtcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuc2NoZWR1bGVkID0gW107XG4gICAgICAgIHRoaXMudW5zdWJzY3JpYmUoKTtcbiAgICB9XG59XG5SZXNpemVCYXRjaFNlcnZpY2UuZGVjb3JhdG9ycyA9IFtcbiAgICB7IHR5cGU6IEluamVjdGFibGUgfSxcbl07XG4vKiogQG5vY29sbGFwc2UgKi9cblJlc2l6ZUJhdGNoU2VydmljZS5jdG9yUGFyYW1ldGVycyA9ICgpID0+IFtcbiAgICB7IHR5cGU6IE5nWm9uZSB9XG5dO1xuXG4vKipcbiAqIEVtaXQgdXAgdG8gMTAgcmVzaXplIGV2ZW50cyBwZXIgc2Vjb25kIGJ5IGRlZmF1bHQuXG4gKiBDaG9zZW4gYXMgYSBjb21wcm9taXNlIGJldHdlZW4gcmVzcG9uc2l2ZW5lc3MgYW5kIHBlcmZvcm1hbmNlLlxuICovXG5jb25zdCBERUZBVUxUX1JBVEVfTElNSVQgPSAxMDtcbi8qKlxuICogUmVzaXplIFNlbnNvciBDb21wb25lbnRcbiAqXG4gKiBUcmlnZ2VycyBhIFwicmVzaXplXCIgZXZlbnQgd2hlbmV2ZXIgdGhlIHBhcmVudCBET00gZWxlbWVudCBzaXplIGNoYW5nZXMuXG4gKi9cbmNsYXNzIFJlc2l6ZVNlbnNvckNvbXBvbmVudCB7XG4gICAgY29uc3RydWN0b3IocmVzaXplQmF0Y2hTZXJ2aWNlLCBlbGVtZW50LCBuZ1pvbmUpIHtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFRoZSBtYXhpbXVtIG51bWJlciBvZiByZXNpemUgZXZlbnRzIHRvIGVtaXQgcGVyIHNlY29uZC5cbiAgICAgICAgICpcbiAgICAgICAgICogRGVmYXVsdHMgdG8gMTAuXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLnJhdGVMaW1pdCA9IERFRkFVTFRfUkFURV9MSU1JVDtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEZpcmVzIHdoZW4gdGhlIHBhcmVudCBET00gZWxlbWVudCBoYXMgYmVlbiByZXNpemVkLlxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5yZXNpemUgPSBuZXcgRXZlbnRFbWl0dGVyKCk7XG4gICAgICAgIGNvbnN0IHNlcnZpY2VUeXBlID0gUmVzaXplT2JzZXJ2ZXJTZXJ2aWNlLnN1cHBvcnRlZCgpID8gUmVzaXplT2JzZXJ2ZXJTZXJ2aWNlIDogUmVzaXplQ29tcGF0U2VydmljZTtcbiAgICAgICAgdGhpcy5yZXNpemVTZXJ2aWNlID0gbmV3IHNlcnZpY2VUeXBlKHJlc2l6ZUJhdGNoU2VydmljZSwgZWxlbWVudCwgbmdab25lKTtcbiAgICAgICAgY29uc3QgdGhyb3R0bGVUaW1lID0gMTAwMCAvICh0aGlzLnJhdGVMaW1pdCB8fCBERUZBVUxUX1JBVEVfTElNSVQpO1xuICAgICAgICB0aGlzLnN1YnNjcmlwdGlvbiA9IHRoaXMucmVzaXplU2VydmljZS5yZXNpemVcbiAgICAgICAgICAgIC5waXBlKGF1ZGl0VGltZSh0aHJvdHRsZVRpbWUpKVxuICAgICAgICAgICAgLnN1YnNjcmliZSgoKSA9PiB7XG4gICAgICAgICAgICBpZiAoIXRoaXMucmVzaXplU2VydmljZS5hY2NlcHRlZFNpemUpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnJlc2l6ZS5lbWl0KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBuZ0FmdGVyVmlld0NoZWNrZWQoKSB7XG4gICAgICAgIHRoaXMucmVzaXplU2VydmljZS5jaGVja0NoYW5nZXMoKTtcbiAgICB9XG4gICAgbmdPbkRlc3Ryb3koKSB7XG4gICAgICAgIHRoaXMuc3Vic2NyaXB0aW9uLnVuc3Vic2NyaWJlKCk7XG4gICAgICAgIHRoaXMucmVzaXplU2VydmljZS5kZXN0cm95KCk7XG4gICAgfVxuICAgIGFjY2VwdFNpemUoc2l6ZSkge1xuICAgICAgICB0aGlzLnJlc2l6ZVNlcnZpY2UuYWNjZXB0U2l6ZShzaXplKTtcbiAgICB9XG59XG5SZXNpemVTZW5zb3JDb21wb25lbnQuZGVjb3JhdG9ycyA9IFtcbiAgICB7IHR5cGU6IENvbXBvbmVudCwgYXJnczogW3tcbiAgICAgICAgICAgICAgICBzZWxlY3RvcjogJ2tlbmRvLXJlc2l6ZS1zZW5zb3InLFxuICAgICAgICAgICAgICAgIHRlbXBsYXRlOiAnJ1xuICAgICAgICAgICAgfSxdIH0sXG5dO1xuLyoqIEBub2NvbGxhcHNlICovXG5SZXNpemVTZW5zb3JDb21wb25lbnQuY3RvclBhcmFtZXRlcnMgPSAoKSA9PiBbXG4gICAgeyB0eXBlOiBSZXNpemVCYXRjaFNlcnZpY2UgfSxcbiAgICB7IHR5cGU6IEVsZW1lbnRSZWYgfSxcbiAgICB7IHR5cGU6IE5nWm9uZSB9XG5dO1xuUmVzaXplU2Vuc29yQ29tcG9uZW50LnByb3BEZWNvcmF0b3JzID0ge1xuICAgIHJhdGVMaW1pdDogW3sgdHlwZTogSW5wdXQgfV0sXG4gICAgcmVzaXplOiBbeyB0eXBlOiBPdXRwdXQgfV1cbn07XG5cbmNvbnN0IENPTVBPTkVOVF9ESVJFQ1RJVkVTID0gW1Jlc2l6ZVNlbnNvckNvbXBvbmVudF07XG4vKipcbiAqIFJlc2l6ZSBTZW5zb3IgbW9kdWxlXG4gKi9cbmNsYXNzIFJlc2l6ZVNlbnNvck1vZHVsZSB7XG59XG5SZXNpemVTZW5zb3JNb2R1bGUuZGVjb3JhdG9ycyA9IFtcbiAgICB7IHR5cGU6IE5nTW9kdWxlLCBhcmdzOiBbe1xuICAgICAgICAgICAgICAgIGRlY2xhcmF0aW9uczogW0NPTVBPTkVOVF9ESVJFQ1RJVkVTXSxcbiAgICAgICAgICAgICAgICBleHBvcnRzOiBbQ09NUE9ORU5UX0RJUkVDVElWRVNdLFxuICAgICAgICAgICAgICAgIHByb3ZpZGVyczogW1Jlc2l6ZUJhdGNoU2VydmljZV1cbiAgICAgICAgICAgIH0sXSB9LFxuXTtcblxuY2xhc3MgS2VuZG9JbnB1dCB7XG59XG5cbi8qKlxuICogRW51bSB3aXRoIGtleSBjb2Rlcy5cbiAqL1xudmFyIEtleXM7XG4oZnVuY3Rpb24gKEtleXMpIHtcbiAgICBLZXlzW0tleXNbXCJBbHRcIl0gPSAxOF0gPSBcIkFsdFwiO1xuICAgIEtleXNbS2V5c1tcIkFycm93RG93blwiXSA9IDQwXSA9IFwiQXJyb3dEb3duXCI7XG4gICAgS2V5c1tLZXlzW1wiQXJyb3dMZWZ0XCJdID0gMzddID0gXCJBcnJvd0xlZnRcIjtcbiAgICBLZXlzW0tleXNbXCJBcnJvd1JpZ2h0XCJdID0gMzldID0gXCJBcnJvd1JpZ2h0XCI7XG4gICAgS2V5c1tLZXlzW1wiQXJyb3dVcFwiXSA9IDM4XSA9IFwiQXJyb3dVcFwiO1xuICAgIEtleXNbS2V5c1tcIkJhY2tzcGFjZVwiXSA9IDhdID0gXCJCYWNrc3BhY2VcIjtcbiAgICBLZXlzW0tleXNbXCJDb250cm9sXCJdID0gMTddID0gXCJDb250cm9sXCI7XG4gICAgS2V5c1tLZXlzW1wiRGVsZXRlXCJdID0gNDZdID0gXCJEZWxldGVcIjtcbiAgICBLZXlzW0tleXNbXCJEaWdpdDBcIl0gPSA0OF0gPSBcIkRpZ2l0MFwiO1xuICAgIEtleXNbS2V5c1tcIkRpZ2l0MVwiXSA9IDQ5XSA9IFwiRGlnaXQxXCI7XG4gICAgS2V5c1tLZXlzW1wiRGlnaXQyXCJdID0gNTBdID0gXCJEaWdpdDJcIjtcbiAgICBLZXlzW0tleXNbXCJEaWdpdDNcIl0gPSA1MV0gPSBcIkRpZ2l0M1wiO1xuICAgIEtleXNbS2V5c1tcIkRpZ2l0NFwiXSA9IDUyXSA9IFwiRGlnaXQ0XCI7XG4gICAgS2V5c1tLZXlzW1wiRGlnaXQ1XCJdID0gNTNdID0gXCJEaWdpdDVcIjtcbiAgICBLZXlzW0tleXNbXCJEaWdpdDZcIl0gPSA1NF0gPSBcIkRpZ2l0NlwiO1xuICAgIEtleXNbS2V5c1tcIkRpZ2l0N1wiXSA9IDU1XSA9IFwiRGlnaXQ3XCI7XG4gICAgS2V5c1tLZXlzW1wiRGlnaXQ4XCJdID0gNTZdID0gXCJEaWdpdDhcIjtcbiAgICBLZXlzW0tleXNbXCJEaWdpdDlcIl0gPSA1N10gPSBcIkRpZ2l0OVwiO1xuICAgIEtleXNbS2V5c1tcIkVuZFwiXSA9IDM1XSA9IFwiRW5kXCI7XG4gICAgS2V5c1tLZXlzW1wiRW50ZXJcIl0gPSAxM10gPSBcIkVudGVyXCI7XG4gICAgS2V5c1tLZXlzW1wiRXNjYXBlXCJdID0gMjddID0gXCJFc2NhcGVcIjtcbiAgICBLZXlzW0tleXNbXCJGMVwiXSA9IDExMl0gPSBcIkYxXCI7XG4gICAgS2V5c1tLZXlzW1wiRjJcIl0gPSAxMTNdID0gXCJGMlwiO1xuICAgIEtleXNbS2V5c1tcIkYxMFwiXSA9IDEyMV0gPSBcIkYxMFwiO1xuICAgIEtleXNbS2V5c1tcIkhvbWVcIl0gPSAzNl0gPSBcIkhvbWVcIjtcbiAgICBLZXlzW0tleXNbXCJJbnNlcnRcIl0gPSA0NV0gPSBcIkluc2VydFwiO1xuICAgIEtleXNbS2V5c1tcIktleUFcIl0gPSA2NV0gPSBcIktleUFcIjtcbiAgICBLZXlzW0tleXNbXCJLZXlCXCJdID0gNjZdID0gXCJLZXlCXCI7XG4gICAgS2V5c1tLZXlzW1wiS2V5Q1wiXSA9IDY3XSA9IFwiS2V5Q1wiO1xuICAgIEtleXNbS2V5c1tcIktleURcIl0gPSA2OF0gPSBcIktleURcIjtcbiAgICBLZXlzW0tleXNbXCJLZXlFXCJdID0gNjldID0gXCJLZXlFXCI7XG4gICAgS2V5c1tLZXlzW1wiS2V5RlwiXSA9IDcwXSA9IFwiS2V5RlwiO1xuICAgIEtleXNbS2V5c1tcIktleUdcIl0gPSA3MV0gPSBcIktleUdcIjtcbiAgICBLZXlzW0tleXNbXCJLZXlIXCJdID0gNzJdID0gXCJLZXlIXCI7XG4gICAgS2V5c1tLZXlzW1wiS2V5SVwiXSA9IDczXSA9IFwiS2V5SVwiO1xuICAgIEtleXNbS2V5c1tcIktleUpcIl0gPSA3NF0gPSBcIktleUpcIjtcbiAgICBLZXlzW0tleXNbXCJLZXlLXCJdID0gNzVdID0gXCJLZXlLXCI7XG4gICAgS2V5c1tLZXlzW1wiS2V5TFwiXSA9IDc2XSA9IFwiS2V5TFwiO1xuICAgIEtleXNbS2V5c1tcIktleU1cIl0gPSA3N10gPSBcIktleU1cIjtcbiAgICBLZXlzW0tleXNbXCJLZXlOXCJdID0gNzhdID0gXCJLZXlOXCI7XG4gICAgS2V5c1tLZXlzW1wiS2V5T1wiXSA9IDc5XSA9IFwiS2V5T1wiO1xuICAgIEtleXNbS2V5c1tcIktleVBcIl0gPSA4MF0gPSBcIktleVBcIjtcbiAgICBLZXlzW0tleXNbXCJLZXlRXCJdID0gODFdID0gXCJLZXlRXCI7XG4gICAgS2V5c1tLZXlzW1wiS2V5UlwiXSA9IDgyXSA9IFwiS2V5UlwiO1xuICAgIEtleXNbS2V5c1tcIktleVNcIl0gPSA4M10gPSBcIktleVNcIjtcbiAgICBLZXlzW0tleXNbXCJLZXlUXCJdID0gODRdID0gXCJLZXlUXCI7XG4gICAgS2V5c1tLZXlzW1wiS2V5VVwiXSA9IDg1XSA9IFwiS2V5VVwiO1xuICAgIEtleXNbS2V5c1tcIktleVZcIl0gPSA4Nl0gPSBcIktleVZcIjtcbiAgICBLZXlzW0tleXNbXCJLZXlXXCJdID0gODddID0gXCJLZXlXXCI7XG4gICAgS2V5c1tLZXlzW1wiS2V5WFwiXSA9IDg4XSA9IFwiS2V5WFwiO1xuICAgIEtleXNbS2V5c1tcIktleVlcIl0gPSA4OV0gPSBcIktleVlcIjtcbiAgICBLZXlzW0tleXNbXCJLZXlaXCJdID0gOTBdID0gXCJLZXlaXCI7XG4gICAgS2V5c1tLZXlzW1wiTnVtcGFkRGVjaW1hbFwiXSA9IDExMF0gPSBcIk51bXBhZERlY2ltYWxcIjtcbiAgICBLZXlzW0tleXNbXCJQYWdlRG93blwiXSA9IDM0XSA9IFwiUGFnZURvd25cIjtcbiAgICBLZXlzW0tleXNbXCJQYWdlVXBcIl0gPSAzM10gPSBcIlBhZ2VVcFwiO1xuICAgIEtleXNbS2V5c1tcIlNoaWZ0XCJdID0gMTZdID0gXCJTaGlmdFwiO1xuICAgIEtleXNbS2V5c1tcIlNwYWNlXCJdID0gMzJdID0gXCJTcGFjZVwiO1xuICAgIEtleXNbS2V5c1tcIlRhYlwiXSA9IDldID0gXCJUYWJcIjtcbn0pKEtleXMgfHwgKEtleXMgPSB7fSkpO1xuXG4vKipcbiAqIEdlbmVyYXRlZCBidW5kbGUgaW5kZXguIERvIG5vdCBlZGl0LlxuICovXG5cbmV4cG9ydCB7IFJlc2l6ZVNlcnZpY2UsIERyYWdnYWJsZURpcmVjdGl2ZSwgRHJhZ2dhYmxlTW9kdWxlLCBFdmVudHNPdXRzaWRlQW5ndWxhckRpcmVjdGl2ZSwgRXZlbnRzTW9kdWxlLCBSZXNpemVTZW5zb3JDb21wb25lbnQsIFJlc2l6ZUJhdGNoU2VydmljZSwgUmVzaXplQ29tcGF0U2VydmljZSwgUmVzaXplT2JzZXJ2ZXJTZXJ2aWNlLCBSZXNpemVTZW5zb3JNb2R1bGUsIEtlbmRvSW5wdXQsIGlzRG9jdW1lbnRBdmFpbGFibGUsIGlzQ2hhbmdlZCwgYW55Q2hhbmdlZCwgaGFzT2JzZXJ2ZXJzLCBndWlkLCBLZXlzIH07XG4iXX0=

/***/ }),

/***/ "../../node_modules/@progress/kendo-angular-dropdowns/dist/fesm2015/index.js":
/*!****************************************************************************************************************!*\
  !*** /home/abdel/www/project/formly/lib/node_modules/@progress/kendo-angular-dropdowns/dist/fesm2015/index.js ***!
  \****************************************************************************************************************/
/*! exports provided: PopupComponent, AUTOCOMPLETE_VALUE_ACCESSOR, COMBOBOX_VALUE_ACCESSOR, DataService, DisabledItemsService, DROPDOWNLIST_VALUE_ACCESSOR, FilterInputDirective, FilterableDropDownComponentBase, ListItemDirective, CustomMessagesComponent, LocalizedMessagesDirective, Messages, NavigationService, SearchBarComponent, SelectionService, browser, detectDesktopBrowser, detectMobileOS, mobileOS, msPointers, pointers, touch, touchEnabled, NoDataTemplateDirective, TagTemplateDirective, TOUCH_ENABLED, isWindowAvailable, AutoCompleteComponent, ComboBoxComponent, DropDownListComponent, MultiSelectComponent, TagListComponent, ItemTemplateDirective, GroupTemplateDirective, FixedGroupTemplateDirective, CustomItemTemplateDirective, HeaderTemplateDirective, FooterTemplateDirective, ValueTemplateDirective, TemplateContextDirective, GroupTagTemplateDirective, SelectableDirective, SummaryTagDirective, FilterDirective, DropDownsModule, MultiSelectModule, SharedModule, AutoCompleteModule, ComboBoxModule, DropDownListModule, SharedDirectivesModule, ListComponent, PreventableEvent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "AUTOCOMPLETE_VALUE_ACCESSOR", function() { return AUTOCOMPLETE_VALUE_ACCESSOR; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "COMBOBOX_VALUE_ACCESSOR", function() { return COMBOBOX_VALUE_ACCESSOR; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "DataService", function() { return DataService; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "DisabledItemsService", function() { return DisabledItemsService; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "DROPDOWNLIST_VALUE_ACCESSOR", function() { return DROPDOWNLIST_VALUE_ACCESSOR; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "FilterInputDirective", function() { return FilterInputDirective; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "FilterableDropDownComponentBase", function() { return FilterableDropDownComponentBase; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ListItemDirective", function() { return ListItemDirective; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CustomMessagesComponent", function() { return CustomMessagesComponent; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "LocalizedMessagesDirective", function() { return LocalizedMessagesDirective; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Messages", function() { return Messages; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "NavigationService", function() { return NavigationService; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "SearchBarComponent", function() { return SearchBarComponent; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "SelectionService", function() { return SelectionService; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "browser", function() { return browser; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "detectDesktopBrowser", function() { return detectDesktopBrowser; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "detectMobileOS", function() { return detectMobileOS; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "mobileOS", function() { return mobileOS; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "msPointers", function() { return msPointers; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "pointers", function() { return pointers; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "touch", function() { return touch; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "touchEnabled", function() { return touchEnabled; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "NoDataTemplateDirective", function() { return NoDataTemplateDirective; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "TagTemplateDirective", function() { return TagTemplateDirective; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "TOUCH_ENABLED", function() { return TOUCH_ENABLED; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "isWindowAvailable", function() { return isWindowAvailable; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "AutoCompleteComponent", function() { return AutoCompleteComponent; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ComboBoxComponent", function() { return ComboBoxComponent; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "DropDownListComponent", function() { return DropDownListComponent; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "MultiSelectComponent", function() { return MultiSelectComponent; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "TagListComponent", function() { return TagListComponent; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ItemTemplateDirective", function() { return ItemTemplateDirective; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "GroupTemplateDirective", function() { return GroupTemplateDirective; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "FixedGroupTemplateDirective", function() { return FixedGroupTemplateDirective; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CustomItemTemplateDirective", function() { return CustomItemTemplateDirective; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "HeaderTemplateDirective", function() { return HeaderTemplateDirective; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "FooterTemplateDirective", function() { return FooterTemplateDirective; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ValueTemplateDirective", function() { return ValueTemplateDirective; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "TemplateContextDirective", function() { return TemplateContextDirective; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "GroupTagTemplateDirective", function() { return GroupTagTemplateDirective; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "SelectableDirective", function() { return SelectableDirective; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "SummaryTagDirective", function() { return SummaryTagDirective; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "FilterDirective", function() { return FilterDirective; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "DropDownsModule", function() { return DropDownsModule; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "MultiSelectModule", function() { return MultiSelectModule; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "SharedModule", function() { return SharedModule; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "AutoCompleteModule", function() { return AutoCompleteModule; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ComboBoxModule", function() { return ComboBoxModule; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "DropDownListModule", function() { return DropDownListModule; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "SharedDirectivesModule", function() { return SharedDirectivesModule; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ListComponent", function() { return ListComponent; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "PreventableEvent", function() { return PreventableEvent; });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/core */ "../../node_modules/@angular/core/__ivy_ngcc__/fesm2015/core.js");
/* harmony import */ var _progress_kendo_angular_common__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @progress/kendo-angular-common */ "../../node_modules/@progress/kendo-angular-common/dist/fesm2015/index.js");
/* harmony import */ var _angular_forms__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @angular/forms */ "../../node_modules/@angular/forms/__ivy_ngcc__/fesm2015/forms.js");
/* harmony import */ var _progress_kendo_angular_l10n__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @progress/kendo-angular-l10n */ "../../node_modules/@progress/kendo-angular-l10n/dist/fesm2015/index.js");
/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! rxjs */ "../../node_modules/rxjs/_esm2015/index.js");
/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! rxjs/operators */ "../../node_modules/rxjs/_esm2015/operators/index.js");
/* harmony import */ var _progress_kendo_angular_popup__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @progress/kendo-angular-popup */ "../../node_modules/@progress/kendo-angular-popup/dist/fesm2015/index.js");
/* harmony import */ var _angular_common__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @angular/common */ "../../node_modules/@angular/common/__ivy_ngcc__/fesm2015/common.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "PopupComponent", function() { return _progress_kendo_angular_popup__WEBPACK_IMPORTED_MODULE_6__["PopupComponent"]; });

/**-----------------------------------------------------------------------------------------
* Copyright © 2020 Progress Software Corporation. All rights reserved.
* Licensed under commercial license. See LICENSE.md in the project root for more information
*-------------------------------------------------------------------------------------------*/














const _c0 = ["input"];
const _c1 = ["content"];
const _c2 = ["list"];
function ListComponent_div_0_1_ng_template_0_Template(rf, ctx) { }
const _c3 = function (a0, a1) { return { templateRef: a0, $implicit: a1 }; };
function ListComponent_div_0_1_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](0, ListComponent_div_0_1_ng_template_0_Template, 0, 0, "ng-template", 9);
} if (rf & 2) {
    const ctx_r6 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("templateContext", _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpureFunction2"](1, _c3, ctx_r6.fixedGroupTemplate.templateRef, ctx_r6.currentGroup));
} }
function ListComponent_div_0_ng_template_2_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "strong");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
} if (rf & 2) {
    const ctx_r7 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtextInterpolate"](ctx_r7.currentGroup);
} }
const _c4 = function (a0) { return { "k-virtual-item": a0 }; };
const _c5 = function (a0, a1, a2) { return { "height.px": a0, "minHeight.px": a1, "boxSizing": a2 }; };
function ListComponent_div_0_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "div", 7);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](1, ListComponent_div_0_1_Template, 1, 4, undefined, 5);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](2, ListComponent_div_0_ng_template_2_Template, 2, 1, "ng-template", 8);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
} if (rf & 2) {
    const ctx_r0 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngClass", _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpureFunction1"](4, _c4, ctx_r0.virtual))("ngStyle", _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpureFunction3"](6, _c5, ctx_r0.virtual == null ? null : ctx_r0.virtual.itemHeight, ctx_r0.virtual == null ? null : ctx_r0.virtual.itemHeight, ctx_r0.virtual ? "border-box" : "inherit"));
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngIf", ctx_r0.fixedGroupTemplate);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngIf", !ctx_r0.fixedGroupTemplate);
} }
function ListComponent_5_ng_template_0_1_ng_template_0_Template(rf, ctx) { }
function ListComponent_5_ng_template_0_1_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](0, ListComponent_5_ng_template_0_1_ng_template_0_Template, 0, 0, "ng-template", 9);
} if (rf & 2) {
    const dataItem_r10 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"]().$implicit;
    const ctx_r12 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("templateContext", _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpureFunction2"](1, _c3, ctx_r12.template.templateRef, dataItem_r10));
} }
function ListComponent_5_ng_template_0_ng_template_2_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](0);
} if (rf & 2) {
    const dataItem_r10 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"]().$implicit;
    const ctx_r13 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtextInterpolate"](ctx_r13.getText(dataItem_r10));
} }
const _c6 = function (a0, a1) { return { "k-virtual-item": a0, "k-state-disabled": a1 }; };
function ListComponent_5_ng_template_0_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "li", 11);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](1, ListComponent_5_ng_template_0_1_Template, 1, 4, undefined, 5);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](2, ListComponent_5_ng_template_0_ng_template_2_Template, 1, 1, "ng-template", 8);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
} if (rf & 2) {
    const dataItem_r10 = ctx.$implicit;
    const itemIndex_r11 = ctx.index;
    const ctx_r9 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("height", ctx_r9.virtual == null ? null : ctx_r9.virtual.itemHeight)("index", itemIndex_r11 + ctx_r9.startFrom)("multipleSelection", ctx_r9.multipleSelection)("ngClass", _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpureFunction2"](8, _c6, ctx_r9.virtual, ctx_r9.isDisabled(itemIndex_r11)));
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵattribute"]("id", ctx_r9.optionPrefix + "-" + ctx_r9.getValue(dataItem_r10))("tabIndex", 0 - 1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngIf", ctx_r9.template);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngIf", !ctx_r9.template);
} }
function ListComponent_5_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](0, ListComponent_5_ng_template_0_Template, 3, 11, "ng-template", 10);
} if (rf & 2) {
    const ctx_r3 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngForOf", ctx_r3.data);
} }
function ListComponent_6_ng_template_0_li_0_1_ng_template_0_Template(rf, ctx) { }
function ListComponent_6_ng_template_0_li_0_1_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](0, ListComponent_6_ng_template_0_li_0_1_ng_template_0_Template, 0, 0, "ng-template", 9);
} if (rf & 2) {
    const dataItem_r18 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](2).$implicit;
    const ctx_r22 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("templateContext", _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpureFunction2"](1, _c3, ctx_r22.groupTemplate.templateRef, dataItem_r18.value));
} }
function ListComponent_6_ng_template_0_li_0_ng_template_2_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "strong");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
} if (rf & 2) {
    const dataItem_r18 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](2).$implicit;
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtextInterpolate1"](" ", dataItem_r18.value, "");
} }
function ListComponent_6_ng_template_0_li_0_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "li", 14);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](1, ListComponent_6_ng_template_0_li_0_1_Template, 1, 4, undefined, 5);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](2, ListComponent_6_ng_template_0_li_0_ng_template_2_Template, 2, 1, "ng-template", 8);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
} if (rf & 2) {
    const dataItem_r18 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"]().$implicit;
    const ctx_r20 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngClass", _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpureFunction1"](7, _c4, ctx_r20.virtual))("ngStyle", _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpureFunction3"](9, _c5, ctx_r20.virtual == null ? null : ctx_r20.virtual.itemHeight, ctx_r20.virtual == null ? null : ctx_r20.virtual.itemHeight, ctx_r20.virtual ? "border-box" : "inherit"));
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵattribute"]("group-index", dataItem_r18.index)("id", ctx_r20.optionPrefix + "-" + ctx_r20.getValue(dataItem_r18.value))("tabIndex", 0 - 1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngIf", ctx_r20.groupTemplate);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngIf", !ctx_r20.groupTemplate);
} }
function ListComponent_6_ng_template_0_li_1_1_ng_template_0_Template(rf, ctx) { }
function ListComponent_6_ng_template_0_li_1_1_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](0, ListComponent_6_ng_template_0_li_1_1_ng_template_0_Template, 0, 0, "ng-template", 9);
} if (rf & 2) {
    const dataItem_r18 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](2).$implicit;
    const ctx_r28 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("templateContext", _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpureFunction2"](1, _c3, ctx_r28.template.templateRef, dataItem_r18.value));
} }
function ListComponent_6_ng_template_0_li_1_ng_template_2_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](0);
} if (rf & 2) {
    const dataItem_r18 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](2).$implicit;
    const ctx_r29 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtextInterpolate"](ctx_r29.getText(dataItem_r18.value));
} }
function ListComponent_6_ng_template_0_li_1_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "li", 11);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](1, ListComponent_6_ng_template_0_li_1_1_Template, 1, 4, undefined, 5);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](2, ListComponent_6_ng_template_0_li_1_ng_template_2_Template, 1, 1, "ng-template", 8);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
} if (rf & 2) {
    const dataItem_r18 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"]().$implicit;
    const ctx_r21 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("height", ctx_r21.virtual == null ? null : ctx_r21.virtual.itemHeight)("index", dataItem_r18.offsetIndex)("multipleSelection", ctx_r21.multipleSelection)("ngClass", _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpureFunction2"](9, _c6, ctx_r21.virtual, ctx_r21.isDisabled(dataItem_r18.offsetIndex)));
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵattribute"]("absolute-index", dataItem_r18.index)("id", ctx_r21.optionPrefix + "-" + ctx_r21.getValue(dataItem_r18.value))("tabIndex", 0 - 1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngIf", ctx_r21.template);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngIf", !ctx_r21.template);
} }
function ListComponent_6_ng_template_0_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](0, ListComponent_6_ng_template_0_li_0_Template, 3, 13, "li", 12);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](1, ListComponent_6_ng_template_0_li_1_Template, 3, 12, "li", 13);
} if (rf & 2) {
    const dataItem_r18 = ctx.$implicit;
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngIf", dataItem_r18.header && dataItem_r18.index > 0);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngIf", !dataItem_r18.header);
} }
function ListComponent_6_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](0, ListComponent_6_ng_template_0_Template, 2, 2, "ng-template", 10);
} if (rf & 2) {
    const ctx_r4 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngForOf", ctx_r4.data);
} }
function ListComponent_div_7_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "div", 15);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](1, "div");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
} if (rf & 2) {
    const ctx_r5 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵstyleProp"]("height", ctx_r5.scrollHeight, "px");
} }
const _c7 = function (a0, a1) { return { "k-virtual-content": a0, "k-list-scroller": a1 }; };
const _c8 = function (a0) { return { "k-virtual-list": a0 }; };
const _c9 = ["container"];
const _c10 = ["popupTemplate"];
const _c11 = ["optionsList"];
var I18N_12;
if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
    /**
     * @desc The text displayed in the popup when there are no items
     * @meaning kendo.autocomplete.noDataText
     */ 
    const MSG_EXTERNAL_2690656529626907484$$DIST_FESM2015_INDEX_JS_13 = goog.getMsg("NO DATA FOUND");
    I18N_12 = MSG_EXTERNAL_2690656529626907484$$DIST_FESM2015_INDEX_JS_13;
}
else {
    I18N_12 = $localize `:kendo.autocomplete.noDataText|The text displayed in the popup when there are no items␟4e9993e088a293543eb0c2801343518c115b6f20␟2690656529626907484:NO DATA FOUND`;
}
var I18N_14;
if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
    /**
     * @desc The title of the clear button
     * @meaning kendo.autocomplete.clearTitle
     */ 
    const MSG_EXTERNAL_4821453594854847070$$DIST_FESM2015_INDEX_JS_15 = goog.getMsg("clear");
    I18N_14 = MSG_EXTERNAL_4821453594854847070$$DIST_FESM2015_INDEX_JS_15;
}
else {
    I18N_14 = $localize `:kendo.autocomplete.clearTitle|The title of the clear button␟7cf49cc2d50eebd29f8d61564512383caaaac7a6␟4821453594854847070:clear`;
}
const _c16 = ["noDataText", I18N_12, "clearTitle", I18N_14];
function AutoCompleteComponent_span_4_Template(rf, ctx) { if (rf & 1) {
    const _r8 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "span", 8);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵlistener"]("click", function AutoCompleteComponent_span_4_Template_span_click_0_listener($event) { _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵrestoreView"](_r8); const ctx_r7 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](); return ctx_r7.clearValue($event); })("mousedown", function AutoCompleteComponent_span_4_Template_span_mousedown_0_listener($event) { _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵrestoreView"](_r8); return $event.preventDefault(); });
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
} if (rf & 2) {
    const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵattribute"]("title", ctx_r1.clearTitle);
} }
function AutoCompleteComponent_span_5_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](0, "span", 9);
} }
function AutoCompleteComponent_ng_template_6_0_ng_template_0_Template(rf, ctx) { }
const _c17 = function (a0) { return { templateRef: a0 }; };
function AutoCompleteComponent_ng_template_6_0_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](0, AutoCompleteComponent_ng_template_6_0_ng_template_0_Template, 0, 0, "ng-template", 14);
} if (rf & 2) {
    const ctx_r10 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("templateContext", _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpureFunction1"](1, _c17, ctx_r10.headerTemplate.templateRef));
} }
function AutoCompleteComponent_ng_template_6_div_3_ng_template_1_Template(rf, ctx) { }
function AutoCompleteComponent_ng_template_6_div_3_ng_template_2_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "div");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
} if (rf & 2) {
    const ctx_r16 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtextInterpolate"](ctx_r16.noDataText);
} }
function AutoCompleteComponent_ng_template_6_div_3_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "div", 15);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](1, AutoCompleteComponent_ng_template_6_div_3_ng_template_1_Template, 0, 0, "ng-template", 16);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](2, AutoCompleteComponent_ng_template_6_div_3_ng_template_2_Template, 2, 1, "ng-template", 6);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
} if (rf & 2) {
    const ctx_r12 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngIf", ctx_r12.noDataTemplate)("templateContext", _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpureFunction1"](3, _c17, ctx_r12.noDataTemplate == null ? null : ctx_r12.noDataTemplate.templateRef));
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngIf", !ctx_r12.noDataTemplate);
} }
function AutoCompleteComponent_ng_template_6_4_ng_template_0_Template(rf, ctx) { }
function AutoCompleteComponent_ng_template_6_4_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](0, AutoCompleteComponent_ng_template_6_4_ng_template_0_Template, 0, 0, "ng-template", 14);
} if (rf & 2) {
    const ctx_r13 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("templateContext", _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpureFunction1"](1, _c17, ctx_r13.footerTemplate.templateRef));
} }
function AutoCompleteComponent_ng_template_6_Template(rf, ctx) { if (rf & 1) {
    const _r19 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](0, AutoCompleteComponent_ng_template_6_0_Template, 1, 3, undefined, 10);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](1, "kendo-list", 11, 12);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵlistener"]("pageChange", function AutoCompleteComponent_ng_template_6_Template_kendo_list_pageChange_1_listener($event) { _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵrestoreView"](_r19); const ctx_r18 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](); return ctx_r18.pageChange($event); });
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](3, AutoCompleteComponent_ng_template_6_div_3_Template, 3, 5, "div", 13);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](4, AutoCompleteComponent_ng_template_6_4_Template, 1, 3, undefined, 10);
} if (rf & 2) {
    const ctx_r4 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngIf", ctx_r4.headerTemplate);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("id", ctx_r4.listBoxId)("optionPrefix", ctx_r4.optionPrefix)("data", ctx_r4.data)("textField", ctx_r4.valueField)("valueField", ctx_r4.valueField)("template", ctx_r4.template)("groupTemplate", ctx_r4.groupTemplate)("fixedGroupTemplate", ctx_r4.fixedGroupTemplate)("height", ctx_r4.listHeight)("show", ctx_r4.isOpen)("virtual", ctx_r4.virtual);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngIf", ctx_r4.data.length === 0);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngIf", ctx_r4.footerTemplate);
} }
function AutoCompleteComponent_ng_template_8_Template(rf, ctx) { if (rf & 1) {
    const _r21 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "kendo-resize-sensor", 17);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵlistener"]("resize", function AutoCompleteComponent_ng_template_8_Template_kendo_resize_sensor_resize_0_listener() { _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵrestoreView"](_r21); const ctx_r20 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](); return ctx_r20.onResize(); });
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
} }
var I18N_18;
if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
    /**
     * @desc The text displayed in the popup when there are no items
     * @meaning kendo.combobox.noDataText
     */ 
    const MSG_EXTERNAL_7708502966028483300$$DIST_FESM2015_INDEX_JS_19 = goog.getMsg("NO DATA FOUND");
    I18N_18 = MSG_EXTERNAL_7708502966028483300$$DIST_FESM2015_INDEX_JS_19;
}
else {
    I18N_18 = $localize `:kendo.combobox.noDataText|The text displayed in the popup when there are no items␟2b6e00c74a6d9c98c03a6274d0224e9bd457ff89␟7708502966028483300:NO DATA FOUND`;
}
var I18N_20;
if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
    /**
     * @desc The title of the clear button
     * @meaning kendo.combobox.clearTitle
     */ 
    const MSG_EXTERNAL_2025597431468961462$$DIST_FESM2015_INDEX_JS_21 = goog.getMsg("clear");
    I18N_20 = MSG_EXTERNAL_2025597431468961462$$DIST_FESM2015_INDEX_JS_21;
}
else {
    I18N_20 = $localize `:kendo.combobox.clearTitle|The title of the clear button␟069e8fae80677e3e785861123bef446b3ff41ab4␟2025597431468961462:clear`;
}
const _c22 = ["noDataText", I18N_18, "clearTitle", I18N_20];
function ComboBoxComponent_span_6_Template(rf, ctx) { if (rf & 1) {
    const _r8 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "span", 11);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵlistener"]("click", function ComboBoxComponent_span_6_Template_span_click_0_listener($event) { _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵrestoreView"](_r8); const ctx_r7 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](); return ctx_r7.clearValue($event); })("mousedown", function ComboBoxComponent_span_6_Template_span_mousedown_0_listener($event) { _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵrestoreView"](_r8); return $event.preventDefault(); });
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
} if (rf & 2) {
    const ctx_r2 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵattribute"]("title", ctx_r2.clearTitle);
} }
function ComboBoxComponent_ng_template_9_0_ng_template_0_Template(rf, ctx) { }
function ComboBoxComponent_ng_template_9_0_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](0, ComboBoxComponent_ng_template_9_0_ng_template_0_Template, 0, 0, "ng-template", 16);
} if (rf & 2) {
    const ctx_r10 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("templateContext", _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpureFunction1"](1, _c17, ctx_r10.headerTemplate.templateRef));
} }
function ComboBoxComponent_ng_template_9_div_3_ng_template_1_Template(rf, ctx) { }
function ComboBoxComponent_ng_template_9_div_3_ng_template_2_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "div");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
} if (rf & 2) {
    const ctx_r16 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtextInterpolate"](ctx_r16.noDataText);
} }
function ComboBoxComponent_ng_template_9_div_3_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "div", 17);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](1, ComboBoxComponent_ng_template_9_div_3_ng_template_1_Template, 0, 0, "ng-template", 18);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](2, ComboBoxComponent_ng_template_9_div_3_ng_template_2_Template, 2, 1, "ng-template", 9);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
} if (rf & 2) {
    const ctx_r12 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngIf", ctx_r12.noDataTemplate)("templateContext", _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpureFunction1"](3, _c17, ctx_r12.noDataTemplate ? ctx_r12.noDataTemplate.templateRef : undefined));
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngIf", !ctx_r12.noDataTemplate);
} }
function ComboBoxComponent_ng_template_9_4_ng_template_0_Template(rf, ctx) { }
function ComboBoxComponent_ng_template_9_4_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](0, ComboBoxComponent_ng_template_9_4_ng_template_0_Template, 0, 0, "ng-template", 16);
} if (rf & 2) {
    const ctx_r13 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("templateContext", _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpureFunction1"](1, _c17, ctx_r13.footerTemplate.templateRef));
} }
function ComboBoxComponent_ng_template_9_Template(rf, ctx) { if (rf & 1) {
    const _r19 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](0, ComboBoxComponent_ng_template_9_0_Template, 1, 3, undefined, 12);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](1, "kendo-list", 13, 14);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵlistener"]("pageChange", function ComboBoxComponent_ng_template_9_Template_kendo_list_pageChange_1_listener($event) { _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵrestoreView"](_r19); const ctx_r18 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](); return ctx_r18.pageChange($event); });
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](3, ComboBoxComponent_ng_template_9_div_3_Template, 3, 5, "div", 15);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](4, ComboBoxComponent_ng_template_9_4_Template, 1, 3, undefined, 12);
} if (rf & 2) {
    const ctx_r4 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngIf", ctx_r4.headerTemplate);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("id", ctx_r4.listBoxId)("optionPrefix", ctx_r4.optionPrefix)("data", ctx_r4.data)("textField", ctx_r4.textField)("valueField", ctx_r4.valueField)("template", ctx_r4.template)("groupTemplate", ctx_r4.groupTemplate)("fixedGroupTemplate", ctx_r4.fixedGroupTemplate)("height", ctx_r4.listHeight)("show", ctx_r4.isOpen)("virtual", ctx_r4.virtual);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngIf", ctx_r4.data.length === 0);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngIf", ctx_r4.footerTemplate);
} }
function ComboBoxComponent_ng_template_11_Template(rf, ctx) { if (rf & 1) {
    const _r21 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "kendo-resize-sensor", 19);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵlistener"]("resize", function ComboBoxComponent_ng_template_11_Template_kendo_resize_sensor_resize_0_listener() { _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵrestoreView"](_r21); const ctx_r20 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](); return ctx_r20.onResize(); });
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
} }
const _c23 = function (a0, a1, a2) { return { "k-state-default": a0, "k-state-disabled": a1, "k-state-focused": a2 }; };
const _c24 = ["wrapper"];
var I18N_25;
if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
    /**
     * @desc The text displayed in the popup when there are no items
     * @meaning kendo.dropdownlist.noDataText
     */ 
    const MSG_EXTERNAL_8289552890585138350$$DIST_FESM2015_INDEX_JS_26 = goog.getMsg("NO DATA FOUND");
    I18N_25 = MSG_EXTERNAL_8289552890585138350$$DIST_FESM2015_INDEX_JS_26;
}
else {
    I18N_25 = $localize `:kendo.dropdownlist.noDataText|The text displayed in the popup when there are no items␟4fc2f70c9c8cf7b18affd6b938105996d6ac3306␟8289552890585138350:NO DATA FOUND`;
}
const _c27 = ["noDataText", I18N_25];
function DropDownListComponent_5_ng_template_0_Template(rf, ctx) { }
function DropDownListComponent_5_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](0, DropDownListComponent_5_ng_template_0_Template, 0, 0, "ng-template", 10);
} if (rf & 2) {
    const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("templateContext", _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpureFunction2"](1, _c3, ctx_r1.valueTemplate.templateRef, ctx_r1.dataItem));
} }
function DropDownListComponent_ng_template_6_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](0);
} if (rf & 2) {
    const ctx_r2 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtextInterpolate"](ctx_r2.getText());
} }
function DropDownListComponent_ng_template_9_ng_template_0_Template(rf, ctx) { if (rf & 1) {
    const _r16 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "span", 14);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵlistener"]("click", function DropDownListComponent_ng_template_9_ng_template_0_Template_span_click_0_listener($event) { _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵrestoreView"](_r16); return $event.stopImmediatePropagation(); });
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](1, "input", 15);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵlistener"]("ngModelChange", function DropDownListComponent_ng_template_9_ng_template_0_Template_input_ngModelChange_1_listener($event) { _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵrestoreView"](_r16); const ctx_r17 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](2); return ctx_r17.filterText = $event; })("keydown", function DropDownListComponent_ng_template_9_ng_template_0_Template_input_keydown_1_listener($event) { _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵrestoreView"](_r16); const ctx_r18 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](2); return ctx_r18.keydown($event); })("input", function DropDownListComponent_ng_template_9_ng_template_0_Template_input_input_1_listener($event) { _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵrestoreView"](_r16); const ctx_r19 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](2); return ctx_r19.handleFilter($event); })("focus", function DropDownListComponent_ng_template_9_ng_template_0_Template_input_focus_1_listener() { _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵrestoreView"](_r16); const ctx_r20 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](2); return ctx_r20.onFilterFocus(); })("blur", function DropDownListComponent_ng_template_9_ng_template_0_Template_input_blur_1_listener() { _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵrestoreView"](_r16); const ctx_r21 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](2); return ctx_r21.blurFilterInput(); });
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](2, "span", 16);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
} if (rf & 2) {
    const ctx_r8 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("filterInput", ctx_r8.isFocused && !ctx_r8.touchEnabled)("dir", ctx_r8.direction)("ngModel", ctx_r8.filterText);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵattribute"]("aria-owns", ctx_r8.ariaOwns)("aria-activedescendant", ctx_r8.ariaActivedescendant)("aria-label", ctx_r8.noDataLabel);
} }
const _c28 = function (a0) { return { "k-state-disabled": a0 }; };
function DropDownListComponent_ng_template_9_ng_template_1_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "div", 17);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
} if (rf & 2) {
    const ctx_r9 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngClass", _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpureFunction1"](3, _c28, ctx_r9.isDisabledDefaultItem))("index", 0 - 1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtextInterpolate1"](" ", ctx_r9.getDefaultItemText(), " ");
} }
function DropDownListComponent_ng_template_9_ng_template_2_ng_template_1_Template(rf, ctx) { }
function DropDownListComponent_ng_template_9_ng_template_2_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "div", 17);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](1, DropDownListComponent_ng_template_9_ng_template_2_ng_template_1_Template, 0, 0, "ng-template", 10);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
} if (rf & 2) {
    const ctx_r10 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngClass", _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpureFunction1"](3, _c28, ctx_r10.isDisabledDefaultItem))("index", 0 - 1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("templateContext", _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpureFunction2"](5, _c3, ctx_r10.itemTemplate.templateRef, ctx_r10.defaultItem));
} }
function DropDownListComponent_ng_template_9_3_ng_template_0_Template(rf, ctx) { }
function DropDownListComponent_ng_template_9_3_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](0, DropDownListComponent_ng_template_9_3_ng_template_0_Template, 0, 0, "ng-template", 10);
} if (rf & 2) {
    const ctx_r11 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("templateContext", _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpureFunction1"](1, _c17, ctx_r11.headerTemplate.templateRef));
} }
function DropDownListComponent_ng_template_9_div_6_ng_template_1_Template(rf, ctx) { }
function DropDownListComponent_ng_template_9_div_6_ng_template_2_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "div");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
} if (rf & 2) {
    const ctx_r25 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtextInterpolate"](ctx_r25.noDataText);
} }
function DropDownListComponent_ng_template_9_div_6_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "div", 18);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](1, DropDownListComponent_ng_template_9_div_6_ng_template_1_Template, 0, 0, "ng-template", 19);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](2, DropDownListComponent_ng_template_9_div_6_ng_template_2_Template, 2, 1, "ng-template", 5);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
} if (rf & 2) {
    const ctx_r13 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngIf", ctx_r13.noDataTemplate)("templateContext", _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpureFunction1"](3, _c17, ctx_r13.noDataTemplate ? ctx_r13.noDataTemplate.templateRef : undefined));
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngIf", !ctx_r13.noDataTemplate);
} }
function DropDownListComponent_ng_template_9_7_ng_template_0_Template(rf, ctx) { }
function DropDownListComponent_ng_template_9_7_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](0, DropDownListComponent_ng_template_9_7_ng_template_0_Template, 0, 0, "ng-template", 10);
} if (rf & 2) {
    const ctx_r14 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("templateContext", _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpureFunction1"](1, _c17, ctx_r14.footerTemplate.templateRef));
} }
function DropDownListComponent_ng_template_9_Template(rf, ctx) { if (rf & 1) {
    const _r28 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](0, DropDownListComponent_ng_template_9_ng_template_0_Template, 3, 6, "ng-template", 5);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](1, DropDownListComponent_ng_template_9_ng_template_1_Template, 2, 5, "ng-template", 5);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](2, DropDownListComponent_ng_template_9_ng_template_2_Template, 2, 8, "ng-template", 5);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](3, DropDownListComponent_ng_template_9_3_Template, 1, 3, undefined, 4);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](4, "kendo-list", 11, 12);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵlistener"]("pageChange", function DropDownListComponent_ng_template_9_Template_kendo_list_pageChange_4_listener($event) { _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵrestoreView"](_r28); const ctx_r27 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](); return ctx_r27.pageChange($event); });
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](6, DropDownListComponent_ng_template_9_div_6_Template, 3, 5, "div", 13);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](7, DropDownListComponent_ng_template_9_7_Template, 1, 3, undefined, 4);
} if (rf & 2) {
    const ctx_r4 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngIf", ctx_r4.filterable);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngIf", ctx_r4.defaultItem && !ctx_r4.itemTemplate);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngIf", ctx_r4.defaultItem && ctx_r4.itemTemplate);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngIf", ctx_r4.headerTemplate);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("id", ctx_r4.listBoxId)("optionPrefix", ctx_r4.optionPrefix)("data", ctx_r4.data)("textField", ctx_r4.textField)("valueField", ctx_r4.valueField)("template", ctx_r4.itemTemplate)("groupTemplate", ctx_r4.groupTemplate)("fixedGroupTemplate", ctx_r4.fixedGroupTemplate)("height", ctx_r4.listHeight)("show", ctx_r4.isOpen)("virtual", ctx_r4.virtual);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngIf", ctx_r4.data.length === 0);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngIf", ctx_r4.footerTemplate);
} }
function DropDownListComponent_ng_template_11_Template(rf, ctx) { if (rf & 1) {
    const _r30 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "kendo-resize-sensor", 20);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵlistener"]("resize", function DropDownListComponent_ng_template_11_Template_kendo_resize_sensor_resize_0_listener() { _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵrestoreView"](_r30); const ctx_r29 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](); return ctx_r29.onResize(); });
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
} }
const _c29 = function (a1, a2, a3) { return { "k-dropdown-wrap": true, "k-state-default": a1, "k-state-disabled": a2, "k-state-focused": a3 }; };
var I18N_30;
if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
    /**
     * @desc The text displayed in the popup when there are no items
     * @meaning kendo.multiselect.noDataText
     */ 
    const MSG_EXTERNAL_1450213984397806503$$DIST_FESM2015_INDEX_JS_31 = goog.getMsg("NO DATA FOUND");
    I18N_30 = MSG_EXTERNAL_1450213984397806503$$DIST_FESM2015_INDEX_JS_31;
}
else {
    I18N_30 = $localize `:kendo.multiselect.noDataText|The text displayed in the popup when there are no items␟3cc1323f79a5fe012960578e513f8a35b2af1e96␟1450213984397806503:NO DATA FOUND`;
}
var I18N_32;
if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
    /**
     * @desc The title of the clear button
     * @meaning kendo.combobox.clearTitle
     */ 
    const MSG_EXTERNAL_2025597431468961462$$DIST_FESM2015_INDEX_JS_33 = goog.getMsg("clear");
    I18N_32 = MSG_EXTERNAL_2025597431468961462$$DIST_FESM2015_INDEX_JS_33;
}
else {
    I18N_32 = $localize `:kendo.combobox.clearTitle|The title of the clear button␟069e8fae80677e3e785861123bef446b3ff41ab4␟2025597431468961462:clear`;
}
const _c34 = ["noDataText", I18N_30, "clearTitle", I18N_32];
function MultiSelectComponent_span_7_Template(rf, ctx) { if (rf & 1) {
    const _r9 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "span", 11);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵlistener"]("mousedown", function MultiSelectComponent_span_7_Template_span_mousedown_0_listener($event) { _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵrestoreView"](_r9); const ctx_r8 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](); return ctx_r8.clearAll($event); });
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
} if (rf & 2) {
    const ctx_r2 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵattribute"]("title", ctx_r2.clearTitle);
} }
function MultiSelectComponent_span_8_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](0, "span", 12);
} }
function MultiSelectComponent_ng_template_9_0_ng_template_0_Template(rf, ctx) { }
function MultiSelectComponent_ng_template_9_0_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](0, MultiSelectComponent_ng_template_9_0_ng_template_0_Template, 0, 0, "ng-template", 18);
} if (rf & 2) {
    const ctx_r10 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("templateContext", _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpureFunction1"](1, _c17, ctx_r10.headerTemplate.templateRef));
} }
function MultiSelectComponent_ng_template_9_div_1_2_ng_template_0_Template(rf, ctx) { }
function MultiSelectComponent_ng_template_9_div_1_2_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](0, MultiSelectComponent_ng_template_9_div_1_2_ng_template_0_Template, 0, 0, "ng-template", 18);
} if (rf & 2) {
    const ctx_r16 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("templateContext", _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpureFunction2"](1, _c3, ctx_r16.customItemTemplate.templateRef, ctx_r16.text));
} }
function MultiSelectComponent_ng_template_9_div_1_ng_template_3_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](0);
} if (rf & 2) {
    const ctx_r18 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtextInterpolate"](ctx_r18.text);
} }
function MultiSelectComponent_ng_template_9_div_1_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "div", 19);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](1, "div", 20);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](2, MultiSelectComponent_ng_template_9_div_1_2_Template, 1, 4, undefined, 21);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](3, MultiSelectComponent_ng_template_9_div_1_ng_template_3_Template, 1, 1, "ng-template", null, 22, _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplateRefExtractor"]);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](5, "span", 23);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
} if (rf & 2) {
    const _r17 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵreference"](4);
    const ctx_r11 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("multipleSelection", true)("index", 0 - 1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngIf", ctx_r11.customItemTemplate)("ngIfElse", _r17);
} }
function MultiSelectComponent_ng_template_9_div_4_ng_template_1_Template(rf, ctx) { }
function MultiSelectComponent_ng_template_9_div_4_ng_template_2_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "div");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
} if (rf & 2) {
    const ctx_r21 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtextInterpolate"](ctx_r21.noDataText);
} }
function MultiSelectComponent_ng_template_9_div_4_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "div", 24);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](1, MultiSelectComponent_ng_template_9_div_4_ng_template_1_Template, 0, 0, "ng-template", 25);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](2, MultiSelectComponent_ng_template_9_div_4_ng_template_2_Template, 2, 1, "ng-template", 9);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
} if (rf & 2) {
    const ctx_r13 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngIf", ctx_r13.noDataTemplate)("templateContext", _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpureFunction1"](3, _c17, ctx_r13.noDataTemplate ? ctx_r13.noDataTemplate.templateRef : undefined));
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngIf", !ctx_r13.noDataTemplate);
} }
function MultiSelectComponent_ng_template_9_5_ng_template_0_Template(rf, ctx) { }
function MultiSelectComponent_ng_template_9_5_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](0, MultiSelectComponent_ng_template_9_5_ng_template_0_Template, 0, 0, "ng-template", 18);
} if (rf & 2) {
    const ctx_r14 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("templateContext", _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpureFunction1"](1, _c17, ctx_r14.footerTemplate.templateRef));
} }
function MultiSelectComponent_ng_template_9_Template(rf, ctx) { if (rf & 1) {
    const _r24 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](0, MultiSelectComponent_ng_template_9_0_Template, 1, 3, undefined, 13);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](1, MultiSelectComponent_ng_template_9_div_1_Template, 6, 4, "div", 14);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](2, "kendo-list", 15, 16);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵlistener"]("pageChange", function MultiSelectComponent_ng_template_9_Template_kendo_list_pageChange_2_listener($event) { _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵrestoreView"](_r24); const ctx_r23 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](); return ctx_r23.pageChange($event); });
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](4, MultiSelectComponent_ng_template_9_div_4_Template, 3, 5, "div", 17);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](5, MultiSelectComponent_ng_template_9_5_Template, 1, 3, undefined, 13);
} if (rf & 2) {
    const ctx_r5 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngIf", ctx_r5.headerTemplate);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngIf", ctx_r5.allowCustom && ctx_r5.text);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("id", ctx_r5.listBoxId)("optionPrefix", ctx_r5.optionPrefix)("data", ctx_r5.data)("textField", ctx_r5.textField)("valueField", ctx_r5.valueField)("height", ctx_r5.listHeight)("template", ctx_r5.template)("groupTemplate", ctx_r5.groupTemplate)("fixedGroupTemplate", ctx_r5.fixedGroupTemplate)("show", ctx_r5.isOpen)("multipleSelection", true)("virtual", ctx_r5.virtual);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngIf", ctx_r5.data.length === 0);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngIf", ctx_r5.footerTemplate);
} }
function MultiSelectComponent_ng_template_11_Template(rf, ctx) { if (rf & 1) {
    const _r26 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "kendo-resize-sensor", 26);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵlistener"]("resize", function MultiSelectComponent_ng_template_11_Template_kendo_resize_sensor_resize_0_listener() { _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵrestoreView"](_r26); const ctx_r25 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](); return ctx_r25.onResize(); });
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
} }
function TagListComponent_li_1_1_ng_template_0_Template(rf, ctx) { }
function TagListComponent_li_1_1_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](0, TagListComponent_li_1_1_ng_template_0_Template, 0, 0, "ng-template");
} }
function TagListComponent_li_1_ng_template_2_1_ng_template_0_Template(rf, ctx) { }
function TagListComponent_li_1_ng_template_2_1_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](0, TagListComponent_li_1_ng_template_2_1_ng_template_0_Template, 0, 0, "ng-template", 10);
} if (rf & 2) {
    const tag_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](2).$implicit;
    const ctx_r9 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("templateContext", _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpureFunction2"](1, _c3, ctx_r9.groupTemplate.templateRef, tag_r1));
} }
function TagListComponent_li_1_ng_template_2_ng_template_2_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](0);
} if (rf & 2) {
    const tag_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](2).$implicit;
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtextInterpolate2"]("", tag_r1.length, " ", tag_r1.length === 1 ? "item" : "items", " selected");
} }
function TagListComponent_li_1_ng_template_2_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "span");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](1, TagListComponent_li_1_ng_template_2_1_Template, 1, 4, undefined, 8);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](2, TagListComponent_li_1_ng_template_2_ng_template_2_Template, 1, 2, "ng-template", 9);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
} if (rf & 2) {
    const ctx_r5 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngIf", ctx_r5.groupTemplate);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngIf", !ctx_r5.groupTemplate);
} }
function TagListComponent_li_1_ng_template_4_1_ng_template_0_Template(rf, ctx) { }
function TagListComponent_li_1_ng_template_4_1_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](0, TagListComponent_li_1_ng_template_4_1_ng_template_0_Template, 0, 0, "ng-template", 10);
} if (rf & 2) {
    const tag_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](2).$implicit;
    const ctx_r14 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("templateContext", _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpureFunction2"](1, _c3, ctx_r14.template.templateRef, tag_r1));
} }
function TagListComponent_li_1_ng_template_4_ng_template_2_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](0);
} if (rf & 2) {
    const tag_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](2).$implicit;
    const ctx_r15 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtextInterpolate"](ctx_r15.tagProp(tag_r1, ctx_r15.textField));
} }
function TagListComponent_li_1_ng_template_4_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "span");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](1, TagListComponent_li_1_ng_template_4_1_Template, 1, 4, undefined, 8);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](2, TagListComponent_li_1_ng_template_4_ng_template_2_Template, 1, 1, "ng-template", 9);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
} if (rf & 2) {
    const ctx_r7 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngIf", ctx_r7.template);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngIf", !ctx_r7.template);
} }
const _c35 = function (a0) { return { "k-state-focused": a0 }; };
function TagListComponent_li_1_Template(rf, ctx) { if (rf & 1) {
    const _r20 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "li", 2);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](1, TagListComponent_li_1_1_Template, 1, 0, undefined, 3);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](2, TagListComponent_li_1_ng_template_2_Template, 3, 2, "ng-template", null, 4, _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplateRefExtractor"]);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](4, TagListComponent_li_1_ng_template_4_Template, 3, 2, "ng-template", null, 5, _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplateRefExtractor"]);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](6, "span", 6);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](7, "span", 7);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵlistener"]("mousedown", function TagListComponent_li_1_Template_span_mousedown_7_listener($event) { _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵrestoreView"](_r20); const tag_r1 = ctx.$implicit; const ctx_r19 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](); return ctx_r19.deleteTag($event, tag_r1); });
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
} if (rf & 2) {
    const tag_r1 = ctx.$implicit;
    const i_r2 = ctx.index;
    const _r4 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵreference"](3);
    const _r6 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵreference"](5);
    const ctx_r0 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngClass", _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpureFunction1"](7, _c35, i_r2 === ctx_r0.focused));
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵattribute"]("aria-setsize", ctx_r0.tags == null ? null : ctx_r0.tags.length)("id", ctx_r0.itemId(tag_r1));
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngIf", ctx_r0.isGroupTag(tag_r1))("ngIfThen", _r4)("ngIfElse", _r6);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](5);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵattribute"]("aria-hidden", i_r2 !== ctx_r0.focused);
} }



/**
 * @hidden
 */
var Keys;
(function (Keys) {
    Keys[Keys["backspace"] = 8] = "backspace";
    Keys[Keys["tab"] = 9] = "tab";
    Keys[Keys["enter"] = 13] = "enter";
    Keys[Keys["shift"] = 16] = "shift";
    Keys[Keys["ctrl"] = 17] = "ctrl";
    Keys[Keys["alt"] = 18] = "alt";
    Keys[Keys["pause/break"] = 19] = "pause/break";
    Keys[Keys["caps lock"] = 20] = "caps lock";
    Keys[Keys["esc"] = 27] = "esc";
    Keys[Keys["space"] = 32] = "space";
    Keys[Keys["page up"] = 33] = "page up";
    Keys[Keys["page down"] = 34] = "page down";
    Keys[Keys["end"] = 35] = "end";
    Keys[Keys["home"] = 36] = "home";
    Keys[Keys["left"] = 37] = "left";
    Keys[Keys["up"] = 38] = "up";
    Keys[Keys["right"] = 39] = "right";
    Keys[Keys["down"] = 40] = "down";
    Keys[Keys["insert"] = 45] = "insert";
    Keys[Keys["delete"] = 46] = "delete";
    Keys[Keys["command"] = 91] = "command";
    Keys[Keys["left command"] = 91] = "left command";
    Keys[Keys["right command"] = 93] = "right command";
    Keys[Keys["numpad *"] = 106] = "numpad *";
    Keys[Keys["numpad +"] = 107] = "numpad +";
    Keys[Keys["numpad -"] = 109] = "numpad -";
    Keys[Keys["numpad ."] = 110] = "numpad .";
    Keys[Keys["numpad /"] = 111] = "numpad /";
    Keys[Keys["num lock"] = 144] = "num lock";
    Keys[Keys["scroll lock"] = 145] = "scroll lock";
    Keys[Keys["my computer"] = 182] = "my computer";
    Keys[Keys["my calculator"] = 183] = "my calculator";
    Keys[Keys[";"] = 186] = ";";
    Keys[Keys["="] = 187] = "=";
    Keys[Keys[","] = 188] = ",";
    Keys[Keys["-"] = 189] = "-";
    Keys[Keys["."] = 190] = ".";
    Keys[Keys["/"] = 191] = "/";
    Keys[Keys["`"] = 192] = "`";
    Keys[Keys["["] = 219] = "[";
    Keys[Keys["\\"] = 220] = "\\";
    Keys[Keys["]"] = 221] = "]";
    Keys[Keys["'"] = 222] = "'";
})(Keys || (Keys = {}));

/* tslint:disable:no-null-keyword */
/* tslint:disable:no-bitwise */
/* tslint:disable:align */
/**
 * @hidden
 */
const isPresent = (value) => value !== null && value !== undefined;
/**
 * @hidden
 */
const isNumber = (value) => !isNaN(value);
/**
 * @hidden
 */
const guid = () => {
    let id = "";
    let i;
    let random;
    for (i = 0; i < 32; i++) {
        random = Math.random() * 16 | 0;
        if (i === 8 || i === 12 || i === 16 || i === 20) {
            id += "-";
        }
        id += (i === 12 ? 4 : (i === 16 ? (random & 3 | 8) : random)).toString(16);
    }
    return id;
};
/**
 * @hidden
 */
const combineStr = (begin, end) => {
    return begin.concat(end.substr(end.toLowerCase().indexOf(begin.toLowerCase()) + begin.length));
};
/**
 * @hidden
 */
const isWindowAvailable = () => typeof window !== 'undefined';
/**
 * @hidden
 */
const isArray = (value) => Array.isArray(value);
/**
 * @hidden
 */
const isObject = (value) => isPresent(value) && typeof value === 'object';
/**
 * @hidden
 */
const isEmptyString = (value) => typeof value === 'string' && value.length === 0;
/**
 * @hidden
 */
const resolveValuesInArray = (values, data = [], valueField) => values
    .map(value => {
    return data.find(item => item[valueField] === value);
})
    .filter(value => value !== undefined);
/**
 * @hidden
 */
const validateComplexValues = (values, valueField) => isArray(values) && values.filter(item => {
    return isObject(item) && item[valueField];
});
/**
 * @hidden
 */
const resolveAllValues = (value, data, valueField) => {
    const customValues = validateComplexValues(value, valueField) || [];
    const resolvedValues = resolveValuesInArray(value, data, valueField) || [];
    return resolvedValues.concat(customValues);
};
/**
 * @hidden
 */
const isObjectArray = (values) => {
    return isArray(values) && values.every(item => isObject(item));
};
/**
 * @hidden
 */
const selectedIndices = (values, data, valueField) => {
    const extractedValues = data.map(item => {
        return isPresent(item) && isPresent(item[valueField]) ? item[valueField] : item;
    });
    return values.reduce((arr, item) => {
        const value = isPresent(item) && isPresent(item[valueField]) ? item[valueField] : item;
        const index = extractedValues.indexOf(value);
        if (index !== -1) {
            arr.push(index);
        }
        return arr;
    }, []);
};
/**
 * @hidden
 */
const getter = (dataItem, field, usePrimitive = false) => {
    if (isPresent(dataItem)) {
        if (usePrimitive) {
            return field && isPresent(dataItem[field]) ? dataItem[field] : dataItem;
        }
        else {
            return field ? dataItem[field] : dataItem;
        }
    }
};
/**
 * @hidden
 */
const sameCharsOnly = (word, character) => {
    for (let idx = 0; idx < word.length; idx++) {
        if (word.charAt(idx) !== character) {
            return false;
        }
    }
    return true;
};
/**
 * @hidden
 */
const shuffleData = (data, splitIndex, defaultItem) => {
    let result = data;
    if (defaultItem) {
        result = [defaultItem].concat(result);
    }
    return result.slice(splitIndex).concat(result.slice(0, splitIndex));
};
/**
 * @hidden
 */
const matchText = (text, word, ignoreCase) => {
    if (!isPresent(text)) {
        return false;
    }
    let temp = String(text);
    if (ignoreCase) {
        temp = temp.toLowerCase();
    }
    return temp.indexOf(word) === 0;
};
/**
 * @hidden
 *
 * Checks whether the passed object has all of the listed properties.
 */
const hasProps = (obj, props) => {
    if (!isPresent(obj)) {
        return false;
    }
    return props.every(prop => obj.hasOwnProperty(prop));
};

/* tslint:disable:member-ordering */
/**
 * @hidden
 */
class SearchBarComponent {
    constructor(localization, renderer) {
        this.localization = localization;
        this.valueChange = new _angular_core__WEBPACK_IMPORTED_MODULE_0__["EventEmitter"]();
        this.onBlur = new _angular_core__WEBPACK_IMPORTED_MODULE_0__["EventEmitter"]();
        this.onFocus = new _angular_core__WEBPACK_IMPORTED_MODULE_0__["EventEmitter"]();
        this.onClick = new _angular_core__WEBPACK_IMPORTED_MODULE_0__["EventEmitter"]();
        this.onNavigate = new _angular_core__WEBPACK_IMPORTED_MODULE_0__["EventEmitter"]();
        this.searchBarClass = true;
        this._userInput = "";
        this._previousValue = "";
        this._placeholder = "";
        this.direction = localization.rtl ? 'rtl' : 'ltr';
        this.renderer = renderer;
    }
    get userInput() {
        return this._userInput;
    }
    set userInput(userInput) {
        this._userInput = userInput || "";
    }
    get value() {
        return this.input.nativeElement.value;
    }
    set placeholder(text) {
        this._placeholder = text || '';
        this.setInputSize();
    }
    get placeholder() {
        return this._placeholder;
    }
    ngOnInit() {
        this.localizationChangeSubscription = this.localization
            .changes.subscribe(({ rtl }) => this.direction = rtl ? 'rtl' : 'ltr');
    }
    ngOnChanges(changes) {
        let previousUserInput;
        if (this.input && (changes.userInput || changes.suggestedText)) {
            if (changes.userInput && changes.userInput.previousValue) {
                if (this._previousValue === changes.userInput.previousValue) {
                    previousUserInput = this._previousValue;
                }
                else {
                    previousUserInput = changes.userInput.currentValue || "";
                }
            }
            else {
                previousUserInput = this._previousValue;
            }
            const caretIndex = this.input.nativeElement.selectionStart;
            const caretAtEnd = previousUserInput.length === caretIndex;
            this.writeInputValue(this.suggestedText ? combineStr(this.userInput, this.suggestedText) : this.userInput);
            if (this.suggestedText) {
                this.setInputSelection(this.userInput.length, this.suggestedText.length);
            }
            else if (caretAtEnd) {
                this.setInputSelection(this.userInput.length, this.userInput.length);
            }
            else {
                this.setInputSelection(caretIndex, caretIndex);
            }
            this._previousValue = this.userInput;
        }
    }
    ngOnDestroy() {
        if (this.localizationChangeSubscription) {
            this.localizationChangeSubscription.unsubscribe();
        }
    }
    writeInputValue(text) {
        if (Object(_progress_kendo_angular_common__WEBPACK_IMPORTED_MODULE_1__["isDocumentAvailable"])()) {
            this.renderer.setProperty(this.input.nativeElement, 'value', text);
        }
    }
    setInputSelection(start, end) {
        if (Object(_progress_kendo_angular_common__WEBPACK_IMPORTED_MODULE_1__["isDocumentAvailable"])() && this.input.nativeElement === document.activeElement) {
            try {
                this.input.nativeElement.setSelectionRange(start, end);
            }
            catch (e) {
                //Make sure that the element is in the DOM before you invoke its methods
            }
        }
    }
    handleInput(event) {
        const value = event.target.value;
        if (value !== this.userInput) {
            this._previousValue = value;
            this.valueChange.emit(value);
        }
    }
    handleFocus(event) {
        this.onFocus.emit(event);
    }
    handleBlur(event) {
        this.onBlur.emit(event);
    }
    handleKeydown(event) {
        const keyCode = event.keyCode;
        const keys = [Keys.up, Keys.down, Keys.left, Keys.right, Keys.enter,
            Keys.esc, Keys.delete, Keys.backspace, Keys.home, Keys.end];
        if (keys.indexOf(keyCode) > -1) {
            this.onNavigate.emit(event);
        }
    }
    focus() {
        if (Object(_progress_kendo_angular_common__WEBPACK_IMPORTED_MODULE_1__["isDocumentAvailable"])()) {
            this.input.nativeElement.focus();
        }
    }
    blur() {
        if (Object(_progress_kendo_angular_common__WEBPACK_IMPORTED_MODULE_1__["isDocumentAvailable"])()) {
            this.input.nativeElement.blur();
        }
    }
    setInputSize() {
        const lengthOf = x => x ? x.length : 0;
        const input = this.input.nativeElement;
        const placeholderLength = lengthOf(this.placeholder);
        const textLength = lengthOf(this.value);
        const size = Math.max(placeholderLength, textLength, 1);
        this.renderer.setAttribute(input, 'size', size.toString());
    }
}
SearchBarComponent.ɵfac = function SearchBarComponent_Factory(t) { return new (t || SearchBarComponent)(_angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](_progress_kendo_angular_l10n__WEBPACK_IMPORTED_MODULE_3__["LocalizationService"]), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](_angular_core__WEBPACK_IMPORTED_MODULE_0__["Renderer2"])); };
SearchBarComponent.ɵcmp = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdefineComponent"]({ type: SearchBarComponent, selectors: [["kendo-searchbar"]], viewQuery: function SearchBarComponent_Query(rf, ctx) { if (rf & 1) {
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵstaticViewQuery"](_c0, true);
    } if (rf & 2) {
        var _t;
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵqueryRefresh"](_t = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵloadQuery"]()) && (ctx.input = _t.first);
    } }, hostVars: 2, hostBindings: function SearchBarComponent_HostBindings(rf, ctx) { if (rf & 2) {
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵclassProp"]("k-searchbar", ctx.searchBarClass);
    } }, inputs: { userInput: "userInput", placeholder: "placeholder", id: "id", listId: "listId", tagListId: "tagListId", activeDescendant: "activeDescendant", noDataLabel: "noDataLabel", disabled: "disabled", readonly: "readonly", tabIndex: "tabIndex", popupOpen: "popupOpen", role: "role", suggestedText: "suggestedText" }, outputs: { valueChange: "valueChange", onBlur: "onBlur", onFocus: "onFocus", onClick: "onClick", onNavigate: "onNavigate" }, features: [_angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵNgOnChangesFeature"]], decls: 2, vars: 16, consts: [["autocomplete", "off", "aria-haspopup", "listbox", 3, "id", "disabled", "readonly", "placeholder", "input", "focus", "blur", "keydown"], ["input", ""]], template: function SearchBarComponent_Template(rf, ctx) { if (rf & 1) {
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "input", 0, 1);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵlistener"]("input", function SearchBarComponent_Template_input_input_0_listener($event) { return ctx.handleInput($event); })("focus", function SearchBarComponent_Template_input_focus_0_listener($event) { return ctx.handleFocus($event); })("blur", function SearchBarComponent_Template_input_blur_0_listener($event) { return ctx.handleBlur($event); })("keydown", function SearchBarComponent_Template_input_keydown_0_listener($event) { return ctx.handleKeydown($event); });
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    } if (rf & 2) {
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵclassMap"]("k-input");
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("id", ctx.id)("disabled", ctx.disabled)("readonly", ctx.readonly)("placeholder", ctx.placeholder);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵattribute"]("tabIndex", ctx.tabIndex)("dir", ctx.direction)("role", ctx.role)("aria-disabled", ctx.disabled)("aria-readonly", ctx.readonly)("aria-expanded", ctx.popupOpen)("aria-owns", ctx.listId)("aria-describedby", ctx.tagListId)("aria-activedescendant", ctx.activeDescendant)("aria-label", ctx.noDataLabel);
    } }, encapsulation: 2 });
/** @nocollapse */
SearchBarComponent.ctorParameters = () => [
    { type: _progress_kendo_angular_l10n__WEBPACK_IMPORTED_MODULE_3__["LocalizationService"] },
    { type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Renderer2"] }
];
SearchBarComponent.propDecorators = {
    id: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"] }],
    listId: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"] }],
    tagListId: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"] }],
    activeDescendant: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"] }],
    noDataLabel: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"] }],
    disabled: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"] }],
    readonly: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"] }],
    tabIndex: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"] }],
    popupOpen: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"] }],
    role: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"] }],
    userInput: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"] }],
    suggestedText: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"] }],
    valueChange: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Output"] }],
    onBlur: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Output"] }],
    onFocus: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Output"] }],
    onClick: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Output"] }],
    onNavigate: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Output"] }],
    input: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["ViewChild"], args: ["input", { static: true },] }],
    searchBarClass: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["HostBinding"], args: ['class.k-searchbar',] }],
    placeholder: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"] }]
};
/*@__PURE__*/ (function () { _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵsetClassMetadata"](SearchBarComponent, [{
        type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Component"],
        args: [{
                selector: 'kendo-searchbar',
                template: `
        <input #input
            autocomplete="off"
            [id]="id"
            [disabled]="disabled"
            [readonly]="readonly"
            [placeholder]="placeholder"
            [class]="'k-input'"
            (input)="handleInput($event)"
            (focus)="handleFocus($event)"
            (blur)="handleBlur($event)"
            (keydown)="handleKeydown($event)"
            [attr.tabIndex]="tabIndex"
            [attr.dir]="direction"
            [attr.role]="role"
            [attr.aria-disabled]="disabled"
            [attr.aria-readonly]="readonly"
            aria-haspopup="listbox"
            [attr.aria-expanded]="popupOpen"
            [attr.aria-owns]="listId"
            [attr.aria-describedby]="tagListId"
            [attr.aria-activedescendant]="activeDescendant"
            [attr.aria-label]="noDataLabel"
        />
   `
            }]
    }], function () { return [{ type: _progress_kendo_angular_l10n__WEBPACK_IMPORTED_MODULE_3__["LocalizationService"] }, { type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Renderer2"] }]; }, { valueChange: [{
            type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Output"]
        }], onBlur: [{
            type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Output"]
        }], onFocus: [{
            type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Output"]
        }], onClick: [{
            type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Output"]
        }], onNavigate: [{
            type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Output"]
        }], searchBarClass: [{
            type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["HostBinding"],
            args: ['class.k-searchbar']
        }], userInput: [{
            type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"]
        }], placeholder: [{
            type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"]
        }], id: [{
            type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"]
        }], listId: [{
            type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"]
        }], tagListId: [{
            type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"]
        }], activeDescendant: [{
            type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"]
        }], noDataLabel: [{
            type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"]
        }], disabled: [{
            type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"]
        }], readonly: [{
            type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"]
        }], tabIndex: [{
            type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"]
        }], popupOpen: [{
            type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"]
        }], role: [{
            type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"]
        }], suggestedText: [{
            type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"]
        }], input: [{
            type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["ViewChild"],
            args: ["input", { static: true }]
        }] }); })();

/* tslint:disable:max-line-length */
/**
 * Renders the list item content. To define the item template, nest an `<ng-template>` tag
 * with the `kendo<ComponentName>ItemTemplate` directive inside the component tag. The template context is
 * set to the current component. To get a reference to the current data item, use the `let-dataItem` directive.
 *
 * - [Using `ItemTemplate` with the AutoComplete]({% slug templates_autocomplete %}#toc-item-template)
 * - [Using `ItemTemplate` with the ComboBox]({% slug templates_combobox %}#toc-item-template)
 * - [Using `ItemTemplate` with the DropDownList]({% slug templates_ddl %}#toc-item-template)
 * - [Using `ItemTemplate` with the MultiSelect]({% slug templates_multiselect %}#toc-item-template)
 *
 * @example
 * ```ts
 * _@Component({
 * selector: 'my-app',
 * template: `
 *  <kendo-combobox [data]="listItems">
 *    <ng-template kendoComboBoxItemTemplate let-dataItem>
 *      <span>{{dataItem}} option</span>
 *    </ng-template>
 *  </kendo-combobox>
 * `
 * })
 * class AppComponent {
 *   public listItems: Array<string> = ["Item 1", "Item 2", "Item 3", "Item 4"];
 * }
 * ```
 */
class ItemTemplateDirective {
    constructor(templateRef) {
        this.templateRef = templateRef;
    }
}
ItemTemplateDirective.ɵfac = function ItemTemplateDirective_Factory(t) { return new (t || ItemTemplateDirective)(_angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](_angular_core__WEBPACK_IMPORTED_MODULE_0__["TemplateRef"])); };
ItemTemplateDirective.ɵdir = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdefineDirective"]({ type: ItemTemplateDirective, selectors: [["", "kendoDropDownListItemTemplate", ""], ["", "kendoComboBoxItemTemplate", ""], ["", "kendoAutoCompleteItemTemplate", ""], ["", "kendoMultiSelectItemTemplate", ""]] });
/** @nocollapse */
ItemTemplateDirective.ctorParameters = () => [
    { type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["TemplateRef"] }
];
/*@__PURE__*/ (function () { _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵsetClassMetadata"](ItemTemplateDirective, [{
        type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Directive"],
        args: [{
                selector: '[kendoDropDownListItemTemplate],[kendoComboBoxItemTemplate],[kendoAutoCompleteItemTemplate],[kendoMultiSelectItemTemplate]'
            }]
    }], function () { return [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["TemplateRef"] }]; }, null); })();

/* tslint:disable:max-line-length */
/**
 * Renders the header content of the list. To define the header template, nest an `<ng-template>` tag
 * with the `kendo<ComponentName>HeaderTemplate` directive inside the component tag.
 *
 * - [Using `HeaderTemplate` with the AutoComplete]({% slug templates_autocomplete %}#toc-header-template)
 * - [Using `HeaderTemplate` with the ComboBox]({% slug templates_combobox %}#toc-header-template)
 * - [Using `HeaderTemplate` with the DropDownList]({% slug templates_ddl %}#toc-header-template)
 * - [Using `HeaderTemplate` with the MultiSelect]({% slug templates_multiselect %}#toc-header-template)
 *
 * @example
 * ```ts
 * _@Component({
 * selector: 'my-app',
 * template: `
 *  <kendo-combobox [data]="listItems">
 *    <ng-template kendoComboBoxHeaderTemplate>
 *      <h4>Header template</h4>
 *    </ng-template>
 *  </kendo-combobox>
 * `
 * })
 * class AppComponent {
 *   public listItems: Array<string> = ["Item 1", "Item 2", "Item 3", "Item 4"];
 * }
 * ```
 */
class HeaderTemplateDirective {
    constructor(templateRef) {
        this.templateRef = templateRef;
    }
}
HeaderTemplateDirective.ɵfac = function HeaderTemplateDirective_Factory(t) { return new (t || HeaderTemplateDirective)(_angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](_angular_core__WEBPACK_IMPORTED_MODULE_0__["TemplateRef"])); };
HeaderTemplateDirective.ɵdir = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdefineDirective"]({ type: HeaderTemplateDirective, selectors: [["", "kendoDropDownListHeaderTemplate", ""], ["", "kendoComboBoxHeaderTemplate", ""], ["", "kendoAutoCompleteHeaderTemplate", ""], ["", "kendoMultiSelectHeaderTemplate", ""]] });
/** @nocollapse */
HeaderTemplateDirective.ctorParameters = () => [
    { type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["TemplateRef"] }
];
/*@__PURE__*/ (function () { _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵsetClassMetadata"](HeaderTemplateDirective, [{
        type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Directive"],
        args: [{
                selector: '[kendoDropDownListHeaderTemplate],[kendoComboBoxHeaderTemplate],[kendoAutoCompleteHeaderTemplate],[kendoMultiSelectHeaderTemplate]'
            }]
    }], function () { return [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["TemplateRef"] }]; }, null); })();

/* tslint:disable:max-line-length */
/**
 * Renders the footer content of the list. To define the footer template, nest an `<ng-template>` tag
 * with the `kendo<ComponentName>FooterTemplate` directive inside the component tag.
 *
 * - [Using `FooterTemplate` with the AutoComplete]({% slug templates_autocomplete %}#toc-footer-template)
 * - [Using `FooterTemplate` with the ComboBox]({% slug templates_combobox %}#toc-footer-template)
 * - [Using `FooterTemplate` with the DropDownList]({% slug templates_ddl %}#toc-footer-template)
 * - [Using `FooterTemplate` with the MultiSelect]({% slug templates_multiselect %}#toc-footer-template)
 *
 * @example
 * ```ts
 * _@Component({
 * selector: 'my-app',
 * template: `
 *  <kendo-combobox [data]="listItems">
 *    <ng-template kendoComboBoxFooterTemplate>
 *      <h4>Footer template</h4>
 *    </ng-template>
 *  </kendo-combobox>
 * `
 * })
 * class AppComponent {
 *   public listItems: Array<string> = ["Item 1", "Item 2", "Item 3", "Item 4"];
 * }
 * ```
 */
class FooterTemplateDirective {
    constructor(templateRef) {
        this.templateRef = templateRef;
    }
}
FooterTemplateDirective.ɵfac = function FooterTemplateDirective_Factory(t) { return new (t || FooterTemplateDirective)(_angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](_angular_core__WEBPACK_IMPORTED_MODULE_0__["TemplateRef"])); };
FooterTemplateDirective.ɵdir = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdefineDirective"]({ type: FooterTemplateDirective, selectors: [["", "kendoDropDownListFooterTemplate", ""], ["", "kendoComboBoxFooterTemplate", ""], ["", "kendoAutoCompleteFooterTemplate", ""], ["", "kendoMultiSelectFooterTemplate", ""]] });
/** @nocollapse */
FooterTemplateDirective.ctorParameters = () => [
    { type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["TemplateRef"] }
];
/*@__PURE__*/ (function () { _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵsetClassMetadata"](FooterTemplateDirective, [{
        type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Directive"],
        args: [{
                selector: '[kendoDropDownListFooterTemplate],[kendoComboBoxFooterTemplate],[kendoAutoCompleteFooterTemplate],[kendoMultiSelectFooterTemplate]'
            }]
    }], function () { return [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["TemplateRef"] }]; }, null); })();

/* tslint:disable:max-line-length */
/**
 * Renders the group header content. To define the group template, nest an `<ng-template>` tag
 * with the `kendo<ComponentName>GroupTemplate` directive inside the component tag. The template context is
 * set to the current component. To get a reference to the current data item, use the `let-groupName` directive.
 *
 * - [Using `GroupTemplate` with the AutoComplete]({% slug templates_autocomplete %}#toc-group-template)
 * - [Using `GroupTemplate` with the ComboBox]({% slug templates_combobox %}#toc-group-template)
 * - [Using `GroupTemplate` with the DropDownList]({% slug templates_ddl %}#toc-group-template)
 * - [Using `GroupTemplate` with the MultiSelect]({% slug templates_multiselect %}#toc-group-template)
 *
 * @example
 * ```ts
 * import { groupBy } from '@progress/kendo-data-query';
 * _@Component({
 * selector: 'my-app',
 * template: `
 *  <kendo-combobox [data]="groupedData" [textField]="'name'" [valueField]="'name'">
 *    <ng-template kendoComboBoxGroupTemplate let-groupName>
 *      <span>Food type: {{groupName}} option</span>
 *    </ng-template>
 *  </kendo-combobox>
 * `
 * })
 * class AppComponent {
 *   public data = [
 *       { name: "Pork", category: "Food", subcategory: "Meat" },
 *       { name: "Pepper", category: "Food", subcategory: "Vegetables" },
 *       { name: "Beef", category: "Food", subcategory: "Meat" }
 *   ];
 *   public groupedData = groupBy(this.data, [{field: "subcategory"}]);
 * }
 * ```
 */
class GroupTemplateDirective {
    constructor(templateRef) {
        this.templateRef = templateRef;
    }
}
GroupTemplateDirective.ɵfac = function GroupTemplateDirective_Factory(t) { return new (t || GroupTemplateDirective)(_angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](_angular_core__WEBPACK_IMPORTED_MODULE_0__["TemplateRef"])); };
GroupTemplateDirective.ɵdir = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdefineDirective"]({ type: GroupTemplateDirective, selectors: [["", "kendoDropDownListGroupTemplate", ""], ["", "kendoComboBoxGroupTemplate", ""], ["", "kendoAutoCompleteGroupTemplate", ""], ["", "kendoMultiSelectGroupTemplate", ""]] });
/** @nocollapse */
GroupTemplateDirective.ctorParameters = () => [
    { type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["TemplateRef"] }
];
/*@__PURE__*/ (function () { _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵsetClassMetadata"](GroupTemplateDirective, [{
        type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Directive"],
        args: [{
                selector: '[kendoDropDownListGroupTemplate],[kendoComboBoxGroupTemplate],[kendoAutoCompleteGroupTemplate],[kendoMultiSelectGroupTemplate]'
            }]
    }], function () { return [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["TemplateRef"] }]; }, null); })();

/* tslint:disable:max-line-length */
/**
 * Renders the fixed group header content. To define the fixed group template, nest an `<ng-template>` tag
 * with the `kendo<ComponentName>FixedGroupTemplate` directive inside the component tag. The template context is
 * set to the current component. To get a reference to the current data item, use the `let-groupName` directive.
 *
 * - [Using `FixedGroupTemplate` with the AutoComplete]({% slug templates_autocomplete %}#toc-fixed-group-template)
 * - [Using `FixedGroupTemplate` with the ComboBox]({% slug templates_combobox %}#toc-fixed-group-template)
 * - [Using `FixedGroupTemplate` with the DropDownList]({% slug templates_ddl %}#toc-fixed-group-template)
 * - [Using `FixedGroupTemplate` with the MultiSelect]({% slug templates_multiselect %}#toc-fixed-group-template)
 *
 * @example
 * ```ts
 * import { groupBy } from '@progress/kendo-data-query';
 * _@Component({
 * selector: 'my-app',
 * template: `
 *  <kendo-combobox [data]="groupedData" [textField]="'name'" [valueField]="'name'">
 *    <ng-template kendoComboBoxFixedGroupTemplate let-groupName>
 *      <span>Food type: {{groupName}} option</span>
 *    </ng-template>
 *  </kendo-combobox>
 * `
 * })
 * class AppComponent {
 *   public data = [
 *       { name: "Pork", category: "Food", subcategory: "Meat" },
 *       { name: "Pepper", category: "Food", subcategory: "Vegetables" },
 *       { name: "Beef", category: "Food", subcategory: "Meat" }
 *   ];
 *   public groupedData = groupBy(this.data, [{field: "subcategory"}]);
 * }
 * ```
 */
class FixedGroupTemplateDirective {
    constructor(templateRef) {
        this.templateRef = templateRef;
    }
}
FixedGroupTemplateDirective.ɵfac = function FixedGroupTemplateDirective_Factory(t) { return new (t || FixedGroupTemplateDirective)(_angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](_angular_core__WEBPACK_IMPORTED_MODULE_0__["TemplateRef"])); };
FixedGroupTemplateDirective.ɵdir = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdefineDirective"]({ type: FixedGroupTemplateDirective, selectors: [["", "kendoDropDownListFixedGroupTemplate", ""], ["", "kendoComboBoxFixedGroupTemplate", ""], ["", "kendoAutoCompleteFixedGroupTemplate", ""], ["", "kendoMultiSelectFixedGroupTemplate", ""]] });
/** @nocollapse */
FixedGroupTemplateDirective.ctorParameters = () => [
    { type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["TemplateRef"] }
];
/*@__PURE__*/ (function () { _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵsetClassMetadata"](FixedGroupTemplateDirective, [{
        type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Directive"],
        args: [{
                selector: '[kendoDropDownListFixedGroupTemplate],[kendoComboBoxFixedGroupTemplate],[kendoAutoCompleteFixedGroupTemplate],[kendoMultiSelectFixedGroupTemplate]'
            }]
    }], function () { return [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["TemplateRef"] }]; }, null); })();

/**
 * @hidden
 */
class SelectionService {
    constructor() {
        this.onSelect = new _angular_core__WEBPACK_IMPORTED_MODULE_0__["EventEmitter"]();
        this.onChange = new _angular_core__WEBPACK_IMPORTED_MODULE_0__["EventEmitter"]();
        this.onFocus = new _angular_core__WEBPACK_IMPORTED_MODULE_0__["EventEmitter"]();
        this.total = 0;
        this.selectedIndices = [];
    }
    getTotal() {
        return this.total;
    }
    isSelected(index) {
        return isPresent(this.selectedIndices.find(current => current === index));
    }
    isFocused(index) {
        return index === this.focused;
    }
    focus(index) {
        if (this.isFocused(index)) {
            return;
        }
        this.focused = index;
        this.onFocus.emit(index);
    }
    select(index) {
        if (this.isSelected(index)) {
            return;
        }
        this.selectedIndices = [index];
        this.focused = index;
        this.onSelect.emit({
            indices: [index],
            newSelection: isPresent(index)
        });
    }
    add(index) {
        if (this.isSelected(index)) {
            return;
        }
        this.selectedIndices.push(index);
        this.focused = index;
        this.onChange.emit({
            added: index,
            indices: this.selectedIndices.slice()
        });
    }
    unselect(index) {
        if (!this.isSelected(index)) {
            return;
        }
        const position = this.selectedIndices.indexOf(index);
        this.selectedIndices.splice(position, 1);
        this.focused = index;
        this.onChange.emit({
            indices: this.selectedIndices.slice(),
            removed: index
        });
    }
    change(index) {
        const newSelection = isPresent(index) && !this.isSelected(index);
        this.selectedIndices = [index];
        this.focused = index;
        this.onChange.emit({
            indices: [index],
            newSelection: newSelection
        });
    }
    resetSelection(index) {
        this.selectedIndices = index instanceof Array ? index : [index];
        this.focused = this.selectedIndices[this.selectedIndices.length - 1];
    }
    get selected() {
        return this.selectedIndices.slice();
    }
    get focused() {
        return this.focusedIndex;
    }
    set focused(index) {
        if (this.focusedIndex !== index) {
            this.focusedIndex = index;
            this.onFocus.emit(index);
        }
    }
}
SelectionService.ɵfac = function SelectionService_Factory(t) { return new (t || SelectionService)(); };
SelectionService.ɵprov = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdefineInjectable"]({ token: SelectionService, factory: SelectionService.ɵfac });
/*@__PURE__*/ (function () { _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵsetClassMetadata"](SelectionService, [{
        type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Injectable"]
    }], function () { return []; }, null); })();

/**
 * @hidden
 */
var NavigationAction;
(function (NavigationAction) {
    NavigationAction[NavigationAction["Undefined"] = 0] = "Undefined";
    NavigationAction[NavigationAction["Open"] = 1] = "Open";
    NavigationAction[NavigationAction["Close"] = 2] = "Close";
    NavigationAction[NavigationAction["Enter"] = 3] = "Enter";
    NavigationAction[NavigationAction["Tab"] = 4] = "Tab";
    NavigationAction[NavigationAction["Esc"] = 5] = "Esc";
    NavigationAction[NavigationAction["Delete"] = 6] = "Delete";
    NavigationAction[NavigationAction["Backspace"] = 7] = "Backspace";
    NavigationAction[NavigationAction["Home"] = 8] = "Home";
    NavigationAction[NavigationAction["End"] = 9] = "End";
    NavigationAction[NavigationAction["Up"] = 10] = "Up";
    NavigationAction[NavigationAction["Down"] = 11] = "Down";
    NavigationAction[NavigationAction["Left"] = 12] = "Left";
    NavigationAction[NavigationAction["Right"] = 13] = "Right";
})(NavigationAction || (NavigationAction = {}));

/**
 * @hidden
 */
class DataService {
    constructor() {
        this.grouped = false;
        this.groupIndices = [];
    }
    set data(data) {
        this._data = data;
        this.grouped = this.isGrouped(data);
        if (this.grouped) {
            this.groupIndices = this.getGroupIndices(data);
            this._flatData = this.flatten(data);
        }
    }
    get data() {
        if (this.grouped) {
            return this._flatData;
        }
        return this._data;
    }
    /**
     * @hidden
     * Used to get the actual items count, i.e. excluding the header items in case of grouping.
     */
    get itemsCount() {
        if (!isPresent(this.data) || this.data.length === 0) {
            return 0;
        }
        const items = this.grouped ? this._flatData.filter(item => !item.header) : this.data;
        return items.length;
    }
    /**
     * @hidden
     * Used to determine if the component received grouped data.
     */
    isGrouped(data) {
        // GroupResult { aggregates: AggregateResult, field: string, items: object[], value: any }
        // https://www.telerik.com/kendo-angular-ui/components/dataquery/api/GroupResult/
        return (isPresent(data) && data.length !== 0) && isPresent(data[0]) && hasProps(data[0], ['aggregates', 'field', 'items', 'value']);
    }
    /**
     * @hidden
     * Used to calculate the last item index of each group.
     */
    getGroupIndices(data) {
        let groupIndices = [];
        for (let i = 0; i <= data.length - 1; i++) {
            groupIndices[i] = (groupIndices[i - 1] || 0) + data[i].items.length;
        }
        return groupIndices;
    }
    /**
     * @hidden
     * Used to get a flat array containing all items matching certain criteria.
     */
    filter(predicate) {
        let result = [];
        if (this.isGrouped(this.data)) {
            for (let i = 0; i <= this.groupIndices.length - 1; i++) {
                const matches = this.data[i].items.filter(predicate);
                if (matches) {
                    result = result.concat(matches);
                }
            }
        }
        else {
            result = this.data.filter(predicate);
        }
        return result;
    }
    /**
     * @hidden
     * Used to get the index of a given data item.
     */
    indexOf(item, startFrom = 0) {
        let predicate = (element) => {
            return element === item;
        };
        if (this.grouped) {
            predicate = (element) => {
                return element.value === item;
            };
        }
        return this.findIndex(predicate, startFrom);
    }
    /**
     * @hidden
     * Used to get the index of a data item based on an expression.
     */
    findIndex(predicate, startFrom = 0) {
        let index = -1;
        if (this.grouped) {
            const data = this._flatData.filter(item => !item.header && item.offsetIndex >= startFrom);
            index = data.findIndex(predicate);
            index = data[index] ? data[index].offsetIndex : -1;
        }
        else {
            const data = this.data.slice(startFrom);
            const itemIndex = data.findIndex(predicate);
            index = itemIndex !== -1 ? itemIndex + startFrom : -1;
        }
        return index;
    }
    /**
     * @hidden
     * Used to get the closest group header prior to an item index.
     */
    closestGroup(index) {
        for (let i = index; i >= 0; i--) {
            if (this._flatData[i].header) {
                return this._flatData[i];
            }
        }
    }
    /**
     * @hidden
     * Used to get the first item matching the criteria.
     */
    find(predicate) {
        const index = this.findIndex(predicate);
        return this.itemAt(index);
    }
    /**
     * @hidden
     * Used to get the true index in a flattened data array.
     */
    flatIndex(index) {
        if (this.itemsCount === 0) {
            return -1;
        }
        if (this.grouped) {
            const match = this._flatData.find((item) => !item.header && item.offsetIndex === index);
            if (match) {
                return match.index;
            }
        }
        else {
            return index;
        }
        return -1;
    }
    /**
     * @hidden
     * Used to get the item at the provided index.
     */
    itemAt(index) {
        let dataItem;
        if (this.itemsCount === 0) {
            return dataItem;
        }
        if (this.grouped) {
            const match = this._flatData.find((item) => !item.header && item.offsetIndex === index);
            if (match) {
                dataItem = match.value;
            }
        }
        else {
            dataItem = this.data[index];
        }
        return dataItem;
    }
    /**
     * @hidden
     * Used to get the group at the provided index.
     */
    groupAt(index) {
        if (this.itemsCount === 0 || !this.isGrouped) {
            return;
        }
        return this._flatData.find((item) => item.header && item.index === index);
    }
    /**
     * @hidden
     * Used to get the field by which the data is grouped.
     */
    groupField() {
        if (this.itemsCount === 0 || !this.isGrouped) {
            return;
        }
        return this._data[0].field;
    }
    /**
     * @hidden
     * Used to get the group to which a dataItem belongs.
     */
    itemGroup(item) {
        if (!item || this.itemsCount === 0 || !this.isGrouped) {
            return;
        }
        const fieldName = this.groupField();
        if (fieldName) {
            return item[fieldName];
        }
    }
    flatten(data, group = undefined, offset = 0, groupIndex = 0) {
        let flat = [];
        if (isPresent(group)) {
            flat.push({
                header: true,
                index: groupIndex + offset,
                offsetIndex: groupIndex,
                value: group
            });
        }
        for (let i = 0; i < data.length; i++) {
            let result = [];
            if (data[i].items) {
                result = this.flatten(data[i].items, data[i].value, offset, i);
                offset = offset + data[i].items.length;
            }
            else {
                result.push({
                    header: false,
                    index: groupIndex + offset + i + 1,
                    offsetIndex: offset + i,
                    value: data[i]
                });
            }
            flat = flat.concat(result);
        }
        return flat;
    }
}
DataService.ɵfac = function DataService_Factory(t) { return new (t || DataService)(); };
DataService.ɵprov = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdefineInjectable"]({ token: DataService, factory: DataService.ɵfac });
/*@__PURE__*/ (function () { _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵsetClassMetadata"](DataService, [{
        type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Injectable"]
    }], function () { return []; }, null); })();

/**
 * @hidden
 */
class DisabledItemsService {
    constructor(dataService) {
        this.dataService = dataService;
        this.itemDisabled = null;
    }
    isIndexDisabled(index) {
        if (this.itemDisabled) {
            const item = this.dataService.itemAt(index);
            if (isPresent(item)) {
                return this.itemDisabled({ dataItem: item, index });
            }
            else if (isPresent(this.defaultItem)) {
                return this.itemDisabled({ dataItem: this.defaultItem, index: -1 });
            }
        }
    }
    isItemDisabled(item) {
        if (this.itemDisabled) {
            const index = this.dataService.indexOf(item);
            if (index !== -1) {
                return this.itemDisabled({ dataItem: item, index });
            }
            else if (isPresent(this.defaultItem)) {
                return this.itemDisabled({ dataItem: this.defaultItem, index: -1 });
            }
        }
    }
}
DisabledItemsService.ɵfac = function DisabledItemsService_Factory(t) { return new (t || DisabledItemsService)(_angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵinject"](DataService)); };
DisabledItemsService.ɵprov = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdefineInjectable"]({ token: DisabledItemsService, factory: DisabledItemsService.ɵfac });
/** @nocollapse */
DisabledItemsService.ctorParameters = () => [
    { type: DataService }
];
/*@__PURE__*/ (function () { _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵsetClassMetadata"](DisabledItemsService, [{
        type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Injectable"]
    }], function () { return [{ type: DataService }]; }, null); })();

const MIN_INDEX = 0;
/**
 * @hidden
 */
class NavigationEvent {
    /**
     * The index of the item to which the user navigated.
     */
    constructor(index, originalEvent) {
        this.index = index;
        this.originalEvent = originalEvent;
    }
}
/**
 * @hidden
 */
class NavigationService {
    constructor(disabledItemsService, selectionService) {
        this.disabledItemsService = disabledItemsService;
        this.selectionService = selectionService;
        this.open = new _angular_core__WEBPACK_IMPORTED_MODULE_0__["EventEmitter"]();
        this.close = new _angular_core__WEBPACK_IMPORTED_MODULE_0__["EventEmitter"]();
        this.enter = new _angular_core__WEBPACK_IMPORTED_MODULE_0__["EventEmitter"]();
        this.tab = new _angular_core__WEBPACK_IMPORTED_MODULE_0__["EventEmitter"]();
        this.esc = new _angular_core__WEBPACK_IMPORTED_MODULE_0__["EventEmitter"]();
        this.up = new _angular_core__WEBPACK_IMPORTED_MODULE_0__["EventEmitter"]();
        this.right = new _angular_core__WEBPACK_IMPORTED_MODULE_0__["EventEmitter"]();
        this.down = new _angular_core__WEBPACK_IMPORTED_MODULE_0__["EventEmitter"]();
        this.left = new _angular_core__WEBPACK_IMPORTED_MODULE_0__["EventEmitter"]();
        this.delete = new _angular_core__WEBPACK_IMPORTED_MODULE_0__["EventEmitter"]();
        this.backspace = new _angular_core__WEBPACK_IMPORTED_MODULE_0__["EventEmitter"]();
        this.home = new _angular_core__WEBPACK_IMPORTED_MODULE_0__["EventEmitter"]();
        this.end = new _angular_core__WEBPACK_IMPORTED_MODULE_0__["EventEmitter"]();
    }
    process(args) {
        const keyCode = args.originalEvent.keyCode;
        const altKey = args.originalEvent.altKey;
        let index;
        let action = NavigationAction.Undefined;
        if (altKey && keyCode === Keys.down) {
            action = NavigationAction.Open;
        }
        else if (altKey && keyCode === Keys.up) {
            action = NavigationAction.Close;
        }
        else if (keyCode === Keys.enter) {
            action = NavigationAction.Enter;
        }
        else if (keyCode === Keys.esc) {
            action = NavigationAction.Esc;
        }
        else if (keyCode === Keys.tab) {
            action = NavigationAction.Tab;
        }
        else if (keyCode === Keys.up) {
            index = this.next({ current: args.current, start: args.min, end: args.max, step: -1 });
            action = NavigationAction.Up;
        }
        else if (keyCode === Keys.left) {
            index = this.next({ current: args.current, start: args.min, end: args.max, step: -1 });
            action = NavigationAction.Left;
        }
        else if (keyCode === Keys.down) {
            index = this.next({ current: args.current, start: args.min, end: args.max, step: 1 });
            action = NavigationAction.Down;
        }
        else if (keyCode === Keys.right) {
            index = this.next({ current: args.current, start: args.min, end: args.max, step: 1 });
            action = NavigationAction.Right;
        }
        else if (keyCode === Keys.home) {
            index = this.isDisabled(MIN_INDEX) ? args.current : MIN_INDEX;
            action = NavigationAction.Home;
        }
        else if (keyCode === Keys.end) {
            index = this.isDisabled(args.max) ? args.current : args.max;
            action = NavigationAction.End;
        }
        else if (keyCode === Keys.delete) {
            action = NavigationAction.Delete;
        }
        else if (keyCode === Keys.backspace) {
            action = NavigationAction.Backspace;
        }
        const eventData = new NavigationEvent(index, args.originalEvent);
        if (action !== NavigationAction.Undefined) {
            this[NavigationAction[action].toLowerCase()].emit(eventData);
        }
        return action;
    }
    next(args) {
        const { current, start, end, step } = args;
        const nextIndex = !isPresent(current) ? start : this.clampIndex(current + step, start, end);
        const firstFocusableIndex = this.firstFocusableIndex(nextIndex, start, end, step);
        if (isPresent(firstFocusableIndex)) {
            return firstFocusableIndex;
        }
        if (this.selectionService.isSelected(current) && current >= start) {
            return current;
        }
        const inversedStep = -1 * step;
        return this.firstFocusableIndex(nextIndex, start, end, inversedStep);
    }
    clampIndex(index, min, max) {
        if (!isPresent(index) || index < min) {
            return min;
        }
        if (index > max) {
            return max;
        }
        return index;
    }
    firstFocusableIndex(startIndex, min, max, step) {
        while (min <= startIndex && startIndex <= max) {
            if (!this.isDisabled(startIndex)) {
                return startIndex;
            }
            startIndex += step;
        }
        return undefined;
    }
    isDisabled(index) {
        if (this.disabledItemsService) {
            return this.disabledItemsService.isIndexDisabled(index);
        }
    }
}
NavigationService.ɵfac = function NavigationService_Factory(t) { return new (t || NavigationService)(_angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵinject"](DisabledItemsService), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵinject"](SelectionService)); };
NavigationService.ɵprov = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdefineInjectable"]({ token: NavigationService, factory: NavigationService.ɵfac });
/** @nocollapse */
NavigationService.ctorParameters = () => [
    { type: DisabledItemsService },
    { type: SelectionService }
];
/*@__PURE__*/ (function () { _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵsetClassMetadata"](NavigationService, [{
        type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Injectable"]
    }], function () { return [{ type: DisabledItemsService }, { type: SelectionService }]; }, null); })();

/* tslint:disable:max-line-length */
/**
 * Renders content when no data is available. To define the no-data template, nest a `<ng-template>` tag
 * with the `kendo<ComponentName>NoDataTemplate` directive inside the component tag.
 *
 * - [Using `NoDataTemplate` with the AutoComplete]({% slug templates_autocomplete %}#toc-no-data-template)
 * - [Using `NoDataTemplate` with the ComboBox]({% slug templates_combobox %}#toc-no-data-template)
 * - [Using `NoDataTemplate` with the DropDownList]({% slug templates_ddl %}#toc-no-data-template)
 * - [Using `NoDataTemplate` with the MultiSelect]({% slug templates_multiselect %}#toc-no-data-template)
 *
 * @example
 * ```ts
 * _@Component({
 * selector: 'my-app',
 * template: `
 *  <kendo-combobox [data]="listItems">
 *    <ng-template kendoComboBoxNoDataTemplate>
 *      <h4>No data!</h4>
 *    </ng-template>
 *  </kendo-combobox>
 * `
 * })
 * class AppComponent {
 *   public listItems: Array<string> = [];
 * }
 * ```
 */
class NoDataTemplateDirective {
    constructor(templateRef) {
        this.templateRef = templateRef;
    }
}
NoDataTemplateDirective.ɵfac = function NoDataTemplateDirective_Factory(t) { return new (t || NoDataTemplateDirective)(_angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](_angular_core__WEBPACK_IMPORTED_MODULE_0__["TemplateRef"])); };
NoDataTemplateDirective.ɵdir = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdefineDirective"]({ type: NoDataTemplateDirective, selectors: [["", "kendoDropDownListNoDataTemplate", ""], ["", "kendoComboBoxNoDataTemplate", ""], ["", "kendoAutoCompleteNoDataTemplate", ""], ["", "kendoMultiSelectNoDataTemplate", ""]] });
/** @nocollapse */
NoDataTemplateDirective.ctorParameters = () => [
    { type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["TemplateRef"] }
];
/*@__PURE__*/ (function () { _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵsetClassMetadata"](NoDataTemplateDirective, [{
        type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Directive"],
        args: [{
                selector: '[kendoDropDownListNoDataTemplate],[kendoComboBoxNoDataTemplate],[kendoAutoCompleteNoDataTemplate],[kendoMultiSelectNoDataTemplate]'
            }]
    }], function () { return [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["TemplateRef"] }]; }, null); })();

/**
 * @hidden
 */
class PreventableEvent {
    constructor() {
        this.prevented = false;
    }
    /**
     * Prevents the default action for a specified event.
     * In this way, the source component suppresses the built-in behavior that follows the event.
     */
    preventDefault() {
        this.prevented = true;
    }
    /**
     * If the event is prevented by any of its subscribers, returns `true`.
     *
     * @returns `true` if the default action was prevented. Otherwise, returns `false`.
     */
    isDefaultPrevented() {
        return this.prevented;
    }
}

/**
 * Defines the mandatory properties of the `kendoDropDownFilter` directive
 * so that `kendoDropDownFilter` can be used with any of the DropDowns components
 * which implement the `FilterableDropDownComponentBase` class.
 *
 * @hidden
 */
class FilterableDropDownComponentBase {
}

/**
 * @hidden
 */
class ListItemDirective {
    constructor(element) {
        this.element = element;
    }
}
ListItemDirective.ɵfac = function ListItemDirective_Factory(t) { return new (t || ListItemDirective)(_angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](_angular_core__WEBPACK_IMPORTED_MODULE_0__["ElementRef"])); };
ListItemDirective.ɵdir = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdefineDirective"]({ type: ListItemDirective, selectors: [["li", "role", "option"], ["li", "role", "group"]] });
/** @nocollapse */
ListItemDirective.ctorParameters = () => [
    { type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["ElementRef"] }
];
/*@__PURE__*/ (function () { _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵsetClassMetadata"](ListItemDirective, [{
        type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Directive"],
        args: [{
                selector: '"li[role=option], li[role=group]"' // tslint:disable-line
            }]
    }], function () { return [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["ElementRef"] }]; }, null); })();

/**
 * @hidden
 */
class ListComponent {
    /* tslint:disable:member-ordering */
    constructor(dataService, wrapper, selectionService, disabledItemsService, cdr, zone, renderer) {
        this.dataService = dataService;
        this.wrapper = wrapper;
        this.selectionService = selectionService;
        this.disabledItemsService = disabledItemsService;
        this.cdr = cdr;
        this.zone = zone;
        this.renderer = renderer;
        this.selected = [];
        this.focused = -1;
        this.show = true;
        this.multipleSelection = false;
        this.onClick = new _angular_core__WEBPACK_IMPORTED_MODULE_0__["EventEmitter"]();
        this.pageChange = new _angular_core__WEBPACK_IMPORTED_MODULE_0__["EventEmitter"]();
        this.startFrom = 0;
        this.lastLoaded = 0;
        this.lastScrollTop = 0;
        this.scrollToFocused = false;
        this.selectSubscription = Object(rxjs__WEBPACK_IMPORTED_MODULE_4__["merge"])(this.selectionService.onSelect.pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_5__["map"])((args) => args.indices[0])), this.selectionService.onFocus).subscribe(this.scrollToItem.bind(this));
    }
    set data(data) {
        this._data = data[0] && data[0].header ? data.slice(0) : data;
    }
    get data() {
        return this._data;
    }
    set items(items) {
        this._items = items;
    }
    get items() {
        return this._items;
    }
    get pageSize() {
        if (this.virtual.pageSize) {
            return this.virtual.pageSize;
        }
        let size = Math.round(this.height / this.virtual.itemHeight);
        return size;
    }
    get scrollHeight() {
        return (this.dataService.grouped ? this.virtual.total - 1 : this.virtual.total) * this.virtual.itemHeight;
    }
    ngOnChanges(changes) {
        if (Object(_progress_kendo_angular_common__WEBPACK_IMPORTED_MODULE_1__["isChanged"])('data', changes, false)) {
            if (this.lastLoaded <= 0) {
                this.lastLoaded = this.data.length - 1;
                this.scrollToFocused = !changes.data.isFirstChange();
            }
        }
    }
    ngAfterViewInit() {
        this.zone.runOutsideAngular(() => {
            this.scrollSubscription = Object(rxjs__WEBPACK_IMPORTED_MODULE_4__["fromEvent"])(this.content.nativeElement, "scroll").pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_5__["auditTime"])(100), Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_5__["tap"])(this.prefetchData.bind(this)), Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_5__["tap"])(this.findCurrentGroup.bind(this))).subscribe(() => {
                this.lastScrollTop = this.content.nativeElement.scrollTop;
            });
        });
    }
    ngAfterViewChecked() {
        if (this.virtual) {
            this.positionItems();
        }
        if (this.items && this.scrollToFocused) {
            this.scrollToFocused = false;
            const scrollTarget = this.items.length && this.selectionService.focused === -1 ? 0 : this.selectionService.focused;
            this.scrollToItem(scrollTarget);
        }
        if (this.dataService.grouped) {
            this.findCurrentGroup();
        }
    }
    ngOnDestroy() {
        this.selectSubscription.unsubscribe();
        if (this.scrollSubscription) {
            this.scrollSubscription.unsubscribe();
        }
    }
    firstVisibleItem() {
        const content = this.content.nativeElement;
        const contentParent = content.offsetParent;
        const offsetY = (contentParent ? contentParent.offsetTop : 0) + content.offsetTop + 1;
        const offsetX = (contentParent ? contentParent.offsetLeft : 0) + content.offsetLeft + 1;
        const item = document.elementFromPoint(offsetX, offsetY);
        return item;
    }
    findCurrentGroup() {
        if (!this.dataService.grouped) {
            this.currentGroup = undefined;
            return;
        }
        const item = this.firstVisibleItem();
        if (item) {
            let index;
            if (item.getAttribute("role") === "group") {
                index = parseInt(item.getAttribute("group-index"), 10);
                this.currentGroup = this.dataService.groupAt(index).value;
            }
            else {
                index = parseInt(item.getAttribute("index"), 10);
                this.currentGroup = this.dataService.itemGroup(this.dataService.itemAt(index));
            }
        }
        else {
            this.currentGroup = undefined;
        }
        this.cdr.detectChanges();
    }
    prefetchData() {
        if (!this.virtual) {
            return;
        }
        const visibleItems = Math.trunc(this.content.nativeElement.clientHeight / this.virtual.itemHeight);
        const offsetY = this.content.nativeElement.scrollTop;
        const start = Math.trunc(offsetY / this.virtual.itemHeight);
        const down = offsetY > this.lastScrollTop;
        const nextPage = (start + visibleItems >= this.lastLoaded) && this.lastLoaded < this.virtual.total - 1;
        const leftOver = this.pageSize - (this.lastLoaded - this.startFrom);
        const prevPage = this.lastLoaded - this.pageSize + visibleItems >= start - leftOver;
        if (down && nextPage) {
            this.changePage(start);
        }
        if (!down && prevPage) {
            this.changePage(start - this.pageSize + visibleItems + 1);
        }
    }
    changePage(start) {
        this.zone.run(() => {
            let end = this.pageSize + start;
            if (end > this.virtual.total) {
                start--;
                end = this.virtual.total;
            }
            if (start < 0) {
                start = 0;
            }
            this.startFrom = start;
            this.lastLoaded = end;
            this.pageChange.emit({ skip: start, take: this.pageSize });
        });
    }
    index(groupIndex, itemIndex) {
        return groupIndex > 0 ? (this.dataService.groupIndices[groupIndex - 1] + itemIndex) : itemIndex;
    }
    getText(dataItem) {
        return getter(dataItem, this.textField);
    }
    getValue(dataItem) {
        return getter(dataItem, this.valueField);
    }
    isDisabled(index) {
        return this.disabledItemsService.isIndexDisabled(index);
    }
    scrollToItem(index) {
        let flatIndex = index;
        if (this.dataService.grouped) {
            // takes into account the group header items
            flatIndex = this.dataService.flatIndex(index);
            /* The first group header item is not rendered in the list (see template), so subtract 1 when calulating the flat index.
               With virtualization enabled, the first group header could be in a previous page, in which case don't subtract anything. */
            const groupHeaderOffset = this.firstGroupHeaderInTargetedPage(flatIndex) ? -1 : 0;
            flatIndex += groupHeaderOffset;
        }
        if (this.virtual && flatIndex > -1) {
            this.scrollToIndex(flatIndex);
            return;
        }
        const items = this.items.toArray();
        if (isPresent(items[flatIndex]) && flatIndex !== -1) {
            this.scroll(items[flatIndex].element);
        }
    }
    scrollToIndex(index) {
        let content = this.content.nativeElement;
        let contentScrollTop = content.scrollTop;
        const itemOffsetTop = index * this.virtual.itemHeight;
        const itemOffsetHeight = this.virtual.itemHeight;
        const contentOffsetHeight = content.clientHeight;
        const bottomDistance = itemOffsetTop + itemOffsetHeight;
        if (contentScrollTop > itemOffsetTop) {
            contentScrollTop = itemOffsetTop;
        }
        else if (bottomDistance > (contentScrollTop + contentOffsetHeight)) {
            contentScrollTop = (bottomDistance - contentOffsetHeight);
        }
        content.scrollTop = contentScrollTop;
    }
    scroll(item) {
        if (!item) {
            return;
        }
        const nativeElement = item.nativeElement;
        let content = this.content.nativeElement, itemOffsetTop = nativeElement.offsetTop, itemOffsetHeight = nativeElement.offsetHeight, contentScrollTop = content.scrollTop, contentOffsetHeight = content.clientHeight, bottomDistance = itemOffsetTop + itemOffsetHeight;
        if (contentScrollTop > itemOffsetTop) {
            contentScrollTop = itemOffsetTop;
        }
        else if (bottomDistance > (contentScrollTop + contentOffsetHeight)) {
            contentScrollTop = (bottomDistance - contentOffsetHeight);
        }
        content.scrollTop = contentScrollTop;
    }
    positionItems() {
        this.items.forEach((item, index) => {
            const offsetY = (index + this.startFrom) * this.virtual.itemHeight;
            this.renderer.setStyle(item.element.nativeElement, "transform", `translateY(${offsetY}px`);
        });
    }
    /**
     * Indicates whether the first group header from the data set is in the targeted virtual page.
     */
    firstGroupHeaderInTargetedPage(itemIndex) {
        if (!isPresent(this.virtual)) {
            return true;
        }
        return this.virtual.skip === 0 && (this.virtual.pageSize > itemIndex);
    }
}
ListComponent.ɵfac = function ListComponent_Factory(t) { return new (t || ListComponent)(_angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](DataService), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](_angular_core__WEBPACK_IMPORTED_MODULE_0__["ElementRef"]), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](SelectionService), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](DisabledItemsService), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](_angular_core__WEBPACK_IMPORTED_MODULE_0__["ChangeDetectorRef"]), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](_angular_core__WEBPACK_IMPORTED_MODULE_0__["NgZone"]), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](_angular_core__WEBPACK_IMPORTED_MODULE_0__["Renderer2"])); };
ListComponent.ɵcmp = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdefineComponent"]({ type: ListComponent, selectors: [["kendo-list"]], viewQuery: function ListComponent_Query(rf, ctx) { if (rf & 1) {
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵviewQuery"](_c1, true);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵviewQuery"](_c2, true);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵviewQuery"](ListItemDirective, true);
    } if (rf & 2) {
        var _t;
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵqueryRefresh"](_t = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵloadQuery"]()) && (ctx.content = _t.first);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵqueryRefresh"](_t = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵloadQuery"]()) && (ctx.list = _t.first);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵqueryRefresh"](_t = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵloadQuery"]()) && (ctx.items = _t);
    } }, inputs: { selected: "selected", focused: "focused", show: "show", multipleSelection: "multipleSelection", data: "data", textField: "textField", valueField: "valueField", height: "height", template: "template", groupTemplate: "groupTemplate", fixedGroupTemplate: "fixedGroupTemplate", id: "id", optionPrefix: "optionPrefix", virtual: "virtual" }, outputs: { onClick: "onClick", pageChange: "pageChange" }, features: [_angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵNgOnChangesFeature"]], decls: 8, vars: 15, consts: [["class", "k-outer-group-header k-first", 3, "ngClass", "ngStyle", 4, "ngIf"], ["unselectable", "on", 3, "ngClass"], ["content", ""], ["role", "listbox", 1, "k-list", "k-reset", 3, "ngClass"], ["list", ""], [4, "ngIf"], ["class", "k-height-container", "role", "presentation", 4, "ngIf"], [1, "k-outer-group-header", "k-first", 3, "ngClass", "ngStyle"], [3, "ngIf"], [3, "templateContext"], ["ngFor", "", 3, "ngForOf"], ["role", "option", "kendoDropDownsSelectable", "", 1, "k-item", 3, "height", "index", "multipleSelection", "ngClass"], ["role", "group", "class", "k-outer-group-header", 3, "ngClass", "ngStyle", 4, "ngIf"], ["role", "option", "kendoDropDownsSelectable", "", "class", "k-item", 3, "height", "index", "multipleSelection", "ngClass", 4, "ngIf"], ["role", "group", 1, "k-outer-group-header", 3, "ngClass", "ngStyle"], ["role", "presentation", 1, "k-height-container"]], template: function ListComponent_Template(rf, ctx) { if (rf & 1) {
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](0, ListComponent_div_0_Template, 3, 10, "div", 0);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](1, "div", 1, 2);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](3, "ul", 3, 4);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](5, ListComponent_5_Template, 1, 1, undefined, 5);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](6, ListComponent_6_Template, 1, 1, undefined, 5);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](7, ListComponent_div_7_Template, 2, 2, "div", 6);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    } if (rf & 2) {
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngIf", ctx.dataService.grouped);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵstyleProp"]("max-height", ctx.height, "px");
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngClass", _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpureFunction2"](10, _c7, ctx.virtual, !ctx.virtual));
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](2);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngClass", _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpureFunction1"](13, _c8, ctx.virtual));
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵattribute"]("id", ctx.id)("aria-hidden", !ctx.show);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](2);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngIf", !ctx.dataService.grouped && ctx.show);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngIf", ctx.dataService.grouped);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngIf", ctx.virtual);
    } }, directives: function () { return [_angular_common__WEBPACK_IMPORTED_MODULE_7__["NgIf"], _angular_common__WEBPACK_IMPORTED_MODULE_7__["NgClass"], _angular_common__WEBPACK_IMPORTED_MODULE_7__["NgStyle"], TemplateContextDirective, _angular_common__WEBPACK_IMPORTED_MODULE_7__["NgForOf"], ListItemDirective,
        SelectableDirective]; }, encapsulation: 2 });
/** @nocollapse */
ListComponent.ctorParameters = () => [
    { type: DataService },
    { type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["ElementRef"] },
    { type: SelectionService },
    { type: DisabledItemsService },
    { type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["ChangeDetectorRef"] },
    { type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["NgZone"] },
    { type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Renderer2"] }
];
ListComponent.propDecorators = {
    selected: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"] }],
    focused: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"] }],
    textField: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"] }],
    valueField: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"] }],
    height: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"] }],
    template: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"] }],
    groupTemplate: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"] }],
    fixedGroupTemplate: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"] }],
    show: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"] }],
    id: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"] }],
    optionPrefix: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"] }],
    multipleSelection: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"] }],
    virtual: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"] }],
    data: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"] }],
    onClick: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Output"] }],
    pageChange: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Output"] }],
    items: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["ViewChildren"], args: [ListItemDirective,] }],
    content: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["ViewChild"], args: ['content',] }],
    list: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["ViewChild"], args: ['list',] }]
};
/*@__PURE__*/ (function () { _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵsetClassMetadata"](ListComponent, [{
        type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Component"],
        args: [{
                selector: 'kendo-list',
                template: `
    <div *ngIf="dataService.grouped"
        class='k-outer-group-header k-first'
        [ngClass]="{'k-virtual-item': virtual}"
        [ngStyle]="{
            'height.px': virtual?.itemHeight,
            'minHeight.px' : virtual?.itemHeight,
            'boxSizing' : virtual ? 'border-box' : 'inherit'}"
        >
        <ng-template *ngIf="fixedGroupTemplate"
            [templateContext]="{
                templateRef: fixedGroupTemplate.templateRef,
                $implicit: currentGroup
            }">
        </ng-template>
        <ng-template [ngIf]="!fixedGroupTemplate"><strong>{{ currentGroup }}</strong> </ng-template>
    </div>
    <div #content
         [ngClass]="{ 'k-virtual-content': virtual, 'k-list-scroller': !virtual }"
         [style.maxHeight.px]="height"
         unselectable="on">
    <ul #list
        role="listbox"
        class="k-list k-reset"
        [ngClass]="{ 'k-virtual-list': virtual }"
        [attr.id]="id"
        [attr.aria-hidden]="!show">
         <ng-template *ngIf="!dataService.grouped && show" ngFor let-dataItem let-itemIndex="index" [ngForOf]="data">
            <li
                role="option"
                kendoDropDownsSelectable
                [height]="virtual?.itemHeight"
                [index]="itemIndex + startFrom"
                [multipleSelection]="multipleSelection"
                [attr.id]="optionPrefix + '-' + getValue(dataItem)"
                [attr.tabIndex]="-1"
                class="k-item"
                [ngClass]="{ 'k-virtual-item': virtual, 'k-state-disabled': isDisabled(itemIndex) }">
                <ng-template *ngIf="template"
                    [templateContext]="{
                        templateRef: template.templateRef,
                        $implicit: dataItem
                    }">
                </ng-template>
                <ng-template [ngIf]="!template">{{ getText(dataItem) }}</ng-template>
            </li>
         </ng-template>
         <ng-template *ngIf="dataService.grouped" ngFor let-dataItem let-itemIndex="index" [ngForOf]="data">
            <li
                *ngIf="dataItem.header && dataItem.index > 0"
                role="group"
                class='k-outer-group-header'
                [ngClass]="{ 'k-virtual-item': virtual }"
                [ngStyle]="{
                    'height.px': virtual?.itemHeight,
                    'minHeight.px' : virtual?.itemHeight,
                    'boxSizing' : virtual ? 'border-box' : 'inherit'}"
                [attr.group-index]="dataItem.index"
                [attr.id]="optionPrefix + '-' + getValue(dataItem.value)"
                [attr.tabIndex]="-1">
                    <ng-template *ngIf="groupTemplate"
                          [templateContext]="{
                            templateRef: groupTemplate.templateRef,
                            $implicit: dataItem.value
                    }">
                    </ng-template>
                    <ng-template [ngIf]="!groupTemplate"><strong> {{ dataItem.value }}</strong> </ng-template>
              </li>
            <li
                *ngIf="!dataItem.header"
                role="option"
                kendoDropDownsSelectable
                [height]="virtual?.itemHeight"
                [index]="dataItem.offsetIndex"
                [multipleSelection]="multipleSelection"
                [attr.absolute-index]="dataItem.index"
                [attr.id]="optionPrefix + '-' + getValue(dataItem.value)"
                [attr.tabIndex]="-1"
                class="k-item"
                [ngClass]="{ 'k-virtual-item': virtual, 'k-state-disabled': isDisabled(dataItem.offsetIndex) }">
                <ng-template *ngIf="template"
                    [templateContext]="{
                        templateRef: template.templateRef,
                        $implicit: dataItem.value
                    }">
                </ng-template>
                <ng-template [ngIf]="!template">{{ getText(dataItem.value) }}</ng-template>
            </li>
        </ng-template>
    </ul>
    <div *ngIf="virtual" class="k-height-container" role="presentation">
        <div [style.height.px]="scrollHeight"></div>
    </div>
    </div>
  `
            }]
    }], function () { return [{ type: DataService }, { type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["ElementRef"] }, { type: SelectionService }, { type: DisabledItemsService }, { type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["ChangeDetectorRef"] }, { type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["NgZone"] }, { type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Renderer2"] }]; }, { selected: [{
            type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"]
        }], focused: [{
            type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"]
        }], show: [{
            type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"]
        }], multipleSelection: [{
            type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"]
        }], onClick: [{
            type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Output"]
        }], pageChange: [{
            type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Output"]
        }], data: [{
            type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"]
        }], items: [{
            type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["ViewChildren"],
            args: [ListItemDirective]
        }], textField: [{
            type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"]
        }], valueField: [{
            type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"]
        }], height: [{
            type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"]
        }], template: [{
            type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"]
        }], groupTemplate: [{
            type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"]
        }], fixedGroupTemplate: [{
            type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"]
        }], id: [{
            type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"]
        }], optionPrefix: [{
            type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"]
        }], virtual: [{
            type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"]
        }], content: [{
            type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["ViewChild"],
            args: ['content']
        }], list: [{
            type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["ViewChild"],
            args: ['list']
        }] }); })();

/**
 * @hidden
 */
const DEFAULTS = {
    pageSize: 50,
    itemHeight: 28
};
/**
 * @hidden
 */
const normalizeVirtualizationSettings = (settings) => {
    if (settings === true) {
        return DEFAULTS;
    }
    if (!settings) {
        return null;
    }
    return Object.assign({ pageSize: DEFAULTS.pageSize }, settings);
};

/* tslint:disable:no-null-keyword */
const NO_VALUE = "";
/**
 * @hidden
 */
const AUTOCOMPLETE_VALUE_ACCESSOR = {
    multi: true,
    provide: _angular_forms__WEBPACK_IMPORTED_MODULE_2__["NG_VALUE_ACCESSOR"],
    // tslint:disable-next-line:no-use-before-declare
    useExisting: Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["forwardRef"])(() => AutoCompleteComponent)
};
/**
 * Represents the [Kendo UI AutoComplete component for Angular]({% slug overview_autocomplete %}).
 *
 * @example
 * ```ts
 * _@Component({
 * selector: 'my-app',
 * template: `
 *  <kendo-autocomplete
 *      [data]="listItems"
 *      [placeholder]="placeholder"
 *  >
 * `
 * })
 * class AppComponent {
 *   public placeholder: string = 'Type "it" for suggestions';
 *   public listItems: Array<string> = ["Item 1", "Item 2", "Item 3", "Item 4"];
 * }
 * ```
 */
class AutoCompleteComponent {
    constructor(localization, dataService, popupService, selectionService, navigationService, disabledItemsService, _zone, cdr, renderer, wrapper) {
        this.localization = localization;
        this.dataService = dataService;
        this.popupService = popupService;
        this.selectionService = selectionService;
        this.navigationService = navigationService;
        this.disabledItemsService = disabledItemsService;
        this._zone = _zone;
        this.cdr = cdr;
        this.renderer = renderer;
        /**
         * Defines whether the first match from the suggestions list will be automatically focused.
         * By default, `highlightFirst` is set to `true`.
         */
        this.highlightFirst = true;
        /**
         * @hidden
         */
        this.focusableId = `k-${guid()}`;
        /**
         * The hint which is displayed when the component is empty.
         */
        this.placeholder = "";
        /**
         * Sets the height of the suggestions list. By default, `listHeight` is 200px.
         *
         * > The `listHeight` property affects only the list of suggestions and not the whole popup container.
         * > To set the height of the popup container, use `popupSettings.height`.
         */
        this.listHeight = 200;
        /**
         * @hidden
         *
         * If set to `true`, renders a button on hovering over the component.
         * Clicking this button resets the value of the component to `undefined` and triggers the `change` event.
         */
        this.clearButton = true;
        /**
         * Sets the disabled state of the component.
         */
        this.disabled = false;
        /**
         * Sets the read-only state of the component.
         */
        this.readonly = false;
        /**
         * Specifies the [`tabindex`](https://developer.mozilla.org/en-US/docs/Web/HTML/Global_attributes/tabindex) of the component.
         */
        this.tabindex = 0;
        /**
         * Enables the [filtering]({% slug filtering_autocomplete %}) functionality.
         * If set to `true`, the component emits the `filterChange` event.
         */
        this.filterable = false;
        /**
         * Fires each time the value is changed&mdash;
         * when the component is blurred or the value is cleared through the **Clear** button
         * ([see example]({% slug overview_autocomplete %}#toc-events)).
         * When the value of the component is programmatically changed to `ngModel` or `formControl`
         * through its API or form binding, the `valueChange` event is not triggered because it
         * might cause a mix-up with the built-in `valueChange` mechanisms of the `ngModel` or `formControl` bindings.
         */
        this.valueChange = new _angular_core__WEBPACK_IMPORTED_MODULE_0__["EventEmitter"]();
        /**
         * Fires each time the user types in the input field.
         * You can filter the source based on the passed filtration value
         * ([see example]({% slug overview_autocomplete %}#toc-events)).
         */
        this.filterChange = new _angular_core__WEBPACK_IMPORTED_MODULE_0__["EventEmitter"]();
        /**
         * Fires each time the popup is about to open.
         * This event is preventable. If you cancel it, the popup will remain closed.
         */
        this.open = new _angular_core__WEBPACK_IMPORTED_MODULE_0__["EventEmitter"]();
        /**
         * Fires each time the popup is about to close.
         * This event is preventable. If you cancel it, the popup will remain open.
         */
        this.close = new _angular_core__WEBPACK_IMPORTED_MODULE_0__["EventEmitter"]();
        /**
         * Fires each time the user focuses the AutoComplete.
         */
        this.onFocus = new _angular_core__WEBPACK_IMPORTED_MODULE_0__["EventEmitter"](); //tslint:disable-line:no-output-rename
        /**
         * Fires each time the AutoComplete gets blurred.
         */
        this.onBlur = new _angular_core__WEBPACK_IMPORTED_MODULE_0__["EventEmitter"](); //tslint:disable-line:no-output-rename
        this.widgetClasses = true;
        this.listBoxId = guid();
        this.optionPrefix = guid();
        this.onChangeCallback = (_value) => { };
        this.onTouchedCallback = (_) => { };
        this.popupMouseDownHandler = (event) => event.preventDefault();
        this._popupSettings = { animate: true };
        this._open = false;
        this._value = "";
        this._previousValue = NO_VALUE;
        this._filtering = false;
        this.valueChangeSubject = new rxjs__WEBPACK_IMPORTED_MODULE_4__["Subject"]();
        this._isFocused = false;
        this.direction = localization.rtl ? 'rtl' : 'ltr';
        this.wrapper = wrapper.nativeElement;
        this.data = [];
        this.subscribeEvents();
        this.selectionService.resetSelection([-1]);
    }
    get width() {
        let wrapperOffsetWidth = 0;
        if (Object(_progress_kendo_angular_common__WEBPACK_IMPORTED_MODULE_1__["isDocumentAvailable"])()) {
            wrapperOffsetWidth = this.wrapper.offsetWidth;
        }
        const width = this.popupSettings.width || wrapperOffsetWidth;
        const minWidth = isNaN(wrapperOffsetWidth) ? wrapperOffsetWidth : `${wrapperOffsetWidth}px`;
        const maxWidth = isNaN(width) ? width : `${width}px`;
        return { min: minWidth, max: maxWidth };
    }
    get height() {
        const popupHeight = this.popupSettings.height;
        return isPresent(popupHeight) ? `${popupHeight}px` : 'auto';
    }
    get listContainerClasses() {
        const containerClasses = ['k-list-container', 'k-reset'];
        if (this.popupSettings.popupClass) {
            containerClasses.push(this.popupSettings.popupClass);
        }
        return containerClasses;
    }
    get suggestion() {
        if (!this.text || !this.suggestedText) {
            this.suggestedText = undefined;
            return;
        }
        const hasMatch = this.suggestedText.toLowerCase().startsWith(this.text.toLowerCase());
        const shouldSuggest = this.suggest && !this.backspacePressed;
        if (shouldSuggest && hasMatch) {
            return this.suggestedText;
        }
    }
    get appendTo() {
        const { appendTo } = this.popupSettings;
        if (!appendTo || appendTo === 'root') {
            return undefined;
        }
        return appendTo === 'component' ? this.container : appendTo;
    }
    /**
     * Toggles the visibility of the popup.
     * If you use the `toggle` method to open or close the popup, the `open` and `close` events will not be fired.
     *
     * @param open - The state of the popup.
     */
    toggle(open) {
        Promise.resolve(null).then(() => {
            this._toggle(open);
        });
    }
    /**
     * Returns the current open state of the popup.
     */
    get isOpen() {
        return this._open;
    }
    /**
     * @hidden
     */
    togglePopup(open) {
        const isDisabled = this.disabled || this.readonly;
        const sameState = this.isOpen === open;
        if (isDisabled || sameState) {
            return;
        }
        const isDefaultPrevented = this.triggerPopupEvents(open);
        if (!isDefaultPrevented) {
            this._toggle(open);
        }
    }
    get activeDescendant() {
        if (!this.isOpen || !isPresent(this.selectionService.focused) || this.selectionService.focused === -1) {
            return null;
        }
        const dataItem = this.dataService.itemAt(this.selectionService.focused);
        return this.optionPrefix + "-" + getter(dataItem, this.valueField);
    }
    get noDataLabel() {
        if (this.data.length === 0) {
            return this.noDataText;
        }
    }
    get clearTitle() {
        return this.localization.get('clearTitle');
    }
    /**
     * Sets the data of the AutoComplete.
     *
     * > The data has to be provided in an array-like list.
     */
    set data(data) {
        this.dataService.data = data || [];
        if (this.virtual) {
            this.virtual.skip = 0;
        }
        this.setState(this.value);
        if (this.filterable) {
            this.selectionService.focused = this.isOpen && this.data.length && this.highlightFirst ? this.firstFocusableIndex(0) : -1;
        }
        if (this.suggest && this.dataService.itemsCount > 0) {
            this.suggestedText = getter(this.dataService.itemAt(0), this.valueField);
        }
    }
    get data() {
        const virtual = this.virtual;
        if (virtual) {
            const start = virtual.skip || 0;
            const end = start + virtual.pageSize;
            // Use length instead of itemsCount because of the grouping.
            virtual.total = this.dataService.data.length;
            return this.dataService.data.slice(start, end);
        }
        return this.dataService.data;
    }
    /**
     * Sets the value of the AutoComplete.
     */
    set value(newValue) {
        this.verifySettings(newValue);
        this._value = newValue || NO_VALUE;
        this.cdr.markForCheck();
    }
    get value() {
        return this._value || NO_VALUE;
    }
    /**
     * Configures the popup of the AutoComplete.
     *
     * The available options are:
     * - `animate: Boolean`&mdash;Controls the popup animation. By default, the open and close animations are enabled.
     * - `width: Number | String`&mdash;Sets the width of the popup container. By default, the width of the host element is used. If set to `auto`, the component automatically adjusts the width of the popup and no item labels are wrapped. The `auto` mode is not supported when virtual scrolling is enabled.
     * - `height: Number`&mdash;Sets the height of the popup container.
     * - `popupClass: String`&mdash;Specifies a list of CSS classes that are used to style the popup.
     * - `appendTo: "root" | "component" | ViewContainerRef`&mdash;Specifies the component to which the popup will be appended.
     */
    set popupSettings(settings) {
        this._popupSettings = Object.assign({ animate: true }, settings);
    }
    get popupSettings() {
        return this._popupSettings;
    }
    /**
     * Defines a Boolean function that is executed for each data item in the component
     * ([see examples]({% slug disableditems_autocomplete %})).
     * Determines whether the item will be disabled.
     */
    set itemDisabled(fn) {
        if (typeof fn !== 'function') {
            throw new Error(`itemDisabled must be a function, but received ${JSON.stringify(fn)}.`);
        }
        this.disabledItemsService.itemDisabled = fn;
    }
    /**
     * @hidden
     */
    set tabIndex(tabIndex) {
        this.tabindex = tabIndex;
    }
    get tabIndex() {
        return this.tabindex;
    }
    /**
     * Enables the [virtualization]({% slug virtualization_autocomplete %}) functionality.
     */
    set virtual(settings) {
        this._virtualSettings = normalizeVirtualizationSettings(settings);
    }
    get virtual() {
        return this._virtualSettings;
    }
    get isFocused() {
        return this._isFocused;
    }
    set isFocused(isFocused) {
        this._isFocused = isFocused;
    }
    get isDisabled() {
        return this.disabled;
    }
    get dir() {
        return this.direction;
    }
    ngOnInit() {
        this.renderer.removeAttribute(this.wrapper, "tabindex");
        this.localizationChangeSubscription = this.localization
            .changes
            .subscribe(({ rtl }) => {
            this.direction = rtl ? 'rtl' : 'ltr';
            this.setMessages();
        });
        this.setMessages();
    }
    ngOnDestroy() {
        this.destroyPopup();
        this.unsubscribeEvents();
        clearTimeout(this.messagesTimeout);
        if (this.localizationChangeSubscription) {
            this.localizationChangeSubscription.unsubscribe();
        }
    }
    ngOnChanges(changes) {
        const virtual = this.virtual;
        const requestInitialData = virtual && changes.data && changes.data.isFirstChange();
        if (requestInitialData) {
            this.pageChange({ skip: 0, take: virtual.pageSize });
        }
        const STATE_PROPS = /(value|valueField)/g;
        if (STATE_PROPS.test(Object.keys(changes).join())) {
            this.setState(this.value);
        }
    }
    /**
     * Resets the value of the AutoComplete.
     * If you use the `reset` method to clear the value of the component,
     * the model will not update automatically and the `selectionChange` and `valueChange` events will not be fired.
     */
    reset() {
        this.setState(NO_VALUE);
    }
    /**
     * @hidden
     */
    clearValue(event) {
        event.stopImmediatePropagation();
        this.focus();
        this.change(NO_VALUE);
        if (this.filterable) {
            this.filterChange.emit('');
        }
        this.selectionService.resetSelection([]);
    }
    /**
     * @hidden
     */
    writeValue(value) {
        this.setState(value);
    }
    /**
     * @hidden
     */
    registerOnChange(fn) {
        this.onChangeCallback = fn;
    }
    /**
     * @hidden
     */
    registerOnTouched(fn) {
        this.onTouchedCallback = fn;
    }
    /**
     * @hidden
     */
    setDisabledState(isDisabled) {
        this.disabled = isDisabled;
    }
    /**
     * Focuses the AutoComplete.
     */
    focus() {
        if (!this.disabled) {
            this.searchbar.focus();
        }
    }
    /**
     * Blurs the AutoComplete.
     */
    blur() {
        if (!this.disabled) {
            this.searchbar.blur();
        }
    }
    /**
     * @hidden
     */
    onResize() {
        if (this._open) {
            const popupWrapper = this.popupRef.popupElement;
            const { min, max } = this.width;
            popupWrapper.style.minWidth = min;
            popupWrapper.style.width = max;
        }
    }
    emitChange() {
        if (this.value === this._previousValue) {
            return;
        }
        this._previousValue = this.value;
        this.onChangeCallback(this.value);
        this.valueChange.emit(this.value);
    }
    verifySettings(newValue) {
        if (!Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["isDevMode"])()) {
            return;
        }
        if (isPresent(newValue) && typeof newValue !== "string") {
            throw new Error("Expected value of type string. See http://www.telerik.com/kendo-angular-ui/components/dropdowns/autocomplete/#toc-value");
        }
    }
    search(text, startFrom = 0) {
        let index;
        if (text.length && this.dataService.itemsCount) {
            index = this.dataService.findIndex(this.findIndexPredicate(text), startFrom);
        }
        else {
            index = -1;
        }
        if (this.disabledItemsService.isIndexDisabled(index)) {
            if (index + 1 < this.dataService.itemsCount) {
                this.search(text, index + 1);
            }
            else {
                this.selectionService.focus(-1);
            }
        }
        else {
            this.selectionService.focus(index);
            if (this.suggest) {
                this.suggestedText = getter(this.dataService.itemAt(index), this.valueField);
            }
        }
    }
    navigate(index) {
        if (!this.isOpen) {
            return;
        }
        this.selectionService.focus(index);
    }
    /**
     * @hidden
     */
    handleNavigate(event) {
        const focused = isNaN(this.selectionService.focused) ? this.firstFocusableIndex(0) : this.selectionService.focused;
        if (this.disabled || this.readonly || isNaN(focused)) {
            return;
        }
        const action = this.navigationService.process({
            current: focused,
            max: this.dataService.itemsCount - 1,
            min: 0,
            originalEvent: event
        });
        if (action !== NavigationAction.Undefined &&
            action !== NavigationAction.Backspace &&
            action !== NavigationAction.Delete &&
            action !== NavigationAction.Home &&
            action !== NavigationAction.End &&
            action !== NavigationAction.Left &&
            action !== NavigationAction.Right &&
            ((action === NavigationAction.Enter && this.isOpen) || action !== NavigationAction.Enter)) {
            event.preventDefault();
        }
    }
    handleEnter(event) {
        const focused = this.selectionService.focused;
        let value;
        this._filtering = false;
        if (this.isOpen) {
            event.originalEvent.preventDefault();
        }
        if (focused >= 0) {
            value = getter(this.dataService.itemAt(focused), this.valueField);
        }
        else {
            const match = this.suggest && this.suggestedText && this.data.length &&
                getter(this.dataService.itemAt(0), this.valueField, true).toLowerCase() === this.searchbar.value.toLowerCase();
            if (this.isOpen && match) {
                value = this.suggestedText;
            }
            else {
                value = this.searchbar.value;
            }
        }
        this.change(value);
    }
    handleEscape() {
        this.togglePopup(false);
        this.selectionService.focused = -1;
        this.suggestedText = null;
    }
    /**
     * @hidden
     */
    searchBarChange(text) {
        const currentTextLength = isPresent(this.text) ? this.text.length : 0;
        this.backspacePressed = (text.length < currentTextLength) ? true : false;
        this.text = text;
        this.togglePopup(text.length > 0);
        this._filtering = true;
        if (!this.highlightFirst) {
            this.selectionService.focused = -1;
        }
        if (this.filterable) {
            this.filterChange.emit(text);
        }
        else if (this.highlightFirst) {
            this.search(text);
        }
    }
    /**
     * @hidden
     */
    handleFocus() {
        this.isFocused = true;
        this.onFocus.emit();
    }
    /**
     * @hidden
     */
    handleBlur() {
        this._filtering = false;
        const focused = this.filterable ? this.selectionService.focused : -1;
        let dataItem;
        let text;
        if (focused !== -1) {
            dataItem = this.dataService.itemAt(focused);
            text = getter(dataItem, this.valueField, true) || "";
        }
        else {
            text = this.searchbar.value;
        }
        const exactMatch = text === this.searchbar.value;
        const insensitiveMatch = text.toLowerCase() === this.searchbar.value.toLowerCase();
        if (!exactMatch && insensitiveMatch) {
            this.selectionService.resetSelection([]);
        }
        this.change(this.searchbar.value);
        this.togglePopup(false);
        this.isFocused = false;
        this.onBlur.emit();
        this.onTouchedCallback();
    }
    /**
     * @hidden
     */
    pageChange(event) {
        const virtual = this.virtual;
        virtual.skip = event.skip;
    }
    setState(newValue) {
        if (this._filtering) {
            return;
        }
        this.value = newValue;
        this._previousValue = this.value;
        this.text = this.value;
    }
    change(value) {
        this.togglePopup(false);
        this.valueChangeSubject.next(value);
    }
    subscribeEvents() {
        if (!Object(_progress_kendo_angular_common__WEBPACK_IMPORTED_MODULE_1__["isDocumentAvailable"])()) {
            return;
        }
        this.valueChangeSubscription = this.valueChangeSubject.pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_5__["filter"])((candidate) => {
            return !(this.value === candidate && this.text === candidate);
        }))
            .subscribe((value) => {
            this.value = value;
            this.text = value;
            this.emitChange();
        });
        this.changeSubscription = this.selectionService.onChange.subscribe(this.handleItemChange.bind(this));
        this.focusSubscription = this.selectionService.onFocus.subscribe(this.handleItemFocus.bind(this));
        this.navigationSubscription = Object(rxjs__WEBPACK_IMPORTED_MODULE_4__["merge"])(this.navigationService.up, this.navigationService.down).subscribe((event) => this.navigate(event.index));
        this.closeSubscription = this.navigationService.close.subscribe(() => this.togglePopup(false));
        this.enterSubscription = this.navigationService.enter.subscribe(this.handleEnter.bind(this));
        this.escSubscription = this.navigationService.esc.subscribe(this.handleEscape.bind(this));
    }
    unsubscribeEvents() {
        if (!Object(_progress_kendo_angular_common__WEBPACK_IMPORTED_MODULE_1__["isDocumentAvailable"])()) {
            return;
        }
        this.changeSubscription.unsubscribe();
        this.navigationSubscription.unsubscribe();
        this.closeSubscription.unsubscribe();
        this.enterSubscription.unsubscribe();
        this.escSubscription.unsubscribe();
        this.valueChangeSubscription.unsubscribe();
        this.focusSubscription.unsubscribe();
    }
    handleItemChange(event) {
        const index = event.indices.length ? event.indices[0] : undefined;
        this._filtering = false;
        this.selectionService.resetSelection([-1]);
        if (!isPresent(index)) {
            return;
        }
        let text = getter(this.dataService.itemAt(index), this.valueField);
        this.change(text);
    }
    handleItemFocus(_event) {
        const focused = this.selectionService.focused;
        const shouldSuggest = Boolean(this.suggest && this.data && this.data.length && focused >= 0);
        if (shouldSuggest) {
            this.suggestedText = getter(this.dataService.itemAt(focused), this.valueField);
        }
    }
    createPopup() {
        if (this.virtual) {
            this.virtual.skip = 0;
        }
        const horizontalAlign = this.direction === "rtl" ? "right" : "left";
        const anchorPosition = { horizontal: horizontalAlign, vertical: "bottom" };
        const popupPosition = { horizontal: horizontalAlign, vertical: "top" };
        this.popupRef = this.popupService.open({
            anchor: this.wrapper,
            animate: this.popupSettings.animate,
            appendTo: this.appendTo,
            content: this.popupTemplate,
            popupClass: this.listContainerClasses,
            positionMode: 'absolute',
            popupAlign: popupPosition,
            anchorAlign: anchorPosition
        });
        const popupWrapper = this.popupRef.popupElement;
        const { min, max } = this.width;
        popupWrapper.addEventListener('mousedown', this.popupMouseDownHandler);
        popupWrapper.style.minWidth = min;
        popupWrapper.style.width = max;
        popupWrapper.style.height = this.height;
        popupWrapper.setAttribute("dir", this.direction);
        this.popupRef.popupOpen.subscribe(() => {
            this.cdr.detectChanges();
            this.optionsList.scrollToItem(this.selectionService.focused);
        });
        this.popupRef.popupAnchorViewportLeave.subscribe(() => this.togglePopup(false));
    }
    destroyPopup() {
        if (this.popupRef) {
            this.popupRef.popupElement
                .removeEventListener('mousedown', this.popupMouseDownHandler);
            this.popupRef.close();
            this.popupRef = null;
        }
    }
    _toggle(open) {
        this._open = (open === undefined) ? !this._open : open;
        this.destroyPopup();
        if (this._open) {
            this.createPopup();
        }
    }
    triggerPopupEvents(open) {
        const eventArgs = new PreventableEvent();
        if (open) {
            this.open.emit(eventArgs);
        }
        else {
            this.close.emit(eventArgs);
        }
        return eventArgs.isDefaultPrevented();
    }
    firstFocusableIndex(index) {
        const maxIndex = this.data.length - 1;
        if (this.disabledItemsService.isIndexDisabled(index)) {
            return (index < maxIndex) ? this.firstFocusableIndex(index + 1) : undefined;
        }
        else {
            return index;
        }
    }
    findIndexPredicate(text) {
        if (this.dataService.grouped) {
            return (item) => {
                let itemText = getter(item.value, this.valueField);
                itemText = !isPresent(itemText) ? "" : itemText.toString().toLowerCase();
                return itemText.startsWith(text.toLowerCase());
            };
        }
        else {
            return (item) => {
                let itemText = getter(item, this.valueField);
                itemText = !isPresent(itemText) ? "" : itemText.toString().toLowerCase();
                return itemText.startsWith(text.toLowerCase());
            };
        }
    }
    setMessages() {
        this._zone.runOutsideAngular(() => {
            clearTimeout(this.messagesTimeout);
            this.messagesTimeout = setTimeout(() => {
                this.noDataText = this.localization.get('noDataText');
                this.cdr.detectChanges();
            });
        });
    }
}
AutoCompleteComponent.ɵfac = function AutoCompleteComponent_Factory(t) { return new (t || AutoCompleteComponent)(_angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](_progress_kendo_angular_l10n__WEBPACK_IMPORTED_MODULE_3__["LocalizationService"]), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](DataService), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](_progress_kendo_angular_popup__WEBPACK_IMPORTED_MODULE_6__["PopupService"]), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](SelectionService), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](NavigationService), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](DisabledItemsService), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](_angular_core__WEBPACK_IMPORTED_MODULE_0__["NgZone"]), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](_angular_core__WEBPACK_IMPORTED_MODULE_0__["ChangeDetectorRef"]), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](_angular_core__WEBPACK_IMPORTED_MODULE_0__["Renderer2"]), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](_angular_core__WEBPACK_IMPORTED_MODULE_0__["ElementRef"])); };
AutoCompleteComponent.ɵcmp = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdefineComponent"]({ type: AutoCompleteComponent, selectors: [["kendo-autocomplete"]], contentQueries: function AutoCompleteComponent_ContentQueries(rf, ctx, dirIndex) { if (rf & 1) {
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵcontentQuery"](dirIndex, ItemTemplateDirective, true);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵcontentQuery"](dirIndex, HeaderTemplateDirective, true);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵcontentQuery"](dirIndex, FooterTemplateDirective, true);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵcontentQuery"](dirIndex, NoDataTemplateDirective, true);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵcontentQuery"](dirIndex, GroupTemplateDirective, true);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵcontentQuery"](dirIndex, FixedGroupTemplateDirective, true);
    } if (rf & 2) {
        var _t;
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵqueryRefresh"](_t = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵloadQuery"]()) && (ctx.template = _t.first);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵqueryRefresh"](_t = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵloadQuery"]()) && (ctx.headerTemplate = _t.first);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵqueryRefresh"](_t = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵloadQuery"]()) && (ctx.footerTemplate = _t.first);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵqueryRefresh"](_t = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵloadQuery"]()) && (ctx.noDataTemplate = _t.first);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵqueryRefresh"](_t = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵloadQuery"]()) && (ctx.groupTemplate = _t.first);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵqueryRefresh"](_t = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵloadQuery"]()) && (ctx.fixedGroupTemplate = _t.first);
    } }, viewQuery: function AutoCompleteComponent_Query(rf, ctx) { if (rf & 1) {
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵviewQuery"](_c9, true, _angular_core__WEBPACK_IMPORTED_MODULE_0__["ViewContainerRef"]);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵviewQuery"](_c10, true);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵviewQuery"](SearchBarComponent, true);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵviewQuery"](_c11, true);
    } if (rf & 2) {
        var _t;
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵqueryRefresh"](_t = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵloadQuery"]()) && (ctx.container = _t.first);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵqueryRefresh"](_t = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵloadQuery"]()) && (ctx.popupTemplate = _t.first);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵqueryRefresh"](_t = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵloadQuery"]()) && (ctx.searchbar = _t.first);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵqueryRefresh"](_t = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵloadQuery"]()) && (ctx.optionsList = _t.first);
    } }, hostVars: 11, hostBindings: function AutoCompleteComponent_HostBindings(rf, ctx) { if (rf & 2) {
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵattribute"]("dir", ctx.dir);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵclassProp"]("k-widget", ctx.widgetClasses)("k-autocomplete", ctx.widgetClasses)("k-header", ctx.widgetClasses)("k-state-focused", ctx.isFocused)("k-state-disabled", ctx.isDisabled);
    } }, inputs: { highlightFirst: "highlightFirst", focusableId: "focusableId", placeholder: "placeholder", listHeight: "listHeight", clearButton: "clearButton", disabled: "disabled", readonly: "readonly", tabindex: "tabindex", filterable: "filterable", data: "data", value: "value", popupSettings: "popupSettings", itemDisabled: "itemDisabled", tabIndex: "tabIndex", virtual: "virtual", valueField: "valueField", loading: "loading", suggest: "suggest" }, outputs: { valueChange: "valueChange", filterChange: "filterChange", open: "open", close: "close", onFocus: "focus", onBlur: "blur" }, exportAs: ["kendoAutoComplete"], features: [_angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵProvidersFeature"]([
            AUTOCOMPLETE_VALUE_ACCESSOR,
            DataService,
            SelectionService,
            NavigationService,
            DisabledItemsService,
            _progress_kendo_angular_l10n__WEBPACK_IMPORTED_MODULE_3__["LocalizationService"],
            {
                provide: _progress_kendo_angular_l10n__WEBPACK_IMPORTED_MODULE_3__["L10N_PREFIX"],
                useValue: 'kendo.autocomplete'
            },
            {
                provide: FilterableDropDownComponentBase, useExisting: Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["forwardRef"])(() => AutoCompleteComponent)
            },
            {
                provide: _progress_kendo_angular_common__WEBPACK_IMPORTED_MODULE_1__["KendoInput"], useExisting: Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["forwardRef"])(() => AutoCompleteComponent)
            }
        ]), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵNgOnChangesFeature"]], decls: 11, vars: 15, consts: [["kendoAutoCompleteLocalizedMessages", "", 6, "noDataText", "clearTitle"], [3, "role", "id", "listId", "activeDescendant", "noDataLabel", "userInput", "suggestedText", "disabled", "readonly", "tabIndex", "popupOpen", "placeholder", "onNavigate", "valueChange", "onBlur", "onFocus"], ["searchbar", ""], ["class", "k-icon k-clear-value k-i-close", "role", "button", "tabindex", "-1", 3, "click", "mousedown", 4, "ngIf"], ["class", "k-icon k-i-loading", 4, "ngIf"], ["popupTemplate", ""], [3, "ngIf"], ["container", ""], ["role", "button", "tabindex", "-1", 1, "k-icon", "k-clear-value", "k-i-close", 3, "click", "mousedown"], [1, "k-icon", "k-i-loading"], [4, "ngIf"], [3, "id", "optionPrefix", "data", "textField", "valueField", "template", "groupTemplate", "fixedGroupTemplate", "height", "show", "virtual", "pageChange"], ["optionsList", ""], ["class", "k-nodata", 4, "ngIf"], [3, "templateContext"], [1, "k-nodata"], [3, "ngIf", "templateContext"], [3, "resize"]], template: function AutoCompleteComponent_Template(rf, ctx) { if (rf & 1) {
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementContainerStart"](0, 0);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵi18nAttributes"](1, _c16);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementContainerEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](2, "kendo-searchbar", 1, 2);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵlistener"]("onNavigate", function AutoCompleteComponent_Template_kendo_searchbar_onNavigate_2_listener($event) { return ctx.handleNavigate($event); })("valueChange", function AutoCompleteComponent_Template_kendo_searchbar_valueChange_2_listener($event) { return ctx.searchBarChange($event); })("onBlur", function AutoCompleteComponent_Template_kendo_searchbar_onBlur_2_listener() { return ctx.handleBlur(); })("onFocus", function AutoCompleteComponent_Template_kendo_searchbar_onFocus_2_listener() { return ctx.handleFocus(); });
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](4, AutoCompleteComponent_span_4_Template, 1, 1, "span", 3);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](5, AutoCompleteComponent_span_5_Template, 1, 0, "span", 4);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](6, AutoCompleteComponent_ng_template_6_Template, 5, 14, "ng-template", null, 5, _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplateRefExtractor"]);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](8, AutoCompleteComponent_ng_template_8_Template, 1, 0, "ng-template", 6);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementContainer"](9, null, 7);
    } if (rf & 2) {
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](2);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("role", "combobox")("id", ctx.focusableId)("listId", ctx.listBoxId)("activeDescendant", ctx.activeDescendant)("noDataLabel", ctx.noDataLabel)("userInput", ctx.text)("suggestedText", ctx.suggestion)("disabled", ctx.disabled)("readonly", ctx.readonly)("tabIndex", ctx.tabIndex)("popupOpen", ctx.isOpen)("placeholder", ctx.placeholder);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](2);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngIf", !ctx.loading && !ctx.readonly && (ctx.clearButton && (ctx.text == null ? null : ctx.text.length)));
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngIf", ctx.loading);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](3);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngIf", ctx.isOpen);
    } }, directives: function () { return [LocalizedMessagesDirective,
        SearchBarComponent, _angular_common__WEBPACK_IMPORTED_MODULE_7__["NgIf"], ListComponent,
        TemplateContextDirective, _progress_kendo_angular_common__WEBPACK_IMPORTED_MODULE_1__["ResizeSensorComponent"]]; }, encapsulation: 2 });
/** @nocollapse */
AutoCompleteComponent.ctorParameters = () => [
    { type: _progress_kendo_angular_l10n__WEBPACK_IMPORTED_MODULE_3__["LocalizationService"] },
    { type: DataService },
    { type: _progress_kendo_angular_popup__WEBPACK_IMPORTED_MODULE_6__["PopupService"] },
    { type: SelectionService },
    { type: NavigationService },
    { type: DisabledItemsService },
    { type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["NgZone"] },
    { type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["ChangeDetectorRef"] },
    { type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Renderer2"] },
    { type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["ElementRef"] }
];
AutoCompleteComponent.propDecorators = {
    highlightFirst: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"] }],
    focusableId: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"] }],
    data: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"] }],
    value: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"] }],
    valueField: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"] }],
    placeholder: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"] }],
    popupSettings: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"] }],
    listHeight: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"] }],
    loading: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"] }],
    clearButton: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"] }],
    suggest: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"] }],
    disabled: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"] }],
    itemDisabled: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"] }],
    readonly: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"] }],
    tabindex: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"] }],
    tabIndex: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"], args: ["tabIndex",] }],
    filterable: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"] }],
    virtual: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"] }],
    valueChange: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Output"] }],
    filterChange: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Output"] }],
    open: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Output"] }],
    close: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Output"] }],
    onFocus: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Output"], args: ['focus',] }],
    onBlur: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Output"], args: ['blur',] }],
    template: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["ContentChild"], args: [ItemTemplateDirective,] }],
    headerTemplate: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["ContentChild"], args: [HeaderTemplateDirective,] }],
    footerTemplate: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["ContentChild"], args: [FooterTemplateDirective,] }],
    noDataTemplate: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["ContentChild"], args: [NoDataTemplateDirective,] }],
    groupTemplate: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["ContentChild"], args: [GroupTemplateDirective,] }],
    fixedGroupTemplate: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["ContentChild"], args: [FixedGroupTemplateDirective,] }],
    container: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["ViewChild"], args: ['container', { read: _angular_core__WEBPACK_IMPORTED_MODULE_0__["ViewContainerRef"] },] }],
    popupTemplate: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["ViewChild"], args: ['popupTemplate',] }],
    searchbar: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["ViewChild"], args: [SearchBarComponent,] }],
    optionsList: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["ViewChild"], args: ['optionsList',] }],
    widgetClasses: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["HostBinding"], args: ['class.k-widget',] }, { type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["HostBinding"], args: ['class.k-autocomplete',] }, { type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["HostBinding"], args: ['class.k-header',] }],
    isFocused: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["HostBinding"], args: ['class.k-state-focused',] }],
    isDisabled: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["HostBinding"], args: ['class.k-state-disabled',] }],
    dir: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["HostBinding"], args: ['attr.dir',] }]
};
/*@__PURE__*/ (function () { _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵsetClassMetadata"](AutoCompleteComponent, [{
        type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Component"],
        args: [{
                exportAs: 'kendoAutoComplete',
                providers: [
                    AUTOCOMPLETE_VALUE_ACCESSOR,
                    DataService,
                    SelectionService,
                    NavigationService,
                    DisabledItemsService,
                    _progress_kendo_angular_l10n__WEBPACK_IMPORTED_MODULE_3__["LocalizationService"],
                    {
                        provide: _progress_kendo_angular_l10n__WEBPACK_IMPORTED_MODULE_3__["L10N_PREFIX"],
                        useValue: 'kendo.autocomplete'
                    },
                    {
                        provide: FilterableDropDownComponentBase, useExisting: Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["forwardRef"])(() => AutoCompleteComponent)
                    },
                    {
                        provide: _progress_kendo_angular_common__WEBPACK_IMPORTED_MODULE_1__["KendoInput"], useExisting: Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["forwardRef"])(() => AutoCompleteComponent)
                    }
                ],
                selector: 'kendo-autocomplete',
                template: `
        <ng-container kendoAutoCompleteLocalizedMessages
            i18n-noDataText="kendo.autocomplete.noDataText|The text displayed in the popup when there are no items"
            noDataText="NO DATA FOUND"

            i18n-clearTitle="kendo.autocomplete.clearTitle|The title of the clear button"
            clearTitle="clear"
        >
        </ng-container>
        <kendo-searchbar #searchbar
            [role]="'combobox'"
            [id]="focusableId"
            [listId]="listBoxId"
            [activeDescendant]="activeDescendant"
            [noDataLabel]="noDataLabel"
            [userInput]="text"
            [suggestedText]="suggestion"
            [disabled]="disabled"
            [readonly]="readonly"
            [tabIndex]="tabIndex"
            [popupOpen]="isOpen"
            [placeholder]="placeholder"
            (onNavigate)="handleNavigate($event)"
            (valueChange)="searchBarChange($event)"
            (onBlur)="handleBlur()"
            (onFocus)="handleFocus()"
        ></kendo-searchbar>
        <span *ngIf="!loading && !readonly && (clearButton && text?.length)" class="k-icon k-clear-value k-i-close" [attr.title]="clearTitle" role="button" tabindex="-1" (click)="clearValue($event)" (mousedown)="$event.preventDefault()">
</span>
        <span *ngIf="loading" class="k-icon k-i-loading"></span>
        <ng-template #popupTemplate>
            <!--header template-->
            <ng-template *ngIf="headerTemplate"
                [templateContext]="{
                    templateRef: headerTemplate.templateRef
                }">
            </ng-template>
            <!--list-->
            <kendo-list
                #optionsList
                [id]="listBoxId"
                [optionPrefix]="optionPrefix"
                [data]="data"
                [textField]="valueField"
                [valueField]="valueField"
                [template]="template"
                [groupTemplate]="groupTemplate"
                [fixedGroupTemplate]="fixedGroupTemplate"
                [height]="listHeight"
                [show]="isOpen"
                [virtual]="virtual"
                (pageChange)="pageChange($event)"
            >
            </kendo-list>
            <!--no-data template-->
            <div class="k-nodata" *ngIf="data.length === 0">
                <ng-template [ngIf]="noDataTemplate"
                    [templateContext]="{
                        templateRef: noDataTemplate?.templateRef
                    }">
                </ng-template>
                <ng-template [ngIf]="!noDataTemplate">
                    <div>{{ noDataText }}</div>
                </ng-template>
            </div>
            <!--footer template-->
            <ng-template *ngIf="footerTemplate"
                [templateContext]="{
                    templateRef: footerTemplate.templateRef
                }">
            </ng-template>
        </ng-template>
        <ng-template [ngIf]="isOpen">
            <kendo-resize-sensor (resize)="onResize()"></kendo-resize-sensor>
        </ng-template>
        <ng-container #container></ng-container>
  `
            }]
    }], function () { return [{ type: _progress_kendo_angular_l10n__WEBPACK_IMPORTED_MODULE_3__["LocalizationService"] }, { type: DataService }, { type: _progress_kendo_angular_popup__WEBPACK_IMPORTED_MODULE_6__["PopupService"] }, { type: SelectionService }, { type: NavigationService }, { type: DisabledItemsService }, { type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["NgZone"] }, { type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["ChangeDetectorRef"] }, { type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Renderer2"] }, { type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["ElementRef"] }]; }, { highlightFirst: [{
            type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"]
        }], focusableId: [{
            type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"]
        }], placeholder: [{
            type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"]
        }], listHeight: [{
            type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"]
        }], clearButton: [{
            type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"]
        }], disabled: [{
            type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"]
        }], readonly: [{
            type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"]
        }], tabindex: [{
            type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"]
        }], filterable: [{
            type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"]
        }], valueChange: [{
            type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Output"]
        }], filterChange: [{
            type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Output"]
        }], open: [{
            type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Output"]
        }], close: [{
            type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Output"]
        }], onFocus: [{
            type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Output"],
            args: ['focus']
        }], onBlur: [{
            type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Output"],
            args: ['blur']
        }], widgetClasses: [{
            type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["HostBinding"],
            args: ['class.k-widget']
        }, {
            type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["HostBinding"],
            args: ['class.k-autocomplete']
        }, {
            type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["HostBinding"],
            args: ['class.k-header']
        }], data: [{
            type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"]
        }], value: [{
            type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"]
        }], popupSettings: [{
            type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"]
        }], itemDisabled: [{
            type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"]
        }], tabIndex: [{
            type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"],
            args: ["tabIndex"]
        }], virtual: [{
            type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"]
        }], isFocused: [{
            type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["HostBinding"],
            args: ['class.k-state-focused']
        }], isDisabled: [{
            type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["HostBinding"],
            args: ['class.k-state-disabled']
        }], dir: [{
            type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["HostBinding"],
            args: ['attr.dir']
        }], valueField: [{
            type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"]
        }], loading: [{
            type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"]
        }], suggest: [{
            type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"]
        }], template: [{
            type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["ContentChild"],
            args: [ItemTemplateDirective]
        }], headerTemplate: [{
            type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["ContentChild"],
            args: [HeaderTemplateDirective]
        }], footerTemplate: [{
            type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["ContentChild"],
            args: [FooterTemplateDirective]
        }], noDataTemplate: [{
            type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["ContentChild"],
            args: [NoDataTemplateDirective]
        }], groupTemplate: [{
            type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["ContentChild"],
            args: [GroupTemplateDirective]
        }], fixedGroupTemplate: [{
            type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["ContentChild"],
            args: [FixedGroupTemplateDirective]
        }], container: [{
            type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["ViewChild"],
            args: ['container', { read: _angular_core__WEBPACK_IMPORTED_MODULE_0__["ViewContainerRef"] }]
        }], popupTemplate: [{
            type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["ViewChild"],
            args: ['popupTemplate']
        }], searchbar: [{
            type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["ViewChild"],
            args: [SearchBarComponent]
        }], optionsList: [{
            type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["ViewChild"],
            args: ['optionsList']
        }] }); })();

/**
 * @hidden
 */
const TOUCH_ENABLED = new _angular_core__WEBPACK_IMPORTED_MODULE_0__["InjectionToken"]('dropdowns-touch-enabled');

/**
 * @hidden
 */
/* tslint:disable:max-line-length */
/* tslint:disable:variable-name */
const MultiselectMessages = {
    'array': 'Expected values of array type. See http://www.telerik.com/kendo-angular-ui/components/dropdowns/multiselect/#value-selection',
    'object': 'Expected values of Object type. See http://www.telerik.com/kendo-angular-ui/components/dropdowns/multiselect/#value-selection',
    'primitive': 'Expected values of primitive type. See http://www.telerik.com/kendo-angular-ui/components/dropdowns/multiselect/#value-selection',
    'textAndValue': 'Expected textField and valueField options to be set. See http://www.telerik.com/kendo-angular-ui/components/dropdowns/multiselect/#toc-bind-to-arrays-of-complex-data'
};
/**
 * @hidden
 */
/* tslint:disable:max-line-length */
/* tslint:disable:variable-name */
const ComboBoxMessages = {
    'object': 'Expected value of type Object. See http://www.telerik.com/kendo-angular-ui/components/dropdowns/combobox/#toc-value-selection',
    'primitive': 'Expected value of primitive type. See http://www.telerik.com/kendo-angular-ui/components/dropdowns/combobox/#toc-value-selection',
    'textAndValue': 'Expected textField and valueField options to be set. See http://www.telerik.com/kendo-angular-ui/components/dropdowns/combobox/#toc-bind-to-arrays-of-complex-data',
    'noItemHeight': 'Expected virtual.itemHeight of type number.'
};
/**
 * @hidden
 */
/* tslint:disable:max-line-length */
/* tslint:disable:variable-name */
const DropDownListMessages = {
    'defaultItem': 'defaultItem and data items must be of same type. See http://www.telerik.com/kendo-angular-ui/components/dropdowns/api/DropDownListComponent/#toc-defaultitem',
    'object': 'Expected value of type Object. See http://www.telerik.com/kendo-angular-ui/components/dropdowns/dropdownlist/#toc-value-selection',
    'primitive': 'Expected value of primitive type. See http://www.telerik.com/kendo-angular-ui/components/dropdowns/dropdownlist/#toc-value-selection',
    'textAndValue': 'Expected textField and valueField options to be set. See http://www.telerik.com/kendo-angular-ui/components/dropdowns/dropdownlist/#toc-bind-to-arrays-of-complex-data'
};

/* tslint:disable:no-null-keyword */
/**
 * @hidden
 */
const COMBOBOX_VALUE_ACCESSOR = {
    multi: true,
    provide: _angular_forms__WEBPACK_IMPORTED_MODULE_2__["NG_VALUE_ACCESSOR"],
    // tslint:disable-next-line:no-use-before-declare
    useExisting: Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["forwardRef"])(() => ComboBoxComponent)
};
/**
 * Represents the [Kendo UI ComboBox component for Angular]({% slug overview_combobox %}).
 *
 * @example
 * ```ts
 * _@Component({
 * selector: 'my-app',
 * template: `
 *  <kendo-combobox [data]="listItems">
 *  </kendo-combobox>
 * `
 * })
 * class AppComponent {
 *   public listItems: Array<string> = ["Item 1", "Item 2", "Item 3", "Item 4"];
 * }
 * ```
 */
class ComboBoxComponent {
    constructor(localization, popupService, selectionService, navigationService, disabledItemsService, dataService, _zone, cdr, renderer, wrapper, touchEnabled) {
        this.localization = localization;
        this.popupService = popupService;
        this.selectionService = selectionService;
        this.navigationService = navigationService;
        this.disabledItemsService = disabledItemsService;
        this.dataService = dataService;
        this._zone = _zone;
        this.cdr = cdr;
        this.renderer = renderer;
        this.touchEnabled = touchEnabled;
        this.selected = [];
        /**
         * @hidden
         */
        this.focusableId = `k-${guid()}`;
        /**
         * Specifies whether the ComboBox allows user-defined values that are not present in the dataset
         * ([more information and examples]({% slug custom_values_combobox %})).
         * Defaults to `false`.
         */
        this.allowCustom = false;
        /**
         * A user-defined callback which returns normalized custom values.
         * Typically used when the data items are different from type `string`.
         * @param { Any } value - The custom value defined by the user.
         * @returns { Any }
         *
         * @example
         * ```ts
         * import { map } from 'rxjs/operators';
         *
         * _@Component({
         * selector: 'my-app',
         * template: `
         *   <kendo-combobox
         *       [allowCustom]="true"
         *       [data]="listItems"
         *       [textField]="'text'"
         *       [valueField]="'value'"
         *       [valueNormalizer]="valueNormalizer"
         *       (valueChange)="onValueChange($event)"
         *   >
         *   </kendo-combobox>
         * `
         * })
         *
         * class AppComponent {
         *   public listItems: Array<{ text: string, value: number }> = [
         *       { text: "Small", value: 1 },
         *       { text: "Medium", value: 2 },
         *       { text: "Large", value: 3 }
         *   ];
         *
         *   public onValueChange(value) {
         *       console.log("valueChange : ", value);
         *   }
         *
         *   public valueNormalizer = (text$: Observable<string>) => text$.pipe(map((text: string) => {
         *      return { ProductID: null, ProductName: text };
         *   }));
         *
         * }
         * ```
         */
        this.valueNormalizer = (text) => text.pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_5__["map"])((userInput) => userInput));
        /**
         * The hint that is displayed when the component is empty.
         *
         */
        this.placeholder = "";
        /**
         * Sets the height of the suggestions list. By default, `listHeight` is 200px.
         *
         * > The `listHeight` property affects only the list of suggestions and not the whole popup container.
         * > To set the height of the popup container, use `popupSettings.height`.
         */
        this.listHeight = 200;
        /**
         * Enables the auto-completion of the text based on the first data item.
         */
        this.suggest = false;
        /**
         * If set to `true`, renders a button on hovering over the component.
         * Clicking this button resets the value of the component to `undefined` and triggers the `change` event.
         */
        this.clearButton = true;
        /**
         * Sets the disabled state of the component.
         */
        this.disabled = false;
        /**
         * Sets the read-only state of the component.
         */
        this.readonly = false;
        /**
         * Specifies the [`tabindex`](https://developer.mozilla.org/en-US/docs/Web/HTML/Global_attributes/tabindex) of the component.
         */
        this.tabindex = 0;
        /**
         * Enables the [filtering]({% slug filtering_combobox %}) functionality.
         * If set to `true`, the component emits the `filterChange` event.
         */
        this.filterable = false;
        /**
         * Fires each time the value is changed&mdash;
         * when the component is blurred or the value is cleared through the **Clear** button
         * ([see example]({% slug overview_combobox %}#toc-events)).
         * When the value of the component is programmatically changed to `ngModel` or `formControl`
         * through its API or form binding, the `valueChange` event is not triggered because it
         * might cause a mix-up with the built-in `valueChange` mechanisms of the `ngModel` or `formControl` bindings.
         */
        this.valueChange = new _angular_core__WEBPACK_IMPORTED_MODULE_0__["EventEmitter"]();
        /**
         * Fires each time an item selection is changed
         * ([see example]({% slug overview_combobox %}#toc-events)).
         */
        this.selectionChange = new _angular_core__WEBPACK_IMPORTED_MODULE_0__["EventEmitter"]();
        /**
         * Fires each time the user types in the input field.
         * You can filter the source based on the passed filtration value
         * ([see example]({% slug overview_combobox %}#toc-events)).
         */
        this.filterChange = new _angular_core__WEBPACK_IMPORTED_MODULE_0__["EventEmitter"]();
        /**
         * Fires each time the popup is about to open.
         * This event is preventable. If you cancel it, the popup will remain closed.
         */
        this.open = new _angular_core__WEBPACK_IMPORTED_MODULE_0__["EventEmitter"]();
        /**
         * Fires each time the popup is about to close.
         * This event is preventable. If you cancel it, the popup will remain open.
         */
        this.close = new _angular_core__WEBPACK_IMPORTED_MODULE_0__["EventEmitter"]();
        /**
         * Fires each time the user focuses the ComboBox.
         */
        this.onFocus = new _angular_core__WEBPACK_IMPORTED_MODULE_0__["EventEmitter"](); //tslint:disable-line:no-output-rename
        /**
         * Fires each time the ComboBox gets blurred.
         */
        this.onBlur = new _angular_core__WEBPACK_IMPORTED_MODULE_0__["EventEmitter"](); //tslint:disable-line:no-output-rename
        this.widgetClasses = true;
        this.isFocused = false;
        this.listBoxId = guid();
        this.optionPrefix = guid();
        this.onChangeCallback = (_) => { };
        this.onTouchedCallback = (_) => { };
        this._filtering = false;
        this._text = '';
        this.filterText = '';
        this._open = false;
        this._popupSettings = { animate: true };
        this.popupMouseDownHandler = (event) => event.preventDefault();
        this.customValueSubject = new rxjs__WEBPACK_IMPORTED_MODULE_4__["Subject"]();
        this.valueSubject = new rxjs__WEBPACK_IMPORTED_MODULE_4__["Subject"]();
        this.clearValueSubject = new rxjs__WEBPACK_IMPORTED_MODULE_4__["Subject"]();
        this.selectionSubject = new rxjs__WEBPACK_IMPORTED_MODULE_4__["Subject"]();
        this.subs = new rxjs__WEBPACK_IMPORTED_MODULE_4__["Subscription"]();
        this.direction = localization.rtl ? 'rtl' : 'ltr';
        this.wrapper = wrapper.nativeElement;
        this.data = [];
    }
    get width() {
        let wrapperOffsetWidth = 0;
        if (Object(_progress_kendo_angular_common__WEBPACK_IMPORTED_MODULE_1__["isDocumentAvailable"])()) {
            wrapperOffsetWidth = this.wrapper.offsetWidth;
        }
        const width = this.popupSettings.width || wrapperOffsetWidth;
        const minWidth = isNaN(wrapperOffsetWidth) ? wrapperOffsetWidth : `${wrapperOffsetWidth}px`;
        const maxWidth = isNaN(width) ? width : `${width}px`;
        return { min: minWidth, max: maxWidth };
    }
    get height() {
        const popupHeight = this.popupSettings.height;
        return isPresent(popupHeight) ? `${popupHeight}px` : 'auto';
    }
    set text(text) {
        this._text = isPresent(text) ? text.toString() : "";
    }
    get text() {
        return this._text;
    }
    /**
     * @hidden
     */
    togglePopup(open) {
        const isDisabled = this.disabled || this.readonly;
        const sameState = this.isOpen === open;
        if (isDisabled || sameState) {
            return;
        }
        const isDefaultPrevented = this.triggerPopupEvents(open);
        if (!isDefaultPrevented) {
            this._toggle(open);
        }
    }
    get activeDescendant() {
        if (!this.isOpen || !isPresent(this.selectionService.focused) || this.selectionService.focused === -1) {
            return null;
        }
        const dataItem = this.dataService.itemAt(this.selectionService.focused);
        return this.optionPrefix + "-" + (dataItem ? getter(dataItem, this.valueField) : "");
    }
    get noDataLabel() {
        if (this.data.length === 0) {
            return this.noDataText;
        }
    }
    get clearTitle() {
        return this.localization.get('clearTitle');
    }
    get appendTo() {
        const { appendTo } = this.popupSettings;
        if (!appendTo || appendTo === 'root') {
            return undefined;
        }
        return appendTo === 'component' ? this.container : appendTo;
    }
    /**
     * Sets the data of the ComboBox.
     *
     * > The data has to be provided in an array-like list.
     */
    set data(data) {
        this.dataService.data = data || [];
        if (this.virtual) {
            this.virtual.skip = 0;
        }
        this.setState();
        if (this._filtering) {
            const queryAndDataPresent = this.text.length > 0 && this.dataService.itemsCount > 0;
            const index = queryAndDataPresent ? this.firstFocusableIndex(0) : -1;
            this.selectionService.focused = index;
        }
        if (this.suggest && this.dataService.itemsCount && this.text) {
            this.suggestedText = getter(this.dataService.itemAt(0), this.textField);
        }
    }
    get data() {
        const virtual = this.virtual;
        if (virtual) {
            const start = virtual.skip || 0;
            const end = start + virtual.pageSize;
            // Use length instead of itemsCount because of the grouping.
            virtual.total = this.dataService.data.length;
            return this.dataService.data.slice(start, end);
        }
        return this.dataService.data;
    }
    /**
     * Sets the value of the ComboBox.
     * It can either be of the primitive (string, numbers) or of the complex (objects) type.
     * To define the type, use the `valuePrimitive` option.
     *
     * > All selected values which are not present in the dataset are considered custom values.
     * > When the `Enter` key is pressed or the component loses focus, custom values get dismissed unless `allowCustom` is set to `true`.
     */
    set value(newValue) {
        this.verifySettings(newValue);
        this._value = newValue;
        this.cdr.markForCheck();
    }
    get value() {
        return this._value;
    }
    /**
     * Configures the popup of the ComboBox.
     *
     * The available options are:
     * - `animate: Boolean`&mdash;Controls the popup animation. By default, the open and close animations are enabled.
     * - `width: Number | String`&mdash;Sets the width of the popup container. By default, the width of the host element is used. If set to `auto`, the component automatically adjusts the width of the popup and no item labels are wrapped. The `auto` mode is not supported when virtual scrolling is enabled.
     * - `height: Number`&mdash;Sets the height of the popup container.
     * - `popupClass: String`&mdash;Specifies a list of CSS classes that are used to style the popup.
     * - `appendTo: "root" | "component" | ViewContainerRef`&mdash;Specifies the component to which the popup will be appended.
     */
    set popupSettings(settings) {
        this._popupSettings = Object.assign({ animate: true }, settings);
    }
    get popupSettings() {
        return this._popupSettings;
    }
    /**
     * Defines a Boolean function that is executed for each data item in the component
     * ([see examples]({% slug disableditems_combobox %})). Determines whether the item will be disabled.
     */
    set itemDisabled(fn) {
        if (typeof fn !== 'function') {
            throw new Error(`itemDisabled must be a function, but received ${JSON.stringify(fn)}.`);
        }
        this.disabledItemsService.itemDisabled = fn;
    }
    /**
     * @hidden
     */
    set tabIndex(tabIndex) {
        this.tabindex = tabIndex;
    }
    get tabIndex() {
        return this.tabindex;
    }
    /**
     * Enables the [virtualization]({% slug virtualization_combobox %}) functionality.
     */
    set virtual(settings) {
        this._virtualSettings = normalizeVirtualizationSettings(settings);
    }
    get virtual() {
        return this._virtualSettings;
    }
    get clearable() {
        return this.clearButton;
    }
    get dir() {
        return this.direction;
    }
    ngOnInit() {
        this.renderer.removeAttribute(this.wrapper, "tabindex");
        this.attachStreams();
        this.createSelectionStream();
        this.createValueStream();
        this.setMessages();
    }
    createValueStream() {
        const valueStream = this.valueSubject.pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_5__["filter"])((candidate) => {
            const valueFrom = this.prop(this.valueField, this.valuePrimitive);
            const textFrom = this.prop(this.textField, this.valuePrimitive);
            const current = valueFrom(this.value);
            const newValue = valueFrom(candidate);
            let newText = textFrom(candidate);
            if (!isPresent(this.value) && !isPresent(newValue)) {
                return false;
            }
            if (isPresent(newText)) {
                newText = newText.toString();
            }
            if (current === newValue && this.text === newText) {
                this.clearFilter();
                return false;
            }
            else {
                return true;
            }
        }), Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_5__["map"])((candidate) => {
            const valueFrom = this.prop(this.valueField, this.valuePrimitive);
            const textFrom = this.prop(this.textField, this.valuePrimitive);
            const newValue = valueFrom(candidate);
            const newText = textFrom(candidate);
            return {
                dataItem: candidate,
                text: newText,
                value: this.valuePrimitive ? newValue : candidate
            };
        }));
        const customValueStreams = Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_5__["partition"])(() => this.allowCustom)(this.customValueSubject.pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_5__["throttleTime"])(300)));
        const allowCustomValueStream = customValueStreams[0].pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_5__["tap"])(() => {
            this.loading = true;
            this.disabled = true;
            this.cdr.detectChanges();
        }), Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_5__["filter"])(() => {
            const valueFrom = this.prop(this.valueField, this.valuePrimitive);
            const hasChange = this.text !== valueFrom(this.value);
            this.loading = hasChange;
            this.disabled = hasChange;
            if (!hasChange) {
                this.clearFilter();
            }
            return hasChange;
        }), this.valueNormalizer, Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_5__["map"])((normalizedValue) => {
            return {
                custom: true,
                dataItem: normalizedValue,
                text: this.text,
                value: normalizedValue
            };
        }));
        const disableCustomValueStream = customValueStreams[1].pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_5__["map"])(() => {
            return {
                custom: true,
                dataItem: undefined,
                text: undefined,
                value: undefined
            };
        }));
        const clearValueStream = this.clearValueSubject.pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_5__["map"])(() => ({
            dataItem: undefined,
            text: undefined,
            value: undefined
        })));
        if (this.valueSubscription) {
            this.valueSubscription.unsubscribe();
        }
        const merged = Object(rxjs__WEBPACK_IMPORTED_MODULE_4__["merge"])(valueStream, allowCustomValueStream, disableCustomValueStream, clearValueStream);
        this.valueSubscription = merged.pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_5__["catchError"])(() => {
            this.dataItem = undefined;
            this.value = undefined;
            this.text = undefined;
            this.loading = false;
            this.disabled = false;
            this.emitSelectionChange(undefined);
            this.emitValueChange();
            this.createValueStream();
            return Object(rxjs__WEBPACK_IMPORTED_MODULE_4__["of"])(null);
        }))
            .subscribe((state) => {
            this.dataItem = state.dataItem;
            this.value = state.value;
            this.text = state.text;
            this.loading = false;
            this.disabled = false;
            this.clearFilter();
            if (state.custom) {
                this.selectionService.focused = -1;
            }
            this.emitSelectionChange(state.custom ? undefined : this.dataItem);
            this.emitValueChange();
        });
    }
    attachStreams() {
        if (!Object(_progress_kendo_angular_common__WEBPACK_IMPORTED_MODULE_1__["isDocumentAvailable"])()) {
            return;
        }
        this.subs.add(this.localization
            .changes.subscribe(({ rtl }) => {
            this.direction = rtl ? 'rtl' : 'ltr';
            this.setMessages();
        }));
        this.subs.add(Object(rxjs__WEBPACK_IMPORTED_MODULE_4__["merge"])(this.navigationService.up, this.navigationService.down, this.navigationService.home, this.navigationService.end)
            .pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_5__["filter"])((event) => isPresent(event.index)))
            .subscribe((event) => this.navigate(event.index)));
        this.subs.add(this.navigationService.open.subscribe(this.handleNavigationOpen.bind(this)));
        this.subs.add(this.navigationService.close.subscribe(() => this.togglePopup(false)));
        this.subs.add(this.navigationService.esc.subscribe(this.handleEscape.bind(this)));
        this.subs.add(this.navigationService.enter.pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_5__["tap"])((event) => {
            if (this.isOpen) {
                event.originalEvent.preventDefault();
            }
        }))
            .subscribe(this.handleEnter.bind(this)));
        this.subs.add(Object(rxjs__WEBPACK_IMPORTED_MODULE_4__["merge"])(this.selectionService.onChange, this.selectionService.onSelect.pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_5__["filter"])(_ => !this.isOpen)))
            .pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_5__["tap"])(_ => {
            this._filtering = false;
            this.togglePopup(false);
        }), Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_5__["map"])((event) => this.dataService.itemAt(event.indices[0])))
            .subscribe(dataItem => {
            this.change(dataItem);
        }));
        this.subs.add(this.selectionService.onSelect.pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_5__["filter"])(_ => this.isOpen), Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_5__["tap"])(_ => this._filtering = false), Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_5__["map"])((event) => this.dataService.itemAt(event.indices[0])))
            .subscribe(dataItem => {
            this.updateState({ dataItem });
            this.emitSelectionChange(dataItem);
        }));
    }
    ngOnDestroy() {
        this.destroyPopup();
        clearTimeout(this.messagesTimeout);
        this.subs.unsubscribe();
        [this.valueSubscription, this.selectionSubscription].forEach(sub => isPresent(sub) && sub.unsubscribe());
    }
    ngOnChanges(changes) {
        const virtual = this.virtual;
        const requestInitialData = virtual && changes.data && changes.data.isFirstChange();
        if (requestInitialData) {
            this.pageChange({ skip: 0, take: virtual.pageSize });
        }
        if (this.valuePrimitive === undefined) {
            this.valuePrimitive = this.valueField ? false : true;
        }
        this.verifySettings(this.value);
        if (Object(_progress_kendo_angular_common__WEBPACK_IMPORTED_MODULE_1__["isChanged"])("valueNormalizer", changes)) {
            this.createValueStream();
        }
        if (Object(_progress_kendo_angular_common__WEBPACK_IMPORTED_MODULE_1__["isChanged"])("value", changes)) {
            this.createSelectionStream();
        }
        if (this.valuePrimitive === undefined) {
            this.valuePrimitive = this.valueField ? false : true;
        }
        const STATE_PROPS = /(value|textField|valueField|valuePrimitive)/g;
        if (STATE_PROPS.test(Object.keys(changes).join())) {
            this.setState();
        }
    }
    /**
     * Focuses the ComboBox.
     */
    focus() {
        if (!this.disabled) {
            this.searchbar.focus();
        }
    }
    /**
     * Blurs the ComboBox.
     */
    blur() {
        if (!this.disabled) {
            this.searchbar.blur();
        }
    }
    /**
     * Toggles the visibility of the popup. If you use the `toggle` method to open or close the popup,
     * the `open` and `close` events will not be fired.
     *
     * @param open - The state of the popup.
     */
    toggle(open) {
        Promise.resolve(null).then(() => {
            this._toggle(open);
            this.cdr.markForCheck();
        });
    }
    /**
     * Returns the current open state of the popup.
     */
    get isOpen() {
        return this._open;
    }
    /**
     * Resets the value of the ComboBox.
     * If you use the `reset` method to clear the value of the component,
     * the model will not update automatically and the `selectionChange` and `valueChange` events will not be fired.
     */
    reset() {
        this.value = undefined;
        this.clearState();
        this.resetSelection();
        this.createSelectionStream();
    }
    /**
     * @hidden
     *
     * Used by the TextBoxContainer to determine if the floating label
     * should be rendered in the input when the component is not focused.
     */
    isEmpty() {
        const textEmpty = !isPresent(this.text) || isEmptyString(this.text);
        const valueEmpty = !isPresent(this.value) || isEmptyString(this.value);
        return textEmpty && valueEmpty;
    }
    /**
     * @hidden
     */
    clearValue(event) {
        event.stopImmediatePropagation();
        this.focus();
        this._filtering = true;
        this._previousDataItem = undefined;
        this.selectionService.resetSelection([]);
        this.clearValueSubject.next();
        this._filtering = false;
    }
    /**
     * @hidden
     */
    writeValue(value) {
        this.text = "";
        this.value = value === null ? undefined : value;
        this.setState();
        this.createSelectionStream();
    }
    /**
     * @hidden
     */
    registerOnChange(fn) {
        this.onChangeCallback = fn;
    }
    /**
     * @hidden
     */
    registerOnTouched(fn) {
        this.onTouchedCallback = fn;
    }
    /**
     * @hidden
     */
    setDisabledState(isDisabled) {
        this.disabled = isDisabled;
    }
    /**
     * @hidden
     */
    get buttonClasses() {
        return this.loading ? 'k-i-loading' : this.iconClass || 'k-i-arrow-s';
    }
    /**
     * @hidden
     */
    onResize() {
        if (this.isOpen) {
            const popupWrapper = this.popupRef.popupElement;
            const { min, max } = this.width;
            popupWrapper.style.minWidth = min;
            popupWrapper.style.width = max;
        }
    }
    verifySettings(newValue) {
        const valueOrText = !isPresent(this.valueField) !== !isPresent(this.textField);
        if (!Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["isDevMode"])()) {
            return;
        }
        if (this.valuePrimitive === true && isPresent(newValue) && typeof newValue === "object") {
            throw new Error(ComboBoxMessages.primitive);
        }
        if (this.valuePrimitive === false && isPresent(newValue) && typeof newValue !== "object") {
            throw new Error(ComboBoxMessages.object);
        }
        if (valueOrText) {
            throw new Error(ComboBoxMessages.textAndValue);
        }
        if (this.virtual && isNaN(this.virtual.itemHeight)) {
            throw new Error(ComboBoxMessages.noItemHeight);
        }
    }
    setState() {
        // Filtering in process, do nothing.
        if (this._filtering) {
            return;
        }
        const value = this.value;
        const valueField = this.valueField;
        const primitive = this.valuePrimitive;
        const resolved = this.findDataItem({ primitive, valueField, value });
        if (isPresent(resolved.dataItem)) {
            this.updateState({ dataItem: resolved.dataItem, confirm: true });
            this.resetSelection(resolved.index);
        }
        else if (isPresent(value) && this.allowCustom) {
            this.updateState({ dataItem: value });
            this.resetSelection(-1);
        }
        else if (this._previousDataItem && this.value) {
            this.updateState({ dataItem: this._previousDataItem });
            this.resetSelection();
        }
        else {
            this.clearState();
            this.resetSelection(-1);
        }
    }
    updateState({ dataItem, confirm = false }) {
        this.dataItem = dataItem;
        this.text = this.prop(this.textField, this.valuePrimitive)(dataItem);
        if (confirm) {
            this._previousDataItem = dataItem;
        }
    }
    clearState() {
        this.text = undefined;
        this.dataItem = undefined;
    }
    resetSelection(index) {
        const clear = !isPresent(index) || index < 0;
        this.selectionService.resetSelection(clear ? [] : [index]);
        this.selectionService.focused = index;
    }
    firstFocusableIndex(index) {
        const maxIndex = this.data.length - 1;
        if (this.disabledItemsService.isIndexDisabled(index)) {
            return (index < maxIndex) ? this.firstFocusableIndex(index + 1) : undefined;
        }
        else {
            return index;
        }
    }
    findIndexPredicate(text) {
        if (this.dataService.grouped) {
            return (item) => {
                let itemText = this.prop(this.textField, this.valuePrimitive)(item.value);
                itemText = !isPresent(itemText) ? "" : itemText.toString().toLowerCase();
                return itemText.startsWith(text.toLowerCase());
            };
        }
        else {
            return (item) => {
                let itemText = this.prop(this.textField, this.valuePrimitive)(item);
                itemText = !isPresent(itemText) ? "" : itemText.toString().toLowerCase();
                return itemText.startsWith(text.toLowerCase());
            };
        }
    }
    prop(field, usePrimitive) {
        return (dataItem) => {
            if (isPresent(dataItem)) {
                if (usePrimitive) {
                    return field && isObject(dataItem) ? dataItem[field] : dataItem;
                }
                else {
                    return dataItem[field];
                }
            }
            return null;
        };
    }
    findDataItem({ primitive, valueField, value }) {
        const result = {
            dataItem: null,
            index: -1
        };
        const prop = this.prop(valueField, primitive);
        let comparer;
        if (this.dataService.grouped) {
            comparer = (element) => {
                return prop(element.value) === prop(value);
            };
        }
        else {
            comparer = (element) => {
                return prop(element) === prop(value);
            };
        }
        const index = this.dataService.findIndex(comparer);
        result.dataItem = this.dataService.itemAt(index);
        result.index = index;
        return result;
    }
    search(text, startFrom = 0) {
        let index;
        if (text.length && this.dataService.itemsCount) {
            index = this.dataService.findIndex(this.findIndexPredicate(text), startFrom);
        }
        else {
            index = -1;
        }
        if (this.disabledItemsService.isIndexDisabled(index)) {
            if (index + 1 < this.dataService.itemsCount) {
                this.search(text, index + 1);
            }
            else {
                this.selectionService.focus(-1);
            }
        }
        else {
            this.selectionService.focus(index);
            if (this.suggest) {
                this.suggestedText = getter(this.dataService.itemAt(index), this.textField);
            }
        }
    }
    /**
     * @hidden
     */
    getSuggestion() {
        const hasSelected = !!this.selectionService.selected.length;
        const shouldSuggest = this.suggest && !this.backspacePressed && this.suggestedText && this.text;
        if (!hasSelected && shouldSuggest && this.suggestedText.toLowerCase().startsWith(this.text.toLowerCase())) {
            return this.suggestedText;
        }
        else {
            this.suggestedText = undefined;
        }
    }
    navigate(index) {
        if (this.dataService.itemsCount === 0) {
            return;
        }
        this.text = this.prop(this.textField, this.valuePrimitive)(this.dataService.itemAt(index));
        this.selectionService.select(index);
    }
    /**
     * @hidden
     */
    handleNavigate(event) {
        const hasSelected = isPresent(this.selectionService.selected[0]);
        const focused = isNaN(this.selectionService.focused) ? this.firstFocusableIndex(0) : this.selectionService.focused;
        let offset = 0;
        if (this.disabled || this.readonly) {
            return;
        }
        if (event.keyCode === Keys.home || event.keyCode === Keys.end) {
            return;
        }
        if (!hasSelected) {
            if (event.keyCode === Keys.down) {
                offset = -1;
            }
            else if (event.keyCode === Keys.up) {
                offset = 1;
            }
        }
        const action = this.navigationService.process({
            current: offset + focused,
            max: this.dataService.itemsCount - 1,
            min: 0,
            originalEvent: event
        });
        if (action !== NavigationAction.Undefined &&
            action !== NavigationAction.Left &&
            action !== NavigationAction.Right &&
            action !== NavigationAction.Backspace &&
            action !== NavigationAction.Delete &&
            ((action === NavigationAction.Enter && this.isOpen) || action !== NavigationAction.Enter)) {
            event.preventDefault();
        }
    }
    handleEnter() {
        const text = this.text;
        const focused = this.selectionService.focused;
        const hasFocused = isPresent(focused) && focused !== -1;
        const previousText = getter(this._previousDataItem, this.textField) || "";
        const focusedItemText = getter(this.dataService.itemAt(focused), this.textField);
        const textHasChanged = text !== previousText;
        this.togglePopup(false);
        this._filtering = false;
        if (this.allowCustom && textHasChanged) {
            if (text === focusedItemText || this.useSuggestion()) {
                this.selectionService.change(focused);
            }
            else {
                this.change(text, true);
            }
        }
        if (!this.allowCustom) {
            if (hasFocused) {
                this.selectionService.change(focused);
            }
            else if (textHasChanged) {
                this.change(text, true);
            }
        }
    }
    /**
     * @hidden
     */
    handleBlur() {
        this._filtering = false;
        const currentText = this.searchbar.value; // The value is updated, but the Angular `change` event is not emitted yet and `this.text` is not updated. Fails on suggested text.
        if (!currentText && !isPresent(this._previousDataItem) && !isPresent(this.dataItem)) {
            this.togglePopup(false);
            this.isFocused = false;
            this.onBlur.emit();
            this.onTouchedCallback();
            return;
        }
        const focused = this.selectionService.focused;
        let itemText;
        const isItemFocused = focused !== -1 && focused !== undefined;
        if (isItemFocused) {
            itemText = getter(this.dataService.itemAt(focused), this.textField);
            itemText = !isPresent(itemText) ? "" : itemText.toString().toLowerCase();
        }
        if (itemText === currentText.toLowerCase()) {
            this.selectionService.change(focused);
        }
        else {
            this.change(currentText, true);
        }
        this.togglePopup(false);
        this.isFocused = false;
        this.onBlur.emit();
        this.onTouchedCallback();
    }
    /**
     * @hidden
     */
    handleEscape() {
        this.togglePopup(false);
        // clear the focus only if the focused item is not selected
        const hasSelected = this.selectionService.selected.length > 0;
        if (!hasSelected) {
            this.suggestedText = null;
            this.selectionService.focused = -1;
        }
    }
    /**
     * @hidden
     */
    handleNavigationOpen() {
        this.restoreItemFocus();
        this.togglePopup(true);
    }
    /**
     * @hidden
     */
    searchBarChange(text) {
        const currentTextLength = this.text ? this.text.length : 0;
        this.backspacePressed = (text.length < currentTextLength) ? true : false;
        this.text = text;
        // Reset the selection prior to filter. If a match is present, it will be resolved. If a match is not present, it is not needed.
        this.selectionService.resetSelection([]);
        this.togglePopup(true);
        this._filtering = true;
        if (this.filterable && this.filterText !== text) {
            this.filterText = text;
            this.filterChange.emit(text);
        }
        else {
            this.search(text);
        }
    }
    /**
     * @hidden
     */
    handleFocus() {
        this.isFocused = true;
        this.onFocus.emit();
    }
    /**
     * @hidden
     */
    pageChange(event) {
        const virtual = this.virtual;
        virtual.skip = event.skip;
    }
    change(candidate, isCustom = false) {
        if (isCustom) {
            this.customValueSubject.next(candidate);
        }
        else {
            this.valueSubject.next(candidate);
        }
    }
    emitSelectionChange(dataItem) {
        this.selectionSubject.next(dataItem);
    }
    emitValueChange() {
        this.onChangeCallback(this.value);
        this.valueChange.emit(this.value);
        this._previousDataItem = this.dataItem;
    }
    /**
     * @hidden
     */
    selectClick() {
        if (!this.touchEnabled) {
            this.searchbar.focus();
        }
        if (!this.isOpen) {
            this.restoreItemFocus();
        }
        this.togglePopup(!this.isOpen);
    }
    get listContainerClasses() {
        const containerClasses = ['k-list-container', 'k-reset'];
        if (this.popupSettings.popupClass) {
            containerClasses.push(this.popupSettings.popupClass);
        }
        return containerClasses;
    }
    /**
     * Focuses the first match when there's text in the input field, but no focused item.
     */
    restoreItemFocus() {
        const hasFocus = isPresent(this.selectionService.focused) && this.selectionService.focused > -1;
        if (!hasFocus && this.text && this.dataService.itemsCount) {
            if (this.filterable) {
                this.selectionService.focused = this.firstFocusableIndex(0);
            }
            else {
                this.search(this.text);
            }
        }
    }
    useSuggestion() {
        if (!(this.suggest && isPresent(this.searchbar.value))) {
            return false;
        }
        const focusedDataItem = this.dataService.itemAt(this.selectionService.focused);
        const focusedItemText = this.prop(this.textField, this.valuePrimitive)(focusedDataItem);
        if (!isPresent(focusedItemText)) {
            return false;
        }
        return this.searchbar.value.toLowerCase() === focusedItemText.toLowerCase();
    }
    destroyPopup() {
        if (this.popupRef) {
            this.popupRef.popupElement
                .removeEventListener('mousedown', this.popupMouseDownHandler);
            this.popupRef.close();
            this.popupRef = null;
        }
    }
    createPopup() {
        if (this.virtual) {
            this.virtual.skip = 0;
        }
        const horizontalAlign = this.direction === "rtl" ? "right" : "left";
        const anchorPosition = { horizontal: horizontalAlign, vertical: "bottom" };
        const popupPosition = { horizontal: horizontalAlign, vertical: "top" };
        this.popupRef = this.popupService.open({
            anchor: this.wrapper,
            animate: this.popupSettings.animate,
            appendTo: this.appendTo,
            content: this.popupTemplate,
            popupClass: this.listContainerClasses,
            positionMode: 'absolute',
            anchorAlign: anchorPosition,
            popupAlign: popupPosition
        });
        const popupWrapper = this.popupRef.popupElement;
        const { min, max } = this.width;
        popupWrapper.addEventListener('mousedown', this.popupMouseDownHandler);
        popupWrapper.style.minWidth = min;
        popupWrapper.style.width = max;
        popupWrapper.style.height = this.height;
        popupWrapper.setAttribute("dir", this.direction);
        this.popupRef.popupOpen.subscribe(() => {
            this.cdr.detectChanges();
            this.optionsList.scrollToItem(this.selectionService.focused);
        });
        this.popupRef.popupAnchorViewportLeave.subscribe(() => this.togglePopup(false));
    }
    _toggle(open) {
        this._open = (open === undefined) ? !this._open : open;
        this.destroyPopup();
        if (this._open) {
            this.createPopup();
        }
    }
    triggerPopupEvents(open) {
        const eventArgs = new PreventableEvent();
        if (open) {
            this.open.emit(eventArgs);
        }
        else {
            this.close.emit(eventArgs);
        }
        return eventArgs.isDefaultPrevented();
    }
    clearFilter() {
        if (!(this.filterable && this.filterText)) {
            return;
        }
        this.filterText = '';
        this.filterChange.emit(this.filterText);
    }
    setMessages() {
        this._zone.runOutsideAngular(() => {
            clearTimeout(this.messagesTimeout);
            this.messagesTimeout = setTimeout(() => {
                this.noDataText = this.localization.get('noDataText');
                this.cdr.detectChanges();
            });
        });
    }
    createSelectionStream() {
        if (isPresent(this.selectionSubscription)) {
            this.selectionSubscription.unsubscribe();
        }
        this.selectionSubscription = this.selectionSubject
            .pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_5__["distinctUntilChanged"])())
            .subscribe(dataItem => this.selectionChange.emit(dataItem));
    }
}
ComboBoxComponent.ɵfac = function ComboBoxComponent_Factory(t) { return new (t || ComboBoxComponent)(_angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](_progress_kendo_angular_l10n__WEBPACK_IMPORTED_MODULE_3__["LocalizationService"]), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](_progress_kendo_angular_popup__WEBPACK_IMPORTED_MODULE_6__["PopupService"]), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](SelectionService), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](NavigationService), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](DisabledItemsService), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](DataService), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](_angular_core__WEBPACK_IMPORTED_MODULE_0__["NgZone"]), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](_angular_core__WEBPACK_IMPORTED_MODULE_0__["ChangeDetectorRef"]), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](_angular_core__WEBPACK_IMPORTED_MODULE_0__["Renderer2"]), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](_angular_core__WEBPACK_IMPORTED_MODULE_0__["ElementRef"]), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](TOUCH_ENABLED, 8)); };
ComboBoxComponent.ɵcmp = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdefineComponent"]({ type: ComboBoxComponent, selectors: [["kendo-combobox"]], contentQueries: function ComboBoxComponent_ContentQueries(rf, ctx, dirIndex) { if (rf & 1) {
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵcontentQuery"](dirIndex, ItemTemplateDirective, true);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵcontentQuery"](dirIndex, HeaderTemplateDirective, true);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵcontentQuery"](dirIndex, FooterTemplateDirective, true);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵcontentQuery"](dirIndex, NoDataTemplateDirective, true);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵcontentQuery"](dirIndex, GroupTemplateDirective, true);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵcontentQuery"](dirIndex, FixedGroupTemplateDirective, true);
    } if (rf & 2) {
        var _t;
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵqueryRefresh"](_t = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵloadQuery"]()) && (ctx.template = _t.first);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵqueryRefresh"](_t = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵloadQuery"]()) && (ctx.headerTemplate = _t.first);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵqueryRefresh"](_t = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵloadQuery"]()) && (ctx.footerTemplate = _t.first);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵqueryRefresh"](_t = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵloadQuery"]()) && (ctx.noDataTemplate = _t.first);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵqueryRefresh"](_t = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵloadQuery"]()) && (ctx.groupTemplate = _t.first);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵqueryRefresh"](_t = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵloadQuery"]()) && (ctx.fixedGroupTemplate = _t.first);
    } }, viewQuery: function ComboBoxComponent_Query(rf, ctx) { if (rf & 1) {
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵviewQuery"](_c9, true, _angular_core__WEBPACK_IMPORTED_MODULE_0__["ViewContainerRef"]);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵviewQuery"](_c10, true);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵviewQuery"](SearchBarComponent, true);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵviewQuery"](_c11, true);
    } if (rf & 2) {
        var _t;
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵqueryRefresh"](_t = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵloadQuery"]()) && (ctx.container = _t.first);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵqueryRefresh"](_t = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵloadQuery"]()) && (ctx.popupTemplate = _t.first);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵqueryRefresh"](_t = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵloadQuery"]()) && (ctx.searchbar = _t.first);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵqueryRefresh"](_t = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵloadQuery"]()) && (ctx.optionsList = _t.first);
    } }, hostVars: 9, hostBindings: function ComboBoxComponent_HostBindings(rf, ctx) { if (rf & 2) {
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵattribute"]("dir", ctx.dir);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵclassProp"]("k-widget", ctx.widgetClasses)("k-combobox", ctx.widgetClasses)("k-header", ctx.widgetClasses)("k-combobox-clearable", ctx.clearable);
    } }, inputs: { focusableId: "focusableId", allowCustom: "allowCustom", valueNormalizer: "valueNormalizer", placeholder: "placeholder", listHeight: "listHeight", suggest: "suggest", clearButton: "clearButton", disabled: "disabled", readonly: "readonly", tabindex: "tabindex", filterable: "filterable", data: "data", value: "value", popupSettings: "popupSettings", itemDisabled: "itemDisabled", tabIndex: "tabIndex", virtual: "virtual", loading: "loading", valuePrimitive: "valuePrimitive", textField: "textField", valueField: "valueField", iconClass: "iconClass" }, outputs: { valueChange: "valueChange", selectionChange: "selectionChange", filterChange: "filterChange", open: "open", close: "close", onFocus: "focus", onBlur: "blur" }, exportAs: ["kendoComboBox"], features: [_angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵProvidersFeature"]([
            COMBOBOX_VALUE_ACCESSOR,
            DataService,
            SelectionService,
            NavigationService,
            DisabledItemsService,
            _progress_kendo_angular_l10n__WEBPACK_IMPORTED_MODULE_3__["LocalizationService"],
            {
                provide: _progress_kendo_angular_l10n__WEBPACK_IMPORTED_MODULE_3__["L10N_PREFIX"],
                useValue: 'kendo.combobox'
            },
            {
                provide: FilterableDropDownComponentBase, useExisting: Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["forwardRef"])(() => ComboBoxComponent)
            },
            {
                provide: _progress_kendo_angular_common__WEBPACK_IMPORTED_MODULE_1__["KendoInput"], useExisting: Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["forwardRef"])(() => ComboBoxComponent)
            }
        ]), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵNgOnChangesFeature"]], decls: 14, vars: 20, consts: [["kendoComboBoxLocalizedMessages", "", 6, "noDataText", "clearTitle"], ["unselectable", "on", 1, "k-dropdown-wrap", 3, "ngClass"], ["wrapper", ""], [3, "role", "id", "listId", "activeDescendant", "noDataLabel", "userInput", "suggestedText", "disabled", "readonly", "tabIndex", "popupOpen", "placeholder", "onNavigate", "valueChange", "onBlur", "onFocus"], ["searchbar", ""], ["class", "k-icon k-clear-value k-i-close", "role", "button", "tabindex", "-1", 3, "click", "mousedown", 4, "ngIf"], ["unselectable", "on", 1, "k-select", 3, "click", "mousedown"], [1, "k-icon", 3, "ngClass"], ["popupTemplate", ""], [3, "ngIf"], ["container", ""], ["role", "button", "tabindex", "-1", 1, "k-icon", "k-clear-value", "k-i-close", 3, "click", "mousedown"], [4, "ngIf"], [3, "id", "optionPrefix", "data", "textField", "valueField", "template", "groupTemplate", "fixedGroupTemplate", "height", "show", "virtual", "pageChange"], ["optionsList", ""], ["class", "k-nodata", 4, "ngIf"], [3, "templateContext"], [1, "k-nodata"], [3, "ngIf", "templateContext"], [3, "resize"]], template: function ComboBoxComponent_Template(rf, ctx) { if (rf & 1) {
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementContainerStart"](0, 0);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵi18nAttributes"](1, _c22);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementContainerEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](2, "span", 1, 2);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](4, "kendo-searchbar", 3, 4);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵlistener"]("onNavigate", function ComboBoxComponent_Template_kendo_searchbar_onNavigate_4_listener($event) { return ctx.handleNavigate($event); })("valueChange", function ComboBoxComponent_Template_kendo_searchbar_valueChange_4_listener($event) { return ctx.searchBarChange($event); })("onBlur", function ComboBoxComponent_Template_kendo_searchbar_onBlur_4_listener() { return ctx.handleBlur(); })("onFocus", function ComboBoxComponent_Template_kendo_searchbar_onFocus_4_listener() { return ctx.handleFocus(); });
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](6, ComboBoxComponent_span_6_Template, 1, 1, "span", 5);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](7, "span", 6);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵlistener"]("click", function ComboBoxComponent_Template_span_click_7_listener() { return ctx.selectClick(); })("mousedown", function ComboBoxComponent_Template_span_mousedown_7_listener($event) { return $event.preventDefault(); });
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](8, "span", 7);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](9, ComboBoxComponent_ng_template_9_Template, 5, 14, "ng-template", null, 8, _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplateRefExtractor"]);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](11, ComboBoxComponent_ng_template_11_Template, 1, 0, "ng-template", 9);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementContainer"](12, null, 10);
    } if (rf & 2) {
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](2);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngClass", _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpureFunction3"](16, _c23, !ctx.disabled, ctx.disabled, ctx.isFocused));
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](2);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("role", "combobox")("id", ctx.focusableId)("listId", ctx.listBoxId)("activeDescendant", ctx.activeDescendant)("noDataLabel", ctx.noDataLabel)("userInput", ctx.text)("suggestedText", ctx.getSuggestion())("disabled", ctx.disabled)("readonly", ctx.readonly)("tabIndex", ctx.tabIndex)("popupOpen", ctx.isOpen)("placeholder", ctx.placeholder);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](2);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngIf", !ctx.loading && !ctx.readonly && (ctx.clearButton && (ctx.text == null ? null : ctx.text.length)));
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](2);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngClass", ctx.buttonClasses);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](3);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngIf", ctx.isOpen);
    } }, directives: function () { return [LocalizedMessagesDirective, _angular_common__WEBPACK_IMPORTED_MODULE_7__["NgClass"], SearchBarComponent, _angular_common__WEBPACK_IMPORTED_MODULE_7__["NgIf"], ListComponent,
        TemplateContextDirective, _progress_kendo_angular_common__WEBPACK_IMPORTED_MODULE_1__["ResizeSensorComponent"]]; }, encapsulation: 2 });
/** @nocollapse */
ComboBoxComponent.ctorParameters = () => [
    { type: _progress_kendo_angular_l10n__WEBPACK_IMPORTED_MODULE_3__["LocalizationService"] },
    { type: _progress_kendo_angular_popup__WEBPACK_IMPORTED_MODULE_6__["PopupService"] },
    { type: SelectionService },
    { type: NavigationService },
    { type: DisabledItemsService },
    { type: DataService },
    { type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["NgZone"] },
    { type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["ChangeDetectorRef"] },
    { type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Renderer2"] },
    { type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["ElementRef"] },
    { type: Boolean, decorators: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Optional"] }, { type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Inject"], args: [TOUCH_ENABLED,] }] }
];
ComboBoxComponent.propDecorators = {
    focusableId: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"] }],
    allowCustom: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"] }],
    data: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"] }],
    value: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"] }],
    textField: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"] }],
    valueField: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"] }],
    valuePrimitive: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"] }],
    valueNormalizer: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"] }],
    placeholder: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"] }],
    popupSettings: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"] }],
    listHeight: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"] }],
    iconClass: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"] }],
    loading: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"] }],
    suggest: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"] }],
    clearButton: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"] }],
    disabled: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"] }],
    itemDisabled: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"] }],
    readonly: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"] }],
    tabindex: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"] }],
    tabIndex: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"], args: ["tabIndex",] }],
    filterable: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"] }],
    virtual: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"] }],
    valueChange: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Output"] }],
    selectionChange: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Output"] }],
    filterChange: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Output"] }],
    open: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Output"] }],
    close: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Output"] }],
    onFocus: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Output"], args: ['focus',] }],
    onBlur: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Output"], args: ['blur',] }],
    template: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["ContentChild"], args: [ItemTemplateDirective,] }],
    headerTemplate: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["ContentChild"], args: [HeaderTemplateDirective,] }],
    footerTemplate: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["ContentChild"], args: [FooterTemplateDirective,] }],
    noDataTemplate: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["ContentChild"], args: [NoDataTemplateDirective,] }],
    groupTemplate: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["ContentChild"], args: [GroupTemplateDirective,] }],
    fixedGroupTemplate: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["ContentChild"], args: [FixedGroupTemplateDirective,] }],
    container: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["ViewChild"], args: ['container', { read: _angular_core__WEBPACK_IMPORTED_MODULE_0__["ViewContainerRef"] },] }],
    popupTemplate: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["ViewChild"], args: ['popupTemplate',] }],
    searchbar: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["ViewChild"], args: [SearchBarComponent,] }],
    optionsList: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["ViewChild"], args: ['optionsList',] }],
    widgetClasses: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["HostBinding"], args: ['class.k-widget',] }, { type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["HostBinding"], args: ['class.k-combobox',] }, { type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["HostBinding"], args: ['class.k-header',] }],
    clearable: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["HostBinding"], args: ['class.k-combobox-clearable',] }],
    dir: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["HostBinding"], args: ['attr.dir',] }]
};
/*@__PURE__*/ (function () { _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵsetClassMetadata"](ComboBoxComponent, [{
        type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Component"],
        args: [{
                exportAs: 'kendoComboBox',
                providers: [
                    COMBOBOX_VALUE_ACCESSOR,
                    DataService,
                    SelectionService,
                    NavigationService,
                    DisabledItemsService,
                    _progress_kendo_angular_l10n__WEBPACK_IMPORTED_MODULE_3__["LocalizationService"],
                    {
                        provide: _progress_kendo_angular_l10n__WEBPACK_IMPORTED_MODULE_3__["L10N_PREFIX"],
                        useValue: 'kendo.combobox'
                    },
                    {
                        provide: FilterableDropDownComponentBase, useExisting: Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["forwardRef"])(() => ComboBoxComponent)
                    },
                    {
                        provide: _progress_kendo_angular_common__WEBPACK_IMPORTED_MODULE_1__["KendoInput"], useExisting: Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["forwardRef"])(() => ComboBoxComponent)
                    }
                ],
                selector: 'kendo-combobox',
                template: `
        <ng-container kendoComboBoxLocalizedMessages
            i18n-noDataText="kendo.combobox.noDataText|The text displayed in the popup when there are no items"
            noDataText="NO DATA FOUND"

            i18n-clearTitle="kendo.combobox.clearTitle|The title of the clear button"
            clearTitle="clear"
        >
        </ng-container>
        <span #wrapper unselectable="on"
            class="k-dropdown-wrap"
            [ngClass]="{ 'k-state-default': !disabled, 'k-state-disabled': disabled, 'k-state-focused': isFocused }"
        >
          <kendo-searchbar #searchbar
              [role]="'combobox'"
              [id]="focusableId"
              [listId]="listBoxId"
              [activeDescendant]="activeDescendant"
              [noDataLabel]="noDataLabel"
              [userInput]="text"
              [suggestedText]="getSuggestion()"
              [disabled]="disabled"
              [readonly]="readonly"
              [tabIndex]="tabIndex"
              [popupOpen]="isOpen"
              [placeholder]="placeholder"
              (onNavigate)="handleNavigate($event)"
              (valueChange)="searchBarChange($event)"
              (onBlur)="handleBlur()"
              (onFocus)="handleFocus()"
          ></kendo-searchbar>
          <span *ngIf="!loading && !readonly && (clearButton && text?.length)" class="k-icon k-clear-value k-i-close" [attr.title]="clearTitle" role="button" tabindex="-1" (click)="clearValue($event)" (mousedown)="$event.preventDefault()"></span>
          <span unselectable="on"
              class="k-select"
              (click)="selectClick()"
              (mousedown)="$event.preventDefault()" >
              <span class="k-icon" [ngClass]="buttonClasses">
               </span>
          </span>
          <ng-template #popupTemplate>
              <!--header template-->
              <ng-template *ngIf="headerTemplate"
                  [templateContext]="{
                      templateRef: headerTemplate.templateRef
                  }">
              </ng-template>
              <!--list-->
              <kendo-list
                  #optionsList
                  [id]="listBoxId"
                  [optionPrefix]="optionPrefix"
                  [data]="data"
                  [textField]="textField"
                  [valueField]="valueField"
                  [template]="template"
                  [groupTemplate]="groupTemplate"
                  [fixedGroupTemplate]="fixedGroupTemplate"
                  [height]="listHeight"
                  [show]="isOpen"
                  [virtual]="virtual"
                  (pageChange)="pageChange($event)"
              >
              </kendo-list>
              <!--no-data template-->
              <div class="k-nodata" *ngIf="data.length === 0">
                  <ng-template [ngIf]="noDataTemplate"
                      [templateContext]="{
                          templateRef: noDataTemplate ? noDataTemplate.templateRef : undefined
                      }">
                  </ng-template>
                  <ng-template [ngIf]="!noDataTemplate">
                      <div>{{ noDataText }}</div>
                  </ng-template>
              </div>
              <!--footer template-->
              <ng-template *ngIf="footerTemplate"
                  [templateContext]="{
                      templateRef: footerTemplate.templateRef
                  }">
              </ng-template>
          </ng-template>
        </span>
        <ng-template [ngIf]="isOpen">
            <kendo-resize-sensor (resize)="onResize()"></kendo-resize-sensor>
        </ng-template>
        <ng-container #container></ng-container>
  `
            }]
    }], function () { return [{ type: _progress_kendo_angular_l10n__WEBPACK_IMPORTED_MODULE_3__["LocalizationService"] }, { type: _progress_kendo_angular_popup__WEBPACK_IMPORTED_MODULE_6__["PopupService"] }, { type: SelectionService }, { type: NavigationService }, { type: DisabledItemsService }, { type: DataService }, { type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["NgZone"] }, { type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["ChangeDetectorRef"] }, { type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Renderer2"] }, { type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["ElementRef"] }, { type: Boolean, decorators: [{
                type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Optional"]
            }, {
                type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Inject"],
                args: [TOUCH_ENABLED]
            }] }]; }, { focusableId: [{
            type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"]
        }], allowCustom: [{
            type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"]
        }], valueNormalizer: [{
            type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"]
        }], placeholder: [{
            type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"]
        }], listHeight: [{
            type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"]
        }], suggest: [{
            type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"]
        }], clearButton: [{
            type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"]
        }], disabled: [{
            type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"]
        }], readonly: [{
            type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"]
        }], tabindex: [{
            type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"]
        }], filterable: [{
            type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"]
        }], valueChange: [{
            type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Output"]
        }], selectionChange: [{
            type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Output"]
        }], filterChange: [{
            type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Output"]
        }], open: [{
            type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Output"]
        }], close: [{
            type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Output"]
        }], onFocus: [{
            type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Output"],
            args: ['focus']
        }], onBlur: [{
            type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Output"],
            args: ['blur']
        }], widgetClasses: [{
            type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["HostBinding"],
            args: ['class.k-widget']
        }, {
            type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["HostBinding"],
            args: ['class.k-combobox']
        }, {
            type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["HostBinding"],
            args: ['class.k-header']
        }], data: [{
            type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"]
        }], value: [{
            type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"]
        }], popupSettings: [{
            type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"]
        }], itemDisabled: [{
            type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"]
        }], tabIndex: [{
            type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"],
            args: ["tabIndex"]
        }], virtual: [{
            type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"]
        }], clearable: [{
            type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["HostBinding"],
            args: ['class.k-combobox-clearable']
        }], dir: [{
            type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["HostBinding"],
            args: ['attr.dir']
        }], loading: [{
            type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"]
        }], valuePrimitive: [{
            type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"]
        }], textField: [{
            type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"]
        }], valueField: [{
            type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"]
        }], iconClass: [{
            type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"]
        }], template: [{
            type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["ContentChild"],
            args: [ItemTemplateDirective]
        }], headerTemplate: [{
            type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["ContentChild"],
            args: [HeaderTemplateDirective]
        }], footerTemplate: [{
            type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["ContentChild"],
            args: [FooterTemplateDirective]
        }], noDataTemplate: [{
            type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["ContentChild"],
            args: [NoDataTemplateDirective]
        }], groupTemplate: [{
            type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["ContentChild"],
            args: [GroupTemplateDirective]
        }], fixedGroupTemplate: [{
            type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["ContentChild"],
            args: [FixedGroupTemplateDirective]
        }], container: [{
            type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["ViewChild"],
            args: ['container', { read: _angular_core__WEBPACK_IMPORTED_MODULE_0__["ViewContainerRef"] }]
        }], popupTemplate: [{
            type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["ViewChild"],
            args: ['popupTemplate']
        }], searchbar: [{
            type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["ViewChild"],
            args: [SearchBarComponent]
        }], optionsList: [{
            type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["ViewChild"],
            args: ['optionsList']
        }] }); })();

/* tslint:disable:max-line-length */
/**
 * Renders the selected value of the DropDownList
 * ([see example]({% slug templates_ddl %}#toc-value-template)).
 * The template context is set to the current component.
 * To get a reference to the current data item, use the `let-dataItem` directive.
 *
 * > The `ValueTemplate` directive can only be used with the DropDownList component.
 *
 * @example
 * ```ts
 * _@Component({
 * selector: 'my-app',
 * template: `
 *  <kendo-dropdownlist [data]="listItems">
 *    <ng-template kendoDropDownListValueTemplate let-dataItem>
 *      <span>{{dataItem}} option</span>
 *    </ng-template>
 *  </kendo-dropdownlist>
 * `
 * })
 * class AppComponent {
 *   public listItems: Array<string> = ["Item 1", "Item 2", "Item 3", "Item 4"];
 * }
 * ```
 */
class ValueTemplateDirective {
    constructor(templateRef) {
        this.templateRef = templateRef;
    }
}
ValueTemplateDirective.ɵfac = function ValueTemplateDirective_Factory(t) { return new (t || ValueTemplateDirective)(_angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](_angular_core__WEBPACK_IMPORTED_MODULE_0__["TemplateRef"])); };
ValueTemplateDirective.ɵdir = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdefineDirective"]({ type: ValueTemplateDirective, selectors: [["", "kendoDropDownListValueTemplate", ""]] });
/** @nocollapse */
ValueTemplateDirective.ctorParameters = () => [
    { type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["TemplateRef"] }
];
/*@__PURE__*/ (function () { _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵsetClassMetadata"](ValueTemplateDirective, [{
        type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Directive"],
        args: [{
                selector: '[kendoDropDownListValueTemplate]'
            }]
    }], function () { return [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["TemplateRef"] }]; }, null); })();

/* tslint:disable:max-line-length */
/**
 * @hidden
 */
const DROPDOWNLIST_VALUE_ACCESSOR = {
    multi: true,
    provide: _angular_forms__WEBPACK_IMPORTED_MODULE_2__["NG_VALUE_ACCESSOR"],
    // tslint:disable-next-line:no-use-before-declare
    useExisting: Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["forwardRef"])(() => DropDownListComponent)
};
/**
 * Represents the [Kendo UI DropDownList component for Angular]({% slug overview_ddl %}).
 *
 * @example
 * ```ts
 * _@Component({
 * selector: 'my-app',
 * template: `
 *  <kendo-dropdownlist [data]="listItems">
 *  </kendo-dropdownlist>
 * `
 * })
 * class AppComponent {
 *   public listItems: Array<string> = ["Item 1", "Item 2", "Item 3", "Item 4"];
 * }
 * ```
 */
class DropDownListComponent {
    constructor(localization, popupService, selectionService, navigationService, disabledItemsService, dataService, _zone, renderer, hostElement, cdr, touchEnabled) {
        this.localization = localization;
        this.popupService = popupService;
        this.selectionService = selectionService;
        this.navigationService = navigationService;
        this.disabledItemsService = disabledItemsService;
        this.dataService = dataService;
        this._zone = _zone;
        this.renderer = renderer;
        this.hostElement = hostElement;
        this.cdr = cdr;
        this.touchEnabled = touchEnabled;
        /**
         * @hidden
         */
        this.focusableId = `k-${guid()}`;
        /**
         * Sets the height of the options list. By default, `listHeight` is 200px.
         *
         * > The `listHeight` property affects only the list of options and not the whole popup container.
         * > To set the height of the popup container, use `popupSettings.height`.
         */
        this.listHeight = 200;
        /**
         * Sets the disabled state of the component.
         */
        this.disabled = false;
        /**
         * Sets the read-only state of the component.
         */
        this.readonly = false;
        /**
         * Enables the [filtering]({% slug filtering_ddl %}) functionality of the DropDownList.
         */
        this.filterable = false;
        /**
         * Enables a case-insensitive search. When filtration is disabled, use this option.
         */
        this.ignoreCase = true;
        /**
         * Sets the delay before an item search is performed. When filtration is disabled, use this option.
         */
        this.delay = 500;
        /**
         * Specifies the [`tabindex`](https://developer.mozilla.org/en-US/docs/Web/HTML/Global_attributes/tabindex) of the component.
         */
        this.tabindex = 0;
        /**
         * Fires each time the value is changed ([see example]({% slug overview_ddl %}#toc-events)).
         */
        this.valueChange = new _angular_core__WEBPACK_IMPORTED_MODULE_0__["EventEmitter"]();
        /**
         * Fires each time the user types in the input field
         * ([see example]({% slug overview_ddl %}#toc-events)).
         * You can filter the source based on the passed filtration value.
         * When the value of the component is programmatically changed to `ngModel` or `formControl`
         * through its API or form binding, the `valueChange` event is not triggered because it
         * might cause a mix-up with the built-in `valueChange` mechanisms of the `ngModel` or `formControl` bindings.
         */
        this.filterChange = new _angular_core__WEBPACK_IMPORTED_MODULE_0__["EventEmitter"]();
        /**
         * Fires each time the item selection is changed
         * ([see example]({% slug overview_ddl %}#toc-events)).
         */
        this.selectionChange = new _angular_core__WEBPACK_IMPORTED_MODULE_0__["EventEmitter"]();
        /**
         * Fires each time the popup is about to open
         * ([see example]({% slug openstate_ddl %}#toc-preventing-opening-and-closing)).
         * This event is preventable. If you cancel it, the popup will remain closed.
         */
        this.open = new _angular_core__WEBPACK_IMPORTED_MODULE_0__["EventEmitter"]();
        /**
         * Fires each time the popup is about to close
         * ([see example]({% slug openstate_ddl %}#toc-preventing-opening-and-closing)).
         * This event is preventable. If you cancel it, the popup will remain open.
         */
        this.close = new _angular_core__WEBPACK_IMPORTED_MODULE_0__["EventEmitter"]();
        /**
         * Fires each time the user focuses the DropDownList.
         */
        this.onFocus = new _angular_core__WEBPACK_IMPORTED_MODULE_0__["EventEmitter"](); //tslint:disable-line:no-output-rename
        /**
         * Fires each time the DropDownList gets blurred.
         */
        this.onBlur = new _angular_core__WEBPACK_IMPORTED_MODULE_0__["EventEmitter"](); //tslint:disable-line:no-output-rename
        this.widgetClasses = true;
        this.groupIndices = [];
        this.listBoxId = guid();
        this.optionPrefix = guid();
        this.filterText = "";
        this.isFocused = false;
        this.onTouchedCallback = (_) => { };
        this.onChangeCallback = (_) => { };
        this.word = "";
        this.last = "";
        this.filterFocused = new _angular_core__WEBPACK_IMPORTED_MODULE_0__["EventEmitter"]();
        this.filterBlurred = new _angular_core__WEBPACK_IMPORTED_MODULE_0__["EventEmitter"]();
        this.wrapperFocused = new _angular_core__WEBPACK_IMPORTED_MODULE_0__["EventEmitter"]();
        this.wrapperBlurred = new _angular_core__WEBPACK_IMPORTED_MODULE_0__["EventEmitter"]();
        this.selectionSubscription = new rxjs__WEBPACK_IMPORTED_MODULE_4__["Subscription"]();
        this._open = false;
        this._popupSettings = { animate: true };
        this.direction = localization.rtl ? 'rtl' : 'ltr';
        this.data = [];
        this.subscribeEvents();
        this.hostElement = hostElement.nativeElement;
        this.popupMouseDownHandler = this.onMouseDown.bind(this);
    }
    get width() {
        const wrapperWidth = Object(_progress_kendo_angular_common__WEBPACK_IMPORTED_MODULE_1__["isDocumentAvailable"])() ? this.wrapper.nativeElement.offsetWidth : 0;
        const width = this.popupSettings.width || wrapperWidth;
        const minWidth = isNaN(wrapperWidth) ? wrapperWidth : `${wrapperWidth}px`;
        const maxWidth = isNaN(width) ? width : `${width}px`;
        return { min: minWidth, max: maxWidth };
    }
    get height() {
        const popupHeight = this.popupSettings.height;
        return isPresent(popupHeight) ? `${popupHeight}px` : 'auto';
    }
    get widgetTabIndex() {
        if (this.disabled) {
            return undefined;
        }
        const providedTabIndex = Number(this.tabIndex);
        const defaultTabIndex = 0;
        return !isNaN(providedTabIndex) ? providedTabIndex : defaultTabIndex;
    }
    get ariaExpanded() {
        return this.isOpen;
    }
    get ariaOwns() {
        if (!this.isOpen) {
            return;
        }
        return this.listBoxId;
    }
    get ariaActivedescendant() {
        if (!isPresent(this.dataItem)) {
            return;
        }
        return this.optionPrefix + "-" + getter(this.dataItem, this.valueField);
    }
    get noDataLabel() {
        if (this.dataService.itemsCount === 0) {
            return this.noDataText;
        }
    }
    get appendTo() {
        const { appendTo } = this.popupSettings;
        if (!appendTo || appendTo === 'root') {
            return undefined;
        }
        return appendTo === 'component' ? this.container : appendTo;
    }
    /**
     * Sets the data of the DropDownList.
     *
     * > The data has to be provided in an array-like list.
     */
    set data(data) {
        this.dataService.data = data || [];
        if (this.virtual) {
            this.virtual.skip = 0;
        }
        this.setState();
    }
    get data() {
        const virtual = this.virtual;
        if (virtual) {
            const start = virtual.skip || 0;
            const end = start + virtual.pageSize;
            // Use length instead of itemsCount because of the grouping.
            virtual.total = this.dataService.data.length;
            return this.dataService.data.slice(start, end);
        }
        return this.dataService.data;
    }
    /**
     * Sets the value of the DropDownList.
     * It can either be of the primitive (string, numbers) or of the complex (objects) type.
     * To define the type, use the `valuePrimitive` option.
     *
     * > All selected values which are not present in the source are ignored.
     */
    set value(newValue) {
        this._value = newValue;
        this.cdr.markForCheck();
    }
    get value() {
        return this._value;
    }
    /**
     * Configures the popup of the DropDownList.
     *
     * The available options are:
     * - `animate: Boolean`&mdash;Controls the popup animation. By default, the open and close animations are enabled.
     * - `width: Number | String`&mdash;Sets the width of the popup container. By default, the width of the host element is used. If set to `auto`, the component automatically adjusts the width of the popup and no item labels are wrapped. The `auto` mode is not supported when virtual scrolling is enabled.
     * - `height: Number`&mdash;Sets the height of the popup container.
     * - `popupClass: String`&mdash;Specifies a list of CSS classes that are used to style the popup.
     * - `appendTo: "root" | "component" | ViewContainerRef`&mdash;Specifies the component to which the popup will be appended.
     */
    set popupSettings(settings) {
        this._popupSettings = Object.assign({ animate: true }, settings);
    }
    get popupSettings() {
        return this._popupSettings;
    }
    /**
     * Defines a Boolean function that is executed for each data item in the component
     * ([see examples]({% slug disableditems_ddl %})). Determines whether the item will be disabled.
     */
    set itemDisabled(fn) {
        if (typeof fn !== 'function') {
            throw new Error(`itemDisabled must be a function, but received ${JSON.stringify(fn)}.`);
        }
        this.disabledItemsService.itemDisabled = fn;
    }
    /**
     * Enables the [virtualization]({% slug virtualization_ddl %}) functionality.
     */
    set virtual(settings) {
        this._virtualSettings = normalizeVirtualizationSettings(settings);
    }
    get virtual() {
        return this._virtualSettings;
    }
    /**
     * @hidden
     */
    set tabIndex(tabIndex) {
        this.tabindex = tabIndex;
    }
    get tabIndex() {
        return this.tabindex;
    }
    /**
     * @hidden
     */
    blurComponent() {
        this.wrapperBlurred.emit();
    }
    /**
     * @hidden
     */
    blurFilterInput() {
        this.filterBlurred.emit();
    }
    /**
     * @hidden
     */
    focusComponent() {
        this.wrapperFocused.emit();
        if (!this.isFocused) {
            this.isFocused = true;
            this.onFocus.emit();
        }
    }
    /**
     * @hidden
     */
    keydown(event) {
        const firstIndex = isPresent(this.defaultItem) ? -1 : 0;
        let focused = isNaN(this.selectionService.focused) ? this.firstFocusableIndex(firstIndex) : this.selectionService.focused;
        let offset = 0;
        if (this.disabled || this.readonly) {
            return;
        }
        const isHomeEnd = event.keyCode === Keys.home || event.keyCode === Keys.end;
        const isFilterFocused = this.filterable && this.isFocused && this.isOpen;
        if (isFilterFocused && isHomeEnd) {
            return;
        }
        const hasSelected = isPresent(this.selectionService.selected[0]);
        const focusedItemNotSelected = isPresent(this.selectionService.focused) && !this.selectionService.isSelected(this.selectionService.focused);
        if (!hasSelected || focusedItemNotSelected) {
            if (event.keyCode === Keys.down || event.keyCode === Keys.right) {
                offset = -1;
            }
            else if (event.keyCode === Keys.up || event.keyCode === Keys.left) {
                offset = 1;
            }
        }
        const eventData = event;
        const action = this.navigationService.process({
            current: focused + offset,
            max: this.dataService.itemsCount - 1,
            min: this.defaultItem ? -1 : 0,
            originalEvent: eventData
        });
        const leftRightKeys = (action === NavigationAction.Left) || (action === NavigationAction.Right);
        if (action !== NavigationAction.Undefined &&
            action !== NavigationAction.Tab &&
            action !== NavigationAction.Backspace &&
            action !== NavigationAction.Delete &&
            !(leftRightKeys && this.filterable) &&
            action !== NavigationAction.Enter //enter when popup is opened is handled before `handleEnter`
        ) {
            eventData.preventDefault();
        }
    }
    /**
     * @hidden
     */
    keypress(event) {
        if (this.disabled || this.readonly || this.filterable) {
            return;
        }
        this.onKeyPress(event);
    }
    /**
     * @hidden
     */
    click() {
        this.focus();
        this.togglePopup(!this.isOpen);
    }
    /**
     * @hidden
     */
    onResize() {
        if (this._open) {
            const popupWrapper = this.popupRef.popupElement;
            const { min, max } = this.width;
            popupWrapper.style.minWidth = min;
            popupWrapper.style.width = max;
        }
    }
    get dir() {
        return this.direction;
    }
    ngOnInit() {
        this.renderer.removeAttribute(this.hostElement, "tabindex");
        this.localizationChangesSubscription = this.localization
            .changes.subscribe(({ rtl }) => {
            this.direction = rtl ? 'rtl' : 'ltr';
            this.setMessages();
        });
        this.setMessages();
        this.assignAriaDescribedBy();
    }
    /**
     * @hidden
     * Used by the TextBoxContainer to determine if the component is empty.
     */
    isEmpty() {
        const value = this.value;
        return !(value === 0 || value === false || value || this.defaultItem);
    }
    /**
     * @hidden
     */
    onFilterFocus() {
        this.filterFocused.emit();
    }
    /**
     * @hidden
     */
    ngOnDestroy() {
        this.destroyPopup();
        this.unsubscribeEvents();
        clearTimeout(this.messagesTimeout);
        if (this.localizationChangesSubscription) {
            this.localizationChangesSubscription.unsubscribe();
        }
    }
    /**
     * @hidden
     */
    ngOnChanges(_changes) {
        const virtual = this.virtual;
        const requestInitialData = virtual && _changes.data && _changes.data.isFirstChange();
        if (requestInitialData) {
            this.pageChange({ skip: 0, take: virtual.pageSize });
        }
        if (this.valuePrimitive === undefined) {
            this.valuePrimitive = this.valueField ? false : true;
        }
        if (_changes.hasOwnProperty("value")) {
            this.verifySettings(_changes.value.currentValue);
            if (!isPresent(this.value)) {
                this._previousDataItem = undefined;
            }
        }
        if (_changes.hasOwnProperty("defaultItem")) {
            this.disabledItemsService.defaultItem = this.defaultItem;
        }
        const STATE_PROPS = /(value|textField|valueField|valuePrimitive|defaultItem|itemDisabled)/g;
        if (STATE_PROPS.test(Object.keys(_changes).join())) {
            this.setState();
        }
    }
    /**
     * Focuses the DropDownList.
     */
    focus() {
        if (!this.disabled) {
            this.wrapper.nativeElement.focus();
        }
    }
    /**
     * Blurs the DropDownList.
     */
    blur() {
        if (!this.disabled) {
            this.wrapper.nativeElement.blur();
        }
    }
    /**
     * Toggles the visibility of the popup
     * ([see example]({% slug openstate_ddl %}#toc-setting-the-initially-opened-component)).
     * If you use the `toggle` method to open or close the popup, the `open` and `close` events will not be fired.
     *
     * @param open - The state of the popup.
     */
    toggle(open) {
        // The Promise is required to open the popup on load.
        // Otherwise, the "Expression has changed..." type error will be thrown.
        Promise.resolve(null).then(() => {
            this._toggle(open);
        });
    }
    _toggle(open) {
        this._open = (open === undefined) ? !this._open : open;
        this.destroyPopup();
        if (this._open) {
            this.createPopup();
        }
    }
    triggerPopupEvents(open) {
        const eventArgs = new PreventableEvent();
        if (open) {
            this.open.emit(eventArgs);
        }
        else {
            this.close.emit(eventArgs);
        }
        return eventArgs.isDefaultPrevented();
    }
    /**
     * @hidden
     */
    togglePopup(open) {
        const isDisabled = this.disabled || this.readonly;
        const sameState = this.isOpen === open;
        if (isDisabled || sameState) {
            return;
        }
        const isDefaultPrevented = this.triggerPopupEvents(open);
        if (!isDefaultPrevented) {
            if (!open && this.filterable && this.isFocused) {
                this.focus();
            }
            this._toggle(open);
        }
    }
    /**
     * Returns the current open state of the popup.
     */
    get isOpen() {
        return this._open;
    }
    /**
     * Resets the value of the DropDownList.
     * If you use the `reset` method to clear the value of the component,
     * the model will not update automatically and the `selectionChange` and `valueChange` events will not be fired.
     */
    reset() {
        this._previousDataItem = undefined;
        this.value = undefined;
        this.setState();
    }
    /**
     * @hidden
     */
    writeValue(value) {
        this.verifySettings(value);
        this.value = value === null ? undefined : value;
        if (!isPresent(value)) {
            this._previousDataItem = undefined;
        }
        this.setState();
    }
    /**
     * @hidden
     */
    registerOnChange(fn) {
        this.onChangeCallback = fn;
    }
    /**
     * @hidden
     */
    registerOnTouched(fn) {
        this.onTouchedCallback = fn;
    }
    /**
     * @hidden
     */
    setDisabledState(isDisabled) {
        this.disabled = isDisabled;
    }
    /**
     * @hidden
     */
    get buttonClasses() {
        return this.loading ? 'k-i-loading' : this.iconClass || 'k-i-arrow-s';
    }
    /**
     * @hidden
     */
    get listContainerClasses() {
        const containerClasses = ['k-list-container', 'k-reset'];
        if (this.popupSettings.popupClass) {
            containerClasses.push(this.popupSettings.popupClass);
        }
        return containerClasses;
    }
    /**
     * @hidden
     */
    get isDisabledDefaultItem() {
        return this.disabledItemsService.isItemDisabled(this.defaultItem);
    }
    /**
     * @hidden
     */
    getText() {
        return this.text;
    }
    /**
     * @hidden
     */
    getDefaultItemText() {
        return getter(this.defaultItem, this.textField);
    }
    createPopup() {
        if (this.virtual) {
            this.virtual.skip = 0;
        }
        const horizontalAlign = this.direction === "rtl" ? "right" : "left";
        const anchorPosition = { horizontal: horizontalAlign, vertical: "bottom" };
        const popupPosition = { horizontal: horizontalAlign, vertical: "top" };
        this.popupRef = this.popupService.open({
            anchor: this.wrapper,
            anchorAlign: anchorPosition,
            animate: this.popupSettings.animate,
            appendTo: this.appendTo,
            content: this.popupTemplate,
            popupAlign: popupPosition,
            popupClass: this.listContainerClasses,
            positionMode: 'absolute'
        });
        const popupWrapper = this.popupRef.popupElement;
        const { min, max } = this.width;
        popupWrapper.addEventListener('mousedown', this.popupMouseDownHandler);
        popupWrapper.style.minWidth = min;
        popupWrapper.style.width = max;
        popupWrapper.style.height = this.height;
        popupWrapper.setAttribute("dir", this.direction);
        this.popupRef.popupOpen.subscribe(() => {
            this.cdr.detectChanges();
            this.optionsList.scrollToItem(this.selectionService.focused);
        });
        if (!this.filterable) {
            this.popupRef.popupAnchorViewportLeave.subscribe(() => this.togglePopup(false));
        }
    }
    destroyPopup() {
        if (this.popupRef) {
            this.popupRef.popupElement
                .removeEventListener('mousedown', this.popupMouseDownHandler);
            this.popupRef.close();
            this.popupRef = null;
        }
    }
    updateState({ dataItem, confirm = false }) {
        this.dataItem = dataItem;
        this.text = this.prop(this.textField, this.valuePrimitive)(dataItem);
        if (confirm) {
            this._previousDataItem = dataItem;
        }
    }
    clearState() {
        this.text = undefined;
        this.dataItem = undefined;
    }
    resetSelection(index) {
        const clear = !isPresent(index);
        this.selectionService.resetSelection(clear ? [] : [index]);
        this.selectionService.focused = clear ? this.firstFocusableIndex(0) : index;
    }
    onSelectionChange({ dataItem }) {
        this.updateState({ dataItem });
        this.selectionChange.emit(dataItem);
        // reassigning the value label ID as aria-deascibedby forces firefox/nvda, forefox/jaws to read
        // the new value when the popup is closed and the value is changed with the arrow keys (up/down)
        this.assignAriaDescribedBy();
    }
    subscribeEvents() {
        if (!Object(_progress_kendo_angular_common__WEBPACK_IMPORTED_MODULE_1__["isDocumentAvailable"])()) {
            return;
        }
        // Item selection when the popup is open.
        this.selectionSubscription.add(this.selectionService.onSelect.pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_5__["filter"])(_ => this.isOpen), Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_5__["map"])(this.itemFromEvent.bind(this)))
            .subscribe(this.onSelectionChange.bind(this)));
        // Item selection when the popup is closed | clicked | enter, and so on.
        this.selectionSubscription.add(Object(rxjs__WEBPACK_IMPORTED_MODULE_4__["merge"])(this.selectionService.onSelect.pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_5__["filter"])(_ => !this.isOpen)), this.selectionService.onChange).pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_5__["map"])(this.itemFromEvent.bind(this)), Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_5__["tap"])(_ => this.togglePopup(false)))
            .subscribe(({ dataItem, value: newValue, newSelection }) => {
            if (newSelection) {
                this.onSelectionChange({ dataItem });
            }
            const shouldUsePrevious = !isPresent(dataItem) && this._previousDataItem;
            const shouldUseNewValue = newValue !== this.prop(this.valueField, this.valuePrimitive)(this.value);
            if (shouldUsePrevious) {
                this.updateState({ dataItem: this._previousDataItem });
                this.resetSelection();
            }
            else if (shouldUseNewValue) {
                this.value = this.valuePrimitive ? newValue : dataItem;
                this._previousDataItem = dataItem;
                this.emitChange(this.value);
            }
            this.clearFilter();
        }));
        this.navigationSubscription = Object(rxjs__WEBPACK_IMPORTED_MODULE_4__["merge"])(this.navigationService.up, this.navigationService.down, this.navigationService.left.pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_5__["skipWhile"])(() => this.filterable)), this.navigationService.right.pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_5__["skipWhile"])(() => this.filterable)), this.navigationService.home, this.navigationService.end)
            .pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_5__["filter"])((event) => !isNaN(event.index)))
            .subscribe((event) => this.selectionService.select(event.index));
        this.openSubscription = this.navigationService.open.subscribe(() => this.togglePopup(true));
        this.closeSubscription = this.navigationService.close.subscribe(() => {
            this.togglePopup(false);
            this.focus();
        });
        this.enterSubscription = this.navigationService.enter
            .pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_5__["tap"])((event) => event.originalEvent.preventDefault()))
            .subscribe(this.handleEnter.bind(this));
        this.escSubscription = this.navigationService.esc
            .subscribe(this.handleEscape.bind(this));
        this.filterBlurredSubscription = this.filterBlurred.pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_5__["concatMap"])(() => Object(rxjs__WEBPACK_IMPORTED_MODULE_4__["interval"])(10).pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_5__["take"])(1), Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_5__["takeUntil"])(this.wrapperFocused))))
            .subscribe(() => {
            this.wrapperBlurred.emit();
        });
        this._zone.runOutsideAngular(() => {
            this.componentBlurredSubscription =
                Object(rxjs__WEBPACK_IMPORTED_MODULE_4__["merge"])(this.wrapperBlurred.pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_5__["concatMap"])(() => Object(rxjs__WEBPACK_IMPORTED_MODULE_4__["interval"])(10).pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_5__["take"])(1), Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_5__["takeUntil"])(this.filterFocused)))), this.navigationService.tab).pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_5__["tap"])(event => event instanceof NavigationEvent && this.focus()), Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_5__["filter"])(() => this.isFocused))
                    .subscribe(() => this._zone.run(() => {
                    this.componentBlur();
                }));
        });
    }
    unsubscribeEvents() {
        if (!Object(_progress_kendo_angular_common__WEBPACK_IMPORTED_MODULE_1__["isDocumentAvailable"])()) {
            return;
        }
        this.navigationSubscription.unsubscribe();
        this.openSubscription.unsubscribe();
        this.closeSubscription.unsubscribe();
        this.enterSubscription.unsubscribe();
        this.escSubscription.unsubscribe();
        this.componentBlurredSubscription.unsubscribe();
        this.filterBlurredSubscription.unsubscribe();
        if (this.selectionSubscription) {
            this.selectionSubscription.unsubscribe();
        }
    }
    itemFromEvent(event) {
        const index = event.indices[0];
        let dataItem = this.dataService.itemAt(index);
        dataItem = isPresent(dataItem) ? dataItem : this.currentOrDefault(index);
        const value = this.prop(this.valueField, this.valuePrimitive)(dataItem);
        const newSelection = event.newSelection;
        return {
            dataItem,
            index,
            newSelection,
            value
        };
    }
    currentOrDefault(selectedIndex) {
        const defaultItemIndex = -1;
        if (isPresent(this.dataItem) && selectedIndex !== defaultItemIndex) {
            return this.dataItem;
        }
        else {
            return this.defaultItem;
        }
    }
    firstFocusableIndex(index) {
        const maxIndex = this.dataService.itemsCount - 1;
        if (this.disabledItemsService.isIndexDisabled(index)) {
            return (index < maxIndex) ? this.firstFocusableIndex(index + 1) : undefined;
        }
        else {
            return index;
        }
    }
    handleEnter() {
        if (this.isOpen) {
            this.selectionService.change(this.selectionService.focused);
            this.focus();
        }
        else {
            this.togglePopup(true);
        }
    }
    handleEscape() {
        if (isPresent(this.selectionService.selected[0])) {
            this.selectionService.change(this.selectionService.selected[0]);
        }
        else {
            this.togglePopup(false);
            this.clearFilter();
        }
        this.focus();
    }
    clearFilter() {
        if (!(this.filterable && this.filterText)) {
            return;
        }
        this.filterText = "";
        this.cdr.markForCheck();
        this.filterChange.emit(this.filterText);
    }
    verifySettings(newValue) {
        const valueOrText = !isPresent(this.valueField) !== !isPresent(this.textField);
        if (!Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["isDevMode"])()) {
            return;
        }
        if (this.defaultItem && this.valueField && typeof this.defaultItem !== "object") {
            throw new Error(DropDownListMessages.defaultItem);
        }
        if (this.valuePrimitive === true && isPresent(newValue) && typeof newValue === "object") {
            throw new Error(DropDownListMessages.primitive);
        }
        if (this.valuePrimitive === false && isPresent(newValue) && typeof newValue !== "object") {
            throw new Error(DropDownListMessages.object);
        }
        if (valueOrText) {
            throw new Error(DropDownListMessages.textAndValue);
        }
    }
    componentBlur() {
        this.isFocused = false;
        if (isPresent(this.selectionService.selected[0])) {
            this.selectionService.change(this.selectionService.selected[0]);
        }
        else {
            this.togglePopup(false);
            this.clearFilter();
        }
        this.onBlur.emit();
        this.onTouchedCallback();
    }
    /**
     * @hidden
     */
    onMouseDown(event) {
        const tagName = event.target.tagName.toLowerCase();
        if (tagName !== "input") {
            event.preventDefault();
        }
    }
    onKeyPress(event) {
        if (event.which === 0 || event.keyCode === Keys.enter) {
            return;
        }
        let character = String.fromCharCode(event.charCode || event.keyCode);
        if (this.ignoreCase) {
            character = character.toLowerCase();
        }
        if (character === " ") {
            event.preventDefault();
        }
        this.word += character;
        this.last = character;
        this.search();
    }
    search() {
        clearTimeout(this.typingTimeout);
        if (!this.filterable) {
            this.typingTimeout = setTimeout(() => { this.word = ""; }, this.delay);
            this.selectNext();
        }
    }
    selectNext() {
        let data = this.dataService
            .filter((item) => isPresent(item) && !item.header && !this.disabledItemsService.isItemDisabled(item))
            .map((item) => {
            if (this.dataService.grouped) {
                return { item: item.value, itemIndex: item.offsetIndex };
            }
            return { item: item, itemIndex: this.dataService.indexOf(item) };
        });
        const isInLoop = sameCharsOnly(this.word, this.last);
        let dataLength = data.length;
        let hasSelected = !isNaN(this.selectionService.selected[0]);
        let startIndex = !hasSelected ? 0 : this.selectionService.selected[0];
        let text, index, defaultItem;
        if (this.defaultItem && !this.disabledItemsService.isItemDisabled(this.defaultItem)) {
            defaultItem = { item: this.defaultItem, itemIndex: -1 };
            dataLength += 1;
            startIndex += 1;
        }
        startIndex += isInLoop && hasSelected ? 1 : 0;
        data = shuffleData(data, startIndex, defaultItem);
        index = 0;
        for (; index < dataLength; index++) {
            text = getter(data[index].item, this.textField);
            const loopMatch = Boolean(isInLoop && matchText(text, this.last, this.ignoreCase));
            const nextMatch = Boolean(matchText(text, this.word, this.ignoreCase));
            if (loopMatch || nextMatch) {
                index = data[index].itemIndex;
                break;
            }
        }
        if (index !== dataLength) {
            this.navigate(index);
        }
    }
    emitChange(value) {
        this.onChangeCallback(value);
        this.valueChange.emit(value);
    }
    navigate(index) {
        this.selectionService.select(index);
    }
    prop(field, usePrimitive) {
        return (dataItem) => {
            if (isPresent(dataItem)) {
                if (usePrimitive) {
                    return field && isObject(dataItem) ? dataItem[field] : dataItem;
                }
                else {
                    return dataItem[field];
                }
            }
            return null;
        };
    }
    findDataItem({ primitive, valueField, value }) {
        const result = {
            dataItem: null,
            index: -1
        };
        const prop = this.prop(valueField, primitive);
        let comparer;
        if (this.dataService.grouped) {
            comparer = (element) => {
                return prop(element.value) === prop(value);
            };
        }
        else {
            comparer = (element) => {
                return prop(element) === prop(value);
            };
        }
        const index = this.dataService.findIndex(comparer);
        result.dataItem = this.dataService.itemAt(index);
        result.index = index;
        return result;
    }
    setState() {
        const value = this.value;
        const valueField = this.valueField;
        const textField = this.textField;
        const primitive = this.valuePrimitive;
        if (this.defaultItem) {
            const defaultValue = this.prop(valueField, primitive)(this.defaultItem);
            const currentValue = this.prop(valueField, primitive)(value);
            if (!isPresent(value) || (currentValue === defaultValue)) {
                this.updateState({ dataItem: this.defaultItem, confirm: true });
                this.resetSelection(-1);
                if (this.filterable && this.filterText && this.dataService.itemsCount) {
                    this.selectionService.focused = this.firstFocusableIndex(0);
                }
                return;
            }
        }
        const resolved = this.findDataItem({ primitive, valueField, value });
        // The data and value are of same shape,
        // for example, value: 'foo', data: ['foo', 'bar']
        // or value: { value: 1, text: 'foo' }, data: [{ value: 1, text: 'foo' }].
        const ofSameType = !(primitive && textField);
        if (resolved.dataItem) {
            this.updateState({ dataItem: resolved.dataItem, confirm: true });
            this.resetSelection(resolved.index);
        }
        else if (isPresent(value) && ofSameType) {
            this.updateState({ dataItem: value });
            this.resetSelection();
        }
        else if (this._previousDataItem) {
            this.updateState({ dataItem: this._previousDataItem });
            this.resetSelection();
        }
        else {
            this.clearState();
            this.resetSelection();
        }
    }
    /**
     * @hidden
     */
    handleFilter(event) {
        this.filterChange.emit(event.target.value);
    }
    /**
     * @hidden
     */
    pageChange(event) {
        const virtual = this.virtual;
        virtual.skip = event.skip;
    }
    setMessages() {
        this._zone.runOutsideAngular(() => {
            clearTimeout(this.messagesTimeout);
            this.messagesTimeout = setTimeout(() => {
                this.noDataText = this.localization.get('noDataText');
                this.cdr.detectChanges();
            });
        });
    }
    assignAriaDescribedBy() {
        const currentValue = this.wrapper.nativeElement.getAttribute('aria-describedby') || '';
        const trimmed = currentValue.replace(this.valueLabelId, '').trim();
        // reset the value label ID to force readers to read the new value
        this.valueLabelId = guid();
        // add to the current value - don't replace it
        const newValue = `${this.valueLabelId} ${trimmed}`.trim();
        this.renderer.setAttribute(this.wrapper.nativeElement, 'aria-describedby', newValue);
    }
}
DropDownListComponent.ɵfac = function DropDownListComponent_Factory(t) { return new (t || DropDownListComponent)(_angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](_progress_kendo_angular_l10n__WEBPACK_IMPORTED_MODULE_3__["LocalizationService"]), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](_progress_kendo_angular_popup__WEBPACK_IMPORTED_MODULE_6__["PopupService"]), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](SelectionService), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](NavigationService), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](DisabledItemsService), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](DataService), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](_angular_core__WEBPACK_IMPORTED_MODULE_0__["NgZone"]), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](_angular_core__WEBPACK_IMPORTED_MODULE_0__["Renderer2"]), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](_angular_core__WEBPACK_IMPORTED_MODULE_0__["ElementRef"]), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](_angular_core__WEBPACK_IMPORTED_MODULE_0__["ChangeDetectorRef"]), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](TOUCH_ENABLED, 8)); };
DropDownListComponent.ɵcmp = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdefineComponent"]({ type: DropDownListComponent, selectors: [["kendo-dropdownlist"]], contentQueries: function DropDownListComponent_ContentQueries(rf, ctx, dirIndex) { if (rf & 1) {
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵcontentQuery"](dirIndex, ItemTemplateDirective, true);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵcontentQuery"](dirIndex, GroupTemplateDirective, true);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵcontentQuery"](dirIndex, FixedGroupTemplateDirective, true);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵcontentQuery"](dirIndex, ValueTemplateDirective, true);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵcontentQuery"](dirIndex, HeaderTemplateDirective, true);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵcontentQuery"](dirIndex, FooterTemplateDirective, true);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵcontentQuery"](dirIndex, NoDataTemplateDirective, true);
    } if (rf & 2) {
        var _t;
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵqueryRefresh"](_t = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵloadQuery"]()) && (ctx.itemTemplate = _t.first);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵqueryRefresh"](_t = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵloadQuery"]()) && (ctx.groupTemplate = _t.first);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵqueryRefresh"](_t = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵloadQuery"]()) && (ctx.fixedGroupTemplate = _t.first);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵqueryRefresh"](_t = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵloadQuery"]()) && (ctx.valueTemplate = _t.first);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵqueryRefresh"](_t = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵloadQuery"]()) && (ctx.headerTemplate = _t.first);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵqueryRefresh"](_t = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵloadQuery"]()) && (ctx.footerTemplate = _t.first);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵqueryRefresh"](_t = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵloadQuery"]()) && (ctx.noDataTemplate = _t.first);
    } }, viewQuery: function DropDownListComponent_Query(rf, ctx) { if (rf & 1) {
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵviewQuery"](_c9, true, _angular_core__WEBPACK_IMPORTED_MODULE_0__["ViewContainerRef"]);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵviewQuery"](_c10, true);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵstaticViewQuery"](_c24, true);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵviewQuery"](_c11, true);
    } if (rf & 2) {
        var _t;
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵqueryRefresh"](_t = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵloadQuery"]()) && (ctx.container = _t.first);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵqueryRefresh"](_t = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵloadQuery"]()) && (ctx.popupTemplate = _t.first);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵqueryRefresh"](_t = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵloadQuery"]()) && (ctx.wrapper = _t.first);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵqueryRefresh"](_t = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵloadQuery"]()) && (ctx.optionsList = _t.first);
    } }, hostVars: 7, hostBindings: function DropDownListComponent_HostBindings(rf, ctx) { if (rf & 2) {
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵattribute"]("dir", ctx.dir);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵclassProp"]("k-widget", ctx.widgetClasses)("k-dropdown", ctx.widgetClasses)("k-header", ctx.widgetClasses);
    } }, inputs: { focusableId: "focusableId", listHeight: "listHeight", disabled: "disabled", readonly: "readonly", filterable: "filterable", ignoreCase: "ignoreCase", delay: "delay", tabindex: "tabindex", data: "data", value: "value", popupSettings: "popupSettings", itemDisabled: "itemDisabled", virtual: "virtual", tabIndex: "tabIndex", valuePrimitive: "valuePrimitive", iconClass: "iconClass", loading: "loading", textField: "textField", valueField: "valueField", defaultItem: "defaultItem" }, outputs: { valueChange: "valueChange", filterChange: "filterChange", selectionChange: "selectionChange", open: "open", close: "close", onFocus: "focus", onBlur: "blur" }, exportAs: ["kendoDropDownList"], features: [_angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵProvidersFeature"]([
            DROPDOWNLIST_VALUE_ACCESSOR,
            DataService,
            SelectionService,
            NavigationService,
            DisabledItemsService,
            _progress_kendo_angular_l10n__WEBPACK_IMPORTED_MODULE_3__["LocalizationService"],
            {
                provide: _progress_kendo_angular_l10n__WEBPACK_IMPORTED_MODULE_3__["L10N_PREFIX"],
                useValue: 'kendo.dropdownlist'
            },
            {
                provide: FilterableDropDownComponentBase, useExisting: Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["forwardRef"])(() => DropDownListComponent)
            },
            {
                provide: _progress_kendo_angular_common__WEBPACK_IMPORTED_MODULE_1__["KendoInput"], useExisting: Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["forwardRef"])(() => DropDownListComponent)
            }
        ]), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵNgOnChangesFeature"]], decls: 14, vars: 20, consts: [["kendoDropDownListLocalizedMessages", "", 6, "noDataText"], ["unselectable", "on", "role", "listbox", "aria-haspopup", "listbox", 3, "id", "ngClass", "focus", "blur", "keydown", "keypress", "click"], ["wrapper", ""], ["unselectable", "on", 1, "k-input", 3, "id"], [4, "ngIf"], [3, "ngIf"], ["unselectable", "on", 1, "k-select"], ["unselectable", "on", 1, "k-icon", 3, "ngClass"], ["popupTemplate", ""], ["container", ""], [3, "templateContext"], [3, "id", "optionPrefix", "data", "textField", "valueField", "template", "groupTemplate", "fixedGroupTemplate", "height", "show", "virtual", "pageChange"], ["optionsList", ""], ["class", "k-nodata", 4, "ngIf"], [1, "k-list-filter", 3, "click"], ["tabindex", "-1", 1, "k-textbox", 3, "filterInput", "dir", "ngModel", "ngModelChange", "keydown", "input", "focus", "blur"], ["unselectable", "on", 1, "k-icon", "k-i-search"], ["kendoDropDownsSelectable", "", 1, "k-list-optionlabel", 3, "ngClass", "index"], [1, "k-nodata"], [3, "ngIf", "templateContext"], [3, "resize"]], template: function DropDownListComponent_Template(rf, ctx) { if (rf & 1) {
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementContainerStart"](0, 0);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵi18nAttributes"](1, _c27);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementContainerEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](2, "span", 1, 2);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵlistener"]("focus", function DropDownListComponent_Template_span_focus_2_listener() { return ctx.focusComponent(); })("blur", function DropDownListComponent_Template_span_blur_2_listener() { return ctx.blurComponent(); })("keydown", function DropDownListComponent_Template_span_keydown_2_listener($event) { return ctx.keydown($event); })("keypress", function DropDownListComponent_Template_span_keypress_2_listener($event) { return ctx.keypress($event); })("click", function DropDownListComponent_Template_span_click_2_listener() { return ctx.click(); });
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](4, "span", 3);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](5, DropDownListComponent_5_Template, 1, 4, undefined, 4);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](6, DropDownListComponent_ng_template_6_Template, 1, 1, "ng-template", 5);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](7, "span", 6);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](8, "span", 7);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](9, DropDownListComponent_ng_template_9_Template, 8, 17, "ng-template", null, 8, _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplateRefExtractor"]);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](11, DropDownListComponent_ng_template_11_Template, 1, 0, "ng-template", 5);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementContainer"](12, null, 9);
    } if (rf & 2) {
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](2);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("id", ctx.focusableId)("ngClass", _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpureFunction3"](16, _c29, !ctx.disabled, ctx.disabled, ctx.isFocused));
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵattribute"]("dir", ctx.direction)("readonly", ctx.readonly)("tabindex", ctx.widgetTabIndex)("aria-disabled", ctx.disabled)("aria-readonly", ctx.readonly)("aria-expanded", ctx.ariaExpanded)("aria-owns", ctx.ariaOwns)("aria-activedescendant", ctx.ariaActivedescendant)("aria-label", ctx.noDataLabel);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](2);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("id", ctx.valueLabelId);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngIf", ctx.valueTemplate);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngIf", !ctx.valueTemplate);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](2);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngClass", ctx.buttonClasses);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](3);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngIf", ctx.isOpen);
    } }, directives: function () { return [LocalizedMessagesDirective, _angular_common__WEBPACK_IMPORTED_MODULE_7__["NgClass"], _angular_common__WEBPACK_IMPORTED_MODULE_7__["NgIf"], TemplateContextDirective,
        ListComponent, _angular_forms__WEBPACK_IMPORTED_MODULE_2__["DefaultValueAccessor"], FilterInputDirective, _angular_forms__WEBPACK_IMPORTED_MODULE_2__["NgControlStatus"], _angular_forms__WEBPACK_IMPORTED_MODULE_2__["NgModel"], SelectableDirective, _progress_kendo_angular_common__WEBPACK_IMPORTED_MODULE_1__["ResizeSensorComponent"]]; }, encapsulation: 2 });
/** @nocollapse */
DropDownListComponent.ctorParameters = () => [
    { type: _progress_kendo_angular_l10n__WEBPACK_IMPORTED_MODULE_3__["LocalizationService"] },
    { type: _progress_kendo_angular_popup__WEBPACK_IMPORTED_MODULE_6__["PopupService"] },
    { type: SelectionService },
    { type: NavigationService },
    { type: DisabledItemsService },
    { type: DataService },
    { type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["NgZone"] },
    { type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Renderer2"] },
    { type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["ElementRef"] },
    { type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["ChangeDetectorRef"] },
    { type: Boolean, decorators: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Optional"] }, { type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Inject"], args: [TOUCH_ENABLED,] }] }
];
DropDownListComponent.propDecorators = {
    focusableId: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"] }],
    iconClass: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"] }],
    loading: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"] }],
    data: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"] }],
    value: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"] }],
    textField: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"] }],
    valueField: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"] }],
    popupSettings: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"] }],
    listHeight: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"] }],
    defaultItem: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"] }],
    disabled: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"] }],
    itemDisabled: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"] }],
    readonly: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"] }],
    filterable: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"] }],
    virtual: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"] }],
    ignoreCase: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"] }],
    delay: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"] }],
    valuePrimitive: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"] }],
    tabindex: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"] }],
    tabIndex: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"], args: ["tabIndex",] }],
    valueChange: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Output"] }],
    filterChange: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Output"] }],
    selectionChange: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Output"] }],
    open: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Output"] }],
    close: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Output"] }],
    onFocus: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Output"], args: ['focus',] }],
    onBlur: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Output"], args: ['blur',] }],
    itemTemplate: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["ContentChild"], args: [ItemTemplateDirective,] }],
    groupTemplate: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["ContentChild"], args: [GroupTemplateDirective,] }],
    fixedGroupTemplate: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["ContentChild"], args: [FixedGroupTemplateDirective,] }],
    valueTemplate: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["ContentChild"], args: [ValueTemplateDirective,] }],
    headerTemplate: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["ContentChild"], args: [HeaderTemplateDirective,] }],
    footerTemplate: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["ContentChild"], args: [FooterTemplateDirective,] }],
    noDataTemplate: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["ContentChild"], args: [NoDataTemplateDirective,] }],
    container: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["ViewChild"], args: ['container', { read: _angular_core__WEBPACK_IMPORTED_MODULE_0__["ViewContainerRef"] },] }],
    popupTemplate: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["ViewChild"], args: ['popupTemplate',] }],
    wrapper: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["ViewChild"], args: ['wrapper', { static: true },] }],
    optionsList: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["ViewChild"], args: ['optionsList',] }],
    widgetClasses: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["HostBinding"], args: ['class.k-widget',] }, { type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["HostBinding"], args: ['class.k-dropdown',] }, { type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["HostBinding"], args: ['class.k-header',] }],
    dir: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["HostBinding"], args: ['attr.dir',] }]
};
/*@__PURE__*/ (function () { _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵsetClassMetadata"](DropDownListComponent, [{
        type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Component"],
        args: [{
                exportAs: 'kendoDropDownList',
                providers: [
                    DROPDOWNLIST_VALUE_ACCESSOR,
                    DataService,
                    SelectionService,
                    NavigationService,
                    DisabledItemsService,
                    _progress_kendo_angular_l10n__WEBPACK_IMPORTED_MODULE_3__["LocalizationService"],
                    {
                        provide: _progress_kendo_angular_l10n__WEBPACK_IMPORTED_MODULE_3__["L10N_PREFIX"],
                        useValue: 'kendo.dropdownlist'
                    },
                    {
                        provide: FilterableDropDownComponentBase, useExisting: Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["forwardRef"])(() => DropDownListComponent)
                    },
                    {
                        provide: _progress_kendo_angular_common__WEBPACK_IMPORTED_MODULE_1__["KendoInput"], useExisting: Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["forwardRef"])(() => DropDownListComponent)
                    }
                ],
                selector: 'kendo-dropdownlist',
                template: `
        <ng-container kendoDropDownListLocalizedMessages
            i18n-noDataText="kendo.dropdownlist.noDataText|The text displayed in the popup when there are no items"
            noDataText="NO DATA FOUND"
        >
        </ng-container>
        <span #wrapper unselectable="on"
          role="listbox"
          [id]="focusableId"
          [ngClass]="{
            'k-dropdown-wrap': true,
            'k-state-default': !this.disabled,
            'k-state-disabled': this.disabled,
            'k-state-focused': this.isFocused
          }"
          [attr.dir]="direction"
          [attr.readonly]="readonly"
          [attr.tabindex]="widgetTabIndex"
          [attr.aria-disabled]="disabled"
          [attr.aria-readonly]="readonly"
          aria-haspopup="listbox"
          [attr.aria-expanded]="ariaExpanded"
          [attr.aria-owns]="ariaOwns"
          [attr.aria-activedescendant]="ariaActivedescendant"
          [attr.aria-label]="noDataLabel"
          (focus)="focusComponent()"
          (blur)="blurComponent()"
          (keydown)="keydown($event)"
          (keypress)="keypress($event)"
          (click)="click()"
        >
            <span class="k-input" unselectable="on" [id]="valueLabelId">
               <ng-template *ngIf="valueTemplate"
                   [templateContext]="{
                       templateRef: valueTemplate.templateRef,
                       $implicit: dataItem
                   }">
               </ng-template>
               <ng-template [ngIf]="!valueTemplate">{{ getText() }}</ng-template>
           </span>
           <span class="k-select" unselectable="on">
               <span
                    class="k-icon"
                    unselectable="on"
                    [ngClass]="buttonClasses"
                >
                </span>
           </span>
           <ng-template #popupTemplate>
               <!--filterable-->

               <ng-template [ngIf]="filterable">
                   <span class="k-list-filter" (click)="$event.stopImmediatePropagation()">
                       <input
                           [attr.aria-owns]="ariaOwns"
                           [attr.aria-activedescendant]="ariaActivedescendant"
                           [attr.aria-label]="noDataLabel"
                           tabindex="-1"
                           [filterInput]="isFocused && !touchEnabled"
                           [dir]="direction"
                           [(ngModel)]="filterText"
                           class="k-textbox"
                           (keydown)="keydown($event)"
                           (input)="handleFilter($event)"
                           (focus)="onFilterFocus()"
                           (blur)="blurFilterInput()" />
                       <span class="k-icon k-i-search" unselectable="on"></span>
                   </span>
               </ng-template>
               <!--default item-->
               <ng-template [ngIf]="defaultItem && !itemTemplate">
                   <div class="k-list-optionlabel" [ngClass]="{ 'k-state-disabled': isDisabledDefaultItem }" kendoDropDownsSelectable [index]="-1">
                       {{ getDefaultItemText() }}
                   </div>
               </ng-template>
               <ng-template [ngIf]="defaultItem && itemTemplate">
                   <div class="k-list-optionlabel" [ngClass]="{ 'k-state-disabled': isDisabledDefaultItem }" kendoDropDownsSelectable [index]="-1">
                       <ng-template
                           [templateContext]="{
                               templateRef: itemTemplate.templateRef,
                               $implicit: defaultItem
                           }">
                       </ng-template>
                   </div>
               </ng-template>
               <!--header template-->
               <ng-template *ngIf="headerTemplate"
                   [templateContext]="{
                       templateRef: headerTemplate.templateRef
                   }">
               </ng-template>
               <!--list-->
               <kendo-list
                   #optionsList
                   [id]="listBoxId"
                   [optionPrefix]="optionPrefix"
                   [data]="data"
                   [textField]="textField"
                   [valueField]="valueField"
                   [template]="itemTemplate"
                   [groupTemplate]="groupTemplate"
                   [fixedGroupTemplate]="fixedGroupTemplate"
                   [height]="listHeight"
                   [show]="isOpen"
                   [virtual]="virtual"
                   (pageChange)="pageChange($event)"
                   >
               </kendo-list>
               <!--no-data template-->
               <div class="k-nodata" *ngIf="data.length === 0">
                   <ng-template [ngIf]="noDataTemplate"
                       [templateContext]="{
                           templateRef: noDataTemplate ? noDataTemplate.templateRef : undefined
                       }">
                   </ng-template>
                   <ng-template [ngIf]="!noDataTemplate">
                       <div>{{ noDataText }}</div>
                   </ng-template>
               </div>
               <!--footer template-->
               <ng-template *ngIf="footerTemplate"
                   [templateContext]="{
                       templateRef: footerTemplate.templateRef
                   }">
               </ng-template>
            </ng-template>
        </span>
        <ng-template [ngIf]="isOpen">
            <kendo-resize-sensor (resize)="onResize()"></kendo-resize-sensor>
        </ng-template>
        <ng-container #container></ng-container>
  `
            }]
    }], function () { return [{ type: _progress_kendo_angular_l10n__WEBPACK_IMPORTED_MODULE_3__["LocalizationService"] }, { type: _progress_kendo_angular_popup__WEBPACK_IMPORTED_MODULE_6__["PopupService"] }, { type: SelectionService }, { type: NavigationService }, { type: DisabledItemsService }, { type: DataService }, { type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["NgZone"] }, { type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Renderer2"] }, { type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["ElementRef"] }, { type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["ChangeDetectorRef"] }, { type: Boolean, decorators: [{
                type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Optional"]
            }, {
                type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Inject"],
                args: [TOUCH_ENABLED]
            }] }]; }, { focusableId: [{
            type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"]
        }], listHeight: [{
            type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"]
        }], disabled: [{
            type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"]
        }], readonly: [{
            type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"]
        }], filterable: [{
            type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"]
        }], ignoreCase: [{
            type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"]
        }], delay: [{
            type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"]
        }], tabindex: [{
            type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"]
        }], valueChange: [{
            type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Output"]
        }], filterChange: [{
            type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Output"]
        }], selectionChange: [{
            type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Output"]
        }], open: [{
            type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Output"]
        }], close: [{
            type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Output"]
        }], onFocus: [{
            type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Output"],
            args: ['focus']
        }], onBlur: [{
            type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Output"],
            args: ['blur']
        }], widgetClasses: [{
            type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["HostBinding"],
            args: ['class.k-widget']
        }, {
            type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["HostBinding"],
            args: ['class.k-dropdown']
        }, {
            type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["HostBinding"],
            args: ['class.k-header']
        }], data: [{
            type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"]
        }], value: [{
            type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"]
        }], popupSettings: [{
            type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"]
        }], itemDisabled: [{
            type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"]
        }], virtual: [{
            type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"]
        }], tabIndex: [{
            type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"],
            args: ["tabIndex"]
        }], dir: [{
            type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["HostBinding"],
            args: ['attr.dir']
        }], valuePrimitive: [{
            type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"]
        }], iconClass: [{
            type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"]
        }], loading: [{
            type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"]
        }], textField: [{
            type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"]
        }], valueField: [{
            type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"]
        }], defaultItem: [{
            type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"]
        }], itemTemplate: [{
            type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["ContentChild"],
            args: [ItemTemplateDirective]
        }], groupTemplate: [{
            type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["ContentChild"],
            args: [GroupTemplateDirective]
        }], fixedGroupTemplate: [{
            type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["ContentChild"],
            args: [FixedGroupTemplateDirective]
        }], valueTemplate: [{
            type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["ContentChild"],
            args: [ValueTemplateDirective]
        }], headerTemplate: [{
            type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["ContentChild"],
            args: [HeaderTemplateDirective]
        }], footerTemplate: [{
            type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["ContentChild"],
            args: [FooterTemplateDirective]
        }], noDataTemplate: [{
            type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["ContentChild"],
            args: [NoDataTemplateDirective]
        }], container: [{
            type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["ViewChild"],
            args: ['container', { read: _angular_core__WEBPACK_IMPORTED_MODULE_0__["ViewContainerRef"] }]
        }], popupTemplate: [{
            type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["ViewChild"],
            args: ['popupTemplate']
        }], wrapper: [{
            type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["ViewChild"],
            args: ['wrapper', { static: true }]
        }], optionsList: [{
            type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["ViewChild"],
            args: ['optionsList']
        }] }); })();

/* tslint:disable:max-line-length */
/**
 * Renders the content of the custom list item in the MultiSelect
 * ([see example]({% slug templates_multiselect %}#toc-customizing-the-item-content)).
 * The template context is set to the current component.
 * To get a reference to the current text that is typed by the
 * user, use the `let-customItem` directive.
 *
 * > The `CustomItemTemplate` directive can only be used with the MultiSelect component.
 *
 * @example
 * ```ts
 * _@Component({
 * selector: 'my-app',
 * template: `
 *  <kendo-multiselect [data]="listItems" [allowCustom]="true">
 *    <ng-template kendoMultiSelectCustomItemTemplate let-customItem>
 *      <span>New Item: {{customItem}}</span>
 *    </ng-template>
 *  </kendo-multiselect>
 * `
 * })
 * class AppComponent {
 *   public listItems: Array<string> = ["Item 1", "Item 2", "Item 3", "Item 4"];
 * }
 * ```
 *
 */
class CustomItemTemplateDirective {
    constructor(templateRef) {
        this.templateRef = templateRef;
    }
}
CustomItemTemplateDirective.ɵfac = function CustomItemTemplateDirective_Factory(t) { return new (t || CustomItemTemplateDirective)(_angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](_angular_core__WEBPACK_IMPORTED_MODULE_0__["TemplateRef"])); };
CustomItemTemplateDirective.ɵdir = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdefineDirective"]({ type: CustomItemTemplateDirective, selectors: [["", "kendoMultiSelectCustomItemTemplate", ""]] });
/** @nocollapse */
CustomItemTemplateDirective.ctorParameters = () => [
    { type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["TemplateRef"] }
];
/*@__PURE__*/ (function () { _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵsetClassMetadata"](CustomItemTemplateDirective, [{
        type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Directive"],
        args: [{
                selector: '[kendoMultiSelectCustomItemTemplate]'
            }]
    }], function () { return [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["TemplateRef"] }]; }, null); })();

/* tslint:disable:max-line-length */
/**
 * Renders the selected tag value of the MultiSelect
 * ([see example]({% slug templates_multiselect %}#toc-tag-template)).
 * The template context is set to the current component.
 * To get a reference to the current data item, use the `let-dataItem` directive.
 *
 * > The `TagTemplate` directive can only be used with the MultiSelect component.
 *
 * @example
 * ```ts
 * _@Component({
 * selector: 'my-app',
 * template: `
 *  <kendo-multiselect [data]="items">
 *    <ng-template kendoMultiSelectTagTemplate let-dataItem>
 *      <span>{{dataItem}} option</span>
 *    </ng-template>
 *  </kendo-multiselect>
 * `
 * })
 * class AppComponent {
 *   public items: Array<string> = ["Item 1", "Item 2", "Item 3", "Item 4"];
 * }
 * ```
 */
class TagTemplateDirective {
    constructor(templateRef) {
        this.templateRef = templateRef;
    }
}
TagTemplateDirective.ɵfac = function TagTemplateDirective_Factory(t) { return new (t || TagTemplateDirective)(_angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](_angular_core__WEBPACK_IMPORTED_MODULE_0__["TemplateRef"])); };
TagTemplateDirective.ɵdir = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdefineDirective"]({ type: TagTemplateDirective, selectors: [["", "kendoMultiSelectTagTemplate", ""]] });
/** @nocollapse */
TagTemplateDirective.ctorParameters = () => [
    { type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["TemplateRef"] }
];
/*@__PURE__*/ (function () { _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵsetClassMetadata"](TagTemplateDirective, [{
        type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Directive"],
        args: [{
                selector: '[kendoMultiSelectTagTemplate]'
            }]
    }], function () { return [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["TemplateRef"] }]; }, null); })();

/* tslint:disable:max-line-length */
/**
 * Renders the grouped tag values in the MultiSelect
 * ([see example]({% slug summarytagmode_multiselect %})).
 * The template context is set to the current component.
 * To get a reference to the current grouped
 * data items collection, use the `let-dataItems` directive.
 *
 * > The `GroupTagTemplate` directive can only be used with the MultiSelect component.
 *
 * @example
 * ```ts
 * _@Component({
 * selector: 'my-app',
 * template: `
 *  <kendo-multiselect kendoMultiSelectSummaryTag [data]="items">
 *    <ng-template kendoMultiSelectGroupTagTemplate let-dataItems>
 *      <span>{{dataItems.length}} item(s) selected</span>
 *    </ng-template>
 *  </kendo-multiselect>
 * `
 * })
 * class AppComponent {
 *   public items: Array<string> = ["Item 1", "Item 2", "Item 3", "Item 4"];
 * }
 * ```
 */
class GroupTagTemplateDirective {
    constructor(templateRef) {
        this.templateRef = templateRef;
    }
}
GroupTagTemplateDirective.ɵfac = function GroupTagTemplateDirective_Factory(t) { return new (t || GroupTagTemplateDirective)(_angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](_angular_core__WEBPACK_IMPORTED_MODULE_0__["TemplateRef"])); };
GroupTagTemplateDirective.ɵdir = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdefineDirective"]({ type: GroupTagTemplateDirective, selectors: [["", "kendoMultiSelectGroupTagTemplate", ""]] });
/** @nocollapse */
GroupTagTemplateDirective.ctorParameters = () => [
    { type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["TemplateRef"] }
];
/*@__PURE__*/ (function () { _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵsetClassMetadata"](GroupTagTemplateDirective, [{
        type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Directive"],
        args: [{
                selector: '[kendoMultiSelectGroupTagTemplate]'
            }]
    }], function () { return [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["TemplateRef"] }]; }, null); })();

/**
 * Arguments for the `removeTag` event. The `removeTag` event fires when a tag is about
 * to the removed. If you cancel the event, the removal is prevented.
 */
class RemoveTagEvent extends PreventableEvent {
    /**
     * Constructs the event arguments for the `remove` event.
     * @param dataItem - The data item or an array of data items that will be removed.
     */
    constructor(dataItem) {
        super();
        this.dataItem = dataItem;
    }
}

/* tslint:disable:max-line-length */
const MULTISELECT_VALUE_ACCESSOR = {
    multi: true,
    provide: _angular_forms__WEBPACK_IMPORTED_MODULE_2__["NG_VALUE_ACCESSOR"],
    // tslint:disable-next-line:no-use-before-declare
    useExisting: Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["forwardRef"])(() => MultiSelectComponent)
};
/**
 * Represents the [Kendo UI MultiSelect component for Angular]({% slug overview_multiselect %}).
 *
 * @example
 * ```ts
 * _@Component({
 * selector: 'my-app',
 * template: `
 *  <kendo-multiselect [data]="listItems">
 *  </kendo-multiselect>
 * `
 * })
 * class AppComponent {
 *   public listItems: Array<string> = ["Item 1", "Item 2", "Item 3", "Item 4"];
 * }
 * ```
 */
class MultiSelectComponent {
    constructor(localization, popupService, dataService, selectionService, navigationService, disabledItemsService, cdr, differs, renderer, hostElement, _zone, touchEnabled) {
        this.localization = localization;
        this.popupService = popupService;
        this.dataService = dataService;
        this.selectionService = selectionService;
        this.navigationService = navigationService;
        this.disabledItemsService = disabledItemsService;
        this.cdr = cdr;
        this.differs = differs;
        this.renderer = renderer;
        this.hostElement = hostElement;
        this._zone = _zone;
        this.touchEnabled = touchEnabled;
        this.listBoxId = guid();
        this.tagListId = guid();
        this.tagPrefix = "tag-" + guid();
        this.optionPrefix = "option-" + guid();
        this.focusedTagIndex = undefined;
        /**
         * @hidden
         */
        this.focusableId = `k-${guid()}`;
        /**
         * Determines whether to close the options list of the MultiSelect after the item selection is finished
         * ([see example]({% slug openstate_multiselect %}#toc-keeping-the-options-list-open-while-on-focus)).
         * @default true
         */
        this.autoClose = true;
        /**
         * Specifies the [`tabindex`](https://developer.mozilla.org/en-US/docs/Web/HTML/Global_attributes/tabindex) of the component.
         */
        this.tabindex = 0;
        /**
         * Sets the disabled state of the component.
         */
        this.disabled = false;
        /**
         * Sets the read-only state of the component.
         */
        this.readonly = false;
        /**
         * Enables the [filtering]({% slug filtering_multiselect %}) functionality of the MultiSelect.
         */
        this.filterable = false;
        /**
         * Sets the height of the suggestions list. By default, `listHeight` is 200px.
         *
         * > The `listHeight` property affects only the list of suggestions and not the whole popup container.
         * > To set the height of the popup container, use `popupSettings.height`.
         */
        this.listHeight = 200;
        /**
         * If set to `true`, renders a button on hovering over the component.
         * Clicking this button resets the value of the component to an empty array and triggers the `change` event.
         */
        this.clearButton = true;
        /**
         * A user-defined callback function which receives an array of selected data items and maps them to an array of tags.
         *
         * @param { Any[] } dataItems - The selected data items from the list.
         * @returns { Any[] } - The tags that will be rendered by the component.
         */
        this.tagMapper = (tags) => tags || [];
        /**
         * Specifies whether the MultiSelect allows user-defined values that are not present in the dataset
         * ([more information and examples]({% slug custom_values_multiselect %})).
         * Defaults to `false`.
         */
        this.allowCustom = false;
        /**
         * A user-defined callback function which returns normalized custom values.
         * Typically used when the data items are different from type `string`.
         *
         * @param { Any } value - The custom value that is defined by the user.
         * @returns { Any }
         *
         * @example
         * ```ts
         * import { map } from 'rxjs/operators';
         *
         * _@Component({
         * selector: 'my-app',
         * template: `
         *   <kendo-multiselect
         *       [allowCustom]="true"
         *       [data]="listItems"
         *       [textField]="'text'"
         *       [valueField]="'value'"
         *       [valueNormalizer]="valueNormalizer"
         *       (valueChange)="onValueChange($event)"
         *   >
         *   </kendo-multiselect>
         * `
         * })
         *
         * class AppComponent {
         *   public listItems: Array<{ text: string, value: number }> = [
         *       { text: "Small", value: 1 },
         *       { text: "Medium", value: 2 },
         *       { text: "Large", value: 3 }
         *   ];
         *
         *   public onValueChange(value) {
         *       console.log("valueChange : ", value);
         *   }
         *
         *   public valueNormalizer = (text$: Observable<string>) => text$.pipe(map((text: string) => {
         *      return {
         *         value: Math.floor(Math.random() * (1000 - 100) + 1000), //generate unique valueField
         *         text: text };
         *   }));
         *
         * }
         * ```
         */
        this.valueNormalizer = (text) => text.pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_5__["map"])((userInput) => {
            const comparer = (item) => typeof item === 'string' && userInput.toLowerCase() === item.toLowerCase();
            const matchingValue = this.value.find(comparer);
            if (matchingValue) {
                return matchingValue;
            }
            const matchingItem = this.dataService.find(comparer);
            return matchingItem ? matchingItem : userInput;
        }));
        /**
         * Fires each time the user types in the input field.
         * You can filter the source based on the passed filtration value.
         */
        this.filterChange = new _angular_core__WEBPACK_IMPORTED_MODULE_0__["EventEmitter"]();
        /**
         * Fires each time the value is changed&mdash;
         * when the component is blurred or the value is cleared through the **Clear** button
         * ([see example]({% slug overview_multiselect %}#toc-events)).
         * When the value of the component is programmatically changed to `ngModel` or `formControl`
         * through its API or form binding, the `valueChange` event is not triggered because it
         * might cause a mix-up with the built-in `valueChange` mechanisms of the `ngModel` or `formControl` bindings.
         */
        this.valueChange = new _angular_core__WEBPACK_IMPORTED_MODULE_0__["EventEmitter"]();
        /**
         * Fires each time the popup is about to open
         * ([see example]({% slug openstate_multiselect %}#toc-preventing-opening-and-closing)).
         * This event is preventable. If you cancel it, the popup will remain closed.
         */
        this.open = new _angular_core__WEBPACK_IMPORTED_MODULE_0__["EventEmitter"]();
        /**
         * Fires each time the popup is about to close
         * ([see example]({% slug openstate_multiselect %}#toc-preventing-opening-and-closing)).
         * This event is preventable. If you cancel it, the popup will remain open.
         */
        this.close = new _angular_core__WEBPACK_IMPORTED_MODULE_0__["EventEmitter"]();
        /**
         * Fires each time the user focuses the MultiSelect.
         */
        this.onFocus = new _angular_core__WEBPACK_IMPORTED_MODULE_0__["EventEmitter"](); //tslint:disable-line:no-output-rename
        /**
         * Fires each time the MultiSelect gets blurred.
         */
        this.onBlur = new _angular_core__WEBPACK_IMPORTED_MODULE_0__["EventEmitter"](); //tslint:disable-line:no-output-rename
        /**
         * Fires each time a tag is about to be removed.
         * This event is preventable. If you cancel it, the tag will not be removed.
         */
        this.removeTag = new _angular_core__WEBPACK_IMPORTED_MODULE_0__["EventEmitter"]();
        this.widgetClasses = true;
        this.onChangeCallback = (_) => { };
        this.onTouchedCallback = (_) => { };
        this._placeholder = '';
        this._open = false;
        this._value = [];
        this._popupSettings = { animate: true };
        this.isFocused = false;
        this.selectedDataItems = [];
        this.customValueSubject = new rxjs__WEBPACK_IMPORTED_MODULE_4__["Subject"]();
        this.observableSubscriptions = new rxjs__WEBPACK_IMPORTED_MODULE_4__["Subscription"]();
        this.hostElement = hostElement.nativeElement;
        this.popupMouseDownHandler = this.onMouseDown.bind(this);
        this.data = [];
        this.direction = this.localization.rtl ? 'rtl' : 'ltr';
        this.subscribeEvents();
    }
    /**
     * Focuses the MultiSelect.
     */
    focus() {
        if (!this.disabled) {
            this.searchbar.focus();
        }
    }
    /**
     * @hidden
     */
    onSearchBarFocus() {
        if (!this.isFocused) {
            this.isFocused = true;
            this.onFocus.emit();
        }
    }
    /**
     * Blurs the MultiSelect.
     */
    blur() {
        if (!this.disabled) {
            this.searchbar.blur();
        }
    }
    /**
     * @hidden
     */
    onSearchBarBlur() {
        if (this.isFocused) {
            this.closePopup();
            this.isFocused = false;
            if (!this.allowCustom) {
                this.clearFilter();
            }
            this.onBlur.emit();
            this.onTouchedCallback();
        }
    }
    /**
     * @hidden
     */
    wrapperMousedown(event) {
        const inputElement = this.searchbar.input.nativeElement;
        if (event.button === 0) {
            if (this.isFocused && this.isOpen && event.target === inputElement) {
                return;
            }
            if (!this.touchEnabled || (this.touchEnabled && event.target.tagName !== 'SPAN')) {
                this.searchbar.focus();
            }
            this.togglePopup(!this.isOpen);
            event.preventDefault();
        }
    }
    /**
     * @hidden
     */
    onMouseDown(event) {
        event.preventDefault();
    }
    /**
     * @hidden
     */
    onResize() {
        if (this._open) {
            const popupWrapper = this.popupRef.popupElement;
            const { min, max } = this.width;
            popupWrapper.style.minWidth = min;
            popupWrapper.style.width = max;
        }
    }
    get appendTo() {
        const { appendTo } = this.popupSettings;
        if (!appendTo || appendTo === 'root') {
            return undefined;
        }
        return appendTo === 'component' ? this.container : appendTo;
    }
    /**
     * Sets the data of the MultiSelect.
     *
     * > The data has to be provided in an array-like list of items.
     */
    set data(data) {
        this.dataService.data = data || [];
        if (this.virtual) {
            this.virtual.skip = 0;
        }
        this.setState(this.value);
    }
    get data() {
        const virtual = this.virtual;
        if (virtual) {
            const start = virtual.skip || 0;
            const end = start + virtual.pageSize;
            //Use length instead of itemsCount because of grouping
            virtual.total = this.dataService.data.length;
            return this.dataService.data.slice(start, end);
        }
        return this.dataService.data;
    }
    /**
     * Sets the value of the MultiSelect. It can be either of the primitive (string, numbers) or of the complex (objects) type.
     * To define the type, use the `valuePrimitive` option.
     *
     * > All selected values which are not present in the source are ignored.
     */
    set value(values) {
        this._value = values ? values : [];
        if (!this.differ && this.value) {
            this.differ = this.differs.find(this.value).create();
        }
    }
    get value() {
        return this._value;
    }
    /**
     * @hidden
     */
    set tabIndex(tabIndex) {
        this.tabindex = tabIndex;
    }
    get tabIndex() {
        return this.tabindex;
    }
    /**
     * The hint which is displayed when the component is empty.
     * When the values are selected, it disappears.
     */
    set placeholder(text) {
        this._placeholder = text || '';
    }
    get placeholder() {
        return this.selectedDataItems.length ? '' : this._placeholder;
    }
    /**
     * Defines a Boolean function that is executed for each data item in the component
     * ([see examples]({% slug disableditems_multiselect %})). Determines whether the item will be disabled.
     */
    set itemDisabled(fn) {
        if (typeof fn !== 'function') {
            throw new Error(`itemDisabled must be a function, but received ${JSON.stringify(fn)}.`);
        }
        this.disabledItemsService.itemDisabled = fn;
    }
    /**
     * Enables the [virtualization]({% slug virtualization_multiselect %}) functionality.
     */
    set virtual(settings) {
        this._virtualSettings = normalizeVirtualizationSettings(settings);
    }
    get virtual() {
        return this._virtualSettings;
    }
    /**
     * Configures the popup of the MultiSelect.
     *
     * The available options are:
     * - `animate: Boolean`&mdash;Controls the popup animation. By default, the open and close animations are enabled.
     * - `width: Number | String`&mdash;Sets the width of the popup container. By default, the width of the host element is used. If set to `auto`, the component automatically adjusts the width of the popup and no item labels are wrapped. The `auto` mode is not supported when virtual scrolling is enabled.
     * - `height: Number`&mdash;Sets the height of the popup container.
     * - `popupClass: String`&mdash;Specifies a list of CSS classes that are used to style the popup.
     * - `appendTo: "root" | "component" | ViewContainerRef`&mdash;Specifies the component to which the popup will be appended.
     */
    set popupSettings(settings) {
        this._popupSettings = Object.assign({ animate: true }, settings);
    }
    get popupSettings() {
        return this._popupSettings;
    }
    get dir() {
        return this.direction;
    }
    get focusedClass() {
        return this.isFocused;
    }
    get disabledClass() {
        return this.disabled;
    }
    get listContainerClasses() {
        const containerClasses = ['k-list-container', 'k-reset'];
        if (this.popupSettings.popupClass) {
            containerClasses.push(this.popupSettings.popupClass);
        }
        return containerClasses;
    }
    get width() {
        let wrapperOffsetWidth = 0;
        if (Object(_progress_kendo_angular_common__WEBPACK_IMPORTED_MODULE_1__["isDocumentAvailable"])()) {
            wrapperOffsetWidth = this.wrapper.nativeElement.offsetWidth;
        }
        const width = this.popupSettings.width || wrapperOffsetWidth;
        const minWidth = isNaN(wrapperOffsetWidth) ? wrapperOffsetWidth : `${wrapperOffsetWidth}px`;
        const maxWidth = isNaN(width) ? width : `${width}px`;
        return { min: minWidth, max: maxWidth };
    }
    get height() {
        const popupHeight = this.popupSettings.height;
        return isPresent(popupHeight) ? `${popupHeight}px` : 'auto';
    }
    get activeDescendant() {
        const focusedTagIndex = this.focusedTagIndex;
        const focusedListIndex = this.selectionService.focused;
        let prefix;
        let item;
        if (isPresent(focusedTagIndex) && !this.isOpen) {
            item = this.tags[focusedTagIndex];
            prefix = this.tagPrefix;
        }
        else if (isPresent(focusedListIndex) && focusedListIndex !== -1 && this.isOpen) {
            item = this.dataService.itemAt(focusedListIndex);
            prefix = this.optionPrefix;
        }
        else {
            return null;
        }
        return prefix + "-" + this.prop(this.valueField, this.valuePrimitive)(item);
    }
    get noDataLabel() {
        if (this.dataService.itemsCount === 0) {
            return this.noDataText;
        }
    }
    get clearTitle() {
        return this.localization.get('clearTitle');
    }
    /**
     * @hidden
     */
    verifySettings() {
        const valueOrText = !isPresent(this.valueField) !== !isPresent(this.textField);
        if (!Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["isDevMode"])() || this.value.length === 0) {
            return;
        }
        if (!isArray(this.value)) {
            throw new Error(MultiselectMessages.array);
        }
        if (this.valuePrimitive === true && isObjectArray(this.value)) {
            throw new Error(MultiselectMessages.primitive);
        }
        if (this.valuePrimitive === false && !isObjectArray(this.value)) {
            throw new Error(MultiselectMessages.object);
        }
        if (valueOrText) {
            throw new Error(MultiselectMessages.textAndValue);
        }
    }
    /**
     * @hidden
     */
    change(event) {
        const isCustomItem = (isPresent(event.added) || isPresent(event.removed)) && (event.added === -1 || event.removed === -1);
        if (isCustomItem) {
            this.addCustomValue(this.text);
            return; // The change is emited asynchronosly.
        }
        // Existing items.
        if (isPresent(event.added)) {
            const dataItem = this.dataService.itemAt(event.added);
            const newItem = (this.valuePrimitive && isPresent(dataItem) && isPresent(dataItem[this.valueField])) ? dataItem[this.valueField] : dataItem;
            this.value = [...this.value, newItem];
            this.cdr.markForCheck();
        }
        if (isPresent(event.removed)) {
            const dataItem = this.dataService.itemAt(event.removed);
            const prop = this.prop(this.valueField, this.valuePrimitive);
            const filter$$1 = (item) => prop(item) !== prop(dataItem);
            this.value = this.value.filter(filter$$1);
            this.selectedDataItems = this.selectedDataItems.filter(filter$$1);
            this.tags = this.tagMapper(this.selectedDataItems.slice());
            this.cdr.detectChanges();
        }
        this.emitValueChange();
    }
    /**
     * @hidden
     */
    setState(value) {
        const objectArray = isObjectArray(value);
        let data = this.dataService.data;
        if (this.dataService.grouped) {
            data = data.filter(item => !item.header).map(item => item.value);
        }
        const selection = selectedIndices(this.value, data, this.valueField);
        this.selectionService.resetSelection(selection);
        if (this.isOpen && this.selectionService.focused === undefined) {
            this.selectionService.focused = this.dataService.itemsCount ? this.firstFocusableIndex(0) : this.allowCustom ? -1 : undefined;
        }
        if (!this.text) {
            if (!(isPresent(value) && value.length)) {
                this.selectedDataItems = [];
            }
            if (this.valuePrimitive && !this.valueField) {
                this.selectedDataItems = value.slice();
            }
            if (objectArray || this.valuePrimitive && this.valueField) {
                this.selectedDataItems = resolveAllValues(value, data, this.valueField);
            }
            if (this.selectedDataItems.length < value.length) {
                const prop = this.prop(this.valueField, this.valuePrimitive);
                const dataItems = value
                    .map(current => {
                    const dataItem = this.selectedDataItems.find(item => prop(item) === prop(current));
                    return isPresent(dataItem) ? dataItem : this.resolveDataItemFromTags(current);
                })
                    .filter(dataItem => isPresent(dataItem));
                this.selectedDataItems = dataItems;
            }
        }
        this.tags = this.tagMapper(this.selectedDataItems.slice(0));
        this.cdr.markForCheck();
    }
    /**
     * @hidden
     */
    handleFilter(text) {
        this.text = text;
        if (text && !this.isOpen) {
            this.openPopup();
        }
        if (this.filterable) {
            this.filterChange.emit(text);
        }
        else {
            this.searchTextAndFocus(text);
        }
        this.searchbar.setInputSize();
    }
    /**
     * @hidden
     */
    pageChange(event) {
        const virtual = this.virtual;
        virtual.skip = event.skip;
    }
    /**
     * @hidden
     */
    clearFilter() {
        if (this.filterable && this.text) {
            this.filterChange.emit("");
        }
        this.text = "";
        /* Clearing the value from the input as the setInputSize calculation will be incorrect otherwise.
         Calling cdr.detectChanges to clear the input value as a result of property binding
         causes JAWS to read outdated tag values in IE upon tag selection for some reason. */
        this.searchbar.input.nativeElement.value = "";
        this.searchbar.setInputSize();
    }
    /**
     * @hidden
     */
    handleNavigate(event) {
        const navigateInput = this.text && event.keyCode !== Keys.down && event.keyCode !== Keys.up;
        const selectValue = this.text && event.keyCode === Keys.enter || event.keyCode === Keys.esc;
        const deleteTag = !this.text && event.keyCode === Keys.backspace && this.tags.length > 0;
        if (deleteTag) {
            this.handleBackspace();
            return;
        }
        if (this.disabled || navigateInput && !selectValue) {
            return;
        }
        const eventData = event;
        const focused = isNaN(this.selectionService.focused) ? -1 : this.selectionService.focused;
        const action = this.navigationService.process({
            current: focused,
            max: this.dataService.itemsCount - 1,
            min: this.allowCustom && this.text ? -1 : 0,
            open: this.isOpen,
            originalEvent: eventData
        });
        if (action !== NavigationAction.Undefined &&
            ((action === NavigationAction.Enter && this.isOpen) || action !== NavigationAction.Enter)) {
            event.preventDefault();
        }
    }
    /**
     * @hidden
     */
    handleRemoveTag(tagData) {
        const eventArgs = new RemoveTagEvent(tagData);
        if (this.disabled || this.readonly) {
            return;
        }
        this.focus();
        this.removeTag.emit(eventArgs);
        if (eventArgs.isDefaultPrevented()) {
            return;
        }
        if (tagData instanceof Array) {
            this.removeGroupTag(tagData);
        }
        else {
            this.removeSingleTag(tagData);
        }
        this.cdr.detectChanges();
    }
    /**
     * @hidden
     */
    clearAll(event) {
        event.stopImmediatePropagation();
        this.clearFilter();
        this.reset();
        this.emitValueChange();
    }
    /**
     * @hidden
     */
    addCustomValue(text) {
        this.customValueSubject.next(text);
    }
    ngAfterContentChecked() {
        this.verifySettings();
    }
    ngDoCheck() {
        if (this.differ) {
            const valueChanges = this.differ.diff(this.value);
            if (valueChanges && !this.valueChangeDetected) {
                this.selectedDataItems = this.getSelectedDataItems(valueChanges);
                this.tags = this.tagMapper(this.selectedDataItems.slice(0));
                if (!(this.tags && this.dataService.data)) {
                    return;
                }
                const isValueCustom = (value) => this.dataService.indexOf(value) === -1;
                const isValueSelected = (value) => this.selectionService.isSelected(this.dataService.indexOf(value));
                const reselectionRequired = this.selectedDataItems.some(value => !(isValueCustom(value) || isValueSelected(value)));
                if (reselectionRequired) {
                    this.setState(this.value);
                }
            }
        }
        this.valueChangeDetected = false;
    }
    ngOnInit() {
        this.renderer.removeAttribute(this.hostElement, "tabindex");
        this.createCustomValueStream();
        this.localizationChangeSubscription = this.localization
            .changes.subscribe(({ rtl }) => {
            this.direction = rtl ? 'rtl' : 'ltr';
            this.setMessages();
        });
        this.setMessages();
    }
    ngOnChanges(changes) {
        const virtual = this.virtual;
        const requestInitialData = virtual && changes.data && changes.data.isFirstChange();
        if (requestInitialData) {
            this.pageChange({ skip: 0, take: virtual.pageSize });
        }
        if (this.valuePrimitive === undefined) {
            this.valuePrimitive = !this.valueField;
        }
        if (Object(_progress_kendo_angular_common__WEBPACK_IMPORTED_MODULE_1__["isChanged"])("valueNormalizer", changes)) {
            this.createCustomValueStream();
        }
        const STATE_PROPS = /(data|textField|valueField|valuePrimitive|value)/g;
        if (changes.hasOwnProperty("value")) {
            this.valueChangeDetected = true;
        }
        if (STATE_PROPS.test(Object.keys(changes).join())) {
            this.setState(this.value);
        }
    }
    ngAfterViewInit() {
        this.searchbar.setInputSize();
    }
    ngOnDestroy() {
        this._toggle(false);
        this.unsubscribeEvents();
        clearTimeout(this.messagesTimeout);
        if (this.localizationChangeSubscription) {
            this.localizationChangeSubscription.unsubscribe();
        }
    }
    /**
     * Toggles the visibility of the popup
     * ([see example]({% slug openstate_multiselect %}#toc-setting-the-initially-opened-component)).
     * If you use the `toggle` method to open or close the popup, the respective `open` and `close` events will not be fired.
     *
     * @param open - The state of the popup.
     */
    toggle(open) {
        // The Promise is required for opening the popup on load.
        // Otherwise, the "Expression has changed..." type error will be thrown.
        Promise.resolve(null).then(() => {
            this._toggle((open === undefined) ? !this._open : open);
            this.cdr.markForCheck();
        });
    }
    /**
     * Returns the current open state of the popup.
     */
    get isOpen() {
        return this._open;
    }
    /**
     * Resets the value of the MultiSelect.
     * If you use the `reset` method to clear the value of the component,
     * the model will not update automatically and the `selectionChange` and `valueChange` events will not be fired.
     */
    reset() {
        this.text = "";
        this.value = [];
        this.selectedDataItems = [];
        this.setState([]);
        this.cdr.markForCheck();
    }
    // NG MODEL BINDINGS
    /**
     * @hidden
     */
    writeValue(value) {
        this.value = value || [];
        this.setState(this.value);
        this.verifySettings();
    }
    /**
     * @hidden
     */
    registerOnChange(fn) {
        this.onChangeCallback = fn;
    }
    /**
     * @hidden
     */
    registerOnTouched(fn) {
        this.onTouchedCallback = fn;
    }
    /**
     * @hidden
     */
    setDisabledState(isDisabled) {
        this.disabled = isDisabled;
    }
    /**
     * @hidden
     */
    onTagMapperChange() {
        this.tags = this.tagMapper(this.selectedDataItems.slice(0));
        this.cdr.markForCheck();
    }
    prop(field, usePrimitive) {
        return (dataItem) => {
            if (isPresent(dataItem)) {
                if (usePrimitive) {
                    return field && isObject(dataItem) ? dataItem[field] : dataItem;
                }
                else {
                    return dataItem[field];
                }
            }
            return null;
        };
    }
    subscribeEvents() {
        if (!Object(_progress_kendo_angular_common__WEBPACK_IMPORTED_MODULE_1__["isDocumentAvailable"])()) {
            return;
        }
        const isOpen = () => this.isOpen;
        const isClosed = () => !this.isOpen;
        const isTagFocused = () => !this.isOpen && this.focusedTagIndex !== undefined;
        [
            this.selectionService.onChange.subscribe(this.handleItemChange.bind(this)),
            this.navigationService.esc.subscribe(this.closePopup.bind(this)),
            this.navigationService.enter.pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_5__["filter"])(isOpen)).subscribe(this.handleEnter.bind(this)),
            this.navigationService.open.subscribe(this.openPopup.bind(this)),
            this.navigationService.close.subscribe(this.handleClose.bind(this)),
            this.navigationService.up.pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_5__["filter"])(isOpen)).subscribe((event) => this.handleUp(event.index)),
            this.navigationService.home.pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_5__["filter"])(() => isClosed)).subscribe(this.handleHome.bind(this)),
            this.navigationService.end.pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_5__["filter"])(() => isClosed)).subscribe(this.handleEnd.bind(this)),
            this.navigationService.backspace.pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_5__["filter"])(isTagFocused)).subscribe(this.handleBackspace.bind(this)),
            this.navigationService.delete.pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_5__["filter"])(isTagFocused)).subscribe(this.handleDelete.bind(this)),
            this.navigationService.left.subscribe(this.handleLeftKey.bind(this)),
            this.navigationService.right.subscribe(this.handleRightKey.bind(this)),
            this.navigationService.down.subscribe((event) => this.handleDownKey(event.index))
        ].forEach(s => this.observableSubscriptions.add(s));
    }
    unsubscribeEvents() {
        if (!Object(_progress_kendo_angular_common__WEBPACK_IMPORTED_MODULE_1__["isDocumentAvailable"])()) {
            return;
        }
        this.observableSubscriptions.unsubscribe();
        if (this.customValueSubscription) {
            this.customValueSubscription.unsubscribe();
        }
    }
    removeGroupTag(dataItems) {
        const prop = this.prop(this.valueField, this.valuePrimitive);
        let data = this.dataService.data;
        if (this.dataService.grouped) {
            data = data.filter(item => !item.header).map(item => item.value);
        }
        const dataItemValues = new Set(dataItems.map(item => prop(item)));
        this.value = this.value.filter(value => !dataItemValues.has(prop(value)));
        this.selectedDataItems = this.selectedDataItems.filter(value => !dataItemValues.has(prop(value)));
        const selection = selectedIndices(this.value, data, this.valueField);
        this.selectionService.resetSelection(selection);
        this.tags = this.tagMapper(this.selectedDataItems.slice(0));
        this.cdr.markForCheck();
        this.emitValueChange();
    }
    removeSingleTag(dataItem) {
        const prop = this.prop(this.valueField, this.valuePrimitive);
        let data = this.dataService.data;
        if (this.dataService.grouped) {
            data = data.filter(item => !item.header).map(item => item.value);
        }
        const index = selectedIndices([dataItem], data, this.valueField)[0];
        if (isNumber(index)) {
            this.selectionService.unselect(index);
            this.togglePopup(false);
        }
        else { // the deleted item is not present in the source
            const filter$$1 = item => prop(item) !== prop(dataItem);
            this.value = this.value.filter(filter$$1);
            this.selectedDataItems = this.selectedDataItems.filter(filter$$1);
            this.tags = this.tagMapper(this.selectedDataItems.slice(0));
            this.cdr.markForCheck();
            this.emitValueChange();
        }
    }
    createCustomValueStream() {
        if (this.customValueSubscription) {
            this.customValueSubscription.unsubscribe();
        }
        this.customValueSubscription = this.customValueSubject.pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_5__["tap"])(() => {
            this.loading = true;
            this.disabled = true;
            this.cdr.detectChanges();
        }), this.valueNormalizer, Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_5__["catchError"])(() => {
            this.loading = false;
            this.disabled = false;
            this.clearFilter();
            if (this.autoClose) {
                this.togglePopup(false);
                this.nextTick(() => {
                    this.searchbar.focus();
                });
            }
            this.createCustomValueStream();
            return Object(rxjs__WEBPACK_IMPORTED_MODULE_4__["of"])(null);
        }))
            .subscribe((normalizedValue) => {
            this.loading = false;
            this.disabled = false;
            this.clearFilter();
            if (isPresent(normalizedValue)) { //if valueNormalizer returns `null` or `undefined` custom value is discarded
                const newValue = this.valuePrimitive ? getter(normalizedValue, this.valueField) : normalizedValue;
                const itemIndex = this.dataService.indexOf(newValue);
                const customItem = itemIndex === -1;
                if (this.value.indexOf(newValue) === -1) {
                    if (!customItem) {
                        this.selectionService.add(itemIndex);
                    }
                    else {
                        this.value = [...this.value, newValue];
                    }
                    this.selectedDataItems = [...this.selectedDataItems, normalizedValue];
                }
                else {
                    if (!customItem && this.selectionService.isSelected(itemIndex)) {
                        this.selectionService.unselect(itemIndex);
                    }
                    else {
                        this.value.splice(this.value.indexOf(newValue), 1);
                        this.selectedDataItems = this.selectedDataItems.filter(item => getter(item, this.valueField) !== newValue);
                    }
                }
                this.tags = this.tagMapper(this.selectedDataItems.slice(0));
                this.emitValueChange();
            }
            if (this.autoClose) {
                this.togglePopup(false);
                this.nextTick(() => {
                    this.searchbar.focus();
                });
            }
        });
    }
    handleItemChange(event) {
        this.change(event);
        if (this.autoClose) {
            this.togglePopup(false);
        }
        if (isPresent(event.added) && event.added !== -1) {
            this.clearFilter();
        }
    }
    handleEnter(event) {
        const service = this.selectionService;
        const focusedIndex = this.selectionService.focused;
        if (this.isOpen) {
            event.originalEvent.preventDefault();
        }
        if (focusedIndex === -1) {
            if (this.allowCustom && this.text) {
                this.addCustomValue(this.text);
            }
            return; // Clear filter & close are done at customValueSubscription due to race conditions.
        }
        if (service.isSelected(focusedIndex)) {
            service.unselect(focusedIndex);
        }
        else {
            service.add(focusedIndex);
        }
        this.clearFilter();
        if (this.autoClose) {
            this.togglePopup(false);
        }
    }
    handleClose() {
        this.closePopup();
        this.searchbar.focus();
    }
    handleEnd() {
        this.focusedTagIndex = this.tags.length - 1;
    }
    handleHome() {
        this.focusedTagIndex = 0;
    }
    handleUp(index) {
        this.selectionService.focused = index;
    }
    handleBackspace() {
        if (this.focusedTagIndex !== undefined) {
            this.handleDelete();
        }
        else {
            this.handleRemoveTag(this.tags[this.tags.length - 1]);
            this.searchbar.focus();
        }
    }
    handleDelete() {
        this.handleRemoveTag(this.tags[this.focusedTagIndex]);
        if (this.focusedTagIndex === this.tags.length) {
            this.focusedTagIndex = undefined;
        }
    }
    handleLeftKey() {
        if (this.direction === 'rtl') {
            if (this.focusedTagIndex === 0) {
                this.focusedTagIndex = undefined;
            }
            if (this.focusedTagIndex === undefined) {
                return;
            }
        }
        if (this.focusedTagIndex === undefined || this.focusedTagIndex < 0) {
            this.focusedTagIndex = this.tags.length - 1;
        }
        else if (this.focusedTagIndex !== 0) {
            this.focusedTagIndex--;
        }
    }
    handleDownKey(index) {
        if (this.isOpen) {
            this.selectionService.focused = index || this.firstFocusableIndex(0);
        }
        else {
            this.openPopup();
        }
    }
    handleRightKey() {
        const last = this.tags.length - 1;
        if (this.direction === 'rtl') {
            if (this.focusedTagIndex === undefined) {
                this.focusedTagIndex = 0;
                return;
            }
            if (this.focusedTagIndex === last) {
                return;
            }
        }
        if (this.focusedTagIndex === last) {
            this.focusedTagIndex = undefined;
        }
        else if (this.focusedTagIndex < last) {
            this.focusedTagIndex++;
        }
    }
    findIndex(text, startsFrom = 0) {
        let itemText;
        text = text.toLowerCase();
        let index = this.dataService.findIndex(item => {
            if (this.dataService.grouped) {
                itemText = this.prop(this.textField, this.valuePrimitive)(item.value);
            }
            else {
                itemText = this.prop(this.textField, this.valuePrimitive)(item);
            }
            itemText = !isPresent(itemText) ? "" : itemText.toString().toLowerCase();
            return text && itemText.startsWith(text);
        }, startsFrom);
        if (this.disabledItemsService.isIndexDisabled(index)) {
            return (index + 1 > this.dataService.itemsCount) ? -1 : this.findIndex(text, index + 1);
        }
        else {
            return index;
        }
    }
    searchTextAndFocus(text) {
        const index = this.findIndex(text);
        this.selectionService.focused = index;
    }
    closePopup() {
        this.togglePopup(false);
        this.focusedTagIndex = undefined;
    }
    openPopup() {
        this.togglePopup(true);
        this.focusedTagIndex = undefined;
    }
    togglePopup(open) {
        const isDisabled = this.disabled || this.readonly;
        const sameState = this.isOpen === open;
        if (isDisabled || sameState) {
            return;
        }
        const isDefaultPrevented = this.triggerPopupEvents(open);
        if (!isDefaultPrevented) {
            this._toggle(open);
        }
    }
    triggerPopupEvents(open) {
        const eventArgs = new PreventableEvent();
        if (open) {
            this.open.emit(eventArgs);
        }
        else {
            this.close.emit(eventArgs);
        }
        return eventArgs.isDefaultPrevented();
    }
    _toggle(open) {
        this._open = (open === undefined) ? !this._open : open;
        this.destroyPopup();
        if (this._open) {
            this.createPopup();
        }
    }
    destroyPopup() {
        if (this.popupRef) {
            this.popupRef.popupElement
                .removeEventListener('mousedown', this.popupMouseDownHandler);
            this.popupRef.close();
            this.popupRef = null;
        }
    }
    createPopup() {
        if (this.virtual) {
            this.virtual.skip = 0;
        }
        const horizontalAlign = this.direction === "rtl" ? "right" : "left";
        const anchorPosition = { horizontal: horizontalAlign, vertical: "bottom" };
        const popupPosition = { horizontal: horizontalAlign, vertical: "top" };
        this.popupRef = this.popupService.open({
            anchor: this.wrapper,
            anchorAlign: anchorPosition,
            animate: this.popupSettings.animate,
            appendTo: this.appendTo,
            content: this.popupTemplate,
            popupAlign: popupPosition,
            popupClass: this.listContainerClasses,
            positionMode: 'absolute'
        });
        const popupWrapper = this.popupRef.popupElement;
        const { min, max } = this.width;
        popupWrapper.addEventListener('mousedown', this.popupMouseDownHandler);
        popupWrapper.style.minWidth = min;
        popupWrapper.style.width = max;
        popupWrapper.style.height = this.height;
        popupWrapper.setAttribute("dir", this.direction);
        this.popupRef.popupOpen.subscribe(() => {
            this.cdr.detectChanges();
            this.optionsList.scrollToItem(this.selectionService.focused);
        });
        this.popupRef.popupAnchorViewportLeave.subscribe(() => {
            this.togglePopup(false);
        });
    }
    emitValueChange() {
        this.onChangeCallback(this.value);
        this.valueChange.emit(this.value);
    }
    getSelectedDataItems(valueChanges) {
        const isBoundToComplexData = isObjectArray(this.data);
        const prop = this.prop(this.valueField, this.valuePrimitive);
        let currentValue;
        let index;
        let selectedDataItems = [];
        valueChanges.forEachItem((value) => {
            currentValue = value.currentValue;
            if (this.dataService.grouped) {
                index = this.dataService.findIndex((item) => {
                    return prop(item.value) === prop(currentValue);
                });
            }
            else {
                index = this.dataService.findIndex((item) => {
                    return prop(item) === prop(currentValue);
                });
            }
            if (index !== -1) {
                selectedDataItems.push(this.dataService.itemAt(index));
            }
            else if (isPresent(value) && !(isBoundToComplexData && this.valuePrimitive)) { //value is not present in the data
                selectedDataItems.push(currentValue);
            }
            else { // value is primitive, dataItem is an object, dataItem is not present in the current data set
                const item = this.resolveDataItemFromTags(currentValue);
                if (isPresent(item)) {
                    selectedDataItems.push(item);
                }
            }
        });
        return selectedDataItems;
    }
    resolveDataItemFromTags(value) {
        if (!(this.tags && this.tags.length && isPresent(value))) {
            return undefined;
        }
        // Flattening the tags array in case of a summary tag occurrence.
        const tags = this.tags.reduce((acc, tag) => {
            const items = isArray(tag) ? tag : [tag];
            acc.push(...items);
            return acc;
        }, []);
        const prop = this.prop(this.valueField, this.valuePrimitive);
        return tags.find(tag => prop(tag) === prop(value));
    }
    firstFocusableIndex(index) {
        const maxIndex = this.dataService.itemsCount;
        if (this.disabledItemsService.isIndexDisabled(index)) {
            const nextIndex = index + 1;
            return (nextIndex < maxIndex) ? this.firstFocusableIndex(nextIndex) : undefined;
        }
        else {
            return index;
        }
    }
    nextTick(f) {
        this._zone.runOutsideAngular(() => {
            // Use `setTimeout` instead of a resolved promise
            // because the latter does not wait long enough.
            setTimeout(() => this._zone.run(f));
        });
    }
    setMessages() {
        this._zone.runOutsideAngular(() => {
            clearTimeout(this.messagesTimeout);
            this.messagesTimeout = setTimeout(() => {
                this.noDataText = this.localization.get('noDataText');
                this.cdr.detectChanges();
            });
        });
    }
}
MultiSelectComponent.ɵfac = function MultiSelectComponent_Factory(t) { return new (t || MultiSelectComponent)(_angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](_progress_kendo_angular_l10n__WEBPACK_IMPORTED_MODULE_3__["LocalizationService"]), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](_progress_kendo_angular_popup__WEBPACK_IMPORTED_MODULE_6__["PopupService"]), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](DataService), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](SelectionService), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](NavigationService), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](DisabledItemsService), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](_angular_core__WEBPACK_IMPORTED_MODULE_0__["ChangeDetectorRef"]), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](_angular_core__WEBPACK_IMPORTED_MODULE_0__["KeyValueDiffers"]), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](_angular_core__WEBPACK_IMPORTED_MODULE_0__["Renderer2"]), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](_angular_core__WEBPACK_IMPORTED_MODULE_0__["ElementRef"]), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](_angular_core__WEBPACK_IMPORTED_MODULE_0__["NgZone"]), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](TOUCH_ENABLED, 8)); };
MultiSelectComponent.ɵcmp = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdefineComponent"]({ type: MultiSelectComponent, selectors: [["kendo-multiselect"]], contentQueries: function MultiSelectComponent_ContentQueries(rf, ctx, dirIndex) { if (rf & 1) {
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵcontentQuery"](dirIndex, ItemTemplateDirective, true);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵcontentQuery"](dirIndex, CustomItemTemplateDirective, true);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵcontentQuery"](dirIndex, GroupTemplateDirective, true);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵcontentQuery"](dirIndex, FixedGroupTemplateDirective, true);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵcontentQuery"](dirIndex, HeaderTemplateDirective, true);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵcontentQuery"](dirIndex, FooterTemplateDirective, true);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵcontentQuery"](dirIndex, TagTemplateDirective, true);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵcontentQuery"](dirIndex, GroupTagTemplateDirective, true);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵcontentQuery"](dirIndex, NoDataTemplateDirective, true);
    } if (rf & 2) {
        var _t;
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵqueryRefresh"](_t = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵloadQuery"]()) && (ctx.template = _t.first);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵqueryRefresh"](_t = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵloadQuery"]()) && (ctx.customItemTemplate = _t.first);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵqueryRefresh"](_t = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵloadQuery"]()) && (ctx.groupTemplate = _t.first);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵqueryRefresh"](_t = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵloadQuery"]()) && (ctx.fixedGroupTemplate = _t.first);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵqueryRefresh"](_t = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵloadQuery"]()) && (ctx.headerTemplate = _t.first);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵqueryRefresh"](_t = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵloadQuery"]()) && (ctx.footerTemplate = _t.first);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵqueryRefresh"](_t = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵloadQuery"]()) && (ctx.tagTemplate = _t.first);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵqueryRefresh"](_t = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵloadQuery"]()) && (ctx.groupTagTemplate = _t.first);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵqueryRefresh"](_t = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵloadQuery"]()) && (ctx.noDataTemplate = _t.first);
    } }, viewQuery: function MultiSelectComponent_Query(rf, ctx) { if (rf & 1) {
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵviewQuery"](_c9, true, _angular_core__WEBPACK_IMPORTED_MODULE_0__["ViewContainerRef"]);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵviewQuery"](SearchBarComponent, true);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵviewQuery"](_c10, true);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵviewQuery"](_c24, true);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵviewQuery"](_c11, true);
    } if (rf & 2) {
        var _t;
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵqueryRefresh"](_t = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵloadQuery"]()) && (ctx.container = _t.first);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵqueryRefresh"](_t = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵloadQuery"]()) && (ctx.searchbar = _t.first);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵqueryRefresh"](_t = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵloadQuery"]()) && (ctx.popupTemplate = _t.first);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵqueryRefresh"](_t = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵloadQuery"]()) && (ctx.wrapper = _t.first);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵqueryRefresh"](_t = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵloadQuery"]()) && (ctx.optionsList = _t.first);
    } }, hostVars: 11, hostBindings: function MultiSelectComponent_HostBindings(rf, ctx) { if (rf & 2) {
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵattribute"]("dir", ctx.dir);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵclassProp"]("k-widget", ctx.widgetClasses)("k-multiselect", ctx.widgetClasses)("k-header", ctx.widgetClasses)("k-state-focused", ctx.focusedClass)("k-state-disabled", ctx.disabledClass);
    } }, inputs: { focusableId: "focusableId", autoClose: "autoClose", tabindex: "tabindex", disabled: "disabled", readonly: "readonly", filterable: "filterable", listHeight: "listHeight", clearButton: "clearButton", tagMapper: "tagMapper", allowCustom: "allowCustom", valueNormalizer: "valueNormalizer", data: "data", value: "value", tabIndex: "tabIndex", placeholder: "placeholder", itemDisabled: "itemDisabled", virtual: "virtual", popupSettings: "popupSettings", valuePrimitive: "valuePrimitive", loading: "loading", valueField: "valueField", textField: "textField" }, outputs: { filterChange: "filterChange", valueChange: "valueChange", open: "open", close: "close", onFocus: "focus", onBlur: "blur", removeTag: "removeTag" }, exportAs: ["kendoMultiSelect"], features: [_angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵProvidersFeature"]([
            MULTISELECT_VALUE_ACCESSOR,
            DataService,
            SelectionService,
            NavigationService,
            DisabledItemsService,
            _progress_kendo_angular_l10n__WEBPACK_IMPORTED_MODULE_3__["LocalizationService"],
            {
                provide: _progress_kendo_angular_l10n__WEBPACK_IMPORTED_MODULE_3__["L10N_PREFIX"],
                useValue: 'kendo.multiselect'
            },
            {
                provide: FilterableDropDownComponentBase, useExisting: Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["forwardRef"])(() => MultiSelectComponent)
            },
            {
                provide: _progress_kendo_angular_common__WEBPACK_IMPORTED_MODULE_1__["KendoInput"], useExisting: Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["forwardRef"])(() => MultiSelectComponent)
            }
        ]), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵNgOnChangesFeature"]], decls: 14, vars: 23, consts: [["kendoMultiSelectLocalizedMessages", "", 6, "noDataText", "clearTitle"], [1, "k-multiselect-wrap", "k-floatwrap", 3, "mousedown"], ["wrapper", ""], [3, "id", "tags", "textField", "valueField", "focused", "disabled", "template", "groupTemplate", "tagPrefix", "removeTag"], [3, "id", "role", "tagListId", "activeDescendant", "noDataLabel", "userInput", "disabled", "readonly", "tabIndex", "popupOpen", "placeholder", "onNavigate", "valueChange", "onBlur", "onFocus"], ["searchbar", ""], ["class", "k-icon k-clear-value k-i-close", "role", "button", "tabindex", "-1", 3, "mousedown", 4, "ngIf"], ["class", "k-icon k-i-loading", 4, "ngIf"], ["popupTemplate", ""], [3, "ngIf"], ["container", ""], ["role", "button", "tabindex", "-1", 1, "k-icon", "k-clear-value", "k-i-close", 3, "mousedown"], [1, "k-icon", "k-i-loading"], [4, "ngIf"], ["class", "k-list", 4, "ngIf"], [3, "id", "optionPrefix", "data", "textField", "valueField", "height", "template", "groupTemplate", "fixedGroupTemplate", "show", "multipleSelection", "virtual", "pageChange"], ["optionsList", ""], ["class", "k-nodata", 4, "ngIf"], [3, "templateContext"], [1, "k-list"], ["kendoDropDownsSelectable", "", 1, "k-item", "k-custom-item", 3, "multipleSelection", "index"], [4, "ngIf", "ngIfElse"], ["default_custom_item_template", ""], [1, "k-icon", "k-i-plus", 2, "float", "right"], [1, "k-nodata"], [3, "ngIf", "templateContext"], [3, "resize"]], template: function MultiSelectComponent_Template(rf, ctx) { if (rf & 1) {
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementContainerStart"](0, 0);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵi18nAttributes"](1, _c34);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementContainerEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](2, "div", 1, 2);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵlistener"]("mousedown", function MultiSelectComponent_Template_div_mousedown_2_listener($event) { return ctx.wrapperMousedown($event); });
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](4, "kendo-taglist", 3);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵlistener"]("removeTag", function MultiSelectComponent_Template_kendo_taglist_removeTag_4_listener($event) { return ctx.handleRemoveTag($event); });
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](5, "kendo-searchbar", 4, 5);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵlistener"]("onNavigate", function MultiSelectComponent_Template_kendo_searchbar_onNavigate_5_listener($event) { return ctx.handleNavigate($event); })("valueChange", function MultiSelectComponent_Template_kendo_searchbar_valueChange_5_listener($event) { return ctx.handleFilter($event); })("onBlur", function MultiSelectComponent_Template_kendo_searchbar_onBlur_5_listener() { return ctx.onSearchBarBlur(); })("onFocus", function MultiSelectComponent_Template_kendo_searchbar_onFocus_5_listener() { return ctx.onSearchBarFocus(); });
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](7, MultiSelectComponent_span_7_Template, 1, 1, "span", 6);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](8, MultiSelectComponent_span_8_Template, 1, 0, "span", 7);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](9, MultiSelectComponent_ng_template_9_Template, 6, 16, "ng-template", null, 8, _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplateRefExtractor"]);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](11, MultiSelectComponent_ng_template_11_Template, 1, 0, "ng-template", 9);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementContainer"](12, null, 10);
    } if (rf & 2) {
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](4);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("id", ctx.tagListId)("tags", ctx.tags)("textField", ctx.textField)("valueField", ctx.valueField)("focused", ctx.focusedTagIndex)("disabled", ctx.disabled)("template", ctx.tagTemplate)("groupTemplate", ctx.groupTagTemplate)("tagPrefix", ctx.tagPrefix);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("id", ctx.focusableId)("role", "listbox")("tagListId", ctx.tagListId)("activeDescendant", ctx.activeDescendant)("noDataLabel", ctx.noDataLabel)("userInput", ctx.text)("disabled", ctx.disabled)("readonly", ctx.readonly)("tabIndex", ctx.tabIndex)("popupOpen", ctx.isOpen)("placeholder", ctx.placeholder);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](2);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngIf", !ctx.loading && !ctx.readonly && ctx.clearButton && ((ctx.tags == null ? null : ctx.tags.length) || (ctx.text == null ? null : ctx.text.length)));
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngIf", ctx.loading);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](3);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngIf", ctx.isOpen);
    } }, directives: function () { return [LocalizedMessagesDirective,
        TagListComponent,
        SearchBarComponent, _angular_common__WEBPACK_IMPORTED_MODULE_7__["NgIf"], ListComponent,
        TemplateContextDirective,
        SelectableDirective, _progress_kendo_angular_common__WEBPACK_IMPORTED_MODULE_1__["ResizeSensorComponent"]]; }, encapsulation: 2 });
/** @nocollapse */
MultiSelectComponent.ctorParameters = () => [
    { type: _progress_kendo_angular_l10n__WEBPACK_IMPORTED_MODULE_3__["LocalizationService"] },
    { type: _progress_kendo_angular_popup__WEBPACK_IMPORTED_MODULE_6__["PopupService"] },
    { type: DataService },
    { type: SelectionService },
    { type: NavigationService },
    { type: DisabledItemsService },
    { type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["ChangeDetectorRef"] },
    { type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["KeyValueDiffers"] },
    { type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Renderer2"] },
    { type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["ElementRef"] },
    { type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["NgZone"] },
    { type: Boolean, decorators: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Optional"] }, { type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Inject"], args: [TOUCH_ENABLED,] }] }
];
MultiSelectComponent.propDecorators = {
    focusableId: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"] }],
    autoClose: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"] }],
    loading: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"] }],
    data: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"] }],
    value: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"] }],
    valueField: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"] }],
    textField: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"] }],
    tabindex: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"] }],
    tabIndex: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"], args: ["tabIndex",] }],
    placeholder: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"] }],
    disabled: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"] }],
    itemDisabled: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"] }],
    readonly: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"] }],
    filterable: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"] }],
    virtual: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"] }],
    popupSettings: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"] }],
    listHeight: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"] }],
    valuePrimitive: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"] }],
    clearButton: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"] }],
    tagMapper: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"] }],
    allowCustom: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"] }],
    valueNormalizer: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"] }],
    filterChange: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Output"] }],
    valueChange: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Output"] }],
    open: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Output"] }],
    close: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Output"] }],
    onFocus: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Output"], args: ['focus',] }],
    onBlur: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Output"], args: ['blur',] }],
    removeTag: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Output"] }],
    container: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["ViewChild"], args: ['container', { read: _angular_core__WEBPACK_IMPORTED_MODULE_0__["ViewContainerRef"] },] }],
    searchbar: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["ViewChild"], args: [SearchBarComponent,] }],
    popupTemplate: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["ViewChild"], args: ['popupTemplate',] }],
    wrapper: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["ViewChild"], args: ['wrapper',] }],
    optionsList: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["ViewChild"], args: ['optionsList',] }],
    template: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["ContentChild"], args: [ItemTemplateDirective,] }],
    customItemTemplate: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["ContentChild"], args: [CustomItemTemplateDirective,] }],
    groupTemplate: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["ContentChild"], args: [GroupTemplateDirective,] }],
    fixedGroupTemplate: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["ContentChild"], args: [FixedGroupTemplateDirective,] }],
    headerTemplate: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["ContentChild"], args: [HeaderTemplateDirective,] }],
    footerTemplate: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["ContentChild"], args: [FooterTemplateDirective,] }],
    tagTemplate: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["ContentChild"], args: [TagTemplateDirective,] }],
    groupTagTemplate: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["ContentChild"], args: [GroupTagTemplateDirective,] }],
    noDataTemplate: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["ContentChild"], args: [NoDataTemplateDirective,] }],
    widgetClasses: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["HostBinding"], args: ['class.k-widget',] }, { type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["HostBinding"], args: ['class.k-multiselect',] }, { type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["HostBinding"], args: ['class.k-header',] }],
    dir: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["HostBinding"], args: ['attr.dir',] }],
    focusedClass: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["HostBinding"], args: ['class.k-state-focused',] }],
    disabledClass: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["HostBinding"], args: ['class.k-state-disabled',] }]
};
/*@__PURE__*/ (function () { _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵsetClassMetadata"](MultiSelectComponent, [{
        type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Component"],
        args: [{
                exportAs: 'kendoMultiSelect',
                providers: [
                    MULTISELECT_VALUE_ACCESSOR,
                    DataService,
                    SelectionService,
                    NavigationService,
                    DisabledItemsService,
                    _progress_kendo_angular_l10n__WEBPACK_IMPORTED_MODULE_3__["LocalizationService"],
                    {
                        provide: _progress_kendo_angular_l10n__WEBPACK_IMPORTED_MODULE_3__["L10N_PREFIX"],
                        useValue: 'kendo.multiselect'
                    },
                    {
                        provide: FilterableDropDownComponentBase, useExisting: Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["forwardRef"])(() => MultiSelectComponent)
                    },
                    {
                        provide: _progress_kendo_angular_common__WEBPACK_IMPORTED_MODULE_1__["KendoInput"], useExisting: Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["forwardRef"])(() => MultiSelectComponent)
                    }
                ],
                selector: 'kendo-multiselect',
                template: `
        <ng-container kendoMultiSelectLocalizedMessages
            i18n-noDataText="kendo.multiselect.noDataText|The text displayed in the popup when there are no items"
            noDataText="NO DATA FOUND"

            i18n-clearTitle="kendo.combobox.clearTitle|The title of the clear button"
            clearTitle="clear"
        >
        </ng-container>
        <div class="k-multiselect-wrap k-floatwrap"
            #wrapper
            (mousedown)="wrapperMousedown($event)"
        >
            <kendo-taglist
                [id]="tagListId"
                [tags]="tags"
                [textField]="textField"
                [valueField]="valueField"
                [focused]="focusedTagIndex"
                [disabled]="disabled"
                [template]="tagTemplate"
                [groupTemplate]="groupTagTemplate"
                [tagPrefix]="tagPrefix"
                (removeTag)="handleRemoveTag($event)"
            >
            </kendo-taglist>
            <kendo-searchbar
                #searchbar
                [id]="focusableId"
                [role]="'listbox'"
                [tagListId]="tagListId"
                [activeDescendant]="activeDescendant"
                [noDataLabel]="noDataLabel"
                [userInput]="text"
                [disabled]="disabled"
                [readonly]="readonly"
                [tabIndex]="tabIndex"
                [popupOpen]="isOpen"
                [placeholder]="placeholder"
                (onNavigate)="handleNavigate($event)"
                (valueChange)="handleFilter($event)"
                (onBlur)="onSearchBarBlur()"
                (onFocus)="onSearchBarFocus()"
            >
            </kendo-searchbar>
            <span *ngIf="!loading && !readonly && clearButton && (tags?.length || text?.length)" class="k-icon k-clear-value k-i-close" [attr.title]="clearTitle" role="button" tabindex="-1" (mousedown)="clearAll($event)"></span>
            <span *ngIf="loading" class="k-icon k-i-loading"></span>
        </div>
        <ng-template #popupTemplate>
            <!--header template-->
            <ng-template *ngIf="headerTemplate"
                [templateContext]="{
                    templateRef: headerTemplate.templateRef
                }">
            </ng-template>
            <!--custom item template-->
            <div class="k-list" *ngIf="allowCustom && text">
                <div class="k-item k-custom-item" kendoDropDownsSelectable [multipleSelection]="true" [index]="-1">
                    <ng-template *ngIf="customItemTemplate;else default_custom_item_template"
                        [templateContext]="{
                            templateRef: customItemTemplate.templateRef,
                            $implicit: text
                        }">
                    </ng-template>
                    <ng-template #default_custom_item_template>{{ text }}</ng-template>
                    <span class="k-icon k-i-plus" style="float: right"></span>
                </div>
            </div>
            <!--list-->
            <kendo-list
                #optionsList
                [id]="listBoxId"
                [optionPrefix]="optionPrefix"
                [data]="data"
                [textField]="textField"
                [valueField]="valueField"
                [height]="listHeight"
                [template]="template"
                [groupTemplate]="groupTemplate"
                [fixedGroupTemplate]="fixedGroupTemplate"
                [show]="isOpen"
                [multipleSelection]="true"
                [virtual]="virtual"
                (pageChange)="pageChange($event)"
                >
            </kendo-list>
            <!--no data template-->
            <div class="k-nodata" *ngIf="data.length === 0">
                <ng-template [ngIf]="noDataTemplate"
                    [templateContext]="{
                        templateRef: noDataTemplate ? noDataTemplate.templateRef : undefined
                    }">
                </ng-template>
                <ng-template [ngIf]="!noDataTemplate">
                    <div>{{ noDataText }}</div>
                </ng-template>
            </div>
            <!--footer template-->
            <ng-template *ngIf="footerTemplate"
                [templateContext]="{
                    templateRef: footerTemplate.templateRef
                }">
            </ng-template>
        </ng-template>
        <ng-template [ngIf]="isOpen">
            <kendo-resize-sensor (resize)="onResize()"></kendo-resize-sensor>
        </ng-template>
        <ng-container #container></ng-container>
  `
            }]
    }], function () { return [{ type: _progress_kendo_angular_l10n__WEBPACK_IMPORTED_MODULE_3__["LocalizationService"] }, { type: _progress_kendo_angular_popup__WEBPACK_IMPORTED_MODULE_6__["PopupService"] }, { type: DataService }, { type: SelectionService }, { type: NavigationService }, { type: DisabledItemsService }, { type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["ChangeDetectorRef"] }, { type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["KeyValueDiffers"] }, { type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Renderer2"] }, { type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["ElementRef"] }, { type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["NgZone"] }, { type: Boolean, decorators: [{
                type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Optional"]
            }, {
                type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Inject"],
                args: [TOUCH_ENABLED]
            }] }]; }, { focusableId: [{
            type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"]
        }], autoClose: [{
            type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"]
        }], tabindex: [{
            type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"]
        }], disabled: [{
            type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"]
        }], readonly: [{
            type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"]
        }], filterable: [{
            type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"]
        }], listHeight: [{
            type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"]
        }], clearButton: [{
            type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"]
        }], tagMapper: [{
            type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"]
        }], allowCustom: [{
            type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"]
        }], valueNormalizer: [{
            type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"]
        }], filterChange: [{
            type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Output"]
        }], valueChange: [{
            type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Output"]
        }], open: [{
            type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Output"]
        }], close: [{
            type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Output"]
        }], onFocus: [{
            type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Output"],
            args: ['focus']
        }], onBlur: [{
            type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Output"],
            args: ['blur']
        }], removeTag: [{
            type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Output"]
        }], widgetClasses: [{
            type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["HostBinding"],
            args: ['class.k-widget']
        }, {
            type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["HostBinding"],
            args: ['class.k-multiselect']
        }, {
            type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["HostBinding"],
            args: ['class.k-header']
        }], data: [{
            type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"]
        }], value: [{
            type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"]
        }], tabIndex: [{
            type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"],
            args: ["tabIndex"]
        }], placeholder: [{
            type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"]
        }], itemDisabled: [{
            type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"]
        }], virtual: [{
            type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"]
        }], popupSettings: [{
            type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"]
        }], dir: [{
            type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["HostBinding"],
            args: ['attr.dir']
        }], focusedClass: [{
            type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["HostBinding"],
            args: ['class.k-state-focused']
        }], disabledClass: [{
            type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["HostBinding"],
            args: ['class.k-state-disabled']
        }], valuePrimitive: [{
            type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"]
        }], loading: [{
            type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"]
        }], valueField: [{
            type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"]
        }], textField: [{
            type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"]
        }], container: [{
            type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["ViewChild"],
            args: ['container', { read: _angular_core__WEBPACK_IMPORTED_MODULE_0__["ViewContainerRef"] }]
        }], searchbar: [{
            type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["ViewChild"],
            args: [SearchBarComponent]
        }], popupTemplate: [{
            type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["ViewChild"],
            args: ['popupTemplate']
        }], wrapper: [{
            type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["ViewChild"],
            args: ['wrapper']
        }], optionsList: [{
            type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["ViewChild"],
            args: ['optionsList']
        }], template: [{
            type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["ContentChild"],
            args: [ItemTemplateDirective]
        }], customItemTemplate: [{
            type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["ContentChild"],
            args: [CustomItemTemplateDirective]
        }], groupTemplate: [{
            type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["ContentChild"],
            args: [GroupTemplateDirective]
        }], fixedGroupTemplate: [{
            type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["ContentChild"],
            args: [FixedGroupTemplateDirective]
        }], headerTemplate: [{
            type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["ContentChild"],
            args: [HeaderTemplateDirective]
        }], footerTemplate: [{
            type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["ContentChild"],
            args: [FooterTemplateDirective]
        }], tagTemplate: [{
            type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["ContentChild"],
            args: [TagTemplateDirective]
        }], groupTagTemplate: [{
            type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["ContentChild"],
            args: [GroupTagTemplateDirective]
        }], noDataTemplate: [{
            type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["ContentChild"],
            args: [NoDataTemplateDirective]
        }] }); })();

/* tslint:disable:max-line-length */
/**
 * @hidden
 */
class TagListComponent {
    constructor() {
        this.removeTag = new _angular_core__WEBPACK_IMPORTED_MODULE_0__["EventEmitter"]();
    }
    tagProp(tag, prop) {
        return prop && isObject(tag) ? tag[prop] : tag;
    }
    deleteTag(event, tag) {
        event.preventDefault();
        event.stopImmediatePropagation();
        if (!this.disabled && event.which === 1) {
            this.removeTag.emit(tag);
        }
    }
    itemId(tag) {
        if (tag) { //because of custom values
            return this.tagPrefix + "-" + this.tagProp(tag, this.valueField);
        }
    }
    isGroupTag(tag) {
        return tag instanceof Array;
    }
}
TagListComponent.ɵfac = function TagListComponent_Factory(t) { return new (t || TagListComponent)(); };
TagListComponent.ɵcmp = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdefineComponent"]({ type: TagListComponent, selectors: [["kendo-taglist"]], inputs: { tags: "tags", textField: "textField", valueField: "valueField", focused: "focused", template: "template", groupTemplate: "groupTemplate", disabled: "disabled", tagPrefix: "tagPrefix", id: "id" }, outputs: { removeTag: "removeTag" }, decls: 2, vars: 2, consts: [[1, "k-reset"], ["role", "option", "aria-selected", "true", "class", "k-button", 3, "ngClass", 4, "ngFor", "ngForOf"], ["role", "option", "aria-selected", "true", 1, "k-button", 3, "ngClass"], [4, "ngIf", "ngIfThen", "ngIfElse"], ["groupTag", ""], ["singleTag", ""], ["aria-label", "delete", 1, "k-select"], [1, "k-icon", "k-i-close", 3, "mousedown"], [4, "ngIf"], [3, "ngIf"], [3, "templateContext"]], template: function TagListComponent_Template(rf, ctx) { if (rf & 1) {
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "ul", 0);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](1, TagListComponent_li_1_Template, 8, 9, "li", 1);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    } if (rf & 2) {
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵattribute"]("id", ctx.id);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngForOf", ctx.tags);
    } }, directives: function () { return [_angular_common__WEBPACK_IMPORTED_MODULE_7__["NgForOf"], ListItemDirective, _angular_common__WEBPACK_IMPORTED_MODULE_7__["NgClass"], _angular_common__WEBPACK_IMPORTED_MODULE_7__["NgIf"], TemplateContextDirective]; }, encapsulation: 2 });
TagListComponent.propDecorators = {
    tags: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"] }],
    textField: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"] }],
    valueField: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"] }],
    focused: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"] }],
    template: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"] }],
    groupTemplate: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"] }],
    disabled: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"] }],
    tagPrefix: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"] }],
    id: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"] }],
    removeTag: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Output"] }]
};
/*@__PURE__*/ (function () { _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵsetClassMetadata"](TagListComponent, [{
        type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Component"],
        args: [{
                selector: 'kendo-taglist',
                template: `
        <ul [attr.id]="id" class="k-reset">
            <li role="option" *ngFor="let tag of tags; let i = index;" aria-selected="true" [attr.aria-setsize]="tags?.length"
                class="k-button" [ngClass]="{ 'k-state-focused': i === focused }" [attr.id]="itemId(tag)"
            >
                <ng-template *ngIf="isGroupTag(tag); then groupTag else singleTag"></ng-template>
                    <ng-template #groupTag>
                        <span>
                            <ng-template *ngIf="groupTemplate"
                                [templateContext]="{
                                templateRef: groupTemplate.templateRef,
                                $implicit: tag
                            }">
                            </ng-template>
                            <ng-template [ngIf]="!groupTemplate">{{ tag.length }} {{ tag.length === 1 ? 'item' : 'items' }} selected</ng-template>
                        </span>
                    </ng-template>
                    <ng-template #singleTag>
                        <span>
                        <ng-template *ngIf="template"
                                [templateContext]="{
                                templateRef: template.templateRef,
                                $implicit: tag
                            }">
                            </ng-template>
                            <ng-template [ngIf]="!template">{{ tagProp(tag, textField) }}</ng-template>
                        </span>
                    </ng-template>

                <span aria-label="delete" [attr.aria-hidden]="i !== focused" class="k-select">
                    <span class="k-icon k-i-close" (mousedown)="deleteTag($event, tag)">
                    </span>
                </span>
            </li>
        </ul>
  `
            }]
    }], function () { return []; }, { removeTag: [{
            type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Output"]
        }], tags: [{
            type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"]
        }], textField: [{
            type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"]
        }], valueField: [{
            type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"]
        }], focused: [{
            type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"]
        }], template: [{
            type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"]
        }], groupTemplate: [{
            type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"]
        }], disabled: [{
            type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"]
        }], tagPrefix: [{
            type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"]
        }], id: [{
            type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"]
        }] }); })();

/**
 * @hidden
 */
class TemplateContextDirective {
    constructor(viewContainerRef) {
        this.viewContainerRef = viewContainerRef;
    }
    set templateContext(context) {
        if (this.insertedViewRef) {
            this.viewContainerRef.remove(this.viewContainerRef.indexOf(this.insertedViewRef));
            this.insertedViewRef = undefined;
        }
        if (context.templateRef) {
            this.insertedViewRef = this.viewContainerRef.createEmbeddedView(context.templateRef, context);
        }
    }
}
TemplateContextDirective.ɵfac = function TemplateContextDirective_Factory(t) { return new (t || TemplateContextDirective)(_angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](_angular_core__WEBPACK_IMPORTED_MODULE_0__["ViewContainerRef"])); };
TemplateContextDirective.ɵdir = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdefineDirective"]({ type: TemplateContextDirective, selectors: [["", "templateContext", ""]], inputs: { templateContext: "templateContext" } });
/** @nocollapse */
TemplateContextDirective.ctorParameters = () => [
    { type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["ViewContainerRef"] }
];
TemplateContextDirective.propDecorators = {
    templateContext: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"] }]
};
/*@__PURE__*/ (function () { _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵsetClassMetadata"](TemplateContextDirective, [{
        type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Directive"],
        args: [{
                selector: '[templateContext]' // tslint:disable-line
            }]
    }], function () { return [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["ViewContainerRef"] }]; }, { templateContext: [{
            type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"]
        }] }); })();

/**
 * @hidden
 */
class SelectableDirective {
    constructor(selectionService) {
        // @HostBinding('attr.offset-index')
        // @Input() public offsetIndex: number;
        this.multipleSelection = false;
        this.selectionService = selectionService;
    }
    get focusedClassName() {
        return this.selectionService.isFocused(this.index);
    }
    get selectedClassName() {
        return this.selectionService.isSelected(this.index);
    }
    onClick(event) {
        event.stopPropagation();
        if (this.multipleSelection) {
            if (this.selectionService.isSelected(this.index)) {
                this.selectionService.unselect(this.index);
            }
            else {
                this.selectionService.add(this.index);
            }
        }
        else {
            this.selectionService.change(this.index);
        }
    }
}
SelectableDirective.ɵfac = function SelectableDirective_Factory(t) { return new (t || SelectableDirective)(_angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](SelectionService)); };
SelectableDirective.ɵdir = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdefineDirective"]({ type: SelectableDirective, selectors: [["", "kendoDropDownsSelectable", ""]], hostVars: 9, hostBindings: function SelectableDirective_HostBindings(rf, ctx) { if (rf & 1) {
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵlistener"]("click", function SelectableDirective_click_HostBindingHandler($event) { return ctx.onClick($event); });
    } if (rf & 2) {
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵattribute"]("index", ctx.index);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵstyleProp"]("height", ctx.height, "px")("min-height", ctx.height, "px");
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵclassProp"]("k-state-focused", ctx.focusedClassName)("k-state-selected", ctx.selectedClassName);
    } }, inputs: { multipleSelection: "multipleSelection", index: "index", height: "height" } });
/** @nocollapse */
SelectableDirective.ctorParameters = () => [
    { type: SelectionService }
];
SelectableDirective.propDecorators = {
    index: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["HostBinding"], args: ['attr.index',] }, { type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"] }],
    height: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["HostBinding"], args: ['style.height.px',] }, { type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["HostBinding"], args: ['style.minHeight.px',] }, { type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"] }],
    multipleSelection: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"] }],
    focusedClassName: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["HostBinding"], args: ['class.k-state-focused',] }],
    selectedClassName: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["HostBinding"], args: ['class.k-state-selected',] }],
    onClick: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["HostListener"], args: ['click', ['$event'],] }]
};
/*@__PURE__*/ (function () { _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵsetClassMetadata"](SelectableDirective, [{
        type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Directive"],
        args: [{
                selector: '[kendoDropDownsSelectable]'
            }]
    }], function () { return [{ type: SelectionService }]; }, { multipleSelection: [{
            type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"]
        }], focusedClassName: [{
            type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["HostBinding"],
            args: ['class.k-state-focused']
        }], selectedClassName: [{
            type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["HostBinding"],
            args: ['class.k-state-selected']
        }], onClick: [{
            type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["HostListener"],
            args: ['click', ['$event']]
        }], index: [{
            type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["HostBinding"],
            args: ['attr.index']
        }, {
            type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"]
        }], height: [{
            type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["HostBinding"],
            args: ['style.height.px']
        }, {
            type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["HostBinding"],
            args: ['style.minHeight.px']
        }, {
            type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"]
        }] }); })();

/**
 * A directive which configures the MultiSelect to show one single summary tag for all selected data items.
 * When a number is provided, the summary tag is displayed after the given amount of data items are selected
 * ([more information and examples]({% slug summarytagmode_multiselect %})).
 *
 * @example
 * ```ts-no-run
 * <kendo-multiselect kendoMultiSelectSummaryTag [data]="data"></kendo-multiselect>
 * ```
 *
 * @example
 * ```ts-no-run
 * <kendo-multiselect [kendoMultiSelectSummaryTag]="2" [data]="data"></kendo-multiselect>
 * ```
 */
class SummaryTagDirective {
    constructor(multiSelectComponent) {
        this.multiSelectComponent = multiSelectComponent;
        /**
         * A numeric value that indicates the number of selected data items after which the summary tag will appear.
         */
        this.showAfter = 0; // tslint:disable-line:no-input-rename
        this.createTagMapper();
    }
    ngOnChanges(changes) {
        if (isPresent(changes.showAfter)) {
            this.createTagMapper();
            this.multiSelectComponent.onTagMapperChange();
        }
    }
    createTagMapper() {
        this.multiSelectComponent.tagMapper = (tags) => {
            if (tags.length > this.showAfter) {
                let result;
                result = tags.slice(0, this.showAfter);
                result.push(tags.slice(this.showAfter, tags.length));
                return result;
            }
            else {
                return tags;
            }
        };
    }
}
SummaryTagDirective.ɵfac = function SummaryTagDirective_Factory(t) { return new (t || SummaryTagDirective)(_angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](MultiSelectComponent)); };
SummaryTagDirective.ɵdir = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdefineDirective"]({ type: SummaryTagDirective, selectors: [["", "kendoMultiSelectSummaryTag", ""]], inputs: { showAfter: ["kendoMultiSelectSummaryTag", "showAfter"] }, features: [_angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵNgOnChangesFeature"]] });
/** @nocollapse */
SummaryTagDirective.ctorParameters = () => [
    { type: MultiSelectComponent }
];
SummaryTagDirective.propDecorators = {
    showAfter: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"], args: ['kendoMultiSelectSummaryTag',] }]
};
/*@__PURE__*/ (function () { _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵsetClassMetadata"](SummaryTagDirective, [{
        type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Directive"],
        args: [{
                selector: '[kendoMultiSelectSummaryTag]'
            }]
    }], function () { return [{ type: MultiSelectComponent }]; }, { showAfter: [{
            type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"],
            args: ['kendoMultiSelectSummaryTag']
        }] }); })();

const DEFAULT_FILTER_SETTINGS = {
    caseSensitive: false,
    operator: 'startsWith'
};
/**
 * Implements an event handler for the `filterChange` event of a DropDowns component
 * which performs simple data filtering.
 *
 * @example
 * ```ts
 * _@Component({
 * selector: 'my-app',
 * template: `
 *  <kendo-autocomplete
 *      [data]="data"
 *      kendoDropDownFilter
 *      placeholder="e.g. Andorra">
 *  </kendo-autocomplete>
 * `
 * })
 * class AppComponent {
 *     public data: Array<string> = ["Albania", "Andorra", "Armenia", "Austria", "Azerbaijan"];
 * }
 * ```
 */
class FilterDirective {
    constructor(component) {
        this.component = component;
        /**
         * @hidden
         *
         * Sets whether the filtering functionality is enabled on component init.
         */
        this.filterable = true;
        this._data = [];
        this._filterSettings = DEFAULT_FILTER_SETTINGS;
    }
    /**
     * The initial data that will be used as a source array for the filtering operations.
     */
    set data(data) {
        this._data = data || [];
    }
    get data() {
        return this._data;
    }
    /**
     * The configuration object which sets the behavior of the `kendoDropDownFilter` directive.
     */
    set filterSettings(settings) {
        this._filterSettings = Object.assign({}, DEFAULT_FILTER_SETTINGS, settings);
    }
    get filterSettings() {
        return this._filterSettings;
    }
    ngOnInit() {
        this.component.filterable = this.filterable;
        this.filterChangeSubscription = this.component.filterChange
            .subscribe(query => this.component.data = this.getFilteredData(query));
    }
    ngOnDestroy() {
        this.filterChangeSubscription.unsubscribe();
    }
    getFilteredData(query) {
        const field = this.component.textField || this.component.valueField;
        return this.data.filter(item => this.checkItem(getter(item, field), query));
    }
    checkItem(target, query) {
        target = this.normalizeValue(target);
        query = this.normalizeValue(query);
        return this.filterSettings.operator === 'contains' ? target.indexOf(query) !== -1 : target.indexOf(query) === 0;
    }
    normalizeValue(value) {
        const normalizedValue = isPresent(value) ? value.toString() : '';
        return this.filterSettings.caseSensitive ? normalizedValue : normalizedValue.toLowerCase();
    }
}
FilterDirective.ɵfac = function FilterDirective_Factory(t) { return new (t || FilterDirective)(_angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](FilterableDropDownComponentBase)); };
FilterDirective.ɵdir = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdefineDirective"]({ type: FilterDirective, selectors: [["", "kendoDropDownFilter", ""]], inputs: { filterable: "filterable", data: "data", filterSettings: ["kendoDropDownFilter", "filterSettings"] } });
/** @nocollapse */
FilterDirective.ctorParameters = () => [
    { type: FilterableDropDownComponentBase }
];
FilterDirective.propDecorators = {
    data: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"] }],
    filterSettings: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"], args: ['kendoDropDownFilter',] }],
    filterable: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"] }]
};
/*@__PURE__*/ (function () { _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵsetClassMetadata"](FilterDirective, [{
        type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Directive"],
        args: [{
                selector: '[kendoDropDownFilter]'
            }]
    }], function () { return [{ type: FilterableDropDownComponentBase }]; }, { filterable: [{
            type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"]
        }], data: [{
            type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"]
        }], filterSettings: [{
            type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"],
            args: ['kendoDropDownFilter']
        }] }); })();

/**
 * @hidden
 */
class Messages extends _progress_kendo_angular_l10n__WEBPACK_IMPORTED_MODULE_3__["ComponentMessages"] {
}
Messages.ɵfac = function Messages_Factory(t) { return ɵMessages_BaseFactory(t || Messages); };
Messages.ɵdir = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdefineDirective"]({ type: Messages, inputs: { noDataText: "noDataText", clearTitle: "clearTitle" }, features: [_angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵInheritDefinitionFeature"]] });
Messages.propDecorators = {
    noDataText: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"] }],
    clearTitle: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"] }]
};
const ɵMessages_BaseFactory = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵgetInheritedFactory"](Messages);

/**
 * @hidden
 */
class LocalizedMessagesDirective extends Messages {
    constructor(service) {
        super();
        this.service = service;
    }
}
LocalizedMessagesDirective.ɵfac = function LocalizedMessagesDirective_Factory(t) { return new (t || LocalizedMessagesDirective)(_angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](_progress_kendo_angular_l10n__WEBPACK_IMPORTED_MODULE_3__["LocalizationService"])); };
LocalizedMessagesDirective.ɵdir = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdefineDirective"]({ type: LocalizedMessagesDirective, selectors: [["", "kendoDropDownListLocalizedMessages", ""], ["", "kendoComboBoxLocalizedMessages", ""], ["", "kendoAutoCompleteLocalizedMessages", ""], ["", "kendoMultiSelectLocalizedMessages", ""]], features: [_angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵProvidersFeature"]([
            {
                provide: Messages,
                useExisting: Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["forwardRef"])(() => LocalizedMessagesDirective) // tslint:disable-line:no-forward-ref
            }
        ]), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵInheritDefinitionFeature"]] });
/** @nocollapse */
LocalizedMessagesDirective.ctorParameters = () => [
    { type: _progress_kendo_angular_l10n__WEBPACK_IMPORTED_MODULE_3__["LocalizationService"] }
];
/*@__PURE__*/ (function () { _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵsetClassMetadata"](LocalizedMessagesDirective, [{
        type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Directive"],
        args: [{
                providers: [
                    {
                        provide: Messages,
                        useExisting: Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["forwardRef"])(() => LocalizedMessagesDirective) // tslint:disable-line:no-forward-ref
                    }
                ],
                selector: `
    [kendoDropDownListLocalizedMessages],
    [kendoComboBoxLocalizedMessages],
    [kendoAutoCompleteLocalizedMessages],
    [kendoMultiSelectLocalizedMessages]
  `
            }]
    }], function () { return [{ type: _progress_kendo_angular_l10n__WEBPACK_IMPORTED_MODULE_3__["LocalizationService"] }]; }, null); })();

/**
 * Custom component messages override default component messages
 * ([see example]({% slug rtl_dropdowns %}#toc-messages)).
 */
class CustomMessagesComponent extends Messages {
    constructor(service) {
        super();
        this.service = service;
    }
    get override() {
        return true;
    }
}
CustomMessagesComponent.ɵfac = function CustomMessagesComponent_Factory(t) { return new (t || CustomMessagesComponent)(_angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](_progress_kendo_angular_l10n__WEBPACK_IMPORTED_MODULE_3__["LocalizationService"])); };
CustomMessagesComponent.ɵcmp = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdefineComponent"]({ type: CustomMessagesComponent, selectors: [["kendo-dropdownlist-messages"], ["kendo-combobox-messages"], ["kendo-autocomplete-messages"], ["kendo-multiselect-messages"]], features: [_angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵProvidersFeature"]([
            {
                provide: Messages,
                useExisting: Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["forwardRef"])(() => CustomMessagesComponent)
            }
        ]), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵInheritDefinitionFeature"]], decls: 0, vars: 0, template: function CustomMessagesComponent_Template(rf, ctx) { }, encapsulation: 2 });
/** @nocollapse */
CustomMessagesComponent.ctorParameters = () => [
    { type: _progress_kendo_angular_l10n__WEBPACK_IMPORTED_MODULE_3__["LocalizationService"] }
];
/*@__PURE__*/ (function () { _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵsetClassMetadata"](CustomMessagesComponent, [{
        type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Component"],
        args: [{
                providers: [
                    {
                        provide: Messages,
                        useExisting: Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["forwardRef"])(() => CustomMessagesComponent)
                    }
                ],
                selector: 'kendo-dropdownlist-messages, kendo-combobox-messages, kendo-autocomplete-messages, kendo-multiselect-messages',
                template: ``
            }]
    }], function () { return [{ type: _progress_kendo_angular_l10n__WEBPACK_IMPORTED_MODULE_3__["LocalizationService"] }]; }, null); })();

const SHARED_DIRECTIVES = [
    HeaderTemplateDirective,
    FooterTemplateDirective,
    ItemTemplateDirective,
    GroupTemplateDirective,
    FixedGroupTemplateDirective,
    NoDataTemplateDirective,
    LocalizedMessagesDirective,
    CustomMessagesComponent,
    FilterDirective
];
/**
 * @hidden
 *
 * The exported package module.
 *
 * The package exports:
 * - `ItemTemplateDirective`&mdash;The item template directive.
 * - `HeaderTemplateDirective`&mdash;The header template directive.
 * - `FooterTemplateDirective`&mdash;The footer template directive.
 * - `NoDataTemplateDirective`&mdash;The noData template directive.
 */
class SharedDirectivesModule {
}
SharedDirectivesModule.ɵmod = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdefineNgModule"]({ type: SharedDirectivesModule });
SharedDirectivesModule.ɵinj = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdefineInjector"]({ factory: function SharedDirectivesModule_Factory(t) { return new (t || SharedDirectivesModule)(); } });
(function () { (typeof ngJitMode === "undefined" || ngJitMode) && _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵsetNgModuleScope"](SharedDirectivesModule, { declarations: [HeaderTemplateDirective,
        FooterTemplateDirective,
        ItemTemplateDirective,
        GroupTemplateDirective,
        FixedGroupTemplateDirective,
        NoDataTemplateDirective,
        LocalizedMessagesDirective,
        CustomMessagesComponent,
        FilterDirective], exports: [HeaderTemplateDirective,
        FooterTemplateDirective,
        ItemTemplateDirective,
        GroupTemplateDirective,
        FixedGroupTemplateDirective,
        NoDataTemplateDirective,
        LocalizedMessagesDirective,
        CustomMessagesComponent,
        FilterDirective] }); })();
/*@__PURE__*/ (function () { _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵsetClassMetadata"](SharedDirectivesModule, [{
        type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["NgModule"],
        args: [{
                declarations: [SHARED_DIRECTIVES],
                exports: [SHARED_DIRECTIVES]
            }]
    }], null, null); })();

const INTERNAL_DIRECTIVES = [
    ListComponent,
    ListItemDirective,
    SelectableDirective,
    SearchBarComponent,
    TemplateContextDirective
];
/**
 * @hidden
 */
class SharedModule {
}
SharedModule.ɵmod = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdefineNgModule"]({ type: SharedModule });
SharedModule.ɵinj = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdefineInjector"]({ factory: function SharedModule_Factory(t) { return new (t || SharedModule)(); }, imports: [[_angular_common__WEBPACK_IMPORTED_MODULE_7__["CommonModule"], _angular_forms__WEBPACK_IMPORTED_MODULE_2__["FormsModule"], _progress_kendo_angular_popup__WEBPACK_IMPORTED_MODULE_6__["PopupModule"], _progress_kendo_angular_common__WEBPACK_IMPORTED_MODULE_1__["ResizeSensorModule"], SharedDirectivesModule],
        _angular_common__WEBPACK_IMPORTED_MODULE_7__["CommonModule"], _angular_forms__WEBPACK_IMPORTED_MODULE_2__["FormsModule"], _progress_kendo_angular_popup__WEBPACK_IMPORTED_MODULE_6__["PopupModule"], _progress_kendo_angular_common__WEBPACK_IMPORTED_MODULE_1__["ResizeSensorModule"],
        SharedDirectivesModule] });
(function () { (typeof ngJitMode === "undefined" || ngJitMode) && _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵsetNgModuleScope"](SharedModule, { declarations: function () { return [ListComponent,
        ListItemDirective,
        SelectableDirective,
        SearchBarComponent,
        TemplateContextDirective]; }, imports: function () { return [_angular_common__WEBPACK_IMPORTED_MODULE_7__["CommonModule"], _angular_forms__WEBPACK_IMPORTED_MODULE_2__["FormsModule"], _progress_kendo_angular_popup__WEBPACK_IMPORTED_MODULE_6__["PopupModule"], _progress_kendo_angular_common__WEBPACK_IMPORTED_MODULE_1__["ResizeSensorModule"],
        SharedDirectivesModule]; }, exports: function () { return [ListComponent,
        ListItemDirective,
        SelectableDirective,
        SearchBarComponent,
        TemplateContextDirective,
        _angular_common__WEBPACK_IMPORTED_MODULE_7__["CommonModule"], _angular_forms__WEBPACK_IMPORTED_MODULE_2__["FormsModule"], _progress_kendo_angular_popup__WEBPACK_IMPORTED_MODULE_6__["PopupModule"], _progress_kendo_angular_common__WEBPACK_IMPORTED_MODULE_1__["ResizeSensorModule"],
        SharedDirectivesModule]; } }); })();
/*@__PURE__*/ (function () { _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵsetClassMetadata"](SharedModule, [{
        type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["NgModule"],
        args: [{
                declarations: [INTERNAL_DIRECTIVES],
                exports: [INTERNAL_DIRECTIVES, _angular_common__WEBPACK_IMPORTED_MODULE_7__["CommonModule"], _angular_forms__WEBPACK_IMPORTED_MODULE_2__["FormsModule"], _progress_kendo_angular_popup__WEBPACK_IMPORTED_MODULE_6__["PopupModule"], _progress_kendo_angular_common__WEBPACK_IMPORTED_MODULE_1__["ResizeSensorModule"], SharedDirectivesModule],
                imports: [_angular_common__WEBPACK_IMPORTED_MODULE_7__["CommonModule"], _angular_forms__WEBPACK_IMPORTED_MODULE_2__["FormsModule"], _progress_kendo_angular_popup__WEBPACK_IMPORTED_MODULE_6__["PopupModule"], _progress_kendo_angular_common__WEBPACK_IMPORTED_MODULE_1__["ResizeSensorModule"], SharedDirectivesModule]
            }]
    }], null, null); })();

const AUTOCOMPLETE_DIRECTIVES = [
    AutoCompleteComponent
];
/**
 * @hidden
 *
 * The exported package module.
 *
 * The package exports:
 * - `AutoCompleteComponent`&mdash;The AutoComplete component class.
 * - `ItemTemplateDirective`&mdash;The item template directive.
 * - `HeaderTemplateDirective`&mdash;The header template directive.
 * - `FooterTemplateDirective`&mdash;The footer template directive.
 */
class AutoCompleteModule {
}
AutoCompleteModule.ɵmod = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdefineNgModule"]({ type: AutoCompleteModule });
AutoCompleteModule.ɵinj = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdefineInjector"]({ factory: function AutoCompleteModule_Factory(t) { return new (t || AutoCompleteModule)(); }, imports: [[SharedModule],
        SharedDirectivesModule] });
(function () { (typeof ngJitMode === "undefined" || ngJitMode) && _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵsetNgModuleScope"](AutoCompleteModule, { declarations: [AutoCompleteComponent], imports: [SharedModule], exports: [AutoCompleteComponent,
        SharedDirectivesModule] }); })();
/*@__PURE__*/ (function () { _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵsetClassMetadata"](AutoCompleteModule, [{
        type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["NgModule"],
        args: [{
                declarations: [AUTOCOMPLETE_DIRECTIVES],
                exports: [AUTOCOMPLETE_DIRECTIVES, SharedDirectivesModule],
                imports: [SharedModule]
            }]
    }], null, null); })();

/* tslint:disable:object-literal-sort-keys */
const agentRxs = {
    wp: /(Windows Phone(?: OS)?)\s(\d+)\.(\d+(\.\d+)?)/,
    fire: /(Silk)\/(\d+)\.(\d+(\.\d+)?)/,
    android: /(Android|Android.*(?:Opera|Firefox).*?\/)\s*(\d+)\.(\d+(\.\d+)?)/,
    iphone: /(iPhone|iPod).*OS\s+(\d+)[\._]([\d\._]+)/,
    ipad: /(iPad).*OS\s+(\d+)[\._]([\d_]+)/,
    meego: /(MeeGo).+NokiaBrowser\/(\d+)\.([\d\._]+)/,
    webos: /(webOS)\/(\d+)\.(\d+(\.\d+)?)/,
    blackberry: /(BlackBerry|BB10).*?Version\/(\d+)\.(\d+(\.\d+)?)/,
    playbook: /(PlayBook).*?Tablet\s*OS\s*(\d+)\.(\d+(\.\d+)?)/,
    windows: /(MSIE)\s+(\d+)\.(\d+(\.\d+)?)/,
    tizen: /(tizen).*?Version\/(\d+)\.(\d+(\.\d+)?)/i,
    sailfish: /(sailfish).*rv:(\d+)\.(\d+(\.\d+)?).*firefox/i,
    ffos: /(Mobile).*rv:(\d+)\.(\d+(\.\d+)?).*Firefox/
};
const osRxs = {
    ios: /^i(phone|pad|pod)$/i,
    android: /^android|fire$/i,
    blackberry: /^blackberry|playbook/i,
    windows: /windows/,
    wp: /wp/,
    flat: /sailfish|ffos|tizen/i,
    meego: /meego/
};
const desktopBrowserRxs = {
    edge: /(edge)[ \/]([\w.]+)/i,
    webkit: /(chrome)[ \/]([\w.]+)/i,
    safari: /(webkit)[ \/]([\w.]+)/i,
    opera: /(opera)(?:.*version|)[ \/]([\w.]+)/i,
    msie: /(msie\s|trident.*? rv:)([\w.]+)/i,
    mozilla: /(mozilla)(?:.*? rv:([\w.]+)|)/i
};
const mobileBrowserRxs = {
    omini: /Opera\sMini/i,
    omobile: /Opera\sMobi/i,
    firefox: /Firefox|Fennec/i,
    mobilesafari: /version\/.*safari/i,
    ie: /MSIE|Windows\sPhone/i,
    chrome: /chrome|crios/i,
    webkit: /webkit/i
};
const testRx = (agent, rxs, dflt) => {
    for (let rx in rxs) {
        if (rxs.hasOwnProperty(rx) && rxs[rx].test(agent)) {
            return rx;
        }
    }
    return dflt !== undefined ? dflt : agent;
};
/**
 * @hidden
 */
const detectMobileOS = (ua) => {
    let minorVersion;
    let match = [];
    for (let agent in agentRxs) {
        if (agentRxs.hasOwnProperty(agent)) {
            match = ua.match(agentRxs[agent]);
            if (!match) {
                continue;
            }
            if (agent === 'windows' && 'plugins' in window.navigator) {
                return null;
            } // Break if not Metro/Mobile Windows
            const os = {};
            os.device = agent;
            os.browser = testRx(ua, mobileBrowserRxs, 'default');
            os.name = testRx(agent, osRxs);
            os[os.name] = true;
            os.majorVersion = match[2];
            os.minorVersion = match[3].replace('_', '.');
            minorVersion = os.minorVersion.replace('.', '').substr(0, 2);
            os.flatVersion = os.majorVersion + minorVersion +
                (new Array(3 - (minorVersion.length < 3 ? minorVersion.length : 2)).join('0'));
            os.cordova = typeof window.PhoneGap !== undefined
                || typeof window.cordova !== undefined; // Use file protocol to detect appModes.
            os.appMode = window.navigator.standalone
                || (/file|local|wmapp/).test(window.location.protocol)
                || os.cordova; // Use file protocol to detect appModes.
            return os;
        }
    }
    return null;
};
/**
 * @hidden
 */
const detectDesktopBrowser = (ua) => {
    let browserInfo = null;
    let match = [];
    for (let agent in desktopBrowserRxs) {
        if (desktopBrowserRxs.hasOwnProperty(agent)) {
            match = ua.match(desktopBrowserRxs[agent]);
            if (match) {
                browserInfo = {};
                browserInfo[agent] = true;
                browserInfo[match[1].toLowerCase().split(' ')[0].split('/')[0]] = true;
                browserInfo.version = parseInt(document.documentMode || match[2], 10);
                break;
            }
        }
    }
    return browserInfo;
};
const userAgent = isWindowAvailable() && window.navigator ? window.navigator.userAgent : null;
/**
 * @hidden
 */
const browser = userAgent ? detectDesktopBrowser(userAgent) : null;
/**
 * @hidden
 */
const mobileOS = userAgent ? detectMobileOS(userAgent) : null;
/**
 * @hidden
 */
const touch = isWindowAvailable() && 'ontouchstart' in window;
/**
 * @hidden
 */
const msPointers = browser && !browser.chrome && window.MSPointerEvent;
/**
 * @hidden
 */
const pointers = browser && !browser.chrome && window.PointerEvent;
/**
 * @hidden
 */
const touchEnabled = mobileOS && (touch || msPointers || pointers);

const COMBOBOX_DIRECTIVES = [
    ComboBoxComponent
];
const ɵ0$1 = touchEnabled;
/**
 * @hidden
 *
 * The exported package module.
 *
 * The package exports:
 * - `ComboBoxComponent`&mdash;The ComboBox component class.
 * - `ItemTemplateDirective`&mdash;The item template directive.
 * - `HeaderTemplateDirective`&mdash;The header template directive.
 * - `FooterTemplateDirective`&mdash;The footer template directive.
 */
class ComboBoxModule {
}
ComboBoxModule.ɵmod = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdefineNgModule"]({ type: ComboBoxModule });
ComboBoxModule.ɵinj = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdefineInjector"]({ factory: function ComboBoxModule_Factory(t) { return new (t || ComboBoxModule)(); }, providers: [{ provide: TOUCH_ENABLED, useValue: ɵ0$1 }], imports: [[SharedModule],
        SharedDirectivesModule] });
(function () { (typeof ngJitMode === "undefined" || ngJitMode) && _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵsetNgModuleScope"](ComboBoxModule, { declarations: [ComboBoxComponent], imports: [SharedModule], exports: [ComboBoxComponent,
        SharedDirectivesModule] }); })();
/*@__PURE__*/ (function () { _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵsetClassMetadata"](ComboBoxModule, [{
        type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["NgModule"],
        args: [{
                declarations: [COMBOBOX_DIRECTIVES],
                exports: [COMBOBOX_DIRECTIVES, SharedDirectivesModule],
                imports: [SharedModule],
                providers: [{ provide: TOUCH_ENABLED, useValue: ɵ0$1 }]
            }]
    }], null, null); })();

/**
 * @hidden
 */
class FilterInputDirective {
    constructor(element, zone) {
        this.element = element;
        this.zone = zone;
    }
    ngOnChanges() {
        if (this.focused) {
            this.nextTick(() => this.element.nativeElement.focus());
        }
    }
    nextTick(fn) {
        this.zone.runOutsideAngular(() => setTimeout(fn));
    }
}
FilterInputDirective.ɵfac = function FilterInputDirective_Factory(t) { return new (t || FilterInputDirective)(_angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](_angular_core__WEBPACK_IMPORTED_MODULE_0__["ElementRef"]), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](_angular_core__WEBPACK_IMPORTED_MODULE_0__["NgZone"])); };
FilterInputDirective.ɵdir = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdefineDirective"]({ type: FilterInputDirective, selectors: [["", "filterInput", ""]], inputs: { focused: ["filterInput", "focused"] }, features: [_angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵNgOnChangesFeature"]] });
/** @nocollapse */
FilterInputDirective.ctorParameters = () => [
    { type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["ElementRef"] },
    { type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["NgZone"] }
];
FilterInputDirective.propDecorators = {
    focused: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"], args: ['filterInput',] }]
};
/*@__PURE__*/ (function () { _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵsetClassMetadata"](FilterInputDirective, [{
        type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Directive"],
        args: [{
                selector: '[filterInput]' // tslint:disable-line
            }]
    }], function () { return [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["ElementRef"] }, { type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["NgZone"] }]; }, { focused: [{
            type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"],
            args: ['filterInput']
        }] }); })();

const DROPDOWNLIST_DIRECTIVES = [
    DropDownListComponent,
    ValueTemplateDirective,
    FilterInputDirective
];
/**
 * @hidden
 *
 * The exported package module.
 *
 * The package exports:
 * - `DropDownListComponent`&mdash;The DropDownList component class.
 * - `ItemTemplateDirective`&mdash;The item template directive.
 * - `ValueTemplateDirective`&mdash;The value template directive.
 * - `HeaderTemplateDirective`&mdash;The header template directive.
 * - `FooterTemplateDirective`&mdash;The footer template directive.
 */
class DropDownListModule {
}
DropDownListModule.ɵmod = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdefineNgModule"]({ type: DropDownListModule });
DropDownListModule.ɵinj = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdefineInjector"]({ factory: function DropDownListModule_Factory(t) { return new (t || DropDownListModule)(); }, imports: [[SharedModule],
        SharedDirectivesModule] });
(function () { (typeof ngJitMode === "undefined" || ngJitMode) && _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵsetNgModuleScope"](DropDownListModule, { declarations: [DropDownListComponent,
        ValueTemplateDirective,
        FilterInputDirective], imports: [SharedModule], exports: [DropDownListComponent,
        ValueTemplateDirective,
        FilterInputDirective,
        SharedDirectivesModule] }); })();
/*@__PURE__*/ (function () { _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵsetClassMetadata"](DropDownListModule, [{
        type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["NgModule"],
        args: [{
                declarations: [DROPDOWNLIST_DIRECTIVES],
                exports: [DROPDOWNLIST_DIRECTIVES, SharedDirectivesModule],
                imports: [SharedModule]
            }]
    }], null, null); })();

const MULTISELECT_DIRECTIVES = [
    MultiSelectComponent,
    TagListComponent,
    TagTemplateDirective,
    GroupTagTemplateDirective,
    SummaryTagDirective,
    CustomItemTemplateDirective
];
const ɵ0$2 = touchEnabled;
/**
 * @hidden
 *
 * The exported package module.
 *
 * The package exports:
 * - `MultiSelectComponent`&mdash;The MultiSelect component class.
 * - `SummaryTagDirective`&mdash;The MultiSelect summary tag directive.
 * - `ItemTemplateDirective`&mdash;The item template directive.
 * - `CustomItemTemplateDirective`&mdash;The custom item template directive.
 * - `TagTemplateDirective`&mdash;The tag template directive.
 * - `SummaryTagTemplateDirective`&mdash;The summary tag template directive.
 * - `HeaderTemplateDirective`&mdash;The header template directive.
 * - `FooterTemplateDirective`&mdash;The footer template directive.
 * - `NoDataTemplateDirective`&mdash;The no-data template directive.
 */
class MultiSelectModule {
}
MultiSelectModule.ɵmod = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdefineNgModule"]({ type: MultiSelectModule });
MultiSelectModule.ɵinj = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdefineInjector"]({ factory: function MultiSelectModule_Factory(t) { return new (t || MultiSelectModule)(); }, providers: [{ provide: TOUCH_ENABLED, useValue: ɵ0$2 }], imports: [[SharedModule],
        SharedDirectivesModule] });
(function () { (typeof ngJitMode === "undefined" || ngJitMode) && _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵsetNgModuleScope"](MultiSelectModule, { declarations: [MultiSelectComponent,
        TagListComponent,
        TagTemplateDirective,
        GroupTagTemplateDirective,
        SummaryTagDirective,
        CustomItemTemplateDirective], imports: [SharedModule], exports: [MultiSelectComponent,
        TagListComponent,
        TagTemplateDirective,
        GroupTagTemplateDirective,
        SummaryTagDirective,
        CustomItemTemplateDirective,
        SharedDirectivesModule] }); })();
/*@__PURE__*/ (function () { _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵsetClassMetadata"](MultiSelectModule, [{
        type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["NgModule"],
        args: [{
                declarations: [MULTISELECT_DIRECTIVES],
                exports: [MULTISELECT_DIRECTIVES, SharedDirectivesModule],
                imports: [SharedModule],
                providers: [{ provide: TOUCH_ENABLED, useValue: ɵ0$2 }]
            }]
    }], null, null); })();

/**
 * Represents the [NgModule]({{ site.data.urls.angular['ngmoduleapi'] }})
 * definition for the Dropdowns components.
 *
 * @example
 *
 * ```ts-no-run
 * // Import the Dropdowns module
 * import { DropDownsModule } from '@progress/kendo-angular-dropdowns';
 *
 * // The browser platform with a compiler
 * import { platformBrowserDynamic } from '@angular/platform-browser-dynamic';
 *
 * import { NgModule } from '@angular/core';
 *
 * // Import the app component
 * import { AppComponent } from './app.component';
 *
 * // Define the app module
 * _@NgModule({
 *     declarations: [AppComponent], // declare the app component
 *     imports:      [BrowserModule, DropDownsModule], // import the Dropdowns module
 *     bootstrap:    [AppComponent]
 * })
 * export class AppModule {}
 *
 * // Compile and launch the module
 * platformBrowserDynamic().bootstrapModule(AppModule);
 *
 * ```
 */
class DropDownsModule {
}
DropDownsModule.ɵmod = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdefineNgModule"]({ type: DropDownsModule });
DropDownsModule.ɵinj = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdefineInjector"]({ factory: function DropDownsModule_Factory(t) { return new (t || DropDownsModule)(); }, imports: [AutoCompleteModule,
        ComboBoxModule,
        DropDownListModule,
        MultiSelectModule] });
(function () { (typeof ngJitMode === "undefined" || ngJitMode) && _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵsetNgModuleScope"](DropDownsModule, { exports: [AutoCompleteModule,
        ComboBoxModule,
        DropDownListModule,
        MultiSelectModule] }); })();
/*@__PURE__*/ (function () { _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵsetClassMetadata"](DropDownsModule, [{
        type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["NgModule"],
        args: [{
                exports: [AutoCompleteModule, ComboBoxModule, DropDownListModule, MultiSelectModule]
            }]
    }], null, null); })();

/**
 * Generated bundle index. Do not edit.
 */



//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaW5kZXguanMiLCJzb3VyY2VzIjpbImluZGV4LmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7Ozs7Ozs7NkJBOEJFO0FBQ0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O29CQUFFO0FBQ0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OzJRQUtFO0FBQ0Y7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs0RUFBRTtBQUNGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7dVJBS0U7QUFDRjtBQUNBO0FBQ0E7QUFDQTs7Ozs7OzRFQUFFO0FBQ0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzt1UkFLRTtBQUNGO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7NEVBQUU7QUFDRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7aVJBS0U7QUFDRjtBQUNBO0FBQ0E7QUFDQTs7Ozs7OzRFQUFFO0FBQ0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OytTQUtFO0FBQ0Y7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs0RUFBRTtBQUNGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7OztnREFHRTtBQUNGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7OztnREFHRTtBQUNGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OzRIQUdFO0FBQ0Y7QUFDQTtBQUNBO0FBQ0E7OztxRUFBRTtBQUNGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O21IQUdFO0FBQ0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7OzBHQUFFO0FBQ0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzt1UkFLRTtBQUNGO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7NEVBQUU7QUFDRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7K0lBS0U7QUFDRjtBQUNBO0FBQ0E7QUFDQTs7Ozs7OzJFQUFFO0FBQ0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7cURBb0dFO0FBQ0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7b0JBQUU7QUFDRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O3dGQXFHRTtBQUNGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztvQkFBRTtBQUNGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozt3RkErR0U7QUFDRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztvQkFBRTtBQUNGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O2tKQUtFO0FBQ0Y7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs0RUFBRTtBQUNGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7NkxBNEpFO0FBQ0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O29CQUFFO0FBQ0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O2dLQUtFO0FBQ0Y7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs0RUFBRTtBQUNGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OzJJQUtFO0FBQ0Y7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs0RUFBRTtBQUNGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7MEpBS0U7QUFDRjtBQUNBO0FBQ0E7QUFDQTs7Ozs7OzRFQUFFO0FBQ0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OzttRkFxSUU7QUFDRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7b0JBQUU7QUFDRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs2SkF5Q0U7QUFDRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O29CQUFFO0FBQ0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzt1TEFLRTtBQUNGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7OztvQkFBRTtBQUNGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7O2lHQUtFO0FBQ0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7b0JBQUU7QUFDRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O3FQQUtFO0FBQ0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7OztvQkFBRTtBQUNGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7d09BS0U7QUFDRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7Ozs7b0JBQUU7QUFDRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OzRLQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0E7cUVBQUU7QUFDRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7OztrREFnQkU7QUFDRjtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7Ozs7Ozs7b0ZBQUU7QUFDRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7O3lKQVlFO0FBQ0Y7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7Ozs7b0ZBQUU7QUFDRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7MEJBTUU7QUFDRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OzBCQU9FO0FBQ0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7OzswQkFPRTtBQUNGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7Ozs7OzBCQVFFO0FBQ0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztxTkFLRTtBQUNGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7OztvQkFBRTtBQUNGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7Ozs7Ozs7OzBCQU9FO0FBQ0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OzswQkFRRTtBQUNGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7Ozs7MEJBS0U7QUFDRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VzQ29udGVudCI6WyIvKiotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuKiBDb3B5cmlnaHQgwqkgMjAyMCBQcm9ncmVzcyBTb2Z0d2FyZSBDb3Jwb3JhdGlvbi4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiogTGljZW5zZWQgdW5kZXIgY29tbWVyY2lhbCBsaWNlbnNlLiBTZWUgTElDRU5TRS5tZCBpbiB0aGUgcHJvamVjdCByb290IGZvciBtb3JlIGluZm9ybWF0aW9uXG4qLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXG5pbXBvcnQgeyBFdmVudEVtaXR0ZXIsIENvbXBvbmVudCwgUmVuZGVyZXIyLCBJbnB1dCwgT3V0cHV0LCBWaWV3Q2hpbGQsIEhvc3RCaW5kaW5nLCBEaXJlY3RpdmUsIFRlbXBsYXRlUmVmLCBJbmplY3RhYmxlLCBFbGVtZW50UmVmLCBDaGFuZ2VEZXRlY3RvclJlZiwgTmdab25lLCBWaWV3Q2hpbGRyZW4sIGZvcndhcmRSZWYsIGlzRGV2TW9kZSwgQ29udGVudENoaWxkLCBWaWV3Q29udGFpbmVyUmVmLCBJbmplY3Rpb25Ub2tlbiwgT3B0aW9uYWwsIEluamVjdCwgS2V5VmFsdWVEaWZmZXJzLCBIb3N0TGlzdGVuZXIsIE5nTW9kdWxlIH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG5pbXBvcnQgeyBpc0RvY3VtZW50QXZhaWxhYmxlLCBpc0NoYW5nZWQsIEtlbmRvSW5wdXQsIFJlc2l6ZVNlbnNvck1vZHVsZSB9IGZyb20gJ0Bwcm9ncmVzcy9rZW5kby1hbmd1bGFyLWNvbW1vbic7XG5pbXBvcnQgeyBOR19WQUxVRV9BQ0NFU1NPUiwgRm9ybXNNb2R1bGUgfSBmcm9tICdAYW5ndWxhci9mb3Jtcyc7XG5pbXBvcnQgeyBMb2NhbGl6YXRpb25TZXJ2aWNlLCBMMTBOX1BSRUZJWCwgQ29tcG9uZW50TWVzc2FnZXMgfSBmcm9tICdAcHJvZ3Jlc3Mva2VuZG8tYW5ndWxhci1sMTBuJztcbmltcG9ydCB7IG1lcmdlLCBmcm9tRXZlbnQsIFN1YmplY3QsIFN1YnNjcmlwdGlvbiwgb2YsIGludGVydmFsIH0gZnJvbSAncnhqcyc7XG5pbXBvcnQgeyBtYXAsIGF1ZGl0VGltZSwgdGFwLCBmaWx0ZXIsIHBhcnRpdGlvbiwgdGhyb3R0bGVUaW1lLCBjYXRjaEVycm9yLCBkaXN0aW5jdFVudGlsQ2hhbmdlZCwgc2tpcFdoaWxlLCBjb25jYXRNYXAsIHRha2UsIHRha2VVbnRpbCB9IGZyb20gJ3J4anMvb3BlcmF0b3JzJztcbmltcG9ydCB7IFBvcHVwU2VydmljZSwgUG9wdXBNb2R1bGUgfSBmcm9tICdAcHJvZ3Jlc3Mva2VuZG8tYW5ndWxhci1wb3B1cCc7XG5leHBvcnQgeyBQb3B1cENvbXBvbmVudCB9IGZyb20gJ0Bwcm9ncmVzcy9rZW5kby1hbmd1bGFyLXBvcHVwJztcbmltcG9ydCB7IENvbW1vbk1vZHVsZSB9IGZyb20gJ0Bhbmd1bGFyL2NvbW1vbic7XG5cbi8qKlxuICogQGhpZGRlblxuICovXG52YXIgS2V5cztcbihmdW5jdGlvbiAoS2V5cykge1xuICAgIEtleXNbS2V5c1tcImJhY2tzcGFjZVwiXSA9IDhdID0gXCJiYWNrc3BhY2VcIjtcbiAgICBLZXlzW0tleXNbXCJ0YWJcIl0gPSA5XSA9IFwidGFiXCI7XG4gICAgS2V5c1tLZXlzW1wiZW50ZXJcIl0gPSAxM10gPSBcImVudGVyXCI7XG4gICAgS2V5c1tLZXlzW1wic2hpZnRcIl0gPSAxNl0gPSBcInNoaWZ0XCI7XG4gICAgS2V5c1tLZXlzW1wiY3RybFwiXSA9IDE3XSA9IFwiY3RybFwiO1xuICAgIEtleXNbS2V5c1tcImFsdFwiXSA9IDE4XSA9IFwiYWx0XCI7XG4gICAgS2V5c1tLZXlzW1wicGF1c2UvYnJlYWtcIl0gPSAxOV0gPSBcInBhdXNlL2JyZWFrXCI7XG4gICAgS2V5c1tLZXlzW1wiY2FwcyBsb2NrXCJdID0gMjBdID0gXCJjYXBzIGxvY2tcIjtcbiAgICBLZXlzW0tleXNbXCJlc2NcIl0gPSAyN10gPSBcImVzY1wiO1xuICAgIEtleXNbS2V5c1tcInNwYWNlXCJdID0gMzJdID0gXCJzcGFjZVwiO1xuICAgIEtleXNbS2V5c1tcInBhZ2UgdXBcIl0gPSAzM10gPSBcInBhZ2UgdXBcIjtcbiAgICBLZXlzW0tleXNbXCJwYWdlIGRvd25cIl0gPSAzNF0gPSBcInBhZ2UgZG93blwiO1xuICAgIEtleXNbS2V5c1tcImVuZFwiXSA9IDM1XSA9IFwiZW5kXCI7XG4gICAgS2V5c1tLZXlzW1wiaG9tZVwiXSA9IDM2XSA9IFwiaG9tZVwiO1xuICAgIEtleXNbS2V5c1tcImxlZnRcIl0gPSAzN10gPSBcImxlZnRcIjtcbiAgICBLZXlzW0tleXNbXCJ1cFwiXSA9IDM4XSA9IFwidXBcIjtcbiAgICBLZXlzW0tleXNbXCJyaWdodFwiXSA9IDM5XSA9IFwicmlnaHRcIjtcbiAgICBLZXlzW0tleXNbXCJkb3duXCJdID0gNDBdID0gXCJkb3duXCI7XG4gICAgS2V5c1tLZXlzW1wiaW5zZXJ0XCJdID0gNDVdID0gXCJpbnNlcnRcIjtcbiAgICBLZXlzW0tleXNbXCJkZWxldGVcIl0gPSA0Nl0gPSBcImRlbGV0ZVwiO1xuICAgIEtleXNbS2V5c1tcImNvbW1hbmRcIl0gPSA5MV0gPSBcImNvbW1hbmRcIjtcbiAgICBLZXlzW0tleXNbXCJsZWZ0IGNvbW1hbmRcIl0gPSA5MV0gPSBcImxlZnQgY29tbWFuZFwiO1xuICAgIEtleXNbS2V5c1tcInJpZ2h0IGNvbW1hbmRcIl0gPSA5M10gPSBcInJpZ2h0IGNvbW1hbmRcIjtcbiAgICBLZXlzW0tleXNbXCJudW1wYWQgKlwiXSA9IDEwNl0gPSBcIm51bXBhZCAqXCI7XG4gICAgS2V5c1tLZXlzW1wibnVtcGFkICtcIl0gPSAxMDddID0gXCJudW1wYWQgK1wiO1xuICAgIEtleXNbS2V5c1tcIm51bXBhZCAtXCJdID0gMTA5XSA9IFwibnVtcGFkIC1cIjtcbiAgICBLZXlzW0tleXNbXCJudW1wYWQgLlwiXSA9IDExMF0gPSBcIm51bXBhZCAuXCI7XG4gICAgS2V5c1tLZXlzW1wibnVtcGFkIC9cIl0gPSAxMTFdID0gXCJudW1wYWQgL1wiO1xuICAgIEtleXNbS2V5c1tcIm51bSBsb2NrXCJdID0gMTQ0XSA9IFwibnVtIGxvY2tcIjtcbiAgICBLZXlzW0tleXNbXCJzY3JvbGwgbG9ja1wiXSA9IDE0NV0gPSBcInNjcm9sbCBsb2NrXCI7XG4gICAgS2V5c1tLZXlzW1wibXkgY29tcHV0ZXJcIl0gPSAxODJdID0gXCJteSBjb21wdXRlclwiO1xuICAgIEtleXNbS2V5c1tcIm15IGNhbGN1bGF0b3JcIl0gPSAxODNdID0gXCJteSBjYWxjdWxhdG9yXCI7XG4gICAgS2V5c1tLZXlzW1wiO1wiXSA9IDE4Nl0gPSBcIjtcIjtcbiAgICBLZXlzW0tleXNbXCI9XCJdID0gMTg3XSA9IFwiPVwiO1xuICAgIEtleXNbS2V5c1tcIixcIl0gPSAxODhdID0gXCIsXCI7XG4gICAgS2V5c1tLZXlzW1wiLVwiXSA9IDE4OV0gPSBcIi1cIjtcbiAgICBLZXlzW0tleXNbXCIuXCJdID0gMTkwXSA9IFwiLlwiO1xuICAgIEtleXNbS2V5c1tcIi9cIl0gPSAxOTFdID0gXCIvXCI7XG4gICAgS2V5c1tLZXlzW1wiYFwiXSA9IDE5Ml0gPSBcImBcIjtcbiAgICBLZXlzW0tleXNbXCJbXCJdID0gMjE5XSA9IFwiW1wiO1xuICAgIEtleXNbS2V5c1tcIlxcXFxcIl0gPSAyMjBdID0gXCJcXFxcXCI7XG4gICAgS2V5c1tLZXlzW1wiXVwiXSA9IDIyMV0gPSBcIl1cIjtcbiAgICBLZXlzW0tleXNbXCInXCJdID0gMjIyXSA9IFwiJ1wiO1xufSkoS2V5cyB8fCAoS2V5cyA9IHt9KSk7XG5cbi8qIHRzbGludDpkaXNhYmxlOm5vLW51bGwta2V5d29yZCAqL1xuLyogdHNsaW50OmRpc2FibGU6bm8tYml0d2lzZSAqL1xuLyogdHNsaW50OmRpc2FibGU6YWxpZ24gKi9cbi8qKlxuICogQGhpZGRlblxuICovXG5jb25zdCBpc1ByZXNlbnQgPSAodmFsdWUpID0+IHZhbHVlICE9PSBudWxsICYmIHZhbHVlICE9PSB1bmRlZmluZWQ7XG4vKipcbiAqIEBoaWRkZW5cbiAqL1xuY29uc3QgaXNOdW1iZXIgPSAodmFsdWUpID0+ICFpc05hTih2YWx1ZSk7XG4vKipcbiAqIEBoaWRkZW5cbiAqL1xuY29uc3QgZ3VpZCA9ICgpID0+IHtcbiAgICBsZXQgaWQgPSBcIlwiO1xuICAgIGxldCBpO1xuICAgIGxldCByYW5kb207XG4gICAgZm9yIChpID0gMDsgaSA8IDMyOyBpKyspIHtcbiAgICAgICAgcmFuZG9tID0gTWF0aC5yYW5kb20oKSAqIDE2IHwgMDtcbiAgICAgICAgaWYgKGkgPT09IDggfHwgaSA9PT0gMTIgfHwgaSA9PT0gMTYgfHwgaSA9PT0gMjApIHtcbiAgICAgICAgICAgIGlkICs9IFwiLVwiO1xuICAgICAgICB9XG4gICAgICAgIGlkICs9IChpID09PSAxMiA/IDQgOiAoaSA9PT0gMTYgPyAocmFuZG9tICYgMyB8IDgpIDogcmFuZG9tKSkudG9TdHJpbmcoMTYpO1xuICAgIH1cbiAgICByZXR1cm4gaWQ7XG59O1xuLyoqXG4gKiBAaGlkZGVuXG4gKi9cbmNvbnN0IGNvbWJpbmVTdHIgPSAoYmVnaW4sIGVuZCkgPT4ge1xuICAgIHJldHVybiBiZWdpbi5jb25jYXQoZW5kLnN1YnN0cihlbmQudG9Mb3dlckNhc2UoKS5pbmRleE9mKGJlZ2luLnRvTG93ZXJDYXNlKCkpICsgYmVnaW4ubGVuZ3RoKSk7XG59O1xuLyoqXG4gKiBAaGlkZGVuXG4gKi9cbmNvbnN0IGlzV2luZG93QXZhaWxhYmxlID0gKCkgPT4gdHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCc7XG4vKipcbiAqIEBoaWRkZW5cbiAqL1xuY29uc3QgaXNBcnJheSA9ICh2YWx1ZSkgPT4gQXJyYXkuaXNBcnJheSh2YWx1ZSk7XG4vKipcbiAqIEBoaWRkZW5cbiAqL1xuY29uc3QgaXNPYmplY3QgPSAodmFsdWUpID0+IGlzUHJlc2VudCh2YWx1ZSkgJiYgdHlwZW9mIHZhbHVlID09PSAnb2JqZWN0Jztcbi8qKlxuICogQGhpZGRlblxuICovXG5jb25zdCBpc0VtcHR5U3RyaW5nID0gKHZhbHVlKSA9PiB0eXBlb2YgdmFsdWUgPT09ICdzdHJpbmcnICYmIHZhbHVlLmxlbmd0aCA9PT0gMDtcbi8qKlxuICogQGhpZGRlblxuICovXG5jb25zdCByZXNvbHZlVmFsdWVzSW5BcnJheSA9ICh2YWx1ZXMsIGRhdGEgPSBbXSwgdmFsdWVGaWVsZCkgPT4gdmFsdWVzXG4gICAgLm1hcCh2YWx1ZSA9PiB7XG4gICAgcmV0dXJuIGRhdGEuZmluZChpdGVtID0+IGl0ZW1bdmFsdWVGaWVsZF0gPT09IHZhbHVlKTtcbn0pXG4gICAgLmZpbHRlcih2YWx1ZSA9PiB2YWx1ZSAhPT0gdW5kZWZpbmVkKTtcbi8qKlxuICogQGhpZGRlblxuICovXG5jb25zdCB2YWxpZGF0ZUNvbXBsZXhWYWx1ZXMgPSAodmFsdWVzLCB2YWx1ZUZpZWxkKSA9PiBpc0FycmF5KHZhbHVlcykgJiYgdmFsdWVzLmZpbHRlcihpdGVtID0+IHtcbiAgICByZXR1cm4gaXNPYmplY3QoaXRlbSkgJiYgaXRlbVt2YWx1ZUZpZWxkXTtcbn0pO1xuLyoqXG4gKiBAaGlkZGVuXG4gKi9cbmNvbnN0IHJlc29sdmVBbGxWYWx1ZXMgPSAodmFsdWUsIGRhdGEsIHZhbHVlRmllbGQpID0+IHtcbiAgICBjb25zdCBjdXN0b21WYWx1ZXMgPSB2YWxpZGF0ZUNvbXBsZXhWYWx1ZXModmFsdWUsIHZhbHVlRmllbGQpIHx8IFtdO1xuICAgIGNvbnN0IHJlc29sdmVkVmFsdWVzID0gcmVzb2x2ZVZhbHVlc0luQXJyYXkodmFsdWUsIGRhdGEsIHZhbHVlRmllbGQpIHx8IFtdO1xuICAgIHJldHVybiByZXNvbHZlZFZhbHVlcy5jb25jYXQoY3VzdG9tVmFsdWVzKTtcbn07XG4vKipcbiAqIEBoaWRkZW5cbiAqL1xuY29uc3QgaXNPYmplY3RBcnJheSA9ICh2YWx1ZXMpID0+IHtcbiAgICByZXR1cm4gaXNBcnJheSh2YWx1ZXMpICYmIHZhbHVlcy5ldmVyeShpdGVtID0+IGlzT2JqZWN0KGl0ZW0pKTtcbn07XG4vKipcbiAqIEBoaWRkZW5cbiAqL1xuY29uc3Qgc2VsZWN0ZWRJbmRpY2VzID0gKHZhbHVlcywgZGF0YSwgdmFsdWVGaWVsZCkgPT4ge1xuICAgIGNvbnN0IGV4dHJhY3RlZFZhbHVlcyA9IGRhdGEubWFwKGl0ZW0gPT4ge1xuICAgICAgICByZXR1cm4gaXNQcmVzZW50KGl0ZW0pICYmIGlzUHJlc2VudChpdGVtW3ZhbHVlRmllbGRdKSA/IGl0ZW1bdmFsdWVGaWVsZF0gOiBpdGVtO1xuICAgIH0pO1xuICAgIHJldHVybiB2YWx1ZXMucmVkdWNlKChhcnIsIGl0ZW0pID0+IHtcbiAgICAgICAgY29uc3QgdmFsdWUgPSBpc1ByZXNlbnQoaXRlbSkgJiYgaXNQcmVzZW50KGl0ZW1bdmFsdWVGaWVsZF0pID8gaXRlbVt2YWx1ZUZpZWxkXSA6IGl0ZW07XG4gICAgICAgIGNvbnN0IGluZGV4ID0gZXh0cmFjdGVkVmFsdWVzLmluZGV4T2YodmFsdWUpO1xuICAgICAgICBpZiAoaW5kZXggIT09IC0xKSB7XG4gICAgICAgICAgICBhcnIucHVzaChpbmRleCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGFycjtcbiAgICB9LCBbXSk7XG59O1xuLyoqXG4gKiBAaGlkZGVuXG4gKi9cbmNvbnN0IGdldHRlciA9IChkYXRhSXRlbSwgZmllbGQsIHVzZVByaW1pdGl2ZSA9IGZhbHNlKSA9PiB7XG4gICAgaWYgKGlzUHJlc2VudChkYXRhSXRlbSkpIHtcbiAgICAgICAgaWYgKHVzZVByaW1pdGl2ZSkge1xuICAgICAgICAgICAgcmV0dXJuIGZpZWxkICYmIGlzUHJlc2VudChkYXRhSXRlbVtmaWVsZF0pID8gZGF0YUl0ZW1bZmllbGRdIDogZGF0YUl0ZW07XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gZmllbGQgPyBkYXRhSXRlbVtmaWVsZF0gOiBkYXRhSXRlbTtcbiAgICAgICAgfVxuICAgIH1cbn07XG4vKipcbiAqIEBoaWRkZW5cbiAqL1xuY29uc3Qgc2FtZUNoYXJzT25seSA9ICh3b3JkLCBjaGFyYWN0ZXIpID0+IHtcbiAgICBmb3IgKGxldCBpZHggPSAwOyBpZHggPCB3b3JkLmxlbmd0aDsgaWR4KyspIHtcbiAgICAgICAgaWYgKHdvcmQuY2hhckF0KGlkeCkgIT09IGNoYXJhY3Rlcikge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiB0cnVlO1xufTtcbi8qKlxuICogQGhpZGRlblxuICovXG5jb25zdCBzaHVmZmxlRGF0YSA9IChkYXRhLCBzcGxpdEluZGV4LCBkZWZhdWx0SXRlbSkgPT4ge1xuICAgIGxldCByZXN1bHQgPSBkYXRhO1xuICAgIGlmIChkZWZhdWx0SXRlbSkge1xuICAgICAgICByZXN1bHQgPSBbZGVmYXVsdEl0ZW1dLmNvbmNhdChyZXN1bHQpO1xuICAgIH1cbiAgICByZXR1cm4gcmVzdWx0LnNsaWNlKHNwbGl0SW5kZXgpLmNvbmNhdChyZXN1bHQuc2xpY2UoMCwgc3BsaXRJbmRleCkpO1xufTtcbi8qKlxuICogQGhpZGRlblxuICovXG5jb25zdCBtYXRjaFRleHQgPSAodGV4dCwgd29yZCwgaWdub3JlQ2FzZSkgPT4ge1xuICAgIGlmICghaXNQcmVzZW50KHRleHQpKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgbGV0IHRlbXAgPSBTdHJpbmcodGV4dCk7XG4gICAgaWYgKGlnbm9yZUNhc2UpIHtcbiAgICAgICAgdGVtcCA9IHRlbXAudG9Mb3dlckNhc2UoKTtcbiAgICB9XG4gICAgcmV0dXJuIHRlbXAuaW5kZXhPZih3b3JkKSA9PT0gMDtcbn07XG4vKipcbiAqIEBoaWRkZW5cbiAqXG4gKiBDaGVja3Mgd2hldGhlciB0aGUgcGFzc2VkIG9iamVjdCBoYXMgYWxsIG9mIHRoZSBsaXN0ZWQgcHJvcGVydGllcy5cbiAqL1xuY29uc3QgaGFzUHJvcHMgPSAob2JqLCBwcm9wcykgPT4ge1xuICAgIGlmICghaXNQcmVzZW50KG9iaikpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICByZXR1cm4gcHJvcHMuZXZlcnkocHJvcCA9PiBvYmouaGFzT3duUHJvcGVydHkocHJvcCkpO1xufTtcblxuLyogdHNsaW50OmRpc2FibGU6bWVtYmVyLW9yZGVyaW5nICovXG4vKipcbiAqIEBoaWRkZW5cbiAqL1xuY2xhc3MgU2VhcmNoQmFyQ29tcG9uZW50IHtcbiAgICBjb25zdHJ1Y3Rvcihsb2NhbGl6YXRpb24sIHJlbmRlcmVyKSB7XG4gICAgICAgIHRoaXMubG9jYWxpemF0aW9uID0gbG9jYWxpemF0aW9uO1xuICAgICAgICB0aGlzLnZhbHVlQ2hhbmdlID0gbmV3IEV2ZW50RW1pdHRlcigpO1xuICAgICAgICB0aGlzLm9uQmx1ciA9IG5ldyBFdmVudEVtaXR0ZXIoKTtcbiAgICAgICAgdGhpcy5vbkZvY3VzID0gbmV3IEV2ZW50RW1pdHRlcigpO1xuICAgICAgICB0aGlzLm9uQ2xpY2sgPSBuZXcgRXZlbnRFbWl0dGVyKCk7XG4gICAgICAgIHRoaXMub25OYXZpZ2F0ZSA9IG5ldyBFdmVudEVtaXR0ZXIoKTtcbiAgICAgICAgdGhpcy5zZWFyY2hCYXJDbGFzcyA9IHRydWU7XG4gICAgICAgIHRoaXMuX3VzZXJJbnB1dCA9IFwiXCI7XG4gICAgICAgIHRoaXMuX3ByZXZpb3VzVmFsdWUgPSBcIlwiO1xuICAgICAgICB0aGlzLl9wbGFjZWhvbGRlciA9IFwiXCI7XG4gICAgICAgIHRoaXMuZGlyZWN0aW9uID0gbG9jYWxpemF0aW9uLnJ0bCA/ICdydGwnIDogJ2x0cic7XG4gICAgICAgIHRoaXMucmVuZGVyZXIgPSByZW5kZXJlcjtcbiAgICB9XG4gICAgZ2V0IHVzZXJJbnB1dCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3VzZXJJbnB1dDtcbiAgICB9XG4gICAgc2V0IHVzZXJJbnB1dCh1c2VySW5wdXQpIHtcbiAgICAgICAgdGhpcy5fdXNlcklucHV0ID0gdXNlcklucHV0IHx8IFwiXCI7XG4gICAgfVxuICAgIGdldCB2YWx1ZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuaW5wdXQubmF0aXZlRWxlbWVudC52YWx1ZTtcbiAgICB9XG4gICAgc2V0IHBsYWNlaG9sZGVyKHRleHQpIHtcbiAgICAgICAgdGhpcy5fcGxhY2Vob2xkZXIgPSB0ZXh0IHx8ICcnO1xuICAgICAgICB0aGlzLnNldElucHV0U2l6ZSgpO1xuICAgIH1cbiAgICBnZXQgcGxhY2Vob2xkZXIoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9wbGFjZWhvbGRlcjtcbiAgICB9XG4gICAgbmdPbkluaXQoKSB7XG4gICAgICAgIHRoaXMubG9jYWxpemF0aW9uQ2hhbmdlU3Vic2NyaXB0aW9uID0gdGhpcy5sb2NhbGl6YXRpb25cbiAgICAgICAgICAgIC5jaGFuZ2VzLnN1YnNjcmliZSgoeyBydGwgfSkgPT4gdGhpcy5kaXJlY3Rpb24gPSBydGwgPyAncnRsJyA6ICdsdHInKTtcbiAgICB9XG4gICAgbmdPbkNoYW5nZXMoY2hhbmdlcykge1xuICAgICAgICBsZXQgcHJldmlvdXNVc2VySW5wdXQ7XG4gICAgICAgIGlmICh0aGlzLmlucHV0ICYmIChjaGFuZ2VzLnVzZXJJbnB1dCB8fCBjaGFuZ2VzLnN1Z2dlc3RlZFRleHQpKSB7XG4gICAgICAgICAgICBpZiAoY2hhbmdlcy51c2VySW5wdXQgJiYgY2hhbmdlcy51c2VySW5wdXQucHJldmlvdXNWYWx1ZSkge1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLl9wcmV2aW91c1ZhbHVlID09PSBjaGFuZ2VzLnVzZXJJbnB1dC5wcmV2aW91c1ZhbHVlKSB7XG4gICAgICAgICAgICAgICAgICAgIHByZXZpb3VzVXNlcklucHV0ID0gdGhpcy5fcHJldmlvdXNWYWx1ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHByZXZpb3VzVXNlcklucHV0ID0gY2hhbmdlcy51c2VySW5wdXQuY3VycmVudFZhbHVlIHx8IFwiXCI7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgcHJldmlvdXNVc2VySW5wdXQgPSB0aGlzLl9wcmV2aW91c1ZhbHVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgY2FyZXRJbmRleCA9IHRoaXMuaW5wdXQubmF0aXZlRWxlbWVudC5zZWxlY3Rpb25TdGFydDtcbiAgICAgICAgICAgIGNvbnN0IGNhcmV0QXRFbmQgPSBwcmV2aW91c1VzZXJJbnB1dC5sZW5ndGggPT09IGNhcmV0SW5kZXg7XG4gICAgICAgICAgICB0aGlzLndyaXRlSW5wdXRWYWx1ZSh0aGlzLnN1Z2dlc3RlZFRleHQgPyBjb21iaW5lU3RyKHRoaXMudXNlcklucHV0LCB0aGlzLnN1Z2dlc3RlZFRleHQpIDogdGhpcy51c2VySW5wdXQpO1xuICAgICAgICAgICAgaWYgKHRoaXMuc3VnZ2VzdGVkVGV4dCkge1xuICAgICAgICAgICAgICAgIHRoaXMuc2V0SW5wdXRTZWxlY3Rpb24odGhpcy51c2VySW5wdXQubGVuZ3RoLCB0aGlzLnN1Z2dlc3RlZFRleHQubGVuZ3RoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGNhcmV0QXRFbmQpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnNldElucHV0U2VsZWN0aW9uKHRoaXMudXNlcklucHV0Lmxlbmd0aCwgdGhpcy51c2VySW5wdXQubGVuZ3RoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMuc2V0SW5wdXRTZWxlY3Rpb24oY2FyZXRJbmRleCwgY2FyZXRJbmRleCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLl9wcmV2aW91c1ZhbHVlID0gdGhpcy51c2VySW5wdXQ7XG4gICAgICAgIH1cbiAgICB9XG4gICAgbmdPbkRlc3Ryb3koKSB7XG4gICAgICAgIGlmICh0aGlzLmxvY2FsaXphdGlvbkNoYW5nZVN1YnNjcmlwdGlvbikge1xuICAgICAgICAgICAgdGhpcy5sb2NhbGl6YXRpb25DaGFuZ2VTdWJzY3JpcHRpb24udW5zdWJzY3JpYmUoKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICB3cml0ZUlucHV0VmFsdWUodGV4dCkge1xuICAgICAgICBpZiAoaXNEb2N1bWVudEF2YWlsYWJsZSgpKSB7XG4gICAgICAgICAgICB0aGlzLnJlbmRlcmVyLnNldFByb3BlcnR5KHRoaXMuaW5wdXQubmF0aXZlRWxlbWVudCwgJ3ZhbHVlJywgdGV4dCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgc2V0SW5wdXRTZWxlY3Rpb24oc3RhcnQsIGVuZCkge1xuICAgICAgICBpZiAoaXNEb2N1bWVudEF2YWlsYWJsZSgpICYmIHRoaXMuaW5wdXQubmF0aXZlRWxlbWVudCA9PT0gZG9jdW1lbnQuYWN0aXZlRWxlbWVudCkge1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICB0aGlzLmlucHV0Lm5hdGl2ZUVsZW1lbnQuc2V0U2VsZWN0aW9uUmFuZ2Uoc3RhcnQsIGVuZCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAgIC8vTWFrZSBzdXJlIHRoYXQgdGhlIGVsZW1lbnQgaXMgaW4gdGhlIERPTSBiZWZvcmUgeW91IGludm9rZSBpdHMgbWV0aG9kc1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIGhhbmRsZUlucHV0KGV2ZW50KSB7XG4gICAgICAgIGNvbnN0IHZhbHVlID0gZXZlbnQudGFyZ2V0LnZhbHVlO1xuICAgICAgICBpZiAodmFsdWUgIT09IHRoaXMudXNlcklucHV0KSB7XG4gICAgICAgICAgICB0aGlzLl9wcmV2aW91c1ZhbHVlID0gdmFsdWU7XG4gICAgICAgICAgICB0aGlzLnZhbHVlQ2hhbmdlLmVtaXQodmFsdWUpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGhhbmRsZUZvY3VzKGV2ZW50KSB7XG4gICAgICAgIHRoaXMub25Gb2N1cy5lbWl0KGV2ZW50KTtcbiAgICB9XG4gICAgaGFuZGxlQmx1cihldmVudCkge1xuICAgICAgICB0aGlzLm9uQmx1ci5lbWl0KGV2ZW50KTtcbiAgICB9XG4gICAgaGFuZGxlS2V5ZG93bihldmVudCkge1xuICAgICAgICBjb25zdCBrZXlDb2RlID0gZXZlbnQua2V5Q29kZTtcbiAgICAgICAgY29uc3Qga2V5cyA9IFtLZXlzLnVwLCBLZXlzLmRvd24sIEtleXMubGVmdCwgS2V5cy5yaWdodCwgS2V5cy5lbnRlcixcbiAgICAgICAgICAgIEtleXMuZXNjLCBLZXlzLmRlbGV0ZSwgS2V5cy5iYWNrc3BhY2UsIEtleXMuaG9tZSwgS2V5cy5lbmRdO1xuICAgICAgICBpZiAoa2V5cy5pbmRleE9mKGtleUNvZGUpID4gLTEpIHtcbiAgICAgICAgICAgIHRoaXMub25OYXZpZ2F0ZS5lbWl0KGV2ZW50KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBmb2N1cygpIHtcbiAgICAgICAgaWYgKGlzRG9jdW1lbnRBdmFpbGFibGUoKSkge1xuICAgICAgICAgICAgdGhpcy5pbnB1dC5uYXRpdmVFbGVtZW50LmZvY3VzKCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgYmx1cigpIHtcbiAgICAgICAgaWYgKGlzRG9jdW1lbnRBdmFpbGFibGUoKSkge1xuICAgICAgICAgICAgdGhpcy5pbnB1dC5uYXRpdmVFbGVtZW50LmJsdXIoKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBzZXRJbnB1dFNpemUoKSB7XG4gICAgICAgIGNvbnN0IGxlbmd0aE9mID0geCA9PiB4ID8geC5sZW5ndGggOiAwO1xuICAgICAgICBjb25zdCBpbnB1dCA9IHRoaXMuaW5wdXQubmF0aXZlRWxlbWVudDtcbiAgICAgICAgY29uc3QgcGxhY2Vob2xkZXJMZW5ndGggPSBsZW5ndGhPZih0aGlzLnBsYWNlaG9sZGVyKTtcbiAgICAgICAgY29uc3QgdGV4dExlbmd0aCA9IGxlbmd0aE9mKHRoaXMudmFsdWUpO1xuICAgICAgICBjb25zdCBzaXplID0gTWF0aC5tYXgocGxhY2Vob2xkZXJMZW5ndGgsIHRleHRMZW5ndGgsIDEpO1xuICAgICAgICB0aGlzLnJlbmRlcmVyLnNldEF0dHJpYnV0ZShpbnB1dCwgJ3NpemUnLCBzaXplLnRvU3RyaW5nKCkpO1xuICAgIH1cbn1cblNlYXJjaEJhckNvbXBvbmVudC5kZWNvcmF0b3JzID0gW1xuICAgIHsgdHlwZTogQ29tcG9uZW50LCBhcmdzOiBbe1xuICAgICAgICAgICAgICAgIHNlbGVjdG9yOiAna2VuZG8tc2VhcmNoYmFyJyxcbiAgICAgICAgICAgICAgICB0ZW1wbGF0ZTogYFxuICAgICAgICA8aW5wdXQgI2lucHV0XG4gICAgICAgICAgICBhdXRvY29tcGxldGU9XCJvZmZcIlxuICAgICAgICAgICAgW2lkXT1cImlkXCJcbiAgICAgICAgICAgIFtkaXNhYmxlZF09XCJkaXNhYmxlZFwiXG4gICAgICAgICAgICBbcmVhZG9ubHldPVwicmVhZG9ubHlcIlxuICAgICAgICAgICAgW3BsYWNlaG9sZGVyXT1cInBsYWNlaG9sZGVyXCJcbiAgICAgICAgICAgIFtjbGFzc109XCInay1pbnB1dCdcIlxuICAgICAgICAgICAgKGlucHV0KT1cImhhbmRsZUlucHV0KCRldmVudClcIlxuICAgICAgICAgICAgKGZvY3VzKT1cImhhbmRsZUZvY3VzKCRldmVudClcIlxuICAgICAgICAgICAgKGJsdXIpPVwiaGFuZGxlQmx1cigkZXZlbnQpXCJcbiAgICAgICAgICAgIChrZXlkb3duKT1cImhhbmRsZUtleWRvd24oJGV2ZW50KVwiXG4gICAgICAgICAgICBbYXR0ci50YWJJbmRleF09XCJ0YWJJbmRleFwiXG4gICAgICAgICAgICBbYXR0ci5kaXJdPVwiZGlyZWN0aW9uXCJcbiAgICAgICAgICAgIFthdHRyLnJvbGVdPVwicm9sZVwiXG4gICAgICAgICAgICBbYXR0ci5hcmlhLWRpc2FibGVkXT1cImRpc2FibGVkXCJcbiAgICAgICAgICAgIFthdHRyLmFyaWEtcmVhZG9ubHldPVwicmVhZG9ubHlcIlxuICAgICAgICAgICAgYXJpYS1oYXNwb3B1cD1cImxpc3Rib3hcIlxuICAgICAgICAgICAgW2F0dHIuYXJpYS1leHBhbmRlZF09XCJwb3B1cE9wZW5cIlxuICAgICAgICAgICAgW2F0dHIuYXJpYS1vd25zXT1cImxpc3RJZFwiXG4gICAgICAgICAgICBbYXR0ci5hcmlhLWRlc2NyaWJlZGJ5XT1cInRhZ0xpc3RJZFwiXG4gICAgICAgICAgICBbYXR0ci5hcmlhLWFjdGl2ZWRlc2NlbmRhbnRdPVwiYWN0aXZlRGVzY2VuZGFudFwiXG4gICAgICAgICAgICBbYXR0ci5hcmlhLWxhYmVsXT1cIm5vRGF0YUxhYmVsXCJcbiAgICAgICAgLz5cbiAgIGBcbiAgICAgICAgICAgIH0sXSB9LFxuXTtcbi8qKiBAbm9jb2xsYXBzZSAqL1xuU2VhcmNoQmFyQ29tcG9uZW50LmN0b3JQYXJhbWV0ZXJzID0gKCkgPT4gW1xuICAgIHsgdHlwZTogTG9jYWxpemF0aW9uU2VydmljZSB9LFxuICAgIHsgdHlwZTogUmVuZGVyZXIyIH1cbl07XG5TZWFyY2hCYXJDb21wb25lbnQucHJvcERlY29yYXRvcnMgPSB7XG4gICAgaWQ6IFt7IHR5cGU6IElucHV0IH1dLFxuICAgIGxpc3RJZDogW3sgdHlwZTogSW5wdXQgfV0sXG4gICAgdGFnTGlzdElkOiBbeyB0eXBlOiBJbnB1dCB9XSxcbiAgICBhY3RpdmVEZXNjZW5kYW50OiBbeyB0eXBlOiBJbnB1dCB9XSxcbiAgICBub0RhdGFMYWJlbDogW3sgdHlwZTogSW5wdXQgfV0sXG4gICAgZGlzYWJsZWQ6IFt7IHR5cGU6IElucHV0IH1dLFxuICAgIHJlYWRvbmx5OiBbeyB0eXBlOiBJbnB1dCB9XSxcbiAgICB0YWJJbmRleDogW3sgdHlwZTogSW5wdXQgfV0sXG4gICAgcG9wdXBPcGVuOiBbeyB0eXBlOiBJbnB1dCB9XSxcbiAgICByb2xlOiBbeyB0eXBlOiBJbnB1dCB9XSxcbiAgICB1c2VySW5wdXQ6IFt7IHR5cGU6IElucHV0IH1dLFxuICAgIHN1Z2dlc3RlZFRleHQ6IFt7IHR5cGU6IElucHV0IH1dLFxuICAgIHZhbHVlQ2hhbmdlOiBbeyB0eXBlOiBPdXRwdXQgfV0sXG4gICAgb25CbHVyOiBbeyB0eXBlOiBPdXRwdXQgfV0sXG4gICAgb25Gb2N1czogW3sgdHlwZTogT3V0cHV0IH1dLFxuICAgIG9uQ2xpY2s6IFt7IHR5cGU6IE91dHB1dCB9XSxcbiAgICBvbk5hdmlnYXRlOiBbeyB0eXBlOiBPdXRwdXQgfV0sXG4gICAgaW5wdXQ6IFt7IHR5cGU6IFZpZXdDaGlsZCwgYXJnczogW1wiaW5wdXRcIiwgeyBzdGF0aWM6IHRydWUgfSxdIH1dLFxuICAgIHNlYXJjaEJhckNsYXNzOiBbeyB0eXBlOiBIb3N0QmluZGluZywgYXJnczogWydjbGFzcy5rLXNlYXJjaGJhcicsXSB9XSxcbiAgICBwbGFjZWhvbGRlcjogW3sgdHlwZTogSW5wdXQgfV1cbn07XG5cbi8qIHRzbGludDpkaXNhYmxlOm1heC1saW5lLWxlbmd0aCAqL1xuLyoqXG4gKiBSZW5kZXJzIHRoZSBsaXN0IGl0ZW0gY29udGVudC4gVG8gZGVmaW5lIHRoZSBpdGVtIHRlbXBsYXRlLCBuZXN0IGFuIGA8bmctdGVtcGxhdGU+YCB0YWdcbiAqIHdpdGggdGhlIGBrZW5kbzxDb21wb25lbnROYW1lPkl0ZW1UZW1wbGF0ZWAgZGlyZWN0aXZlIGluc2lkZSB0aGUgY29tcG9uZW50IHRhZy4gVGhlIHRlbXBsYXRlIGNvbnRleHQgaXNcbiAqIHNldCB0byB0aGUgY3VycmVudCBjb21wb25lbnQuIFRvIGdldCBhIHJlZmVyZW5jZSB0byB0aGUgY3VycmVudCBkYXRhIGl0ZW0sIHVzZSB0aGUgYGxldC1kYXRhSXRlbWAgZGlyZWN0aXZlLlxuICpcbiAqIC0gW1VzaW5nIGBJdGVtVGVtcGxhdGVgIHdpdGggdGhlIEF1dG9Db21wbGV0ZV0oeyUgc2x1ZyB0ZW1wbGF0ZXNfYXV0b2NvbXBsZXRlICV9I3RvYy1pdGVtLXRlbXBsYXRlKVxuICogLSBbVXNpbmcgYEl0ZW1UZW1wbGF0ZWAgd2l0aCB0aGUgQ29tYm9Cb3hdKHslIHNsdWcgdGVtcGxhdGVzX2NvbWJvYm94ICV9I3RvYy1pdGVtLXRlbXBsYXRlKVxuICogLSBbVXNpbmcgYEl0ZW1UZW1wbGF0ZWAgd2l0aCB0aGUgRHJvcERvd25MaXN0XSh7JSBzbHVnIHRlbXBsYXRlc19kZGwgJX0jdG9jLWl0ZW0tdGVtcGxhdGUpXG4gKiAtIFtVc2luZyBgSXRlbVRlbXBsYXRlYCB3aXRoIHRoZSBNdWx0aVNlbGVjdF0oeyUgc2x1ZyB0ZW1wbGF0ZXNfbXVsdGlzZWxlY3QgJX0jdG9jLWl0ZW0tdGVtcGxhdGUpXG4gKlxuICogQGV4YW1wbGVcbiAqIGBgYHRzXG4gKiBfQENvbXBvbmVudCh7XG4gKiBzZWxlY3RvcjogJ215LWFwcCcsXG4gKiB0ZW1wbGF0ZTogYFxuICogIDxrZW5kby1jb21ib2JveCBbZGF0YV09XCJsaXN0SXRlbXNcIj5cbiAqICAgIDxuZy10ZW1wbGF0ZSBrZW5kb0NvbWJvQm94SXRlbVRlbXBsYXRlIGxldC1kYXRhSXRlbT5cbiAqICAgICAgPHNwYW4+e3tkYXRhSXRlbX19IG9wdGlvbjwvc3Bhbj5cbiAqICAgIDwvbmctdGVtcGxhdGU+XG4gKiAgPC9rZW5kby1jb21ib2JveD5cbiAqIGBcbiAqIH0pXG4gKiBjbGFzcyBBcHBDb21wb25lbnQge1xuICogICBwdWJsaWMgbGlzdEl0ZW1zOiBBcnJheTxzdHJpbmc+ID0gW1wiSXRlbSAxXCIsIFwiSXRlbSAyXCIsIFwiSXRlbSAzXCIsIFwiSXRlbSA0XCJdO1xuICogfVxuICogYGBgXG4gKi9cbmNsYXNzIEl0ZW1UZW1wbGF0ZURpcmVjdGl2ZSB7XG4gICAgY29uc3RydWN0b3IodGVtcGxhdGVSZWYpIHtcbiAgICAgICAgdGhpcy50ZW1wbGF0ZVJlZiA9IHRlbXBsYXRlUmVmO1xuICAgIH1cbn1cbkl0ZW1UZW1wbGF0ZURpcmVjdGl2ZS5kZWNvcmF0b3JzID0gW1xuICAgIHsgdHlwZTogRGlyZWN0aXZlLCBhcmdzOiBbe1xuICAgICAgICAgICAgICAgIHNlbGVjdG9yOiAnW2tlbmRvRHJvcERvd25MaXN0SXRlbVRlbXBsYXRlXSxba2VuZG9Db21ib0JveEl0ZW1UZW1wbGF0ZV0sW2tlbmRvQXV0b0NvbXBsZXRlSXRlbVRlbXBsYXRlXSxba2VuZG9NdWx0aVNlbGVjdEl0ZW1UZW1wbGF0ZV0nXG4gICAgICAgICAgICB9LF0gfSxcbl07XG4vKiogQG5vY29sbGFwc2UgKi9cbkl0ZW1UZW1wbGF0ZURpcmVjdGl2ZS5jdG9yUGFyYW1ldGVycyA9ICgpID0+IFtcbiAgICB7IHR5cGU6IFRlbXBsYXRlUmVmIH1cbl07XG5cbi8qIHRzbGludDpkaXNhYmxlOm1heC1saW5lLWxlbmd0aCAqL1xuLyoqXG4gKiBSZW5kZXJzIHRoZSBoZWFkZXIgY29udGVudCBvZiB0aGUgbGlzdC4gVG8gZGVmaW5lIHRoZSBoZWFkZXIgdGVtcGxhdGUsIG5lc3QgYW4gYDxuZy10ZW1wbGF0ZT5gIHRhZ1xuICogd2l0aCB0aGUgYGtlbmRvPENvbXBvbmVudE5hbWU+SGVhZGVyVGVtcGxhdGVgIGRpcmVjdGl2ZSBpbnNpZGUgdGhlIGNvbXBvbmVudCB0YWcuXG4gKlxuICogLSBbVXNpbmcgYEhlYWRlclRlbXBsYXRlYCB3aXRoIHRoZSBBdXRvQ29tcGxldGVdKHslIHNsdWcgdGVtcGxhdGVzX2F1dG9jb21wbGV0ZSAlfSN0b2MtaGVhZGVyLXRlbXBsYXRlKVxuICogLSBbVXNpbmcgYEhlYWRlclRlbXBsYXRlYCB3aXRoIHRoZSBDb21ib0JveF0oeyUgc2x1ZyB0ZW1wbGF0ZXNfY29tYm9ib3ggJX0jdG9jLWhlYWRlci10ZW1wbGF0ZSlcbiAqIC0gW1VzaW5nIGBIZWFkZXJUZW1wbGF0ZWAgd2l0aCB0aGUgRHJvcERvd25MaXN0XSh7JSBzbHVnIHRlbXBsYXRlc19kZGwgJX0jdG9jLWhlYWRlci10ZW1wbGF0ZSlcbiAqIC0gW1VzaW5nIGBIZWFkZXJUZW1wbGF0ZWAgd2l0aCB0aGUgTXVsdGlTZWxlY3RdKHslIHNsdWcgdGVtcGxhdGVzX211bHRpc2VsZWN0ICV9I3RvYy1oZWFkZXItdGVtcGxhdGUpXG4gKlxuICogQGV4YW1wbGVcbiAqIGBgYHRzXG4gKiBfQENvbXBvbmVudCh7XG4gKiBzZWxlY3RvcjogJ215LWFwcCcsXG4gKiB0ZW1wbGF0ZTogYFxuICogIDxrZW5kby1jb21ib2JveCBbZGF0YV09XCJsaXN0SXRlbXNcIj5cbiAqICAgIDxuZy10ZW1wbGF0ZSBrZW5kb0NvbWJvQm94SGVhZGVyVGVtcGxhdGU+XG4gKiAgICAgIDxoND5IZWFkZXIgdGVtcGxhdGU8L2g0PlxuICogICAgPC9uZy10ZW1wbGF0ZT5cbiAqICA8L2tlbmRvLWNvbWJvYm94PlxuICogYFxuICogfSlcbiAqIGNsYXNzIEFwcENvbXBvbmVudCB7XG4gKiAgIHB1YmxpYyBsaXN0SXRlbXM6IEFycmF5PHN0cmluZz4gPSBbXCJJdGVtIDFcIiwgXCJJdGVtIDJcIiwgXCJJdGVtIDNcIiwgXCJJdGVtIDRcIl07XG4gKiB9XG4gKiBgYGBcbiAqL1xuY2xhc3MgSGVhZGVyVGVtcGxhdGVEaXJlY3RpdmUge1xuICAgIGNvbnN0cnVjdG9yKHRlbXBsYXRlUmVmKSB7XG4gICAgICAgIHRoaXMudGVtcGxhdGVSZWYgPSB0ZW1wbGF0ZVJlZjtcbiAgICB9XG59XG5IZWFkZXJUZW1wbGF0ZURpcmVjdGl2ZS5kZWNvcmF0b3JzID0gW1xuICAgIHsgdHlwZTogRGlyZWN0aXZlLCBhcmdzOiBbe1xuICAgICAgICAgICAgICAgIHNlbGVjdG9yOiAnW2tlbmRvRHJvcERvd25MaXN0SGVhZGVyVGVtcGxhdGVdLFtrZW5kb0NvbWJvQm94SGVhZGVyVGVtcGxhdGVdLFtrZW5kb0F1dG9Db21wbGV0ZUhlYWRlclRlbXBsYXRlXSxba2VuZG9NdWx0aVNlbGVjdEhlYWRlclRlbXBsYXRlXSdcbiAgICAgICAgICAgIH0sXSB9LFxuXTtcbi8qKiBAbm9jb2xsYXBzZSAqL1xuSGVhZGVyVGVtcGxhdGVEaXJlY3RpdmUuY3RvclBhcmFtZXRlcnMgPSAoKSA9PiBbXG4gICAgeyB0eXBlOiBUZW1wbGF0ZVJlZiB9XG5dO1xuXG4vKiB0c2xpbnQ6ZGlzYWJsZTptYXgtbGluZS1sZW5ndGggKi9cbi8qKlxuICogUmVuZGVycyB0aGUgZm9vdGVyIGNvbnRlbnQgb2YgdGhlIGxpc3QuIFRvIGRlZmluZSB0aGUgZm9vdGVyIHRlbXBsYXRlLCBuZXN0IGFuIGA8bmctdGVtcGxhdGU+YCB0YWdcbiAqIHdpdGggdGhlIGBrZW5kbzxDb21wb25lbnROYW1lPkZvb3RlclRlbXBsYXRlYCBkaXJlY3RpdmUgaW5zaWRlIHRoZSBjb21wb25lbnQgdGFnLlxuICpcbiAqIC0gW1VzaW5nIGBGb290ZXJUZW1wbGF0ZWAgd2l0aCB0aGUgQXV0b0NvbXBsZXRlXSh7JSBzbHVnIHRlbXBsYXRlc19hdXRvY29tcGxldGUgJX0jdG9jLWZvb3Rlci10ZW1wbGF0ZSlcbiAqIC0gW1VzaW5nIGBGb290ZXJUZW1wbGF0ZWAgd2l0aCB0aGUgQ29tYm9Cb3hdKHslIHNsdWcgdGVtcGxhdGVzX2NvbWJvYm94ICV9I3RvYy1mb290ZXItdGVtcGxhdGUpXG4gKiAtIFtVc2luZyBgRm9vdGVyVGVtcGxhdGVgIHdpdGggdGhlIERyb3BEb3duTGlzdF0oeyUgc2x1ZyB0ZW1wbGF0ZXNfZGRsICV9I3RvYy1mb290ZXItdGVtcGxhdGUpXG4gKiAtIFtVc2luZyBgRm9vdGVyVGVtcGxhdGVgIHdpdGggdGhlIE11bHRpU2VsZWN0XSh7JSBzbHVnIHRlbXBsYXRlc19tdWx0aXNlbGVjdCAlfSN0b2MtZm9vdGVyLXRlbXBsYXRlKVxuICpcbiAqIEBleGFtcGxlXG4gKiBgYGB0c1xuICogX0BDb21wb25lbnQoe1xuICogc2VsZWN0b3I6ICdteS1hcHAnLFxuICogdGVtcGxhdGU6IGBcbiAqICA8a2VuZG8tY29tYm9ib3ggW2RhdGFdPVwibGlzdEl0ZW1zXCI+XG4gKiAgICA8bmctdGVtcGxhdGUga2VuZG9Db21ib0JveEZvb3RlclRlbXBsYXRlPlxuICogICAgICA8aDQ+Rm9vdGVyIHRlbXBsYXRlPC9oND5cbiAqICAgIDwvbmctdGVtcGxhdGU+XG4gKiAgPC9rZW5kby1jb21ib2JveD5cbiAqIGBcbiAqIH0pXG4gKiBjbGFzcyBBcHBDb21wb25lbnQge1xuICogICBwdWJsaWMgbGlzdEl0ZW1zOiBBcnJheTxzdHJpbmc+ID0gW1wiSXRlbSAxXCIsIFwiSXRlbSAyXCIsIFwiSXRlbSAzXCIsIFwiSXRlbSA0XCJdO1xuICogfVxuICogYGBgXG4gKi9cbmNsYXNzIEZvb3RlclRlbXBsYXRlRGlyZWN0aXZlIHtcbiAgICBjb25zdHJ1Y3Rvcih0ZW1wbGF0ZVJlZikge1xuICAgICAgICB0aGlzLnRlbXBsYXRlUmVmID0gdGVtcGxhdGVSZWY7XG4gICAgfVxufVxuRm9vdGVyVGVtcGxhdGVEaXJlY3RpdmUuZGVjb3JhdG9ycyA9IFtcbiAgICB7IHR5cGU6IERpcmVjdGl2ZSwgYXJnczogW3tcbiAgICAgICAgICAgICAgICBzZWxlY3RvcjogJ1trZW5kb0Ryb3BEb3duTGlzdEZvb3RlclRlbXBsYXRlXSxba2VuZG9Db21ib0JveEZvb3RlclRlbXBsYXRlXSxba2VuZG9BdXRvQ29tcGxldGVGb290ZXJUZW1wbGF0ZV0sW2tlbmRvTXVsdGlTZWxlY3RGb290ZXJUZW1wbGF0ZV0nXG4gICAgICAgICAgICB9LF0gfSxcbl07XG4vKiogQG5vY29sbGFwc2UgKi9cbkZvb3RlclRlbXBsYXRlRGlyZWN0aXZlLmN0b3JQYXJhbWV0ZXJzID0gKCkgPT4gW1xuICAgIHsgdHlwZTogVGVtcGxhdGVSZWYgfVxuXTtcblxuLyogdHNsaW50OmRpc2FibGU6bWF4LWxpbmUtbGVuZ3RoICovXG4vKipcbiAqIFJlbmRlcnMgdGhlIGdyb3VwIGhlYWRlciBjb250ZW50LiBUbyBkZWZpbmUgdGhlIGdyb3VwIHRlbXBsYXRlLCBuZXN0IGFuIGA8bmctdGVtcGxhdGU+YCB0YWdcbiAqIHdpdGggdGhlIGBrZW5kbzxDb21wb25lbnROYW1lPkdyb3VwVGVtcGxhdGVgIGRpcmVjdGl2ZSBpbnNpZGUgdGhlIGNvbXBvbmVudCB0YWcuIFRoZSB0ZW1wbGF0ZSBjb250ZXh0IGlzXG4gKiBzZXQgdG8gdGhlIGN1cnJlbnQgY29tcG9uZW50LiBUbyBnZXQgYSByZWZlcmVuY2UgdG8gdGhlIGN1cnJlbnQgZGF0YSBpdGVtLCB1c2UgdGhlIGBsZXQtZ3JvdXBOYW1lYCBkaXJlY3RpdmUuXG4gKlxuICogLSBbVXNpbmcgYEdyb3VwVGVtcGxhdGVgIHdpdGggdGhlIEF1dG9Db21wbGV0ZV0oeyUgc2x1ZyB0ZW1wbGF0ZXNfYXV0b2NvbXBsZXRlICV9I3RvYy1ncm91cC10ZW1wbGF0ZSlcbiAqIC0gW1VzaW5nIGBHcm91cFRlbXBsYXRlYCB3aXRoIHRoZSBDb21ib0JveF0oeyUgc2x1ZyB0ZW1wbGF0ZXNfY29tYm9ib3ggJX0jdG9jLWdyb3VwLXRlbXBsYXRlKVxuICogLSBbVXNpbmcgYEdyb3VwVGVtcGxhdGVgIHdpdGggdGhlIERyb3BEb3duTGlzdF0oeyUgc2x1ZyB0ZW1wbGF0ZXNfZGRsICV9I3RvYy1ncm91cC10ZW1wbGF0ZSlcbiAqIC0gW1VzaW5nIGBHcm91cFRlbXBsYXRlYCB3aXRoIHRoZSBNdWx0aVNlbGVjdF0oeyUgc2x1ZyB0ZW1wbGF0ZXNfbXVsdGlzZWxlY3QgJX0jdG9jLWdyb3VwLXRlbXBsYXRlKVxuICpcbiAqIEBleGFtcGxlXG4gKiBgYGB0c1xuICogaW1wb3J0IHsgZ3JvdXBCeSB9IGZyb20gJ0Bwcm9ncmVzcy9rZW5kby1kYXRhLXF1ZXJ5JztcbiAqIF9AQ29tcG9uZW50KHtcbiAqIHNlbGVjdG9yOiAnbXktYXBwJyxcbiAqIHRlbXBsYXRlOiBgXG4gKiAgPGtlbmRvLWNvbWJvYm94IFtkYXRhXT1cImdyb3VwZWREYXRhXCIgW3RleHRGaWVsZF09XCInbmFtZSdcIiBbdmFsdWVGaWVsZF09XCInbmFtZSdcIj5cbiAqICAgIDxuZy10ZW1wbGF0ZSBrZW5kb0NvbWJvQm94R3JvdXBUZW1wbGF0ZSBsZXQtZ3JvdXBOYW1lPlxuICogICAgICA8c3Bhbj5Gb29kIHR5cGU6IHt7Z3JvdXBOYW1lfX0gb3B0aW9uPC9zcGFuPlxuICogICAgPC9uZy10ZW1wbGF0ZT5cbiAqICA8L2tlbmRvLWNvbWJvYm94PlxuICogYFxuICogfSlcbiAqIGNsYXNzIEFwcENvbXBvbmVudCB7XG4gKiAgIHB1YmxpYyBkYXRhID0gW1xuICogICAgICAgeyBuYW1lOiBcIlBvcmtcIiwgY2F0ZWdvcnk6IFwiRm9vZFwiLCBzdWJjYXRlZ29yeTogXCJNZWF0XCIgfSxcbiAqICAgICAgIHsgbmFtZTogXCJQZXBwZXJcIiwgY2F0ZWdvcnk6IFwiRm9vZFwiLCBzdWJjYXRlZ29yeTogXCJWZWdldGFibGVzXCIgfSxcbiAqICAgICAgIHsgbmFtZTogXCJCZWVmXCIsIGNhdGVnb3J5OiBcIkZvb2RcIiwgc3ViY2F0ZWdvcnk6IFwiTWVhdFwiIH1cbiAqICAgXTtcbiAqICAgcHVibGljIGdyb3VwZWREYXRhID0gZ3JvdXBCeSh0aGlzLmRhdGEsIFt7ZmllbGQ6IFwic3ViY2F0ZWdvcnlcIn1dKTtcbiAqIH1cbiAqIGBgYFxuICovXG5jbGFzcyBHcm91cFRlbXBsYXRlRGlyZWN0aXZlIHtcbiAgICBjb25zdHJ1Y3Rvcih0ZW1wbGF0ZVJlZikge1xuICAgICAgICB0aGlzLnRlbXBsYXRlUmVmID0gdGVtcGxhdGVSZWY7XG4gICAgfVxufVxuR3JvdXBUZW1wbGF0ZURpcmVjdGl2ZS5kZWNvcmF0b3JzID0gW1xuICAgIHsgdHlwZTogRGlyZWN0aXZlLCBhcmdzOiBbe1xuICAgICAgICAgICAgICAgIHNlbGVjdG9yOiAnW2tlbmRvRHJvcERvd25MaXN0R3JvdXBUZW1wbGF0ZV0sW2tlbmRvQ29tYm9Cb3hHcm91cFRlbXBsYXRlXSxba2VuZG9BdXRvQ29tcGxldGVHcm91cFRlbXBsYXRlXSxba2VuZG9NdWx0aVNlbGVjdEdyb3VwVGVtcGxhdGVdJ1xuICAgICAgICAgICAgfSxdIH0sXG5dO1xuLyoqIEBub2NvbGxhcHNlICovXG5Hcm91cFRlbXBsYXRlRGlyZWN0aXZlLmN0b3JQYXJhbWV0ZXJzID0gKCkgPT4gW1xuICAgIHsgdHlwZTogVGVtcGxhdGVSZWYgfVxuXTtcblxuLyogdHNsaW50OmRpc2FibGU6bWF4LWxpbmUtbGVuZ3RoICovXG4vKipcbiAqIFJlbmRlcnMgdGhlIGZpeGVkIGdyb3VwIGhlYWRlciBjb250ZW50LiBUbyBkZWZpbmUgdGhlIGZpeGVkIGdyb3VwIHRlbXBsYXRlLCBuZXN0IGFuIGA8bmctdGVtcGxhdGU+YCB0YWdcbiAqIHdpdGggdGhlIGBrZW5kbzxDb21wb25lbnROYW1lPkZpeGVkR3JvdXBUZW1wbGF0ZWAgZGlyZWN0aXZlIGluc2lkZSB0aGUgY29tcG9uZW50IHRhZy4gVGhlIHRlbXBsYXRlIGNvbnRleHQgaXNcbiAqIHNldCB0byB0aGUgY3VycmVudCBjb21wb25lbnQuIFRvIGdldCBhIHJlZmVyZW5jZSB0byB0aGUgY3VycmVudCBkYXRhIGl0ZW0sIHVzZSB0aGUgYGxldC1ncm91cE5hbWVgIGRpcmVjdGl2ZS5cbiAqXG4gKiAtIFtVc2luZyBgRml4ZWRHcm91cFRlbXBsYXRlYCB3aXRoIHRoZSBBdXRvQ29tcGxldGVdKHslIHNsdWcgdGVtcGxhdGVzX2F1dG9jb21wbGV0ZSAlfSN0b2MtZml4ZWQtZ3JvdXAtdGVtcGxhdGUpXG4gKiAtIFtVc2luZyBgRml4ZWRHcm91cFRlbXBsYXRlYCB3aXRoIHRoZSBDb21ib0JveF0oeyUgc2x1ZyB0ZW1wbGF0ZXNfY29tYm9ib3ggJX0jdG9jLWZpeGVkLWdyb3VwLXRlbXBsYXRlKVxuICogLSBbVXNpbmcgYEZpeGVkR3JvdXBUZW1wbGF0ZWAgd2l0aCB0aGUgRHJvcERvd25MaXN0XSh7JSBzbHVnIHRlbXBsYXRlc19kZGwgJX0jdG9jLWZpeGVkLWdyb3VwLXRlbXBsYXRlKVxuICogLSBbVXNpbmcgYEZpeGVkR3JvdXBUZW1wbGF0ZWAgd2l0aCB0aGUgTXVsdGlTZWxlY3RdKHslIHNsdWcgdGVtcGxhdGVzX211bHRpc2VsZWN0ICV9I3RvYy1maXhlZC1ncm91cC10ZW1wbGF0ZSlcbiAqXG4gKiBAZXhhbXBsZVxuICogYGBgdHNcbiAqIGltcG9ydCB7IGdyb3VwQnkgfSBmcm9tICdAcHJvZ3Jlc3Mva2VuZG8tZGF0YS1xdWVyeSc7XG4gKiBfQENvbXBvbmVudCh7XG4gKiBzZWxlY3RvcjogJ215LWFwcCcsXG4gKiB0ZW1wbGF0ZTogYFxuICogIDxrZW5kby1jb21ib2JveCBbZGF0YV09XCJncm91cGVkRGF0YVwiIFt0ZXh0RmllbGRdPVwiJ25hbWUnXCIgW3ZhbHVlRmllbGRdPVwiJ25hbWUnXCI+XG4gKiAgICA8bmctdGVtcGxhdGUga2VuZG9Db21ib0JveEZpeGVkR3JvdXBUZW1wbGF0ZSBsZXQtZ3JvdXBOYW1lPlxuICogICAgICA8c3Bhbj5Gb29kIHR5cGU6IHt7Z3JvdXBOYW1lfX0gb3B0aW9uPC9zcGFuPlxuICogICAgPC9uZy10ZW1wbGF0ZT5cbiAqICA8L2tlbmRvLWNvbWJvYm94PlxuICogYFxuICogfSlcbiAqIGNsYXNzIEFwcENvbXBvbmVudCB7XG4gKiAgIHB1YmxpYyBkYXRhID0gW1xuICogICAgICAgeyBuYW1lOiBcIlBvcmtcIiwgY2F0ZWdvcnk6IFwiRm9vZFwiLCBzdWJjYXRlZ29yeTogXCJNZWF0XCIgfSxcbiAqICAgICAgIHsgbmFtZTogXCJQZXBwZXJcIiwgY2F0ZWdvcnk6IFwiRm9vZFwiLCBzdWJjYXRlZ29yeTogXCJWZWdldGFibGVzXCIgfSxcbiAqICAgICAgIHsgbmFtZTogXCJCZWVmXCIsIGNhdGVnb3J5OiBcIkZvb2RcIiwgc3ViY2F0ZWdvcnk6IFwiTWVhdFwiIH1cbiAqICAgXTtcbiAqICAgcHVibGljIGdyb3VwZWREYXRhID0gZ3JvdXBCeSh0aGlzLmRhdGEsIFt7ZmllbGQ6IFwic3ViY2F0ZWdvcnlcIn1dKTtcbiAqIH1cbiAqIGBgYFxuICovXG5jbGFzcyBGaXhlZEdyb3VwVGVtcGxhdGVEaXJlY3RpdmUge1xuICAgIGNvbnN0cnVjdG9yKHRlbXBsYXRlUmVmKSB7XG4gICAgICAgIHRoaXMudGVtcGxhdGVSZWYgPSB0ZW1wbGF0ZVJlZjtcbiAgICB9XG59XG5GaXhlZEdyb3VwVGVtcGxhdGVEaXJlY3RpdmUuZGVjb3JhdG9ycyA9IFtcbiAgICB7IHR5cGU6IERpcmVjdGl2ZSwgYXJnczogW3tcbiAgICAgICAgICAgICAgICBzZWxlY3RvcjogJ1trZW5kb0Ryb3BEb3duTGlzdEZpeGVkR3JvdXBUZW1wbGF0ZV0sW2tlbmRvQ29tYm9Cb3hGaXhlZEdyb3VwVGVtcGxhdGVdLFtrZW5kb0F1dG9Db21wbGV0ZUZpeGVkR3JvdXBUZW1wbGF0ZV0sW2tlbmRvTXVsdGlTZWxlY3RGaXhlZEdyb3VwVGVtcGxhdGVdJ1xuICAgICAgICAgICAgfSxdIH0sXG5dO1xuLyoqIEBub2NvbGxhcHNlICovXG5GaXhlZEdyb3VwVGVtcGxhdGVEaXJlY3RpdmUuY3RvclBhcmFtZXRlcnMgPSAoKSA9PiBbXG4gICAgeyB0eXBlOiBUZW1wbGF0ZVJlZiB9XG5dO1xuXG4vKipcbiAqIEBoaWRkZW5cbiAqL1xuY2xhc3MgU2VsZWN0aW9uU2VydmljZSB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHRoaXMub25TZWxlY3QgPSBuZXcgRXZlbnRFbWl0dGVyKCk7XG4gICAgICAgIHRoaXMub25DaGFuZ2UgPSBuZXcgRXZlbnRFbWl0dGVyKCk7XG4gICAgICAgIHRoaXMub25Gb2N1cyA9IG5ldyBFdmVudEVtaXR0ZXIoKTtcbiAgICAgICAgdGhpcy50b3RhbCA9IDA7XG4gICAgICAgIHRoaXMuc2VsZWN0ZWRJbmRpY2VzID0gW107XG4gICAgfVxuICAgIGdldFRvdGFsKCkge1xuICAgICAgICByZXR1cm4gdGhpcy50b3RhbDtcbiAgICB9XG4gICAgaXNTZWxlY3RlZChpbmRleCkge1xuICAgICAgICByZXR1cm4gaXNQcmVzZW50KHRoaXMuc2VsZWN0ZWRJbmRpY2VzLmZpbmQoY3VycmVudCA9PiBjdXJyZW50ID09PSBpbmRleCkpO1xuICAgIH1cbiAgICBpc0ZvY3VzZWQoaW5kZXgpIHtcbiAgICAgICAgcmV0dXJuIGluZGV4ID09PSB0aGlzLmZvY3VzZWQ7XG4gICAgfVxuICAgIGZvY3VzKGluZGV4KSB7XG4gICAgICAgIGlmICh0aGlzLmlzRm9jdXNlZChpbmRleCkpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmZvY3VzZWQgPSBpbmRleDtcbiAgICAgICAgdGhpcy5vbkZvY3VzLmVtaXQoaW5kZXgpO1xuICAgIH1cbiAgICBzZWxlY3QoaW5kZXgpIHtcbiAgICAgICAgaWYgKHRoaXMuaXNTZWxlY3RlZChpbmRleCkpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnNlbGVjdGVkSW5kaWNlcyA9IFtpbmRleF07XG4gICAgICAgIHRoaXMuZm9jdXNlZCA9IGluZGV4O1xuICAgICAgICB0aGlzLm9uU2VsZWN0LmVtaXQoe1xuICAgICAgICAgICAgaW5kaWNlczogW2luZGV4XSxcbiAgICAgICAgICAgIG5ld1NlbGVjdGlvbjogaXNQcmVzZW50KGluZGV4KVxuICAgICAgICB9KTtcbiAgICB9XG4gICAgYWRkKGluZGV4KSB7XG4gICAgICAgIGlmICh0aGlzLmlzU2VsZWN0ZWQoaW5kZXgpKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5zZWxlY3RlZEluZGljZXMucHVzaChpbmRleCk7XG4gICAgICAgIHRoaXMuZm9jdXNlZCA9IGluZGV4O1xuICAgICAgICB0aGlzLm9uQ2hhbmdlLmVtaXQoe1xuICAgICAgICAgICAgYWRkZWQ6IGluZGV4LFxuICAgICAgICAgICAgaW5kaWNlczogdGhpcy5zZWxlY3RlZEluZGljZXMuc2xpY2UoKVxuICAgICAgICB9KTtcbiAgICB9XG4gICAgdW5zZWxlY3QoaW5kZXgpIHtcbiAgICAgICAgaWYgKCF0aGlzLmlzU2VsZWN0ZWQoaW5kZXgpKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgcG9zaXRpb24gPSB0aGlzLnNlbGVjdGVkSW5kaWNlcy5pbmRleE9mKGluZGV4KTtcbiAgICAgICAgdGhpcy5zZWxlY3RlZEluZGljZXMuc3BsaWNlKHBvc2l0aW9uLCAxKTtcbiAgICAgICAgdGhpcy5mb2N1c2VkID0gaW5kZXg7XG4gICAgICAgIHRoaXMub25DaGFuZ2UuZW1pdCh7XG4gICAgICAgICAgICBpbmRpY2VzOiB0aGlzLnNlbGVjdGVkSW5kaWNlcy5zbGljZSgpLFxuICAgICAgICAgICAgcmVtb3ZlZDogaW5kZXhcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGNoYW5nZShpbmRleCkge1xuICAgICAgICBjb25zdCBuZXdTZWxlY3Rpb24gPSBpc1ByZXNlbnQoaW5kZXgpICYmICF0aGlzLmlzU2VsZWN0ZWQoaW5kZXgpO1xuICAgICAgICB0aGlzLnNlbGVjdGVkSW5kaWNlcyA9IFtpbmRleF07XG4gICAgICAgIHRoaXMuZm9jdXNlZCA9IGluZGV4O1xuICAgICAgICB0aGlzLm9uQ2hhbmdlLmVtaXQoe1xuICAgICAgICAgICAgaW5kaWNlczogW2luZGV4XSxcbiAgICAgICAgICAgIG5ld1NlbGVjdGlvbjogbmV3U2VsZWN0aW9uXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICByZXNldFNlbGVjdGlvbihpbmRleCkge1xuICAgICAgICB0aGlzLnNlbGVjdGVkSW5kaWNlcyA9IGluZGV4IGluc3RhbmNlb2YgQXJyYXkgPyBpbmRleCA6IFtpbmRleF07XG4gICAgICAgIHRoaXMuZm9jdXNlZCA9IHRoaXMuc2VsZWN0ZWRJbmRpY2VzW3RoaXMuc2VsZWN0ZWRJbmRpY2VzLmxlbmd0aCAtIDFdO1xuICAgIH1cbiAgICBnZXQgc2VsZWN0ZWQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnNlbGVjdGVkSW5kaWNlcy5zbGljZSgpO1xuICAgIH1cbiAgICBnZXQgZm9jdXNlZCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZm9jdXNlZEluZGV4O1xuICAgIH1cbiAgICBzZXQgZm9jdXNlZChpbmRleCkge1xuICAgICAgICBpZiAodGhpcy5mb2N1c2VkSW5kZXggIT09IGluZGV4KSB7XG4gICAgICAgICAgICB0aGlzLmZvY3VzZWRJbmRleCA9IGluZGV4O1xuICAgICAgICAgICAgdGhpcy5vbkZvY3VzLmVtaXQoaW5kZXgpO1xuICAgICAgICB9XG4gICAgfVxufVxuU2VsZWN0aW9uU2VydmljZS5kZWNvcmF0b3JzID0gW1xuICAgIHsgdHlwZTogSW5qZWN0YWJsZSB9LFxuXTtcblxuLyoqXG4gKiBAaGlkZGVuXG4gKi9cbnZhciBOYXZpZ2F0aW9uQWN0aW9uO1xuKGZ1bmN0aW9uIChOYXZpZ2F0aW9uQWN0aW9uKSB7XG4gICAgTmF2aWdhdGlvbkFjdGlvbltOYXZpZ2F0aW9uQWN0aW9uW1wiVW5kZWZpbmVkXCJdID0gMF0gPSBcIlVuZGVmaW5lZFwiO1xuICAgIE5hdmlnYXRpb25BY3Rpb25bTmF2aWdhdGlvbkFjdGlvbltcIk9wZW5cIl0gPSAxXSA9IFwiT3BlblwiO1xuICAgIE5hdmlnYXRpb25BY3Rpb25bTmF2aWdhdGlvbkFjdGlvbltcIkNsb3NlXCJdID0gMl0gPSBcIkNsb3NlXCI7XG4gICAgTmF2aWdhdGlvbkFjdGlvbltOYXZpZ2F0aW9uQWN0aW9uW1wiRW50ZXJcIl0gPSAzXSA9IFwiRW50ZXJcIjtcbiAgICBOYXZpZ2F0aW9uQWN0aW9uW05hdmlnYXRpb25BY3Rpb25bXCJUYWJcIl0gPSA0XSA9IFwiVGFiXCI7XG4gICAgTmF2aWdhdGlvbkFjdGlvbltOYXZpZ2F0aW9uQWN0aW9uW1wiRXNjXCJdID0gNV0gPSBcIkVzY1wiO1xuICAgIE5hdmlnYXRpb25BY3Rpb25bTmF2aWdhdGlvbkFjdGlvbltcIkRlbGV0ZVwiXSA9IDZdID0gXCJEZWxldGVcIjtcbiAgICBOYXZpZ2F0aW9uQWN0aW9uW05hdmlnYXRpb25BY3Rpb25bXCJCYWNrc3BhY2VcIl0gPSA3XSA9IFwiQmFja3NwYWNlXCI7XG4gICAgTmF2aWdhdGlvbkFjdGlvbltOYXZpZ2F0aW9uQWN0aW9uW1wiSG9tZVwiXSA9IDhdID0gXCJIb21lXCI7XG4gICAgTmF2aWdhdGlvbkFjdGlvbltOYXZpZ2F0aW9uQWN0aW9uW1wiRW5kXCJdID0gOV0gPSBcIkVuZFwiO1xuICAgIE5hdmlnYXRpb25BY3Rpb25bTmF2aWdhdGlvbkFjdGlvbltcIlVwXCJdID0gMTBdID0gXCJVcFwiO1xuICAgIE5hdmlnYXRpb25BY3Rpb25bTmF2aWdhdGlvbkFjdGlvbltcIkRvd25cIl0gPSAxMV0gPSBcIkRvd25cIjtcbiAgICBOYXZpZ2F0aW9uQWN0aW9uW05hdmlnYXRpb25BY3Rpb25bXCJMZWZ0XCJdID0gMTJdID0gXCJMZWZ0XCI7XG4gICAgTmF2aWdhdGlvbkFjdGlvbltOYXZpZ2F0aW9uQWN0aW9uW1wiUmlnaHRcIl0gPSAxM10gPSBcIlJpZ2h0XCI7XG59KShOYXZpZ2F0aW9uQWN0aW9uIHx8IChOYXZpZ2F0aW9uQWN0aW9uID0ge30pKTtcblxuLyoqXG4gKiBAaGlkZGVuXG4gKi9cbmNsYXNzIERhdGFTZXJ2aWNlIHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgdGhpcy5ncm91cGVkID0gZmFsc2U7XG4gICAgICAgIHRoaXMuZ3JvdXBJbmRpY2VzID0gW107XG4gICAgfVxuICAgIHNldCBkYXRhKGRhdGEpIHtcbiAgICAgICAgdGhpcy5fZGF0YSA9IGRhdGE7XG4gICAgICAgIHRoaXMuZ3JvdXBlZCA9IHRoaXMuaXNHcm91cGVkKGRhdGEpO1xuICAgICAgICBpZiAodGhpcy5ncm91cGVkKSB7XG4gICAgICAgICAgICB0aGlzLmdyb3VwSW5kaWNlcyA9IHRoaXMuZ2V0R3JvdXBJbmRpY2VzKGRhdGEpO1xuICAgICAgICAgICAgdGhpcy5fZmxhdERhdGEgPSB0aGlzLmZsYXR0ZW4oZGF0YSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZ2V0IGRhdGEoKSB7XG4gICAgICAgIGlmICh0aGlzLmdyb3VwZWQpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9mbGF0RGF0YTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcy5fZGF0YTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQGhpZGRlblxuICAgICAqIFVzZWQgdG8gZ2V0IHRoZSBhY3R1YWwgaXRlbXMgY291bnQsIGkuZS4gZXhjbHVkaW5nIHRoZSBoZWFkZXIgaXRlbXMgaW4gY2FzZSBvZiBncm91cGluZy5cbiAgICAgKi9cbiAgICBnZXQgaXRlbXNDb3VudCgpIHtcbiAgICAgICAgaWYgKCFpc1ByZXNlbnQodGhpcy5kYXRhKSB8fCB0aGlzLmRhdGEubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICByZXR1cm4gMDtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBpdGVtcyA9IHRoaXMuZ3JvdXBlZCA/IHRoaXMuX2ZsYXREYXRhLmZpbHRlcihpdGVtID0+ICFpdGVtLmhlYWRlcikgOiB0aGlzLmRhdGE7XG4gICAgICAgIHJldHVybiBpdGVtcy5sZW5ndGg7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEBoaWRkZW5cbiAgICAgKiBVc2VkIHRvIGRldGVybWluZSBpZiB0aGUgY29tcG9uZW50IHJlY2VpdmVkIGdyb3VwZWQgZGF0YS5cbiAgICAgKi9cbiAgICBpc0dyb3VwZWQoZGF0YSkge1xuICAgICAgICAvLyBHcm91cFJlc3VsdCB7IGFnZ3JlZ2F0ZXM6IEFnZ3JlZ2F0ZVJlc3VsdCwgZmllbGQ6IHN0cmluZywgaXRlbXM6IG9iamVjdFtdLCB2YWx1ZTogYW55IH1cbiAgICAgICAgLy8gaHR0cHM6Ly93d3cudGVsZXJpay5jb20va2VuZG8tYW5ndWxhci11aS9jb21wb25lbnRzL2RhdGFxdWVyeS9hcGkvR3JvdXBSZXN1bHQvXG4gICAgICAgIHJldHVybiAoaXNQcmVzZW50KGRhdGEpICYmIGRhdGEubGVuZ3RoICE9PSAwKSAmJiBpc1ByZXNlbnQoZGF0YVswXSkgJiYgaGFzUHJvcHMoZGF0YVswXSwgWydhZ2dyZWdhdGVzJywgJ2ZpZWxkJywgJ2l0ZW1zJywgJ3ZhbHVlJ10pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAaGlkZGVuXG4gICAgICogVXNlZCB0byBjYWxjdWxhdGUgdGhlIGxhc3QgaXRlbSBpbmRleCBvZiBlYWNoIGdyb3VwLlxuICAgICAqL1xuICAgIGdldEdyb3VwSW5kaWNlcyhkYXRhKSB7XG4gICAgICAgIGxldCBncm91cEluZGljZXMgPSBbXTtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPD0gZGF0YS5sZW5ndGggLSAxOyBpKyspIHtcbiAgICAgICAgICAgIGdyb3VwSW5kaWNlc1tpXSA9IChncm91cEluZGljZXNbaSAtIDFdIHx8IDApICsgZGF0YVtpXS5pdGVtcy5sZW5ndGg7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGdyb3VwSW5kaWNlcztcbiAgICB9XG4gICAgLyoqXG4gICAgICogQGhpZGRlblxuICAgICAqIFVzZWQgdG8gZ2V0IGEgZmxhdCBhcnJheSBjb250YWluaW5nIGFsbCBpdGVtcyBtYXRjaGluZyBjZXJ0YWluIGNyaXRlcmlhLlxuICAgICAqL1xuICAgIGZpbHRlcihwcmVkaWNhdGUpIHtcbiAgICAgICAgbGV0IHJlc3VsdCA9IFtdO1xuICAgICAgICBpZiAodGhpcy5pc0dyb3VwZWQodGhpcy5kYXRhKSkge1xuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPD0gdGhpcy5ncm91cEluZGljZXMubGVuZ3RoIC0gMTsgaSsrKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgbWF0Y2hlcyA9IHRoaXMuZGF0YVtpXS5pdGVtcy5maWx0ZXIocHJlZGljYXRlKTtcbiAgICAgICAgICAgICAgICBpZiAobWF0Y2hlcykge1xuICAgICAgICAgICAgICAgICAgICByZXN1bHQgPSByZXN1bHQuY29uY2F0KG1hdGNoZXMpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHJlc3VsdCA9IHRoaXMuZGF0YS5maWx0ZXIocHJlZGljYXRlKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAaGlkZGVuXG4gICAgICogVXNlZCB0byBnZXQgdGhlIGluZGV4IG9mIGEgZ2l2ZW4gZGF0YSBpdGVtLlxuICAgICAqL1xuICAgIGluZGV4T2YoaXRlbSwgc3RhcnRGcm9tID0gMCkge1xuICAgICAgICBsZXQgcHJlZGljYXRlID0gKGVsZW1lbnQpID0+IHtcbiAgICAgICAgICAgIHJldHVybiBlbGVtZW50ID09PSBpdGVtO1xuICAgICAgICB9O1xuICAgICAgICBpZiAodGhpcy5ncm91cGVkKSB7XG4gICAgICAgICAgICBwcmVkaWNhdGUgPSAoZWxlbWVudCkgPT4ge1xuICAgICAgICAgICAgICAgIHJldHVybiBlbGVtZW50LnZhbHVlID09PSBpdGVtO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcy5maW5kSW5kZXgocHJlZGljYXRlLCBzdGFydEZyb20pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAaGlkZGVuXG4gICAgICogVXNlZCB0byBnZXQgdGhlIGluZGV4IG9mIGEgZGF0YSBpdGVtIGJhc2VkIG9uIGFuIGV4cHJlc3Npb24uXG4gICAgICovXG4gICAgZmluZEluZGV4KHByZWRpY2F0ZSwgc3RhcnRGcm9tID0gMCkge1xuICAgICAgICBsZXQgaW5kZXggPSAtMTtcbiAgICAgICAgaWYgKHRoaXMuZ3JvdXBlZCkge1xuICAgICAgICAgICAgY29uc3QgZGF0YSA9IHRoaXMuX2ZsYXREYXRhLmZpbHRlcihpdGVtID0+ICFpdGVtLmhlYWRlciAmJiBpdGVtLm9mZnNldEluZGV4ID49IHN0YXJ0RnJvbSk7XG4gICAgICAgICAgICBpbmRleCA9IGRhdGEuZmluZEluZGV4KHByZWRpY2F0ZSk7XG4gICAgICAgICAgICBpbmRleCA9IGRhdGFbaW5kZXhdID8gZGF0YVtpbmRleF0ub2Zmc2V0SW5kZXggOiAtMTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGNvbnN0IGRhdGEgPSB0aGlzLmRhdGEuc2xpY2Uoc3RhcnRGcm9tKTtcbiAgICAgICAgICAgIGNvbnN0IGl0ZW1JbmRleCA9IGRhdGEuZmluZEluZGV4KHByZWRpY2F0ZSk7XG4gICAgICAgICAgICBpbmRleCA9IGl0ZW1JbmRleCAhPT0gLTEgPyBpdGVtSW5kZXggKyBzdGFydEZyb20gOiAtMTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gaW5kZXg7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEBoaWRkZW5cbiAgICAgKiBVc2VkIHRvIGdldCB0aGUgY2xvc2VzdCBncm91cCBoZWFkZXIgcHJpb3IgdG8gYW4gaXRlbSBpbmRleC5cbiAgICAgKi9cbiAgICBjbG9zZXN0R3JvdXAoaW5kZXgpIHtcbiAgICAgICAgZm9yIChsZXQgaSA9IGluZGV4OyBpID49IDA7IGktLSkge1xuICAgICAgICAgICAgaWYgKHRoaXMuX2ZsYXREYXRhW2ldLmhlYWRlcikge1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLl9mbGF0RGF0YVtpXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBAaGlkZGVuXG4gICAgICogVXNlZCB0byBnZXQgdGhlIGZpcnN0IGl0ZW0gbWF0Y2hpbmcgdGhlIGNyaXRlcmlhLlxuICAgICAqL1xuICAgIGZpbmQocHJlZGljYXRlKSB7XG4gICAgICAgIGNvbnN0IGluZGV4ID0gdGhpcy5maW5kSW5kZXgocHJlZGljYXRlKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuaXRlbUF0KGluZGV4KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQGhpZGRlblxuICAgICAqIFVzZWQgdG8gZ2V0IHRoZSB0cnVlIGluZGV4IGluIGEgZmxhdHRlbmVkIGRhdGEgYXJyYXkuXG4gICAgICovXG4gICAgZmxhdEluZGV4KGluZGV4KSB7XG4gICAgICAgIGlmICh0aGlzLml0ZW1zQ291bnQgPT09IDApIHtcbiAgICAgICAgICAgIHJldHVybiAtMTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5ncm91cGVkKSB7XG4gICAgICAgICAgICBjb25zdCBtYXRjaCA9IHRoaXMuX2ZsYXREYXRhLmZpbmQoKGl0ZW0pID0+ICFpdGVtLmhlYWRlciAmJiBpdGVtLm9mZnNldEluZGV4ID09PSBpbmRleCk7XG4gICAgICAgICAgICBpZiAobWF0Y2gpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gbWF0Y2guaW5kZXg7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gaW5kZXg7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIC0xO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAaGlkZGVuXG4gICAgICogVXNlZCB0byBnZXQgdGhlIGl0ZW0gYXQgdGhlIHByb3ZpZGVkIGluZGV4LlxuICAgICAqL1xuICAgIGl0ZW1BdChpbmRleCkge1xuICAgICAgICBsZXQgZGF0YUl0ZW07XG4gICAgICAgIGlmICh0aGlzLml0ZW1zQ291bnQgPT09IDApIHtcbiAgICAgICAgICAgIHJldHVybiBkYXRhSXRlbTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5ncm91cGVkKSB7XG4gICAgICAgICAgICBjb25zdCBtYXRjaCA9IHRoaXMuX2ZsYXREYXRhLmZpbmQoKGl0ZW0pID0+ICFpdGVtLmhlYWRlciAmJiBpdGVtLm9mZnNldEluZGV4ID09PSBpbmRleCk7XG4gICAgICAgICAgICBpZiAobWF0Y2gpIHtcbiAgICAgICAgICAgICAgICBkYXRhSXRlbSA9IG1hdGNoLnZhbHVlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgZGF0YUl0ZW0gPSB0aGlzLmRhdGFbaW5kZXhdO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBkYXRhSXRlbTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQGhpZGRlblxuICAgICAqIFVzZWQgdG8gZ2V0IHRoZSBncm91cCBhdCB0aGUgcHJvdmlkZWQgaW5kZXguXG4gICAgICovXG4gICAgZ3JvdXBBdChpbmRleCkge1xuICAgICAgICBpZiAodGhpcy5pdGVtc0NvdW50ID09PSAwIHx8ICF0aGlzLmlzR3JvdXBlZCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLl9mbGF0RGF0YS5maW5kKChpdGVtKSA9PiBpdGVtLmhlYWRlciAmJiBpdGVtLmluZGV4ID09PSBpbmRleCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEBoaWRkZW5cbiAgICAgKiBVc2VkIHRvIGdldCB0aGUgZmllbGQgYnkgd2hpY2ggdGhlIGRhdGEgaXMgZ3JvdXBlZC5cbiAgICAgKi9cbiAgICBncm91cEZpZWxkKCkge1xuICAgICAgICBpZiAodGhpcy5pdGVtc0NvdW50ID09PSAwIHx8ICF0aGlzLmlzR3JvdXBlZCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLl9kYXRhWzBdLmZpZWxkO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAaGlkZGVuXG4gICAgICogVXNlZCB0byBnZXQgdGhlIGdyb3VwIHRvIHdoaWNoIGEgZGF0YUl0ZW0gYmVsb25ncy5cbiAgICAgKi9cbiAgICBpdGVtR3JvdXAoaXRlbSkge1xuICAgICAgICBpZiAoIWl0ZW0gfHwgdGhpcy5pdGVtc0NvdW50ID09PSAwIHx8ICF0aGlzLmlzR3JvdXBlZCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGZpZWxkTmFtZSA9IHRoaXMuZ3JvdXBGaWVsZCgpO1xuICAgICAgICBpZiAoZmllbGROYW1lKSB7XG4gICAgICAgICAgICByZXR1cm4gaXRlbVtmaWVsZE5hbWVdO1xuICAgICAgICB9XG4gICAgfVxuICAgIGZsYXR0ZW4oZGF0YSwgZ3JvdXAgPSB1bmRlZmluZWQsIG9mZnNldCA9IDAsIGdyb3VwSW5kZXggPSAwKSB7XG4gICAgICAgIGxldCBmbGF0ID0gW107XG4gICAgICAgIGlmIChpc1ByZXNlbnQoZ3JvdXApKSB7XG4gICAgICAgICAgICBmbGF0LnB1c2goe1xuICAgICAgICAgICAgICAgIGhlYWRlcjogdHJ1ZSxcbiAgICAgICAgICAgICAgICBpbmRleDogZ3JvdXBJbmRleCArIG9mZnNldCxcbiAgICAgICAgICAgICAgICBvZmZzZXRJbmRleDogZ3JvdXBJbmRleCxcbiAgICAgICAgICAgICAgICB2YWx1ZTogZ3JvdXBcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZGF0YS5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgbGV0IHJlc3VsdCA9IFtdO1xuICAgICAgICAgICAgaWYgKGRhdGFbaV0uaXRlbXMpIHtcbiAgICAgICAgICAgICAgICByZXN1bHQgPSB0aGlzLmZsYXR0ZW4oZGF0YVtpXS5pdGVtcywgZGF0YVtpXS52YWx1ZSwgb2Zmc2V0LCBpKTtcbiAgICAgICAgICAgICAgICBvZmZzZXQgPSBvZmZzZXQgKyBkYXRhW2ldLml0ZW1zLmxlbmd0aDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHJlc3VsdC5wdXNoKHtcbiAgICAgICAgICAgICAgICAgICAgaGVhZGVyOiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgaW5kZXg6IGdyb3VwSW5kZXggKyBvZmZzZXQgKyBpICsgMSxcbiAgICAgICAgICAgICAgICAgICAgb2Zmc2V0SW5kZXg6IG9mZnNldCArIGksXG4gICAgICAgICAgICAgICAgICAgIHZhbHVlOiBkYXRhW2ldXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBmbGF0ID0gZmxhdC5jb25jYXQocmVzdWx0KTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZmxhdDtcbiAgICB9XG59XG5EYXRhU2VydmljZS5kZWNvcmF0b3JzID0gW1xuICAgIHsgdHlwZTogSW5qZWN0YWJsZSB9LFxuXTtcblxuLyoqXG4gKiBAaGlkZGVuXG4gKi9cbmNsYXNzIERpc2FibGVkSXRlbXNTZXJ2aWNlIHtcbiAgICBjb25zdHJ1Y3RvcihkYXRhU2VydmljZSkge1xuICAgICAgICB0aGlzLmRhdGFTZXJ2aWNlID0gZGF0YVNlcnZpY2U7XG4gICAgICAgIHRoaXMuaXRlbURpc2FibGVkID0gbnVsbDtcbiAgICB9XG4gICAgaXNJbmRleERpc2FibGVkKGluZGV4KSB7XG4gICAgICAgIGlmICh0aGlzLml0ZW1EaXNhYmxlZCkge1xuICAgICAgICAgICAgY29uc3QgaXRlbSA9IHRoaXMuZGF0YVNlcnZpY2UuaXRlbUF0KGluZGV4KTtcbiAgICAgICAgICAgIGlmIChpc1ByZXNlbnQoaXRlbSkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5pdGVtRGlzYWJsZWQoeyBkYXRhSXRlbTogaXRlbSwgaW5kZXggfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChpc1ByZXNlbnQodGhpcy5kZWZhdWx0SXRlbSkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5pdGVtRGlzYWJsZWQoeyBkYXRhSXRlbTogdGhpcy5kZWZhdWx0SXRlbSwgaW5kZXg6IC0xIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIGlzSXRlbURpc2FibGVkKGl0ZW0pIHtcbiAgICAgICAgaWYgKHRoaXMuaXRlbURpc2FibGVkKSB7XG4gICAgICAgICAgICBjb25zdCBpbmRleCA9IHRoaXMuZGF0YVNlcnZpY2UuaW5kZXhPZihpdGVtKTtcbiAgICAgICAgICAgIGlmIChpbmRleCAhPT0gLTEpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5pdGVtRGlzYWJsZWQoeyBkYXRhSXRlbTogaXRlbSwgaW5kZXggfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChpc1ByZXNlbnQodGhpcy5kZWZhdWx0SXRlbSkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5pdGVtRGlzYWJsZWQoeyBkYXRhSXRlbTogdGhpcy5kZWZhdWx0SXRlbSwgaW5kZXg6IC0xIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxufVxuRGlzYWJsZWRJdGVtc1NlcnZpY2UuZGVjb3JhdG9ycyA9IFtcbiAgICB7IHR5cGU6IEluamVjdGFibGUgfSxcbl07XG4vKiogQG5vY29sbGFwc2UgKi9cbkRpc2FibGVkSXRlbXNTZXJ2aWNlLmN0b3JQYXJhbWV0ZXJzID0gKCkgPT4gW1xuICAgIHsgdHlwZTogRGF0YVNlcnZpY2UgfVxuXTtcblxuY29uc3QgTUlOX0lOREVYID0gMDtcbi8qKlxuICogQGhpZGRlblxuICovXG5jbGFzcyBOYXZpZ2F0aW9uRXZlbnQge1xuICAgIC8qKlxuICAgICAqIFRoZSBpbmRleCBvZiB0aGUgaXRlbSB0byB3aGljaCB0aGUgdXNlciBuYXZpZ2F0ZWQuXG4gICAgICovXG4gICAgY29uc3RydWN0b3IoaW5kZXgsIG9yaWdpbmFsRXZlbnQpIHtcbiAgICAgICAgdGhpcy5pbmRleCA9IGluZGV4O1xuICAgICAgICB0aGlzLm9yaWdpbmFsRXZlbnQgPSBvcmlnaW5hbEV2ZW50O1xuICAgIH1cbn1cbi8qKlxuICogQGhpZGRlblxuICovXG5jbGFzcyBOYXZpZ2F0aW9uU2VydmljZSB7XG4gICAgY29uc3RydWN0b3IoZGlzYWJsZWRJdGVtc1NlcnZpY2UsIHNlbGVjdGlvblNlcnZpY2UpIHtcbiAgICAgICAgdGhpcy5kaXNhYmxlZEl0ZW1zU2VydmljZSA9IGRpc2FibGVkSXRlbXNTZXJ2aWNlO1xuICAgICAgICB0aGlzLnNlbGVjdGlvblNlcnZpY2UgPSBzZWxlY3Rpb25TZXJ2aWNlO1xuICAgICAgICB0aGlzLm9wZW4gPSBuZXcgRXZlbnRFbWl0dGVyKCk7XG4gICAgICAgIHRoaXMuY2xvc2UgPSBuZXcgRXZlbnRFbWl0dGVyKCk7XG4gICAgICAgIHRoaXMuZW50ZXIgPSBuZXcgRXZlbnRFbWl0dGVyKCk7XG4gICAgICAgIHRoaXMudGFiID0gbmV3IEV2ZW50RW1pdHRlcigpO1xuICAgICAgICB0aGlzLmVzYyA9IG5ldyBFdmVudEVtaXR0ZXIoKTtcbiAgICAgICAgdGhpcy51cCA9IG5ldyBFdmVudEVtaXR0ZXIoKTtcbiAgICAgICAgdGhpcy5yaWdodCA9IG5ldyBFdmVudEVtaXR0ZXIoKTtcbiAgICAgICAgdGhpcy5kb3duID0gbmV3IEV2ZW50RW1pdHRlcigpO1xuICAgICAgICB0aGlzLmxlZnQgPSBuZXcgRXZlbnRFbWl0dGVyKCk7XG4gICAgICAgIHRoaXMuZGVsZXRlID0gbmV3IEV2ZW50RW1pdHRlcigpO1xuICAgICAgICB0aGlzLmJhY2tzcGFjZSA9IG5ldyBFdmVudEVtaXR0ZXIoKTtcbiAgICAgICAgdGhpcy5ob21lID0gbmV3IEV2ZW50RW1pdHRlcigpO1xuICAgICAgICB0aGlzLmVuZCA9IG5ldyBFdmVudEVtaXR0ZXIoKTtcbiAgICB9XG4gICAgcHJvY2VzcyhhcmdzKSB7XG4gICAgICAgIGNvbnN0IGtleUNvZGUgPSBhcmdzLm9yaWdpbmFsRXZlbnQua2V5Q29kZTtcbiAgICAgICAgY29uc3QgYWx0S2V5ID0gYXJncy5vcmlnaW5hbEV2ZW50LmFsdEtleTtcbiAgICAgICAgbGV0IGluZGV4O1xuICAgICAgICBsZXQgYWN0aW9uID0gTmF2aWdhdGlvbkFjdGlvbi5VbmRlZmluZWQ7XG4gICAgICAgIGlmIChhbHRLZXkgJiYga2V5Q29kZSA9PT0gS2V5cy5kb3duKSB7XG4gICAgICAgICAgICBhY3Rpb24gPSBOYXZpZ2F0aW9uQWN0aW9uLk9wZW47XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoYWx0S2V5ICYmIGtleUNvZGUgPT09IEtleXMudXApIHtcbiAgICAgICAgICAgIGFjdGlvbiA9IE5hdmlnYXRpb25BY3Rpb24uQ2xvc2U7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoa2V5Q29kZSA9PT0gS2V5cy5lbnRlcikge1xuICAgICAgICAgICAgYWN0aW9uID0gTmF2aWdhdGlvbkFjdGlvbi5FbnRlcjtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChrZXlDb2RlID09PSBLZXlzLmVzYykge1xuICAgICAgICAgICAgYWN0aW9uID0gTmF2aWdhdGlvbkFjdGlvbi5Fc2M7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoa2V5Q29kZSA9PT0gS2V5cy50YWIpIHtcbiAgICAgICAgICAgIGFjdGlvbiA9IE5hdmlnYXRpb25BY3Rpb24uVGFiO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGtleUNvZGUgPT09IEtleXMudXApIHtcbiAgICAgICAgICAgIGluZGV4ID0gdGhpcy5uZXh0KHsgY3VycmVudDogYXJncy5jdXJyZW50LCBzdGFydDogYXJncy5taW4sIGVuZDogYXJncy5tYXgsIHN0ZXA6IC0xIH0pO1xuICAgICAgICAgICAgYWN0aW9uID0gTmF2aWdhdGlvbkFjdGlvbi5VcDtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChrZXlDb2RlID09PSBLZXlzLmxlZnQpIHtcbiAgICAgICAgICAgIGluZGV4ID0gdGhpcy5uZXh0KHsgY3VycmVudDogYXJncy5jdXJyZW50LCBzdGFydDogYXJncy5taW4sIGVuZDogYXJncy5tYXgsIHN0ZXA6IC0xIH0pO1xuICAgICAgICAgICAgYWN0aW9uID0gTmF2aWdhdGlvbkFjdGlvbi5MZWZ0O1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGtleUNvZGUgPT09IEtleXMuZG93bikge1xuICAgICAgICAgICAgaW5kZXggPSB0aGlzLm5leHQoeyBjdXJyZW50OiBhcmdzLmN1cnJlbnQsIHN0YXJ0OiBhcmdzLm1pbiwgZW5kOiBhcmdzLm1heCwgc3RlcDogMSB9KTtcbiAgICAgICAgICAgIGFjdGlvbiA9IE5hdmlnYXRpb25BY3Rpb24uRG93bjtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChrZXlDb2RlID09PSBLZXlzLnJpZ2h0KSB7XG4gICAgICAgICAgICBpbmRleCA9IHRoaXMubmV4dCh7IGN1cnJlbnQ6IGFyZ3MuY3VycmVudCwgc3RhcnQ6IGFyZ3MubWluLCBlbmQ6IGFyZ3MubWF4LCBzdGVwOiAxIH0pO1xuICAgICAgICAgICAgYWN0aW9uID0gTmF2aWdhdGlvbkFjdGlvbi5SaWdodDtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChrZXlDb2RlID09PSBLZXlzLmhvbWUpIHtcbiAgICAgICAgICAgIGluZGV4ID0gdGhpcy5pc0Rpc2FibGVkKE1JTl9JTkRFWCkgPyBhcmdzLmN1cnJlbnQgOiBNSU5fSU5ERVg7XG4gICAgICAgICAgICBhY3Rpb24gPSBOYXZpZ2F0aW9uQWN0aW9uLkhvbWU7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoa2V5Q29kZSA9PT0gS2V5cy5lbmQpIHtcbiAgICAgICAgICAgIGluZGV4ID0gdGhpcy5pc0Rpc2FibGVkKGFyZ3MubWF4KSA/IGFyZ3MuY3VycmVudCA6IGFyZ3MubWF4O1xuICAgICAgICAgICAgYWN0aW9uID0gTmF2aWdhdGlvbkFjdGlvbi5FbmQ7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoa2V5Q29kZSA9PT0gS2V5cy5kZWxldGUpIHtcbiAgICAgICAgICAgIGFjdGlvbiA9IE5hdmlnYXRpb25BY3Rpb24uRGVsZXRlO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGtleUNvZGUgPT09IEtleXMuYmFja3NwYWNlKSB7XG4gICAgICAgICAgICBhY3Rpb24gPSBOYXZpZ2F0aW9uQWN0aW9uLkJhY2tzcGFjZTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBldmVudERhdGEgPSBuZXcgTmF2aWdhdGlvbkV2ZW50KGluZGV4LCBhcmdzLm9yaWdpbmFsRXZlbnQpO1xuICAgICAgICBpZiAoYWN0aW9uICE9PSBOYXZpZ2F0aW9uQWN0aW9uLlVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdGhpc1tOYXZpZ2F0aW9uQWN0aW9uW2FjdGlvbl0udG9Mb3dlckNhc2UoKV0uZW1pdChldmVudERhdGEpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBhY3Rpb247XG4gICAgfVxuICAgIG5leHQoYXJncykge1xuICAgICAgICBjb25zdCB7IGN1cnJlbnQsIHN0YXJ0LCBlbmQsIHN0ZXAgfSA9IGFyZ3M7XG4gICAgICAgIGNvbnN0IG5leHRJbmRleCA9ICFpc1ByZXNlbnQoY3VycmVudCkgPyBzdGFydCA6IHRoaXMuY2xhbXBJbmRleChjdXJyZW50ICsgc3RlcCwgc3RhcnQsIGVuZCk7XG4gICAgICAgIGNvbnN0IGZpcnN0Rm9jdXNhYmxlSW5kZXggPSB0aGlzLmZpcnN0Rm9jdXNhYmxlSW5kZXgobmV4dEluZGV4LCBzdGFydCwgZW5kLCBzdGVwKTtcbiAgICAgICAgaWYgKGlzUHJlc2VudChmaXJzdEZvY3VzYWJsZUluZGV4KSkge1xuICAgICAgICAgICAgcmV0dXJuIGZpcnN0Rm9jdXNhYmxlSW5kZXg7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMuc2VsZWN0aW9uU2VydmljZS5pc1NlbGVjdGVkKGN1cnJlbnQpICYmIGN1cnJlbnQgPj0gc3RhcnQpIHtcbiAgICAgICAgICAgIHJldHVybiBjdXJyZW50O1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGludmVyc2VkU3RlcCA9IC0xICogc3RlcDtcbiAgICAgICAgcmV0dXJuIHRoaXMuZmlyc3RGb2N1c2FibGVJbmRleChuZXh0SW5kZXgsIHN0YXJ0LCBlbmQsIGludmVyc2VkU3RlcCk7XG4gICAgfVxuICAgIGNsYW1wSW5kZXgoaW5kZXgsIG1pbiwgbWF4KSB7XG4gICAgICAgIGlmICghaXNQcmVzZW50KGluZGV4KSB8fCBpbmRleCA8IG1pbikge1xuICAgICAgICAgICAgcmV0dXJuIG1pbjtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaW5kZXggPiBtYXgpIHtcbiAgICAgICAgICAgIHJldHVybiBtYXg7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGluZGV4O1xuICAgIH1cbiAgICBmaXJzdEZvY3VzYWJsZUluZGV4KHN0YXJ0SW5kZXgsIG1pbiwgbWF4LCBzdGVwKSB7XG4gICAgICAgIHdoaWxlIChtaW4gPD0gc3RhcnRJbmRleCAmJiBzdGFydEluZGV4IDw9IG1heCkge1xuICAgICAgICAgICAgaWYgKCF0aGlzLmlzRGlzYWJsZWQoc3RhcnRJbmRleCkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gc3RhcnRJbmRleDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHN0YXJ0SW5kZXggKz0gc3RlcDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgIH1cbiAgICBpc0Rpc2FibGVkKGluZGV4KSB7XG4gICAgICAgIGlmICh0aGlzLmRpc2FibGVkSXRlbXNTZXJ2aWNlKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5kaXNhYmxlZEl0ZW1zU2VydmljZS5pc0luZGV4RGlzYWJsZWQoaW5kZXgpO1xuICAgICAgICB9XG4gICAgfVxufVxuTmF2aWdhdGlvblNlcnZpY2UuZGVjb3JhdG9ycyA9IFtcbiAgICB7IHR5cGU6IEluamVjdGFibGUgfSxcbl07XG4vKiogQG5vY29sbGFwc2UgKi9cbk5hdmlnYXRpb25TZXJ2aWNlLmN0b3JQYXJhbWV0ZXJzID0gKCkgPT4gW1xuICAgIHsgdHlwZTogRGlzYWJsZWRJdGVtc1NlcnZpY2UgfSxcbiAgICB7IHR5cGU6IFNlbGVjdGlvblNlcnZpY2UgfVxuXTtcblxuLyogdHNsaW50OmRpc2FibGU6bWF4LWxpbmUtbGVuZ3RoICovXG4vKipcbiAqIFJlbmRlcnMgY29udGVudCB3aGVuIG5vIGRhdGEgaXMgYXZhaWxhYmxlLiBUbyBkZWZpbmUgdGhlIG5vLWRhdGEgdGVtcGxhdGUsIG5lc3QgYSBgPG5nLXRlbXBsYXRlPmAgdGFnXG4gKiB3aXRoIHRoZSBga2VuZG88Q29tcG9uZW50TmFtZT5Ob0RhdGFUZW1wbGF0ZWAgZGlyZWN0aXZlIGluc2lkZSB0aGUgY29tcG9uZW50IHRhZy5cbiAqXG4gKiAtIFtVc2luZyBgTm9EYXRhVGVtcGxhdGVgIHdpdGggdGhlIEF1dG9Db21wbGV0ZV0oeyUgc2x1ZyB0ZW1wbGF0ZXNfYXV0b2NvbXBsZXRlICV9I3RvYy1uby1kYXRhLXRlbXBsYXRlKVxuICogLSBbVXNpbmcgYE5vRGF0YVRlbXBsYXRlYCB3aXRoIHRoZSBDb21ib0JveF0oeyUgc2x1ZyB0ZW1wbGF0ZXNfY29tYm9ib3ggJX0jdG9jLW5vLWRhdGEtdGVtcGxhdGUpXG4gKiAtIFtVc2luZyBgTm9EYXRhVGVtcGxhdGVgIHdpdGggdGhlIERyb3BEb3duTGlzdF0oeyUgc2x1ZyB0ZW1wbGF0ZXNfZGRsICV9I3RvYy1uby1kYXRhLXRlbXBsYXRlKVxuICogLSBbVXNpbmcgYE5vRGF0YVRlbXBsYXRlYCB3aXRoIHRoZSBNdWx0aVNlbGVjdF0oeyUgc2x1ZyB0ZW1wbGF0ZXNfbXVsdGlzZWxlY3QgJX0jdG9jLW5vLWRhdGEtdGVtcGxhdGUpXG4gKlxuICogQGV4YW1wbGVcbiAqIGBgYHRzXG4gKiBfQENvbXBvbmVudCh7XG4gKiBzZWxlY3RvcjogJ215LWFwcCcsXG4gKiB0ZW1wbGF0ZTogYFxuICogIDxrZW5kby1jb21ib2JveCBbZGF0YV09XCJsaXN0SXRlbXNcIj5cbiAqICAgIDxuZy10ZW1wbGF0ZSBrZW5kb0NvbWJvQm94Tm9EYXRhVGVtcGxhdGU+XG4gKiAgICAgIDxoND5ObyBkYXRhITwvaDQ+XG4gKiAgICA8L25nLXRlbXBsYXRlPlxuICogIDwva2VuZG8tY29tYm9ib3g+XG4gKiBgXG4gKiB9KVxuICogY2xhc3MgQXBwQ29tcG9uZW50IHtcbiAqICAgcHVibGljIGxpc3RJdGVtczogQXJyYXk8c3RyaW5nPiA9IFtdO1xuICogfVxuICogYGBgXG4gKi9cbmNsYXNzIE5vRGF0YVRlbXBsYXRlRGlyZWN0aXZlIHtcbiAgICBjb25zdHJ1Y3Rvcih0ZW1wbGF0ZVJlZikge1xuICAgICAgICB0aGlzLnRlbXBsYXRlUmVmID0gdGVtcGxhdGVSZWY7XG4gICAgfVxufVxuTm9EYXRhVGVtcGxhdGVEaXJlY3RpdmUuZGVjb3JhdG9ycyA9IFtcbiAgICB7IHR5cGU6IERpcmVjdGl2ZSwgYXJnczogW3tcbiAgICAgICAgICAgICAgICBzZWxlY3RvcjogJ1trZW5kb0Ryb3BEb3duTGlzdE5vRGF0YVRlbXBsYXRlXSxba2VuZG9Db21ib0JveE5vRGF0YVRlbXBsYXRlXSxba2VuZG9BdXRvQ29tcGxldGVOb0RhdGFUZW1wbGF0ZV0sW2tlbmRvTXVsdGlTZWxlY3ROb0RhdGFUZW1wbGF0ZV0nXG4gICAgICAgICAgICB9LF0gfSxcbl07XG4vKiogQG5vY29sbGFwc2UgKi9cbk5vRGF0YVRlbXBsYXRlRGlyZWN0aXZlLmN0b3JQYXJhbWV0ZXJzID0gKCkgPT4gW1xuICAgIHsgdHlwZTogVGVtcGxhdGVSZWYgfVxuXTtcblxuLyoqXG4gKiBAaGlkZGVuXG4gKi9cbmNsYXNzIFByZXZlbnRhYmxlRXZlbnQge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICB0aGlzLnByZXZlbnRlZCA9IGZhbHNlO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBQcmV2ZW50cyB0aGUgZGVmYXVsdCBhY3Rpb24gZm9yIGEgc3BlY2lmaWVkIGV2ZW50LlxuICAgICAqIEluIHRoaXMgd2F5LCB0aGUgc291cmNlIGNvbXBvbmVudCBzdXBwcmVzc2VzIHRoZSBidWlsdC1pbiBiZWhhdmlvciB0aGF0IGZvbGxvd3MgdGhlIGV2ZW50LlxuICAgICAqL1xuICAgIHByZXZlbnREZWZhdWx0KCkge1xuICAgICAgICB0aGlzLnByZXZlbnRlZCA9IHRydWU7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIElmIHRoZSBldmVudCBpcyBwcmV2ZW50ZWQgYnkgYW55IG9mIGl0cyBzdWJzY3JpYmVycywgcmV0dXJucyBgdHJ1ZWAuXG4gICAgICpcbiAgICAgKiBAcmV0dXJucyBgdHJ1ZWAgaWYgdGhlIGRlZmF1bHQgYWN0aW9uIHdhcyBwcmV2ZW50ZWQuIE90aGVyd2lzZSwgcmV0dXJucyBgZmFsc2VgLlxuICAgICAqL1xuICAgIGlzRGVmYXVsdFByZXZlbnRlZCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJldmVudGVkO1xuICAgIH1cbn1cblxuLyoqXG4gKiBEZWZpbmVzIHRoZSBtYW5kYXRvcnkgcHJvcGVydGllcyBvZiB0aGUgYGtlbmRvRHJvcERvd25GaWx0ZXJgIGRpcmVjdGl2ZVxuICogc28gdGhhdCBga2VuZG9Ecm9wRG93bkZpbHRlcmAgY2FuIGJlIHVzZWQgd2l0aCBhbnkgb2YgdGhlIERyb3BEb3ducyBjb21wb25lbnRzXG4gKiB3aGljaCBpbXBsZW1lbnQgdGhlIGBGaWx0ZXJhYmxlRHJvcERvd25Db21wb25lbnRCYXNlYCBjbGFzcy5cbiAqXG4gKiBAaGlkZGVuXG4gKi9cbmNsYXNzIEZpbHRlcmFibGVEcm9wRG93bkNvbXBvbmVudEJhc2Uge1xufVxuXG4vKipcbiAqIEBoaWRkZW5cbiAqL1xuY2xhc3MgTGlzdEl0ZW1EaXJlY3RpdmUge1xuICAgIGNvbnN0cnVjdG9yKGVsZW1lbnQpIHtcbiAgICAgICAgdGhpcy5lbGVtZW50ID0gZWxlbWVudDtcbiAgICB9XG59XG5MaXN0SXRlbURpcmVjdGl2ZS5kZWNvcmF0b3JzID0gW1xuICAgIHsgdHlwZTogRGlyZWN0aXZlLCBhcmdzOiBbe1xuICAgICAgICAgICAgICAgIHNlbGVjdG9yOiAnXCJsaVtyb2xlPW9wdGlvbl0sIGxpW3JvbGU9Z3JvdXBdXCInIC8vIHRzbGludDpkaXNhYmxlLWxpbmVcbiAgICAgICAgICAgIH0sXSB9LFxuXTtcbi8qKiBAbm9jb2xsYXBzZSAqL1xuTGlzdEl0ZW1EaXJlY3RpdmUuY3RvclBhcmFtZXRlcnMgPSAoKSA9PiBbXG4gICAgeyB0eXBlOiBFbGVtZW50UmVmIH1cbl07XG5cbi8qKlxuICogQGhpZGRlblxuICovXG5jbGFzcyBMaXN0Q29tcG9uZW50IHtcbiAgICAvKiB0c2xpbnQ6ZGlzYWJsZTptZW1iZXItb3JkZXJpbmcgKi9cbiAgICBjb25zdHJ1Y3RvcihkYXRhU2VydmljZSwgd3JhcHBlciwgc2VsZWN0aW9uU2VydmljZSwgZGlzYWJsZWRJdGVtc1NlcnZpY2UsIGNkciwgem9uZSwgcmVuZGVyZXIpIHtcbiAgICAgICAgdGhpcy5kYXRhU2VydmljZSA9IGRhdGFTZXJ2aWNlO1xuICAgICAgICB0aGlzLndyYXBwZXIgPSB3cmFwcGVyO1xuICAgICAgICB0aGlzLnNlbGVjdGlvblNlcnZpY2UgPSBzZWxlY3Rpb25TZXJ2aWNlO1xuICAgICAgICB0aGlzLmRpc2FibGVkSXRlbXNTZXJ2aWNlID0gZGlzYWJsZWRJdGVtc1NlcnZpY2U7XG4gICAgICAgIHRoaXMuY2RyID0gY2RyO1xuICAgICAgICB0aGlzLnpvbmUgPSB6b25lO1xuICAgICAgICB0aGlzLnJlbmRlcmVyID0gcmVuZGVyZXI7XG4gICAgICAgIHRoaXMuc2VsZWN0ZWQgPSBbXTtcbiAgICAgICAgdGhpcy5mb2N1c2VkID0gLTE7XG4gICAgICAgIHRoaXMuc2hvdyA9IHRydWU7XG4gICAgICAgIHRoaXMubXVsdGlwbGVTZWxlY3Rpb24gPSBmYWxzZTtcbiAgICAgICAgdGhpcy5vbkNsaWNrID0gbmV3IEV2ZW50RW1pdHRlcigpO1xuICAgICAgICB0aGlzLnBhZ2VDaGFuZ2UgPSBuZXcgRXZlbnRFbWl0dGVyKCk7XG4gICAgICAgIHRoaXMuc3RhcnRGcm9tID0gMDtcbiAgICAgICAgdGhpcy5sYXN0TG9hZGVkID0gMDtcbiAgICAgICAgdGhpcy5sYXN0U2Nyb2xsVG9wID0gMDtcbiAgICAgICAgdGhpcy5zY3JvbGxUb0ZvY3VzZWQgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5zZWxlY3RTdWJzY3JpcHRpb24gPSBtZXJnZSh0aGlzLnNlbGVjdGlvblNlcnZpY2Uub25TZWxlY3QucGlwZShtYXAoKGFyZ3MpID0+IGFyZ3MuaW5kaWNlc1swXSkpLCB0aGlzLnNlbGVjdGlvblNlcnZpY2Uub25Gb2N1cykuc3Vic2NyaWJlKHRoaXMuc2Nyb2xsVG9JdGVtLmJpbmQodGhpcykpO1xuICAgIH1cbiAgICBzZXQgZGF0YShkYXRhKSB7XG4gICAgICAgIHRoaXMuX2RhdGEgPSBkYXRhWzBdICYmIGRhdGFbMF0uaGVhZGVyID8gZGF0YS5zbGljZSgwKSA6IGRhdGE7XG4gICAgfVxuICAgIGdldCBkYXRhKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fZGF0YTtcbiAgICB9XG4gICAgc2V0IGl0ZW1zKGl0ZW1zKSB7XG4gICAgICAgIHRoaXMuX2l0ZW1zID0gaXRlbXM7XG4gICAgfVxuICAgIGdldCBpdGVtcygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2l0ZW1zO1xuICAgIH1cbiAgICBnZXQgcGFnZVNpemUoKSB7XG4gICAgICAgIGlmICh0aGlzLnZpcnR1YWwucGFnZVNpemUpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnZpcnR1YWwucGFnZVNpemU7XG4gICAgICAgIH1cbiAgICAgICAgbGV0IHNpemUgPSBNYXRoLnJvdW5kKHRoaXMuaGVpZ2h0IC8gdGhpcy52aXJ0dWFsLml0ZW1IZWlnaHQpO1xuICAgICAgICByZXR1cm4gc2l6ZTtcbiAgICB9XG4gICAgZ2V0IHNjcm9sbEhlaWdodCgpIHtcbiAgICAgICAgcmV0dXJuICh0aGlzLmRhdGFTZXJ2aWNlLmdyb3VwZWQgPyB0aGlzLnZpcnR1YWwudG90YWwgLSAxIDogdGhpcy52aXJ0dWFsLnRvdGFsKSAqIHRoaXMudmlydHVhbC5pdGVtSGVpZ2h0O1xuICAgIH1cbiAgICBuZ09uQ2hhbmdlcyhjaGFuZ2VzKSB7XG4gICAgICAgIGlmIChpc0NoYW5nZWQoJ2RhdGEnLCBjaGFuZ2VzLCBmYWxzZSkpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLmxhc3RMb2FkZWQgPD0gMCkge1xuICAgICAgICAgICAgICAgIHRoaXMubGFzdExvYWRlZCA9IHRoaXMuZGF0YS5sZW5ndGggLSAxO1xuICAgICAgICAgICAgICAgIHRoaXMuc2Nyb2xsVG9Gb2N1c2VkID0gIWNoYW5nZXMuZGF0YS5pc0ZpcnN0Q2hhbmdlKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgbmdBZnRlclZpZXdJbml0KCkge1xuICAgICAgICB0aGlzLnpvbmUucnVuT3V0c2lkZUFuZ3VsYXIoKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5zY3JvbGxTdWJzY3JpcHRpb24gPSBmcm9tRXZlbnQodGhpcy5jb250ZW50Lm5hdGl2ZUVsZW1lbnQsIFwic2Nyb2xsXCIpLnBpcGUoYXVkaXRUaW1lKDEwMCksIHRhcCh0aGlzLnByZWZldGNoRGF0YS5iaW5kKHRoaXMpKSwgdGFwKHRoaXMuZmluZEN1cnJlbnRHcm91cC5iaW5kKHRoaXMpKSkuc3Vic2NyaWJlKCgpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLmxhc3RTY3JvbGxUb3AgPSB0aGlzLmNvbnRlbnQubmF0aXZlRWxlbWVudC5zY3JvbGxUb3A7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIG5nQWZ0ZXJWaWV3Q2hlY2tlZCgpIHtcbiAgICAgICAgaWYgKHRoaXMudmlydHVhbCkge1xuICAgICAgICAgICAgdGhpcy5wb3NpdGlvbkl0ZW1zKCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMuaXRlbXMgJiYgdGhpcy5zY3JvbGxUb0ZvY3VzZWQpIHtcbiAgICAgICAgICAgIHRoaXMuc2Nyb2xsVG9Gb2N1c2VkID0gZmFsc2U7XG4gICAgICAgICAgICBjb25zdCBzY3JvbGxUYXJnZXQgPSB0aGlzLml0ZW1zLmxlbmd0aCAmJiB0aGlzLnNlbGVjdGlvblNlcnZpY2UuZm9jdXNlZCA9PT0gLTEgPyAwIDogdGhpcy5zZWxlY3Rpb25TZXJ2aWNlLmZvY3VzZWQ7XG4gICAgICAgICAgICB0aGlzLnNjcm9sbFRvSXRlbShzY3JvbGxUYXJnZXQpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLmRhdGFTZXJ2aWNlLmdyb3VwZWQpIHtcbiAgICAgICAgICAgIHRoaXMuZmluZEN1cnJlbnRHcm91cCgpO1xuICAgICAgICB9XG4gICAgfVxuICAgIG5nT25EZXN0cm95KCkge1xuICAgICAgICB0aGlzLnNlbGVjdFN1YnNjcmlwdGlvbi51bnN1YnNjcmliZSgpO1xuICAgICAgICBpZiAodGhpcy5zY3JvbGxTdWJzY3JpcHRpb24pIHtcbiAgICAgICAgICAgIHRoaXMuc2Nyb2xsU3Vic2NyaXB0aW9uLnVuc3Vic2NyaWJlKCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZmlyc3RWaXNpYmxlSXRlbSgpIHtcbiAgICAgICAgY29uc3QgY29udGVudCA9IHRoaXMuY29udGVudC5uYXRpdmVFbGVtZW50O1xuICAgICAgICBjb25zdCBjb250ZW50UGFyZW50ID0gY29udGVudC5vZmZzZXRQYXJlbnQ7XG4gICAgICAgIGNvbnN0IG9mZnNldFkgPSAoY29udGVudFBhcmVudCA/IGNvbnRlbnRQYXJlbnQub2Zmc2V0VG9wIDogMCkgKyBjb250ZW50Lm9mZnNldFRvcCArIDE7XG4gICAgICAgIGNvbnN0IG9mZnNldFggPSAoY29udGVudFBhcmVudCA/IGNvbnRlbnRQYXJlbnQub2Zmc2V0TGVmdCA6IDApICsgY29udGVudC5vZmZzZXRMZWZ0ICsgMTtcbiAgICAgICAgY29uc3QgaXRlbSA9IGRvY3VtZW50LmVsZW1lbnRGcm9tUG9pbnQob2Zmc2V0WCwgb2Zmc2V0WSk7XG4gICAgICAgIHJldHVybiBpdGVtO1xuICAgIH1cbiAgICBmaW5kQ3VycmVudEdyb3VwKCkge1xuICAgICAgICBpZiAoIXRoaXMuZGF0YVNlcnZpY2UuZ3JvdXBlZCkge1xuICAgICAgICAgICAgdGhpcy5jdXJyZW50R3JvdXAgPSB1bmRlZmluZWQ7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgaXRlbSA9IHRoaXMuZmlyc3RWaXNpYmxlSXRlbSgpO1xuICAgICAgICBpZiAoaXRlbSkge1xuICAgICAgICAgICAgbGV0IGluZGV4O1xuICAgICAgICAgICAgaWYgKGl0ZW0uZ2V0QXR0cmlidXRlKFwicm9sZVwiKSA9PT0gXCJncm91cFwiKSB7XG4gICAgICAgICAgICAgICAgaW5kZXggPSBwYXJzZUludChpdGVtLmdldEF0dHJpYnV0ZShcImdyb3VwLWluZGV4XCIpLCAxMCk7XG4gICAgICAgICAgICAgICAgdGhpcy5jdXJyZW50R3JvdXAgPSB0aGlzLmRhdGFTZXJ2aWNlLmdyb3VwQXQoaW5kZXgpLnZhbHVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgaW5kZXggPSBwYXJzZUludChpdGVtLmdldEF0dHJpYnV0ZShcImluZGV4XCIpLCAxMCk7XG4gICAgICAgICAgICAgICAgdGhpcy5jdXJyZW50R3JvdXAgPSB0aGlzLmRhdGFTZXJ2aWNlLml0ZW1Hcm91cCh0aGlzLmRhdGFTZXJ2aWNlLml0ZW1BdChpbmRleCkpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5jdXJyZW50R3JvdXAgPSB1bmRlZmluZWQ7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5jZHIuZGV0ZWN0Q2hhbmdlcygpO1xuICAgIH1cbiAgICBwcmVmZXRjaERhdGEoKSB7XG4gICAgICAgIGlmICghdGhpcy52aXJ0dWFsKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgdmlzaWJsZUl0ZW1zID0gTWF0aC50cnVuYyh0aGlzLmNvbnRlbnQubmF0aXZlRWxlbWVudC5jbGllbnRIZWlnaHQgLyB0aGlzLnZpcnR1YWwuaXRlbUhlaWdodCk7XG4gICAgICAgIGNvbnN0IG9mZnNldFkgPSB0aGlzLmNvbnRlbnQubmF0aXZlRWxlbWVudC5zY3JvbGxUb3A7XG4gICAgICAgIGNvbnN0IHN0YXJ0ID0gTWF0aC50cnVuYyhvZmZzZXRZIC8gdGhpcy52aXJ0dWFsLml0ZW1IZWlnaHQpO1xuICAgICAgICBjb25zdCBkb3duID0gb2Zmc2V0WSA+IHRoaXMubGFzdFNjcm9sbFRvcDtcbiAgICAgICAgY29uc3QgbmV4dFBhZ2UgPSAoc3RhcnQgKyB2aXNpYmxlSXRlbXMgPj0gdGhpcy5sYXN0TG9hZGVkKSAmJiB0aGlzLmxhc3RMb2FkZWQgPCB0aGlzLnZpcnR1YWwudG90YWwgLSAxO1xuICAgICAgICBjb25zdCBsZWZ0T3ZlciA9IHRoaXMucGFnZVNpemUgLSAodGhpcy5sYXN0TG9hZGVkIC0gdGhpcy5zdGFydEZyb20pO1xuICAgICAgICBjb25zdCBwcmV2UGFnZSA9IHRoaXMubGFzdExvYWRlZCAtIHRoaXMucGFnZVNpemUgKyB2aXNpYmxlSXRlbXMgPj0gc3RhcnQgLSBsZWZ0T3ZlcjtcbiAgICAgICAgaWYgKGRvd24gJiYgbmV4dFBhZ2UpIHtcbiAgICAgICAgICAgIHRoaXMuY2hhbmdlUGFnZShzdGFydCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFkb3duICYmIHByZXZQYWdlKSB7XG4gICAgICAgICAgICB0aGlzLmNoYW5nZVBhZ2Uoc3RhcnQgLSB0aGlzLnBhZ2VTaXplICsgdmlzaWJsZUl0ZW1zICsgMSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgY2hhbmdlUGFnZShzdGFydCkge1xuICAgICAgICB0aGlzLnpvbmUucnVuKCgpID0+IHtcbiAgICAgICAgICAgIGxldCBlbmQgPSB0aGlzLnBhZ2VTaXplICsgc3RhcnQ7XG4gICAgICAgICAgICBpZiAoZW5kID4gdGhpcy52aXJ0dWFsLnRvdGFsKSB7XG4gICAgICAgICAgICAgICAgc3RhcnQtLTtcbiAgICAgICAgICAgICAgICBlbmQgPSB0aGlzLnZpcnR1YWwudG90YWw7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoc3RhcnQgPCAwKSB7XG4gICAgICAgICAgICAgICAgc3RhcnQgPSAwO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5zdGFydEZyb20gPSBzdGFydDtcbiAgICAgICAgICAgIHRoaXMubGFzdExvYWRlZCA9IGVuZDtcbiAgICAgICAgICAgIHRoaXMucGFnZUNoYW5nZS5lbWl0KHsgc2tpcDogc3RhcnQsIHRha2U6IHRoaXMucGFnZVNpemUgfSk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBpbmRleChncm91cEluZGV4LCBpdGVtSW5kZXgpIHtcbiAgICAgICAgcmV0dXJuIGdyb3VwSW5kZXggPiAwID8gKHRoaXMuZGF0YVNlcnZpY2UuZ3JvdXBJbmRpY2VzW2dyb3VwSW5kZXggLSAxXSArIGl0ZW1JbmRleCkgOiBpdGVtSW5kZXg7XG4gICAgfVxuICAgIGdldFRleHQoZGF0YUl0ZW0pIHtcbiAgICAgICAgcmV0dXJuIGdldHRlcihkYXRhSXRlbSwgdGhpcy50ZXh0RmllbGQpO1xuICAgIH1cbiAgICBnZXRWYWx1ZShkYXRhSXRlbSkge1xuICAgICAgICByZXR1cm4gZ2V0dGVyKGRhdGFJdGVtLCB0aGlzLnZhbHVlRmllbGQpO1xuICAgIH1cbiAgICBpc0Rpc2FibGVkKGluZGV4KSB7XG4gICAgICAgIHJldHVybiB0aGlzLmRpc2FibGVkSXRlbXNTZXJ2aWNlLmlzSW5kZXhEaXNhYmxlZChpbmRleCk7XG4gICAgfVxuICAgIHNjcm9sbFRvSXRlbShpbmRleCkge1xuICAgICAgICBsZXQgZmxhdEluZGV4ID0gaW5kZXg7XG4gICAgICAgIGlmICh0aGlzLmRhdGFTZXJ2aWNlLmdyb3VwZWQpIHtcbiAgICAgICAgICAgIC8vIHRha2VzIGludG8gYWNjb3VudCB0aGUgZ3JvdXAgaGVhZGVyIGl0ZW1zXG4gICAgICAgICAgICBmbGF0SW5kZXggPSB0aGlzLmRhdGFTZXJ2aWNlLmZsYXRJbmRleChpbmRleCk7XG4gICAgICAgICAgICAvKiBUaGUgZmlyc3QgZ3JvdXAgaGVhZGVyIGl0ZW0gaXMgbm90IHJlbmRlcmVkIGluIHRoZSBsaXN0IChzZWUgdGVtcGxhdGUpLCBzbyBzdWJ0cmFjdCAxIHdoZW4gY2FsdWxhdGluZyB0aGUgZmxhdCBpbmRleC5cbiAgICAgICAgICAgICAgIFdpdGggdmlydHVhbGl6YXRpb24gZW5hYmxlZCwgdGhlIGZpcnN0IGdyb3VwIGhlYWRlciBjb3VsZCBiZSBpbiBhIHByZXZpb3VzIHBhZ2UsIGluIHdoaWNoIGNhc2UgZG9uJ3Qgc3VidHJhY3QgYW55dGhpbmcuICovXG4gICAgICAgICAgICBjb25zdCBncm91cEhlYWRlck9mZnNldCA9IHRoaXMuZmlyc3RHcm91cEhlYWRlckluVGFyZ2V0ZWRQYWdlKGZsYXRJbmRleCkgPyAtMSA6IDA7XG4gICAgICAgICAgICBmbGF0SW5kZXggKz0gZ3JvdXBIZWFkZXJPZmZzZXQ7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMudmlydHVhbCAmJiBmbGF0SW5kZXggPiAtMSkge1xuICAgICAgICAgICAgdGhpcy5zY3JvbGxUb0luZGV4KGZsYXRJbmRleCk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgaXRlbXMgPSB0aGlzLml0ZW1zLnRvQXJyYXkoKTtcbiAgICAgICAgaWYgKGlzUHJlc2VudChpdGVtc1tmbGF0SW5kZXhdKSAmJiBmbGF0SW5kZXggIT09IC0xKSB7XG4gICAgICAgICAgICB0aGlzLnNjcm9sbChpdGVtc1tmbGF0SW5kZXhdLmVsZW1lbnQpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHNjcm9sbFRvSW5kZXgoaW5kZXgpIHtcbiAgICAgICAgbGV0IGNvbnRlbnQgPSB0aGlzLmNvbnRlbnQubmF0aXZlRWxlbWVudDtcbiAgICAgICAgbGV0IGNvbnRlbnRTY3JvbGxUb3AgPSBjb250ZW50LnNjcm9sbFRvcDtcbiAgICAgICAgY29uc3QgaXRlbU9mZnNldFRvcCA9IGluZGV4ICogdGhpcy52aXJ0dWFsLml0ZW1IZWlnaHQ7XG4gICAgICAgIGNvbnN0IGl0ZW1PZmZzZXRIZWlnaHQgPSB0aGlzLnZpcnR1YWwuaXRlbUhlaWdodDtcbiAgICAgICAgY29uc3QgY29udGVudE9mZnNldEhlaWdodCA9IGNvbnRlbnQuY2xpZW50SGVpZ2h0O1xuICAgICAgICBjb25zdCBib3R0b21EaXN0YW5jZSA9IGl0ZW1PZmZzZXRUb3AgKyBpdGVtT2Zmc2V0SGVpZ2h0O1xuICAgICAgICBpZiAoY29udGVudFNjcm9sbFRvcCA+IGl0ZW1PZmZzZXRUb3ApIHtcbiAgICAgICAgICAgIGNvbnRlbnRTY3JvbGxUb3AgPSBpdGVtT2Zmc2V0VG9wO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGJvdHRvbURpc3RhbmNlID4gKGNvbnRlbnRTY3JvbGxUb3AgKyBjb250ZW50T2Zmc2V0SGVpZ2h0KSkge1xuICAgICAgICAgICAgY29udGVudFNjcm9sbFRvcCA9IChib3R0b21EaXN0YW5jZSAtIGNvbnRlbnRPZmZzZXRIZWlnaHQpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnRlbnQuc2Nyb2xsVG9wID0gY29udGVudFNjcm9sbFRvcDtcbiAgICB9XG4gICAgc2Nyb2xsKGl0ZW0pIHtcbiAgICAgICAgaWYgKCFpdGVtKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgbmF0aXZlRWxlbWVudCA9IGl0ZW0ubmF0aXZlRWxlbWVudDtcbiAgICAgICAgbGV0IGNvbnRlbnQgPSB0aGlzLmNvbnRlbnQubmF0aXZlRWxlbWVudCwgaXRlbU9mZnNldFRvcCA9IG5hdGl2ZUVsZW1lbnQub2Zmc2V0VG9wLCBpdGVtT2Zmc2V0SGVpZ2h0ID0gbmF0aXZlRWxlbWVudC5vZmZzZXRIZWlnaHQsIGNvbnRlbnRTY3JvbGxUb3AgPSBjb250ZW50LnNjcm9sbFRvcCwgY29udGVudE9mZnNldEhlaWdodCA9IGNvbnRlbnQuY2xpZW50SGVpZ2h0LCBib3R0b21EaXN0YW5jZSA9IGl0ZW1PZmZzZXRUb3AgKyBpdGVtT2Zmc2V0SGVpZ2h0O1xuICAgICAgICBpZiAoY29udGVudFNjcm9sbFRvcCA+IGl0ZW1PZmZzZXRUb3ApIHtcbiAgICAgICAgICAgIGNvbnRlbnRTY3JvbGxUb3AgPSBpdGVtT2Zmc2V0VG9wO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGJvdHRvbURpc3RhbmNlID4gKGNvbnRlbnRTY3JvbGxUb3AgKyBjb250ZW50T2Zmc2V0SGVpZ2h0KSkge1xuICAgICAgICAgICAgY29udGVudFNjcm9sbFRvcCA9IChib3R0b21EaXN0YW5jZSAtIGNvbnRlbnRPZmZzZXRIZWlnaHQpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnRlbnQuc2Nyb2xsVG9wID0gY29udGVudFNjcm9sbFRvcDtcbiAgICB9XG4gICAgcG9zaXRpb25JdGVtcygpIHtcbiAgICAgICAgdGhpcy5pdGVtcy5mb3JFYWNoKChpdGVtLCBpbmRleCkgPT4ge1xuICAgICAgICAgICAgY29uc3Qgb2Zmc2V0WSA9IChpbmRleCArIHRoaXMuc3RhcnRGcm9tKSAqIHRoaXMudmlydHVhbC5pdGVtSGVpZ2h0O1xuICAgICAgICAgICAgdGhpcy5yZW5kZXJlci5zZXRTdHlsZShpdGVtLmVsZW1lbnQubmF0aXZlRWxlbWVudCwgXCJ0cmFuc2Zvcm1cIiwgYHRyYW5zbGF0ZVkoJHtvZmZzZXRZfXB4YCk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBJbmRpY2F0ZXMgd2hldGhlciB0aGUgZmlyc3QgZ3JvdXAgaGVhZGVyIGZyb20gdGhlIGRhdGEgc2V0IGlzIGluIHRoZSB0YXJnZXRlZCB2aXJ0dWFsIHBhZ2UuXG4gICAgICovXG4gICAgZmlyc3RHcm91cEhlYWRlckluVGFyZ2V0ZWRQYWdlKGl0ZW1JbmRleCkge1xuICAgICAgICBpZiAoIWlzUHJlc2VudCh0aGlzLnZpcnR1YWwpKSB7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcy52aXJ0dWFsLnNraXAgPT09IDAgJiYgKHRoaXMudmlydHVhbC5wYWdlU2l6ZSA+IGl0ZW1JbmRleCk7XG4gICAgfVxufVxuTGlzdENvbXBvbmVudC5kZWNvcmF0b3JzID0gW1xuICAgIHsgdHlwZTogQ29tcG9uZW50LCBhcmdzOiBbe1xuICAgICAgICAgICAgICAgIHNlbGVjdG9yOiAna2VuZG8tbGlzdCcsXG4gICAgICAgICAgICAgICAgdGVtcGxhdGU6IGBcbiAgICA8ZGl2ICpuZ0lmPVwiZGF0YVNlcnZpY2UuZ3JvdXBlZFwiXG4gICAgICAgIGNsYXNzPSdrLW91dGVyLWdyb3VwLWhlYWRlciBrLWZpcnN0J1xuICAgICAgICBbbmdDbGFzc109XCJ7J2stdmlydHVhbC1pdGVtJzogdmlydHVhbH1cIlxuICAgICAgICBbbmdTdHlsZV09XCJ7XG4gICAgICAgICAgICAnaGVpZ2h0LnB4JzogdmlydHVhbD8uaXRlbUhlaWdodCxcbiAgICAgICAgICAgICdtaW5IZWlnaHQucHgnIDogdmlydHVhbD8uaXRlbUhlaWdodCxcbiAgICAgICAgICAgICdib3hTaXppbmcnIDogdmlydHVhbCA/ICdib3JkZXItYm94JyA6ICdpbmhlcml0J31cIlxuICAgICAgICA+XG4gICAgICAgIDxuZy10ZW1wbGF0ZSAqbmdJZj1cImZpeGVkR3JvdXBUZW1wbGF0ZVwiXG4gICAgICAgICAgICBbdGVtcGxhdGVDb250ZXh0XT1cIntcbiAgICAgICAgICAgICAgICB0ZW1wbGF0ZVJlZjogZml4ZWRHcm91cFRlbXBsYXRlLnRlbXBsYXRlUmVmLFxuICAgICAgICAgICAgICAgICRpbXBsaWNpdDogY3VycmVudEdyb3VwXG4gICAgICAgICAgICB9XCI+XG4gICAgICAgIDwvbmctdGVtcGxhdGU+XG4gICAgICAgIDxuZy10ZW1wbGF0ZSBbbmdJZl09XCIhZml4ZWRHcm91cFRlbXBsYXRlXCI+PHN0cm9uZz57eyBjdXJyZW50R3JvdXAgfX08L3N0cm9uZz4gPC9uZy10ZW1wbGF0ZT5cbiAgICA8L2Rpdj5cbiAgICA8ZGl2ICNjb250ZW50XG4gICAgICAgICBbbmdDbGFzc109XCJ7ICdrLXZpcnR1YWwtY29udGVudCc6IHZpcnR1YWwsICdrLWxpc3Qtc2Nyb2xsZXInOiAhdmlydHVhbCB9XCJcbiAgICAgICAgIFtzdHlsZS5tYXhIZWlnaHQucHhdPVwiaGVpZ2h0XCJcbiAgICAgICAgIHVuc2VsZWN0YWJsZT1cIm9uXCI+XG4gICAgPHVsICNsaXN0XG4gICAgICAgIHJvbGU9XCJsaXN0Ym94XCJcbiAgICAgICAgY2xhc3M9XCJrLWxpc3Qgay1yZXNldFwiXG4gICAgICAgIFtuZ0NsYXNzXT1cInsgJ2stdmlydHVhbC1saXN0JzogdmlydHVhbCB9XCJcbiAgICAgICAgW2F0dHIuaWRdPVwiaWRcIlxuICAgICAgICBbYXR0ci5hcmlhLWhpZGRlbl09XCIhc2hvd1wiPlxuICAgICAgICAgPG5nLXRlbXBsYXRlICpuZ0lmPVwiIWRhdGFTZXJ2aWNlLmdyb3VwZWQgJiYgc2hvd1wiIG5nRm9yIGxldC1kYXRhSXRlbSBsZXQtaXRlbUluZGV4PVwiaW5kZXhcIiBbbmdGb3JPZl09XCJkYXRhXCI+XG4gICAgICAgICAgICA8bGlcbiAgICAgICAgICAgICAgICByb2xlPVwib3B0aW9uXCJcbiAgICAgICAgICAgICAgICBrZW5kb0Ryb3BEb3duc1NlbGVjdGFibGVcbiAgICAgICAgICAgICAgICBbaGVpZ2h0XT1cInZpcnR1YWw/Lml0ZW1IZWlnaHRcIlxuICAgICAgICAgICAgICAgIFtpbmRleF09XCJpdGVtSW5kZXggKyBzdGFydEZyb21cIlxuICAgICAgICAgICAgICAgIFttdWx0aXBsZVNlbGVjdGlvbl09XCJtdWx0aXBsZVNlbGVjdGlvblwiXG4gICAgICAgICAgICAgICAgW2F0dHIuaWRdPVwib3B0aW9uUHJlZml4ICsgJy0nICsgZ2V0VmFsdWUoZGF0YUl0ZW0pXCJcbiAgICAgICAgICAgICAgICBbYXR0ci50YWJJbmRleF09XCItMVwiXG4gICAgICAgICAgICAgICAgY2xhc3M9XCJrLWl0ZW1cIlxuICAgICAgICAgICAgICAgIFtuZ0NsYXNzXT1cInsgJ2stdmlydHVhbC1pdGVtJzogdmlydHVhbCwgJ2stc3RhdGUtZGlzYWJsZWQnOiBpc0Rpc2FibGVkKGl0ZW1JbmRleCkgfVwiPlxuICAgICAgICAgICAgICAgIDxuZy10ZW1wbGF0ZSAqbmdJZj1cInRlbXBsYXRlXCJcbiAgICAgICAgICAgICAgICAgICAgW3RlbXBsYXRlQ29udGV4dF09XCJ7XG4gICAgICAgICAgICAgICAgICAgICAgICB0ZW1wbGF0ZVJlZjogdGVtcGxhdGUudGVtcGxhdGVSZWYsXG4gICAgICAgICAgICAgICAgICAgICAgICAkaW1wbGljaXQ6IGRhdGFJdGVtXG4gICAgICAgICAgICAgICAgICAgIH1cIj5cbiAgICAgICAgICAgICAgICA8L25nLXRlbXBsYXRlPlxuICAgICAgICAgICAgICAgIDxuZy10ZW1wbGF0ZSBbbmdJZl09XCIhdGVtcGxhdGVcIj57eyBnZXRUZXh0KGRhdGFJdGVtKSB9fTwvbmctdGVtcGxhdGU+XG4gICAgICAgICAgICA8L2xpPlxuICAgICAgICAgPC9uZy10ZW1wbGF0ZT5cbiAgICAgICAgIDxuZy10ZW1wbGF0ZSAqbmdJZj1cImRhdGFTZXJ2aWNlLmdyb3VwZWRcIiBuZ0ZvciBsZXQtZGF0YUl0ZW0gbGV0LWl0ZW1JbmRleD1cImluZGV4XCIgW25nRm9yT2ZdPVwiZGF0YVwiPlxuICAgICAgICAgICAgPGxpXG4gICAgICAgICAgICAgICAgKm5nSWY9XCJkYXRhSXRlbS5oZWFkZXIgJiYgZGF0YUl0ZW0uaW5kZXggPiAwXCJcbiAgICAgICAgICAgICAgICByb2xlPVwiZ3JvdXBcIlxuICAgICAgICAgICAgICAgIGNsYXNzPSdrLW91dGVyLWdyb3VwLWhlYWRlcidcbiAgICAgICAgICAgICAgICBbbmdDbGFzc109XCJ7ICdrLXZpcnR1YWwtaXRlbSc6IHZpcnR1YWwgfVwiXG4gICAgICAgICAgICAgICAgW25nU3R5bGVdPVwie1xuICAgICAgICAgICAgICAgICAgICAnaGVpZ2h0LnB4JzogdmlydHVhbD8uaXRlbUhlaWdodCxcbiAgICAgICAgICAgICAgICAgICAgJ21pbkhlaWdodC5weCcgOiB2aXJ0dWFsPy5pdGVtSGVpZ2h0LFxuICAgICAgICAgICAgICAgICAgICAnYm94U2l6aW5nJyA6IHZpcnR1YWwgPyAnYm9yZGVyLWJveCcgOiAnaW5oZXJpdCd9XCJcbiAgICAgICAgICAgICAgICBbYXR0ci5ncm91cC1pbmRleF09XCJkYXRhSXRlbS5pbmRleFwiXG4gICAgICAgICAgICAgICAgW2F0dHIuaWRdPVwib3B0aW9uUHJlZml4ICsgJy0nICsgZ2V0VmFsdWUoZGF0YUl0ZW0udmFsdWUpXCJcbiAgICAgICAgICAgICAgICBbYXR0ci50YWJJbmRleF09XCItMVwiPlxuICAgICAgICAgICAgICAgICAgICA8bmctdGVtcGxhdGUgKm5nSWY9XCJncm91cFRlbXBsYXRlXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgW3RlbXBsYXRlQ29udGV4dF09XCJ7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVtcGxhdGVSZWY6IGdyb3VwVGVtcGxhdGUudGVtcGxhdGVSZWYsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJGltcGxpY2l0OiBkYXRhSXRlbS52YWx1ZVxuICAgICAgICAgICAgICAgICAgICB9XCI+XG4gICAgICAgICAgICAgICAgICAgIDwvbmctdGVtcGxhdGU+XG4gICAgICAgICAgICAgICAgICAgIDxuZy10ZW1wbGF0ZSBbbmdJZl09XCIhZ3JvdXBUZW1wbGF0ZVwiPjxzdHJvbmc+IHt7IGRhdGFJdGVtLnZhbHVlIH19PC9zdHJvbmc+IDwvbmctdGVtcGxhdGU+XG4gICAgICAgICAgICAgIDwvbGk+XG4gICAgICAgICAgICA8bGlcbiAgICAgICAgICAgICAgICAqbmdJZj1cIiFkYXRhSXRlbS5oZWFkZXJcIlxuICAgICAgICAgICAgICAgIHJvbGU9XCJvcHRpb25cIlxuICAgICAgICAgICAgICAgIGtlbmRvRHJvcERvd25zU2VsZWN0YWJsZVxuICAgICAgICAgICAgICAgIFtoZWlnaHRdPVwidmlydHVhbD8uaXRlbUhlaWdodFwiXG4gICAgICAgICAgICAgICAgW2luZGV4XT1cImRhdGFJdGVtLm9mZnNldEluZGV4XCJcbiAgICAgICAgICAgICAgICBbbXVsdGlwbGVTZWxlY3Rpb25dPVwibXVsdGlwbGVTZWxlY3Rpb25cIlxuICAgICAgICAgICAgICAgIFthdHRyLmFic29sdXRlLWluZGV4XT1cImRhdGFJdGVtLmluZGV4XCJcbiAgICAgICAgICAgICAgICBbYXR0ci5pZF09XCJvcHRpb25QcmVmaXggKyAnLScgKyBnZXRWYWx1ZShkYXRhSXRlbS52YWx1ZSlcIlxuICAgICAgICAgICAgICAgIFthdHRyLnRhYkluZGV4XT1cIi0xXCJcbiAgICAgICAgICAgICAgICBjbGFzcz1cImstaXRlbVwiXG4gICAgICAgICAgICAgICAgW25nQ2xhc3NdPVwieyAnay12aXJ0dWFsLWl0ZW0nOiB2aXJ0dWFsLCAnay1zdGF0ZS1kaXNhYmxlZCc6IGlzRGlzYWJsZWQoZGF0YUl0ZW0ub2Zmc2V0SW5kZXgpIH1cIj5cbiAgICAgICAgICAgICAgICA8bmctdGVtcGxhdGUgKm5nSWY9XCJ0ZW1wbGF0ZVwiXG4gICAgICAgICAgICAgICAgICAgIFt0ZW1wbGF0ZUNvbnRleHRdPVwie1xuICAgICAgICAgICAgICAgICAgICAgICAgdGVtcGxhdGVSZWY6IHRlbXBsYXRlLnRlbXBsYXRlUmVmLFxuICAgICAgICAgICAgICAgICAgICAgICAgJGltcGxpY2l0OiBkYXRhSXRlbS52YWx1ZVxuICAgICAgICAgICAgICAgICAgICB9XCI+XG4gICAgICAgICAgICAgICAgPC9uZy10ZW1wbGF0ZT5cbiAgICAgICAgICAgICAgICA8bmctdGVtcGxhdGUgW25nSWZdPVwiIXRlbXBsYXRlXCI+e3sgZ2V0VGV4dChkYXRhSXRlbS52YWx1ZSkgfX08L25nLXRlbXBsYXRlPlxuICAgICAgICAgICAgPC9saT5cbiAgICAgICAgPC9uZy10ZW1wbGF0ZT5cbiAgICA8L3VsPlxuICAgIDxkaXYgKm5nSWY9XCJ2aXJ0dWFsXCIgY2xhc3M9XCJrLWhlaWdodC1jb250YWluZXJcIiByb2xlPVwicHJlc2VudGF0aW9uXCI+XG4gICAgICAgIDxkaXYgW3N0eWxlLmhlaWdodC5weF09XCJzY3JvbGxIZWlnaHRcIj48L2Rpdj5cbiAgICA8L2Rpdj5cbiAgICA8L2Rpdj5cbiAgYFxuICAgICAgICAgICAgfSxdIH0sXG5dO1xuLyoqIEBub2NvbGxhcHNlICovXG5MaXN0Q29tcG9uZW50LmN0b3JQYXJhbWV0ZXJzID0gKCkgPT4gW1xuICAgIHsgdHlwZTogRGF0YVNlcnZpY2UgfSxcbiAgICB7IHR5cGU6IEVsZW1lbnRSZWYgfSxcbiAgICB7IHR5cGU6IFNlbGVjdGlvblNlcnZpY2UgfSxcbiAgICB7IHR5cGU6IERpc2FibGVkSXRlbXNTZXJ2aWNlIH0sXG4gICAgeyB0eXBlOiBDaGFuZ2VEZXRlY3RvclJlZiB9LFxuICAgIHsgdHlwZTogTmdab25lIH0sXG4gICAgeyB0eXBlOiBSZW5kZXJlcjIgfVxuXTtcbkxpc3RDb21wb25lbnQucHJvcERlY29yYXRvcnMgPSB7XG4gICAgc2VsZWN0ZWQ6IFt7IHR5cGU6IElucHV0IH1dLFxuICAgIGZvY3VzZWQ6IFt7IHR5cGU6IElucHV0IH1dLFxuICAgIHRleHRGaWVsZDogW3sgdHlwZTogSW5wdXQgfV0sXG4gICAgdmFsdWVGaWVsZDogW3sgdHlwZTogSW5wdXQgfV0sXG4gICAgaGVpZ2h0OiBbeyB0eXBlOiBJbnB1dCB9XSxcbiAgICB0ZW1wbGF0ZTogW3sgdHlwZTogSW5wdXQgfV0sXG4gICAgZ3JvdXBUZW1wbGF0ZTogW3sgdHlwZTogSW5wdXQgfV0sXG4gICAgZml4ZWRHcm91cFRlbXBsYXRlOiBbeyB0eXBlOiBJbnB1dCB9XSxcbiAgICBzaG93OiBbeyB0eXBlOiBJbnB1dCB9XSxcbiAgICBpZDogW3sgdHlwZTogSW5wdXQgfV0sXG4gICAgb3B0aW9uUHJlZml4OiBbeyB0eXBlOiBJbnB1dCB9XSxcbiAgICBtdWx0aXBsZVNlbGVjdGlvbjogW3sgdHlwZTogSW5wdXQgfV0sXG4gICAgdmlydHVhbDogW3sgdHlwZTogSW5wdXQgfV0sXG4gICAgZGF0YTogW3sgdHlwZTogSW5wdXQgfV0sXG4gICAgb25DbGljazogW3sgdHlwZTogT3V0cHV0IH1dLFxuICAgIHBhZ2VDaGFuZ2U6IFt7IHR5cGU6IE91dHB1dCB9XSxcbiAgICBpdGVtczogW3sgdHlwZTogVmlld0NoaWxkcmVuLCBhcmdzOiBbTGlzdEl0ZW1EaXJlY3RpdmUsXSB9XSxcbiAgICBjb250ZW50OiBbeyB0eXBlOiBWaWV3Q2hpbGQsIGFyZ3M6IFsnY29udGVudCcsXSB9XSxcbiAgICBsaXN0OiBbeyB0eXBlOiBWaWV3Q2hpbGQsIGFyZ3M6IFsnbGlzdCcsXSB9XVxufTtcblxuLyoqXG4gKiBAaGlkZGVuXG4gKi9cbmNvbnN0IERFRkFVTFRTID0ge1xuICAgIHBhZ2VTaXplOiA1MCxcbiAgICBpdGVtSGVpZ2h0OiAyOFxufTtcbi8qKlxuICogQGhpZGRlblxuICovXG5jb25zdCBub3JtYWxpemVWaXJ0dWFsaXphdGlvblNldHRpbmdzID0gKHNldHRpbmdzKSA9PiB7XG4gICAgaWYgKHNldHRpbmdzID09PSB0cnVlKSB7XG4gICAgICAgIHJldHVybiBERUZBVUxUUztcbiAgICB9XG4gICAgaWYgKCFzZXR0aW5ncykge1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gICAgcmV0dXJuIE9iamVjdC5hc3NpZ24oeyBwYWdlU2l6ZTogREVGQVVMVFMucGFnZVNpemUgfSwgc2V0dGluZ3MpO1xufTtcblxuLyogdHNsaW50OmRpc2FibGU6bm8tbnVsbC1rZXl3b3JkICovXG5jb25zdCBOT19WQUxVRSA9IFwiXCI7XG4vKipcbiAqIEBoaWRkZW5cbiAqL1xuY29uc3QgQVVUT0NPTVBMRVRFX1ZBTFVFX0FDQ0VTU09SID0ge1xuICAgIG11bHRpOiB0cnVlLFxuICAgIHByb3ZpZGU6IE5HX1ZBTFVFX0FDQ0VTU09SLFxuICAgIC8vIHRzbGludDpkaXNhYmxlLW5leHQtbGluZTpuby11c2UtYmVmb3JlLWRlY2xhcmVcbiAgICB1c2VFeGlzdGluZzogZm9yd2FyZFJlZigoKSA9PiBBdXRvQ29tcGxldGVDb21wb25lbnQpXG59O1xuLyoqXG4gKiBSZXByZXNlbnRzIHRoZSBbS2VuZG8gVUkgQXV0b0NvbXBsZXRlIGNvbXBvbmVudCBmb3IgQW5ndWxhcl0oeyUgc2x1ZyBvdmVydmlld19hdXRvY29tcGxldGUgJX0pLlxuICpcbiAqIEBleGFtcGxlXG4gKiBgYGB0c1xuICogX0BDb21wb25lbnQoe1xuICogc2VsZWN0b3I6ICdteS1hcHAnLFxuICogdGVtcGxhdGU6IGBcbiAqICA8a2VuZG8tYXV0b2NvbXBsZXRlXG4gKiAgICAgIFtkYXRhXT1cImxpc3RJdGVtc1wiXG4gKiAgICAgIFtwbGFjZWhvbGRlcl09XCJwbGFjZWhvbGRlclwiXG4gKiAgPlxuICogYFxuICogfSlcbiAqIGNsYXNzIEFwcENvbXBvbmVudCB7XG4gKiAgIHB1YmxpYyBwbGFjZWhvbGRlcjogc3RyaW5nID0gJ1R5cGUgXCJpdFwiIGZvciBzdWdnZXN0aW9ucyc7XG4gKiAgIHB1YmxpYyBsaXN0SXRlbXM6IEFycmF5PHN0cmluZz4gPSBbXCJJdGVtIDFcIiwgXCJJdGVtIDJcIiwgXCJJdGVtIDNcIiwgXCJJdGVtIDRcIl07XG4gKiB9XG4gKiBgYGBcbiAqL1xuY2xhc3MgQXV0b0NvbXBsZXRlQ29tcG9uZW50IHtcbiAgICBjb25zdHJ1Y3Rvcihsb2NhbGl6YXRpb24sIGRhdGFTZXJ2aWNlLCBwb3B1cFNlcnZpY2UsIHNlbGVjdGlvblNlcnZpY2UsIG5hdmlnYXRpb25TZXJ2aWNlLCBkaXNhYmxlZEl0ZW1zU2VydmljZSwgX3pvbmUsIGNkciwgcmVuZGVyZXIsIHdyYXBwZXIpIHtcbiAgICAgICAgdGhpcy5sb2NhbGl6YXRpb24gPSBsb2NhbGl6YXRpb247XG4gICAgICAgIHRoaXMuZGF0YVNlcnZpY2UgPSBkYXRhU2VydmljZTtcbiAgICAgICAgdGhpcy5wb3B1cFNlcnZpY2UgPSBwb3B1cFNlcnZpY2U7XG4gICAgICAgIHRoaXMuc2VsZWN0aW9uU2VydmljZSA9IHNlbGVjdGlvblNlcnZpY2U7XG4gICAgICAgIHRoaXMubmF2aWdhdGlvblNlcnZpY2UgPSBuYXZpZ2F0aW9uU2VydmljZTtcbiAgICAgICAgdGhpcy5kaXNhYmxlZEl0ZW1zU2VydmljZSA9IGRpc2FibGVkSXRlbXNTZXJ2aWNlO1xuICAgICAgICB0aGlzLl96b25lID0gX3pvbmU7XG4gICAgICAgIHRoaXMuY2RyID0gY2RyO1xuICAgICAgICB0aGlzLnJlbmRlcmVyID0gcmVuZGVyZXI7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBEZWZpbmVzIHdoZXRoZXIgdGhlIGZpcnN0IG1hdGNoIGZyb20gdGhlIHN1Z2dlc3Rpb25zIGxpc3Qgd2lsbCBiZSBhdXRvbWF0aWNhbGx5IGZvY3VzZWQuXG4gICAgICAgICAqIEJ5IGRlZmF1bHQsIGBoaWdobGlnaHRGaXJzdGAgaXMgc2V0IHRvIGB0cnVlYC5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuaGlnaGxpZ2h0Rmlyc3QgPSB0cnVlO1xuICAgICAgICAvKipcbiAgICAgICAgICogQGhpZGRlblxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5mb2N1c2FibGVJZCA9IGBrLSR7Z3VpZCgpfWA7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBUaGUgaGludCB3aGljaCBpcyBkaXNwbGF5ZWQgd2hlbiB0aGUgY29tcG9uZW50IGlzIGVtcHR5LlxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5wbGFjZWhvbGRlciA9IFwiXCI7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBTZXRzIHRoZSBoZWlnaHQgb2YgdGhlIHN1Z2dlc3Rpb25zIGxpc3QuIEJ5IGRlZmF1bHQsIGBsaXN0SGVpZ2h0YCBpcyAyMDBweC5cbiAgICAgICAgICpcbiAgICAgICAgICogPiBUaGUgYGxpc3RIZWlnaHRgIHByb3BlcnR5IGFmZmVjdHMgb25seSB0aGUgbGlzdCBvZiBzdWdnZXN0aW9ucyBhbmQgbm90IHRoZSB3aG9sZSBwb3B1cCBjb250YWluZXIuXG4gICAgICAgICAqID4gVG8gc2V0IHRoZSBoZWlnaHQgb2YgdGhlIHBvcHVwIGNvbnRhaW5lciwgdXNlIGBwb3B1cFNldHRpbmdzLmhlaWdodGAuXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmxpc3RIZWlnaHQgPSAyMDA7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAaGlkZGVuXG4gICAgICAgICAqXG4gICAgICAgICAqIElmIHNldCB0byBgdHJ1ZWAsIHJlbmRlcnMgYSBidXR0b24gb24gaG92ZXJpbmcgb3ZlciB0aGUgY29tcG9uZW50LlxuICAgICAgICAgKiBDbGlja2luZyB0aGlzIGJ1dHRvbiByZXNldHMgdGhlIHZhbHVlIG9mIHRoZSBjb21wb25lbnQgdG8gYHVuZGVmaW5lZGAgYW5kIHRyaWdnZXJzIHRoZSBgY2hhbmdlYCBldmVudC5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuY2xlYXJCdXR0b24gPSB0cnVlO1xuICAgICAgICAvKipcbiAgICAgICAgICogU2V0cyB0aGUgZGlzYWJsZWQgc3RhdGUgb2YgdGhlIGNvbXBvbmVudC5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuZGlzYWJsZWQgPSBmYWxzZTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFNldHMgdGhlIHJlYWQtb25seSBzdGF0ZSBvZiB0aGUgY29tcG9uZW50LlxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5yZWFkb25seSA9IGZhbHNlO1xuICAgICAgICAvKipcbiAgICAgICAgICogU3BlY2lmaWVzIHRoZSBbYHRhYmluZGV4YF0oaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvSFRNTC9HbG9iYWxfYXR0cmlidXRlcy90YWJpbmRleCkgb2YgdGhlIGNvbXBvbmVudC5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMudGFiaW5kZXggPSAwO1xuICAgICAgICAvKipcbiAgICAgICAgICogRW5hYmxlcyB0aGUgW2ZpbHRlcmluZ10oeyUgc2x1ZyBmaWx0ZXJpbmdfYXV0b2NvbXBsZXRlICV9KSBmdW5jdGlvbmFsaXR5LlxuICAgICAgICAgKiBJZiBzZXQgdG8gYHRydWVgLCB0aGUgY29tcG9uZW50IGVtaXRzIHRoZSBgZmlsdGVyQ2hhbmdlYCBldmVudC5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuZmlsdGVyYWJsZSA9IGZhbHNlO1xuICAgICAgICAvKipcbiAgICAgICAgICogRmlyZXMgZWFjaCB0aW1lIHRoZSB2YWx1ZSBpcyBjaGFuZ2VkJm1kYXNoO1xuICAgICAgICAgKiB3aGVuIHRoZSBjb21wb25lbnQgaXMgYmx1cnJlZCBvciB0aGUgdmFsdWUgaXMgY2xlYXJlZCB0aHJvdWdoIHRoZSAqKkNsZWFyKiogYnV0dG9uXG4gICAgICAgICAqIChbc2VlIGV4YW1wbGVdKHslIHNsdWcgb3ZlcnZpZXdfYXV0b2NvbXBsZXRlICV9I3RvYy1ldmVudHMpKS5cbiAgICAgICAgICogV2hlbiB0aGUgdmFsdWUgb2YgdGhlIGNvbXBvbmVudCBpcyBwcm9ncmFtbWF0aWNhbGx5IGNoYW5nZWQgdG8gYG5nTW9kZWxgIG9yIGBmb3JtQ29udHJvbGBcbiAgICAgICAgICogdGhyb3VnaCBpdHMgQVBJIG9yIGZvcm0gYmluZGluZywgdGhlIGB2YWx1ZUNoYW5nZWAgZXZlbnQgaXMgbm90IHRyaWdnZXJlZCBiZWNhdXNlIGl0XG4gICAgICAgICAqIG1pZ2h0IGNhdXNlIGEgbWl4LXVwIHdpdGggdGhlIGJ1aWx0LWluIGB2YWx1ZUNoYW5nZWAgbWVjaGFuaXNtcyBvZiB0aGUgYG5nTW9kZWxgIG9yIGBmb3JtQ29udHJvbGAgYmluZGluZ3MuXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLnZhbHVlQ2hhbmdlID0gbmV3IEV2ZW50RW1pdHRlcigpO1xuICAgICAgICAvKipcbiAgICAgICAgICogRmlyZXMgZWFjaCB0aW1lIHRoZSB1c2VyIHR5cGVzIGluIHRoZSBpbnB1dCBmaWVsZC5cbiAgICAgICAgICogWW91IGNhbiBmaWx0ZXIgdGhlIHNvdXJjZSBiYXNlZCBvbiB0aGUgcGFzc2VkIGZpbHRyYXRpb24gdmFsdWVcbiAgICAgICAgICogKFtzZWUgZXhhbXBsZV0oeyUgc2x1ZyBvdmVydmlld19hdXRvY29tcGxldGUgJX0jdG9jLWV2ZW50cykpLlxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5maWx0ZXJDaGFuZ2UgPSBuZXcgRXZlbnRFbWl0dGVyKCk7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBGaXJlcyBlYWNoIHRpbWUgdGhlIHBvcHVwIGlzIGFib3V0IHRvIG9wZW4uXG4gICAgICAgICAqIFRoaXMgZXZlbnQgaXMgcHJldmVudGFibGUuIElmIHlvdSBjYW5jZWwgaXQsIHRoZSBwb3B1cCB3aWxsIHJlbWFpbiBjbG9zZWQuXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLm9wZW4gPSBuZXcgRXZlbnRFbWl0dGVyKCk7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBGaXJlcyBlYWNoIHRpbWUgdGhlIHBvcHVwIGlzIGFib3V0IHRvIGNsb3NlLlxuICAgICAgICAgKiBUaGlzIGV2ZW50IGlzIHByZXZlbnRhYmxlLiBJZiB5b3UgY2FuY2VsIGl0LCB0aGUgcG9wdXAgd2lsbCByZW1haW4gb3Blbi5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuY2xvc2UgPSBuZXcgRXZlbnRFbWl0dGVyKCk7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBGaXJlcyBlYWNoIHRpbWUgdGhlIHVzZXIgZm9jdXNlcyB0aGUgQXV0b0NvbXBsZXRlLlxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5vbkZvY3VzID0gbmV3IEV2ZW50RW1pdHRlcigpOyAvL3RzbGludDpkaXNhYmxlLWxpbmU6bm8tb3V0cHV0LXJlbmFtZVxuICAgICAgICAvKipcbiAgICAgICAgICogRmlyZXMgZWFjaCB0aW1lIHRoZSBBdXRvQ29tcGxldGUgZ2V0cyBibHVycmVkLlxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5vbkJsdXIgPSBuZXcgRXZlbnRFbWl0dGVyKCk7IC8vdHNsaW50OmRpc2FibGUtbGluZTpuby1vdXRwdXQtcmVuYW1lXG4gICAgICAgIHRoaXMud2lkZ2V0Q2xhc3NlcyA9IHRydWU7XG4gICAgICAgIHRoaXMubGlzdEJveElkID0gZ3VpZCgpO1xuICAgICAgICB0aGlzLm9wdGlvblByZWZpeCA9IGd1aWQoKTtcbiAgICAgICAgdGhpcy5vbkNoYW5nZUNhbGxiYWNrID0gKF92YWx1ZSkgPT4geyB9O1xuICAgICAgICB0aGlzLm9uVG91Y2hlZENhbGxiYWNrID0gKF8pID0+IHsgfTtcbiAgICAgICAgdGhpcy5wb3B1cE1vdXNlRG93bkhhbmRsZXIgPSAoZXZlbnQpID0+IGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIHRoaXMuX3BvcHVwU2V0dGluZ3MgPSB7IGFuaW1hdGU6IHRydWUgfTtcbiAgICAgICAgdGhpcy5fb3BlbiA9IGZhbHNlO1xuICAgICAgICB0aGlzLl92YWx1ZSA9IFwiXCI7XG4gICAgICAgIHRoaXMuX3ByZXZpb3VzVmFsdWUgPSBOT19WQUxVRTtcbiAgICAgICAgdGhpcy5fZmlsdGVyaW5nID0gZmFsc2U7XG4gICAgICAgIHRoaXMudmFsdWVDaGFuZ2VTdWJqZWN0ID0gbmV3IFN1YmplY3QoKTtcbiAgICAgICAgdGhpcy5faXNGb2N1c2VkID0gZmFsc2U7XG4gICAgICAgIHRoaXMuZGlyZWN0aW9uID0gbG9jYWxpemF0aW9uLnJ0bCA/ICdydGwnIDogJ2x0cic7XG4gICAgICAgIHRoaXMud3JhcHBlciA9IHdyYXBwZXIubmF0aXZlRWxlbWVudDtcbiAgICAgICAgdGhpcy5kYXRhID0gW107XG4gICAgICAgIHRoaXMuc3Vic2NyaWJlRXZlbnRzKCk7XG4gICAgICAgIHRoaXMuc2VsZWN0aW9uU2VydmljZS5yZXNldFNlbGVjdGlvbihbLTFdKTtcbiAgICB9XG4gICAgZ2V0IHdpZHRoKCkge1xuICAgICAgICBsZXQgd3JhcHBlck9mZnNldFdpZHRoID0gMDtcbiAgICAgICAgaWYgKGlzRG9jdW1lbnRBdmFpbGFibGUoKSkge1xuICAgICAgICAgICAgd3JhcHBlck9mZnNldFdpZHRoID0gdGhpcy53cmFwcGVyLm9mZnNldFdpZHRoO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHdpZHRoID0gdGhpcy5wb3B1cFNldHRpbmdzLndpZHRoIHx8IHdyYXBwZXJPZmZzZXRXaWR0aDtcbiAgICAgICAgY29uc3QgbWluV2lkdGggPSBpc05hTih3cmFwcGVyT2Zmc2V0V2lkdGgpID8gd3JhcHBlck9mZnNldFdpZHRoIDogYCR7d3JhcHBlck9mZnNldFdpZHRofXB4YDtcbiAgICAgICAgY29uc3QgbWF4V2lkdGggPSBpc05hTih3aWR0aCkgPyB3aWR0aCA6IGAke3dpZHRofXB4YDtcbiAgICAgICAgcmV0dXJuIHsgbWluOiBtaW5XaWR0aCwgbWF4OiBtYXhXaWR0aCB9O1xuICAgIH1cbiAgICBnZXQgaGVpZ2h0KCkge1xuICAgICAgICBjb25zdCBwb3B1cEhlaWdodCA9IHRoaXMucG9wdXBTZXR0aW5ncy5oZWlnaHQ7XG4gICAgICAgIHJldHVybiBpc1ByZXNlbnQocG9wdXBIZWlnaHQpID8gYCR7cG9wdXBIZWlnaHR9cHhgIDogJ2F1dG8nO1xuICAgIH1cbiAgICBnZXQgbGlzdENvbnRhaW5lckNsYXNzZXMoKSB7XG4gICAgICAgIGNvbnN0IGNvbnRhaW5lckNsYXNzZXMgPSBbJ2stbGlzdC1jb250YWluZXInLCAnay1yZXNldCddO1xuICAgICAgICBpZiAodGhpcy5wb3B1cFNldHRpbmdzLnBvcHVwQ2xhc3MpIHtcbiAgICAgICAgICAgIGNvbnRhaW5lckNsYXNzZXMucHVzaCh0aGlzLnBvcHVwU2V0dGluZ3MucG9wdXBDbGFzcyk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGNvbnRhaW5lckNsYXNzZXM7XG4gICAgfVxuICAgIGdldCBzdWdnZXN0aW9uKCkge1xuICAgICAgICBpZiAoIXRoaXMudGV4dCB8fCAhdGhpcy5zdWdnZXN0ZWRUZXh0KSB7XG4gICAgICAgICAgICB0aGlzLnN1Z2dlc3RlZFRleHQgPSB1bmRlZmluZWQ7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgaGFzTWF0Y2ggPSB0aGlzLnN1Z2dlc3RlZFRleHQudG9Mb3dlckNhc2UoKS5zdGFydHNXaXRoKHRoaXMudGV4dC50b0xvd2VyQ2FzZSgpKTtcbiAgICAgICAgY29uc3Qgc2hvdWxkU3VnZ2VzdCA9IHRoaXMuc3VnZ2VzdCAmJiAhdGhpcy5iYWNrc3BhY2VQcmVzc2VkO1xuICAgICAgICBpZiAoc2hvdWxkU3VnZ2VzdCAmJiBoYXNNYXRjaCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuc3VnZ2VzdGVkVGV4dDtcbiAgICAgICAgfVxuICAgIH1cbiAgICBnZXQgYXBwZW5kVG8oKSB7XG4gICAgICAgIGNvbnN0IHsgYXBwZW5kVG8gfSA9IHRoaXMucG9wdXBTZXR0aW5ncztcbiAgICAgICAgaWYgKCFhcHBlbmRUbyB8fCBhcHBlbmRUbyA9PT0gJ3Jvb3QnKSB7XG4gICAgICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBhcHBlbmRUbyA9PT0gJ2NvbXBvbmVudCcgPyB0aGlzLmNvbnRhaW5lciA6IGFwcGVuZFRvO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBUb2dnbGVzIHRoZSB2aXNpYmlsaXR5IG9mIHRoZSBwb3B1cC5cbiAgICAgKiBJZiB5b3UgdXNlIHRoZSBgdG9nZ2xlYCBtZXRob2QgdG8gb3BlbiBvciBjbG9zZSB0aGUgcG9wdXAsIHRoZSBgb3BlbmAgYW5kIGBjbG9zZWAgZXZlbnRzIHdpbGwgbm90IGJlIGZpcmVkLlxuICAgICAqXG4gICAgICogQHBhcmFtIG9wZW4gLSBUaGUgc3RhdGUgb2YgdGhlIHBvcHVwLlxuICAgICAqL1xuICAgIHRvZ2dsZShvcGVuKSB7XG4gICAgICAgIFByb21pc2UucmVzb2x2ZShudWxsKS50aGVuKCgpID0+IHtcbiAgICAgICAgICAgIHRoaXMuX3RvZ2dsZShvcGVuKTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHVybnMgdGhlIGN1cnJlbnQgb3BlbiBzdGF0ZSBvZiB0aGUgcG9wdXAuXG4gICAgICovXG4gICAgZ2V0IGlzT3BlbigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX29wZW47XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEBoaWRkZW5cbiAgICAgKi9cbiAgICB0b2dnbGVQb3B1cChvcGVuKSB7XG4gICAgICAgIGNvbnN0IGlzRGlzYWJsZWQgPSB0aGlzLmRpc2FibGVkIHx8IHRoaXMucmVhZG9ubHk7XG4gICAgICAgIGNvbnN0IHNhbWVTdGF0ZSA9IHRoaXMuaXNPcGVuID09PSBvcGVuO1xuICAgICAgICBpZiAoaXNEaXNhYmxlZCB8fCBzYW1lU3RhdGUpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBpc0RlZmF1bHRQcmV2ZW50ZWQgPSB0aGlzLnRyaWdnZXJQb3B1cEV2ZW50cyhvcGVuKTtcbiAgICAgICAgaWYgKCFpc0RlZmF1bHRQcmV2ZW50ZWQpIHtcbiAgICAgICAgICAgIHRoaXMuX3RvZ2dsZShvcGVuKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBnZXQgYWN0aXZlRGVzY2VuZGFudCgpIHtcbiAgICAgICAgaWYgKCF0aGlzLmlzT3BlbiB8fCAhaXNQcmVzZW50KHRoaXMuc2VsZWN0aW9uU2VydmljZS5mb2N1c2VkKSB8fCB0aGlzLnNlbGVjdGlvblNlcnZpY2UuZm9jdXNlZCA9PT0gLTEpIHtcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGRhdGFJdGVtID0gdGhpcy5kYXRhU2VydmljZS5pdGVtQXQodGhpcy5zZWxlY3Rpb25TZXJ2aWNlLmZvY3VzZWQpO1xuICAgICAgICByZXR1cm4gdGhpcy5vcHRpb25QcmVmaXggKyBcIi1cIiArIGdldHRlcihkYXRhSXRlbSwgdGhpcy52YWx1ZUZpZWxkKTtcbiAgICB9XG4gICAgZ2V0IG5vRGF0YUxhYmVsKCkge1xuICAgICAgICBpZiAodGhpcy5kYXRhLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMubm9EYXRhVGV4dDtcbiAgICAgICAgfVxuICAgIH1cbiAgICBnZXQgY2xlYXJUaXRsZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubG9jYWxpemF0aW9uLmdldCgnY2xlYXJUaXRsZScpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBTZXRzIHRoZSBkYXRhIG9mIHRoZSBBdXRvQ29tcGxldGUuXG4gICAgICpcbiAgICAgKiA+IFRoZSBkYXRhIGhhcyB0byBiZSBwcm92aWRlZCBpbiBhbiBhcnJheS1saWtlIGxpc3QuXG4gICAgICovXG4gICAgc2V0IGRhdGEoZGF0YSkge1xuICAgICAgICB0aGlzLmRhdGFTZXJ2aWNlLmRhdGEgPSBkYXRhIHx8IFtdO1xuICAgICAgICBpZiAodGhpcy52aXJ0dWFsKSB7XG4gICAgICAgICAgICB0aGlzLnZpcnR1YWwuc2tpcCA9IDA7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh0aGlzLnZhbHVlKTtcbiAgICAgICAgaWYgKHRoaXMuZmlsdGVyYWJsZSkge1xuICAgICAgICAgICAgdGhpcy5zZWxlY3Rpb25TZXJ2aWNlLmZvY3VzZWQgPSB0aGlzLmlzT3BlbiAmJiB0aGlzLmRhdGEubGVuZ3RoICYmIHRoaXMuaGlnaGxpZ2h0Rmlyc3QgPyB0aGlzLmZpcnN0Rm9jdXNhYmxlSW5kZXgoMCkgOiAtMTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5zdWdnZXN0ICYmIHRoaXMuZGF0YVNlcnZpY2UuaXRlbXNDb3VudCA+IDApIHtcbiAgICAgICAgICAgIHRoaXMuc3VnZ2VzdGVkVGV4dCA9IGdldHRlcih0aGlzLmRhdGFTZXJ2aWNlLml0ZW1BdCgwKSwgdGhpcy52YWx1ZUZpZWxkKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBnZXQgZGF0YSgpIHtcbiAgICAgICAgY29uc3QgdmlydHVhbCA9IHRoaXMudmlydHVhbDtcbiAgICAgICAgaWYgKHZpcnR1YWwpIHtcbiAgICAgICAgICAgIGNvbnN0IHN0YXJ0ID0gdmlydHVhbC5za2lwIHx8IDA7XG4gICAgICAgICAgICBjb25zdCBlbmQgPSBzdGFydCArIHZpcnR1YWwucGFnZVNpemU7XG4gICAgICAgICAgICAvLyBVc2UgbGVuZ3RoIGluc3RlYWQgb2YgaXRlbXNDb3VudCBiZWNhdXNlIG9mIHRoZSBncm91cGluZy5cbiAgICAgICAgICAgIHZpcnR1YWwudG90YWwgPSB0aGlzLmRhdGFTZXJ2aWNlLmRhdGEubGVuZ3RoO1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZGF0YVNlcnZpY2UuZGF0YS5zbGljZShzdGFydCwgZW5kKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcy5kYXRhU2VydmljZS5kYXRhO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBTZXRzIHRoZSB2YWx1ZSBvZiB0aGUgQXV0b0NvbXBsZXRlLlxuICAgICAqL1xuICAgIHNldCB2YWx1ZShuZXdWYWx1ZSkge1xuICAgICAgICB0aGlzLnZlcmlmeVNldHRpbmdzKG5ld1ZhbHVlKTtcbiAgICAgICAgdGhpcy5fdmFsdWUgPSBuZXdWYWx1ZSB8fCBOT19WQUxVRTtcbiAgICAgICAgdGhpcy5jZHIubWFya0ZvckNoZWNrKCk7XG4gICAgfVxuICAgIGdldCB2YWx1ZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3ZhbHVlIHx8IE5PX1ZBTFVFO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDb25maWd1cmVzIHRoZSBwb3B1cCBvZiB0aGUgQXV0b0NvbXBsZXRlLlxuICAgICAqXG4gICAgICogVGhlIGF2YWlsYWJsZSBvcHRpb25zIGFyZTpcbiAgICAgKiAtIGBhbmltYXRlOiBCb29sZWFuYCZtZGFzaDtDb250cm9scyB0aGUgcG9wdXAgYW5pbWF0aW9uLiBCeSBkZWZhdWx0LCB0aGUgb3BlbiBhbmQgY2xvc2UgYW5pbWF0aW9ucyBhcmUgZW5hYmxlZC5cbiAgICAgKiAtIGB3aWR0aDogTnVtYmVyIHwgU3RyaW5nYCZtZGFzaDtTZXRzIHRoZSB3aWR0aCBvZiB0aGUgcG9wdXAgY29udGFpbmVyLiBCeSBkZWZhdWx0LCB0aGUgd2lkdGggb2YgdGhlIGhvc3QgZWxlbWVudCBpcyB1c2VkLiBJZiBzZXQgdG8gYGF1dG9gLCB0aGUgY29tcG9uZW50IGF1dG9tYXRpY2FsbHkgYWRqdXN0cyB0aGUgd2lkdGggb2YgdGhlIHBvcHVwIGFuZCBubyBpdGVtIGxhYmVscyBhcmUgd3JhcHBlZC4gVGhlIGBhdXRvYCBtb2RlIGlzIG5vdCBzdXBwb3J0ZWQgd2hlbiB2aXJ0dWFsIHNjcm9sbGluZyBpcyBlbmFibGVkLlxuICAgICAqIC0gYGhlaWdodDogTnVtYmVyYCZtZGFzaDtTZXRzIHRoZSBoZWlnaHQgb2YgdGhlIHBvcHVwIGNvbnRhaW5lci5cbiAgICAgKiAtIGBwb3B1cENsYXNzOiBTdHJpbmdgJm1kYXNoO1NwZWNpZmllcyBhIGxpc3Qgb2YgQ1NTIGNsYXNzZXMgdGhhdCBhcmUgdXNlZCB0byBzdHlsZSB0aGUgcG9wdXAuXG4gICAgICogLSBgYXBwZW5kVG86IFwicm9vdFwiIHwgXCJjb21wb25lbnRcIiB8IFZpZXdDb250YWluZXJSZWZgJm1kYXNoO1NwZWNpZmllcyB0aGUgY29tcG9uZW50IHRvIHdoaWNoIHRoZSBwb3B1cCB3aWxsIGJlIGFwcGVuZGVkLlxuICAgICAqL1xuICAgIHNldCBwb3B1cFNldHRpbmdzKHNldHRpbmdzKSB7XG4gICAgICAgIHRoaXMuX3BvcHVwU2V0dGluZ3MgPSBPYmplY3QuYXNzaWduKHsgYW5pbWF0ZTogdHJ1ZSB9LCBzZXR0aW5ncyk7XG4gICAgfVxuICAgIGdldCBwb3B1cFNldHRpbmdzKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fcG9wdXBTZXR0aW5ncztcbiAgICB9XG4gICAgLyoqXG4gICAgICogRGVmaW5lcyBhIEJvb2xlYW4gZnVuY3Rpb24gdGhhdCBpcyBleGVjdXRlZCBmb3IgZWFjaCBkYXRhIGl0ZW0gaW4gdGhlIGNvbXBvbmVudFxuICAgICAqIChbc2VlIGV4YW1wbGVzXSh7JSBzbHVnIGRpc2FibGVkaXRlbXNfYXV0b2NvbXBsZXRlICV9KSkuXG4gICAgICogRGV0ZXJtaW5lcyB3aGV0aGVyIHRoZSBpdGVtIHdpbGwgYmUgZGlzYWJsZWQuXG4gICAgICovXG4gICAgc2V0IGl0ZW1EaXNhYmxlZChmbikge1xuICAgICAgICBpZiAodHlwZW9mIGZuICE9PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYGl0ZW1EaXNhYmxlZCBtdXN0IGJlIGEgZnVuY3Rpb24sIGJ1dCByZWNlaXZlZCAke0pTT04uc3RyaW5naWZ5KGZuKX0uYCk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5kaXNhYmxlZEl0ZW1zU2VydmljZS5pdGVtRGlzYWJsZWQgPSBmbjtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQGhpZGRlblxuICAgICAqL1xuICAgIHNldCB0YWJJbmRleCh0YWJJbmRleCkge1xuICAgICAgICB0aGlzLnRhYmluZGV4ID0gdGFiSW5kZXg7XG4gICAgfVxuICAgIGdldCB0YWJJbmRleCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudGFiaW5kZXg7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEVuYWJsZXMgdGhlIFt2aXJ0dWFsaXphdGlvbl0oeyUgc2x1ZyB2aXJ0dWFsaXphdGlvbl9hdXRvY29tcGxldGUgJX0pIGZ1bmN0aW9uYWxpdHkuXG4gICAgICovXG4gICAgc2V0IHZpcnR1YWwoc2V0dGluZ3MpIHtcbiAgICAgICAgdGhpcy5fdmlydHVhbFNldHRpbmdzID0gbm9ybWFsaXplVmlydHVhbGl6YXRpb25TZXR0aW5ncyhzZXR0aW5ncyk7XG4gICAgfVxuICAgIGdldCB2aXJ0dWFsKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fdmlydHVhbFNldHRpbmdzO1xuICAgIH1cbiAgICBnZXQgaXNGb2N1c2VkKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5faXNGb2N1c2VkO1xuICAgIH1cbiAgICBzZXQgaXNGb2N1c2VkKGlzRm9jdXNlZCkge1xuICAgICAgICB0aGlzLl9pc0ZvY3VzZWQgPSBpc0ZvY3VzZWQ7XG4gICAgfVxuICAgIGdldCBpc0Rpc2FibGVkKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5kaXNhYmxlZDtcbiAgICB9XG4gICAgZ2V0IGRpcigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZGlyZWN0aW9uO1xuICAgIH1cbiAgICBuZ09uSW5pdCgpIHtcbiAgICAgICAgdGhpcy5yZW5kZXJlci5yZW1vdmVBdHRyaWJ1dGUodGhpcy53cmFwcGVyLCBcInRhYmluZGV4XCIpO1xuICAgICAgICB0aGlzLmxvY2FsaXphdGlvbkNoYW5nZVN1YnNjcmlwdGlvbiA9IHRoaXMubG9jYWxpemF0aW9uXG4gICAgICAgICAgICAuY2hhbmdlc1xuICAgICAgICAgICAgLnN1YnNjcmliZSgoeyBydGwgfSkgPT4ge1xuICAgICAgICAgICAgdGhpcy5kaXJlY3Rpb24gPSBydGwgPyAncnRsJyA6ICdsdHInO1xuICAgICAgICAgICAgdGhpcy5zZXRNZXNzYWdlcygpO1xuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5zZXRNZXNzYWdlcygpO1xuICAgIH1cbiAgICBuZ09uRGVzdHJveSgpIHtcbiAgICAgICAgdGhpcy5kZXN0cm95UG9wdXAoKTtcbiAgICAgICAgdGhpcy51bnN1YnNjcmliZUV2ZW50cygpO1xuICAgICAgICBjbGVhclRpbWVvdXQodGhpcy5tZXNzYWdlc1RpbWVvdXQpO1xuICAgICAgICBpZiAodGhpcy5sb2NhbGl6YXRpb25DaGFuZ2VTdWJzY3JpcHRpb24pIHtcbiAgICAgICAgICAgIHRoaXMubG9jYWxpemF0aW9uQ2hhbmdlU3Vic2NyaXB0aW9uLnVuc3Vic2NyaWJlKCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgbmdPbkNoYW5nZXMoY2hhbmdlcykge1xuICAgICAgICBjb25zdCB2aXJ0dWFsID0gdGhpcy52aXJ0dWFsO1xuICAgICAgICBjb25zdCByZXF1ZXN0SW5pdGlhbERhdGEgPSB2aXJ0dWFsICYmIGNoYW5nZXMuZGF0YSAmJiBjaGFuZ2VzLmRhdGEuaXNGaXJzdENoYW5nZSgpO1xuICAgICAgICBpZiAocmVxdWVzdEluaXRpYWxEYXRhKSB7XG4gICAgICAgICAgICB0aGlzLnBhZ2VDaGFuZ2UoeyBza2lwOiAwLCB0YWtlOiB2aXJ0dWFsLnBhZ2VTaXplIH0pO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IFNUQVRFX1BST1BTID0gLyh2YWx1ZXx2YWx1ZUZpZWxkKS9nO1xuICAgICAgICBpZiAoU1RBVEVfUFJPUFMudGVzdChPYmplY3Qua2V5cyhjaGFuZ2VzKS5qb2luKCkpKSB7XG4gICAgICAgICAgICB0aGlzLnNldFN0YXRlKHRoaXMudmFsdWUpO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJlc2V0cyB0aGUgdmFsdWUgb2YgdGhlIEF1dG9Db21wbGV0ZS5cbiAgICAgKiBJZiB5b3UgdXNlIHRoZSBgcmVzZXRgIG1ldGhvZCB0byBjbGVhciB0aGUgdmFsdWUgb2YgdGhlIGNvbXBvbmVudCxcbiAgICAgKiB0aGUgbW9kZWwgd2lsbCBub3QgdXBkYXRlIGF1dG9tYXRpY2FsbHkgYW5kIHRoZSBgc2VsZWN0aW9uQ2hhbmdlYCBhbmQgYHZhbHVlQ2hhbmdlYCBldmVudHMgd2lsbCBub3QgYmUgZmlyZWQuXG4gICAgICovXG4gICAgcmVzZXQoKSB7XG4gICAgICAgIHRoaXMuc2V0U3RhdGUoTk9fVkFMVUUpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAaGlkZGVuXG4gICAgICovXG4gICAgY2xlYXJWYWx1ZShldmVudCkge1xuICAgICAgICBldmVudC5zdG9wSW1tZWRpYXRlUHJvcGFnYXRpb24oKTtcbiAgICAgICAgdGhpcy5mb2N1cygpO1xuICAgICAgICB0aGlzLmNoYW5nZShOT19WQUxVRSk7XG4gICAgICAgIGlmICh0aGlzLmZpbHRlcmFibGUpIHtcbiAgICAgICAgICAgIHRoaXMuZmlsdGVyQ2hhbmdlLmVtaXQoJycpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuc2VsZWN0aW9uU2VydmljZS5yZXNldFNlbGVjdGlvbihbXSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEBoaWRkZW5cbiAgICAgKi9cbiAgICB3cml0ZVZhbHVlKHZhbHVlKSB7XG4gICAgICAgIHRoaXMuc2V0U3RhdGUodmFsdWUpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAaGlkZGVuXG4gICAgICovXG4gICAgcmVnaXN0ZXJPbkNoYW5nZShmbikge1xuICAgICAgICB0aGlzLm9uQ2hhbmdlQ2FsbGJhY2sgPSBmbjtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQGhpZGRlblxuICAgICAqL1xuICAgIHJlZ2lzdGVyT25Ub3VjaGVkKGZuKSB7XG4gICAgICAgIHRoaXMub25Ub3VjaGVkQ2FsbGJhY2sgPSBmbjtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQGhpZGRlblxuICAgICAqL1xuICAgIHNldERpc2FibGVkU3RhdGUoaXNEaXNhYmxlZCkge1xuICAgICAgICB0aGlzLmRpc2FibGVkID0gaXNEaXNhYmxlZDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogRm9jdXNlcyB0aGUgQXV0b0NvbXBsZXRlLlxuICAgICAqL1xuICAgIGZvY3VzKCkge1xuICAgICAgICBpZiAoIXRoaXMuZGlzYWJsZWQpIHtcbiAgICAgICAgICAgIHRoaXMuc2VhcmNoYmFyLmZvY3VzKCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogQmx1cnMgdGhlIEF1dG9Db21wbGV0ZS5cbiAgICAgKi9cbiAgICBibHVyKCkge1xuICAgICAgICBpZiAoIXRoaXMuZGlzYWJsZWQpIHtcbiAgICAgICAgICAgIHRoaXMuc2VhcmNoYmFyLmJsdXIoKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBAaGlkZGVuXG4gICAgICovXG4gICAgb25SZXNpemUoKSB7XG4gICAgICAgIGlmICh0aGlzLl9vcGVuKSB7XG4gICAgICAgICAgICBjb25zdCBwb3B1cFdyYXBwZXIgPSB0aGlzLnBvcHVwUmVmLnBvcHVwRWxlbWVudDtcbiAgICAgICAgICAgIGNvbnN0IHsgbWluLCBtYXggfSA9IHRoaXMud2lkdGg7XG4gICAgICAgICAgICBwb3B1cFdyYXBwZXIuc3R5bGUubWluV2lkdGggPSBtaW47XG4gICAgICAgICAgICBwb3B1cFdyYXBwZXIuc3R5bGUud2lkdGggPSBtYXg7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZW1pdENoYW5nZSgpIHtcbiAgICAgICAgaWYgKHRoaXMudmFsdWUgPT09IHRoaXMuX3ByZXZpb3VzVmFsdWUpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLl9wcmV2aW91c1ZhbHVlID0gdGhpcy52YWx1ZTtcbiAgICAgICAgdGhpcy5vbkNoYW5nZUNhbGxiYWNrKHRoaXMudmFsdWUpO1xuICAgICAgICB0aGlzLnZhbHVlQ2hhbmdlLmVtaXQodGhpcy52YWx1ZSk7XG4gICAgfVxuICAgIHZlcmlmeVNldHRpbmdzKG5ld1ZhbHVlKSB7XG4gICAgICAgIGlmICghaXNEZXZNb2RlKCkpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaXNQcmVzZW50KG5ld1ZhbHVlKSAmJiB0eXBlb2YgbmV3VmFsdWUgIT09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIkV4cGVjdGVkIHZhbHVlIG9mIHR5cGUgc3RyaW5nLiBTZWUgaHR0cDovL3d3dy50ZWxlcmlrLmNvbS9rZW5kby1hbmd1bGFyLXVpL2NvbXBvbmVudHMvZHJvcGRvd25zL2F1dG9jb21wbGV0ZS8jdG9jLXZhbHVlXCIpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHNlYXJjaCh0ZXh0LCBzdGFydEZyb20gPSAwKSB7XG4gICAgICAgIGxldCBpbmRleDtcbiAgICAgICAgaWYgKHRleHQubGVuZ3RoICYmIHRoaXMuZGF0YVNlcnZpY2UuaXRlbXNDb3VudCkge1xuICAgICAgICAgICAgaW5kZXggPSB0aGlzLmRhdGFTZXJ2aWNlLmZpbmRJbmRleCh0aGlzLmZpbmRJbmRleFByZWRpY2F0ZSh0ZXh0KSwgc3RhcnRGcm9tKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGluZGV4ID0gLTE7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMuZGlzYWJsZWRJdGVtc1NlcnZpY2UuaXNJbmRleERpc2FibGVkKGluZGV4KSkge1xuICAgICAgICAgICAgaWYgKGluZGV4ICsgMSA8IHRoaXMuZGF0YVNlcnZpY2UuaXRlbXNDb3VudCkge1xuICAgICAgICAgICAgICAgIHRoaXMuc2VhcmNoKHRleHQsIGluZGV4ICsgMSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdGlvblNlcnZpY2UuZm9jdXMoLTEpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5zZWxlY3Rpb25TZXJ2aWNlLmZvY3VzKGluZGV4KTtcbiAgICAgICAgICAgIGlmICh0aGlzLnN1Z2dlc3QpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnN1Z2dlc3RlZFRleHQgPSBnZXR0ZXIodGhpcy5kYXRhU2VydmljZS5pdGVtQXQoaW5kZXgpLCB0aGlzLnZhbHVlRmllbGQpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIG5hdmlnYXRlKGluZGV4KSB7XG4gICAgICAgIGlmICghdGhpcy5pc09wZW4pIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnNlbGVjdGlvblNlcnZpY2UuZm9jdXMoaW5kZXgpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAaGlkZGVuXG4gICAgICovXG4gICAgaGFuZGxlTmF2aWdhdGUoZXZlbnQpIHtcbiAgICAgICAgY29uc3QgZm9jdXNlZCA9IGlzTmFOKHRoaXMuc2VsZWN0aW9uU2VydmljZS5mb2N1c2VkKSA/IHRoaXMuZmlyc3RGb2N1c2FibGVJbmRleCgwKSA6IHRoaXMuc2VsZWN0aW9uU2VydmljZS5mb2N1c2VkO1xuICAgICAgICBpZiAodGhpcy5kaXNhYmxlZCB8fCB0aGlzLnJlYWRvbmx5IHx8IGlzTmFOKGZvY3VzZWQpKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgYWN0aW9uID0gdGhpcy5uYXZpZ2F0aW9uU2VydmljZS5wcm9jZXNzKHtcbiAgICAgICAgICAgIGN1cnJlbnQ6IGZvY3VzZWQsXG4gICAgICAgICAgICBtYXg6IHRoaXMuZGF0YVNlcnZpY2UuaXRlbXNDb3VudCAtIDEsXG4gICAgICAgICAgICBtaW46IDAsXG4gICAgICAgICAgICBvcmlnaW5hbEV2ZW50OiBldmVudFxuICAgICAgICB9KTtcbiAgICAgICAgaWYgKGFjdGlvbiAhPT0gTmF2aWdhdGlvbkFjdGlvbi5VbmRlZmluZWQgJiZcbiAgICAgICAgICAgIGFjdGlvbiAhPT0gTmF2aWdhdGlvbkFjdGlvbi5CYWNrc3BhY2UgJiZcbiAgICAgICAgICAgIGFjdGlvbiAhPT0gTmF2aWdhdGlvbkFjdGlvbi5EZWxldGUgJiZcbiAgICAgICAgICAgIGFjdGlvbiAhPT0gTmF2aWdhdGlvbkFjdGlvbi5Ib21lICYmXG4gICAgICAgICAgICBhY3Rpb24gIT09IE5hdmlnYXRpb25BY3Rpb24uRW5kICYmXG4gICAgICAgICAgICBhY3Rpb24gIT09IE5hdmlnYXRpb25BY3Rpb24uTGVmdCAmJlxuICAgICAgICAgICAgYWN0aW9uICE9PSBOYXZpZ2F0aW9uQWN0aW9uLlJpZ2h0ICYmXG4gICAgICAgICAgICAoKGFjdGlvbiA9PT0gTmF2aWdhdGlvbkFjdGlvbi5FbnRlciAmJiB0aGlzLmlzT3BlbikgfHwgYWN0aW9uICE9PSBOYXZpZ2F0aW9uQWN0aW9uLkVudGVyKSkge1xuICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBoYW5kbGVFbnRlcihldmVudCkge1xuICAgICAgICBjb25zdCBmb2N1c2VkID0gdGhpcy5zZWxlY3Rpb25TZXJ2aWNlLmZvY3VzZWQ7XG4gICAgICAgIGxldCB2YWx1ZTtcbiAgICAgICAgdGhpcy5fZmlsdGVyaW5nID0gZmFsc2U7XG4gICAgICAgIGlmICh0aGlzLmlzT3Blbikge1xuICAgICAgICAgICAgZXZlbnQub3JpZ2luYWxFdmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChmb2N1c2VkID49IDApIHtcbiAgICAgICAgICAgIHZhbHVlID0gZ2V0dGVyKHRoaXMuZGF0YVNlcnZpY2UuaXRlbUF0KGZvY3VzZWQpLCB0aGlzLnZhbHVlRmllbGQpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgY29uc3QgbWF0Y2ggPSB0aGlzLnN1Z2dlc3QgJiYgdGhpcy5zdWdnZXN0ZWRUZXh0ICYmIHRoaXMuZGF0YS5sZW5ndGggJiZcbiAgICAgICAgICAgICAgICBnZXR0ZXIodGhpcy5kYXRhU2VydmljZS5pdGVtQXQoMCksIHRoaXMudmFsdWVGaWVsZCwgdHJ1ZSkudG9Mb3dlckNhc2UoKSA9PT0gdGhpcy5zZWFyY2hiYXIudmFsdWUudG9Mb3dlckNhc2UoKTtcbiAgICAgICAgICAgIGlmICh0aGlzLmlzT3BlbiAmJiBtYXRjaCkge1xuICAgICAgICAgICAgICAgIHZhbHVlID0gdGhpcy5zdWdnZXN0ZWRUZXh0O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdmFsdWUgPSB0aGlzLnNlYXJjaGJhci52YWx1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICB0aGlzLmNoYW5nZSh2YWx1ZSk7XG4gICAgfVxuICAgIGhhbmRsZUVzY2FwZSgpIHtcbiAgICAgICAgdGhpcy50b2dnbGVQb3B1cChmYWxzZSk7XG4gICAgICAgIHRoaXMuc2VsZWN0aW9uU2VydmljZS5mb2N1c2VkID0gLTE7XG4gICAgICAgIHRoaXMuc3VnZ2VzdGVkVGV4dCA9IG51bGw7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEBoaWRkZW5cbiAgICAgKi9cbiAgICBzZWFyY2hCYXJDaGFuZ2UodGV4dCkge1xuICAgICAgICBjb25zdCBjdXJyZW50VGV4dExlbmd0aCA9IGlzUHJlc2VudCh0aGlzLnRleHQpID8gdGhpcy50ZXh0Lmxlbmd0aCA6IDA7XG4gICAgICAgIHRoaXMuYmFja3NwYWNlUHJlc3NlZCA9ICh0ZXh0Lmxlbmd0aCA8IGN1cnJlbnRUZXh0TGVuZ3RoKSA/IHRydWUgOiBmYWxzZTtcbiAgICAgICAgdGhpcy50ZXh0ID0gdGV4dDtcbiAgICAgICAgdGhpcy50b2dnbGVQb3B1cCh0ZXh0Lmxlbmd0aCA+IDApO1xuICAgICAgICB0aGlzLl9maWx0ZXJpbmcgPSB0cnVlO1xuICAgICAgICBpZiAoIXRoaXMuaGlnaGxpZ2h0Rmlyc3QpIHtcbiAgICAgICAgICAgIHRoaXMuc2VsZWN0aW9uU2VydmljZS5mb2N1c2VkID0gLTE7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMuZmlsdGVyYWJsZSkge1xuICAgICAgICAgICAgdGhpcy5maWx0ZXJDaGFuZ2UuZW1pdCh0ZXh0KTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICh0aGlzLmhpZ2hsaWdodEZpcnN0KSB7XG4gICAgICAgICAgICB0aGlzLnNlYXJjaCh0ZXh0KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBAaGlkZGVuXG4gICAgICovXG4gICAgaGFuZGxlRm9jdXMoKSB7XG4gICAgICAgIHRoaXMuaXNGb2N1c2VkID0gdHJ1ZTtcbiAgICAgICAgdGhpcy5vbkZvY3VzLmVtaXQoKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQGhpZGRlblxuICAgICAqL1xuICAgIGhhbmRsZUJsdXIoKSB7XG4gICAgICAgIHRoaXMuX2ZpbHRlcmluZyA9IGZhbHNlO1xuICAgICAgICBjb25zdCBmb2N1c2VkID0gdGhpcy5maWx0ZXJhYmxlID8gdGhpcy5zZWxlY3Rpb25TZXJ2aWNlLmZvY3VzZWQgOiAtMTtcbiAgICAgICAgbGV0IGRhdGFJdGVtO1xuICAgICAgICBsZXQgdGV4dDtcbiAgICAgICAgaWYgKGZvY3VzZWQgIT09IC0xKSB7XG4gICAgICAgICAgICBkYXRhSXRlbSA9IHRoaXMuZGF0YVNlcnZpY2UuaXRlbUF0KGZvY3VzZWQpO1xuICAgICAgICAgICAgdGV4dCA9IGdldHRlcihkYXRhSXRlbSwgdGhpcy52YWx1ZUZpZWxkLCB0cnVlKSB8fCBcIlwiO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGV4dCA9IHRoaXMuc2VhcmNoYmFyLnZhbHVlO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGV4YWN0TWF0Y2ggPSB0ZXh0ID09PSB0aGlzLnNlYXJjaGJhci52YWx1ZTtcbiAgICAgICAgY29uc3QgaW5zZW5zaXRpdmVNYXRjaCA9IHRleHQudG9Mb3dlckNhc2UoKSA9PT0gdGhpcy5zZWFyY2hiYXIudmFsdWUudG9Mb3dlckNhc2UoKTtcbiAgICAgICAgaWYgKCFleGFjdE1hdGNoICYmIGluc2Vuc2l0aXZlTWF0Y2gpIHtcbiAgICAgICAgICAgIHRoaXMuc2VsZWN0aW9uU2VydmljZS5yZXNldFNlbGVjdGlvbihbXSk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5jaGFuZ2UodGhpcy5zZWFyY2hiYXIudmFsdWUpO1xuICAgICAgICB0aGlzLnRvZ2dsZVBvcHVwKGZhbHNlKTtcbiAgICAgICAgdGhpcy5pc0ZvY3VzZWQgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5vbkJsdXIuZW1pdCgpO1xuICAgICAgICB0aGlzLm9uVG91Y2hlZENhbGxiYWNrKCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEBoaWRkZW5cbiAgICAgKi9cbiAgICBwYWdlQ2hhbmdlKGV2ZW50KSB7XG4gICAgICAgIGNvbnN0IHZpcnR1YWwgPSB0aGlzLnZpcnR1YWw7XG4gICAgICAgIHZpcnR1YWwuc2tpcCA9IGV2ZW50LnNraXA7XG4gICAgfVxuICAgIHNldFN0YXRlKG5ld1ZhbHVlKSB7XG4gICAgICAgIGlmICh0aGlzLl9maWx0ZXJpbmcpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnZhbHVlID0gbmV3VmFsdWU7XG4gICAgICAgIHRoaXMuX3ByZXZpb3VzVmFsdWUgPSB0aGlzLnZhbHVlO1xuICAgICAgICB0aGlzLnRleHQgPSB0aGlzLnZhbHVlO1xuICAgIH1cbiAgICBjaGFuZ2UodmFsdWUpIHtcbiAgICAgICAgdGhpcy50b2dnbGVQb3B1cChmYWxzZSk7XG4gICAgICAgIHRoaXMudmFsdWVDaGFuZ2VTdWJqZWN0Lm5leHQodmFsdWUpO1xuICAgIH1cbiAgICBzdWJzY3JpYmVFdmVudHMoKSB7XG4gICAgICAgIGlmICghaXNEb2N1bWVudEF2YWlsYWJsZSgpKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy52YWx1ZUNoYW5nZVN1YnNjcmlwdGlvbiA9IHRoaXMudmFsdWVDaGFuZ2VTdWJqZWN0LnBpcGUoZmlsdGVyKChjYW5kaWRhdGUpID0+IHtcbiAgICAgICAgICAgIHJldHVybiAhKHRoaXMudmFsdWUgPT09IGNhbmRpZGF0ZSAmJiB0aGlzLnRleHQgPT09IGNhbmRpZGF0ZSk7XG4gICAgICAgIH0pKVxuICAgICAgICAgICAgLnN1YnNjcmliZSgodmFsdWUpID0+IHtcbiAgICAgICAgICAgIHRoaXMudmFsdWUgPSB2YWx1ZTtcbiAgICAgICAgICAgIHRoaXMudGV4dCA9IHZhbHVlO1xuICAgICAgICAgICAgdGhpcy5lbWl0Q2hhbmdlKCk7XG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLmNoYW5nZVN1YnNjcmlwdGlvbiA9IHRoaXMuc2VsZWN0aW9uU2VydmljZS5vbkNoYW5nZS5zdWJzY3JpYmUodGhpcy5oYW5kbGVJdGVtQ2hhbmdlLmJpbmQodGhpcykpO1xuICAgICAgICB0aGlzLmZvY3VzU3Vic2NyaXB0aW9uID0gdGhpcy5zZWxlY3Rpb25TZXJ2aWNlLm9uRm9jdXMuc3Vic2NyaWJlKHRoaXMuaGFuZGxlSXRlbUZvY3VzLmJpbmQodGhpcykpO1xuICAgICAgICB0aGlzLm5hdmlnYXRpb25TdWJzY3JpcHRpb24gPSBtZXJnZSh0aGlzLm5hdmlnYXRpb25TZXJ2aWNlLnVwLCB0aGlzLm5hdmlnYXRpb25TZXJ2aWNlLmRvd24pLnN1YnNjcmliZSgoZXZlbnQpID0+IHRoaXMubmF2aWdhdGUoZXZlbnQuaW5kZXgpKTtcbiAgICAgICAgdGhpcy5jbG9zZVN1YnNjcmlwdGlvbiA9IHRoaXMubmF2aWdhdGlvblNlcnZpY2UuY2xvc2Uuc3Vic2NyaWJlKCgpID0+IHRoaXMudG9nZ2xlUG9wdXAoZmFsc2UpKTtcbiAgICAgICAgdGhpcy5lbnRlclN1YnNjcmlwdGlvbiA9IHRoaXMubmF2aWdhdGlvblNlcnZpY2UuZW50ZXIuc3Vic2NyaWJlKHRoaXMuaGFuZGxlRW50ZXIuYmluZCh0aGlzKSk7XG4gICAgICAgIHRoaXMuZXNjU3Vic2NyaXB0aW9uID0gdGhpcy5uYXZpZ2F0aW9uU2VydmljZS5lc2Muc3Vic2NyaWJlKHRoaXMuaGFuZGxlRXNjYXBlLmJpbmQodGhpcykpO1xuICAgIH1cbiAgICB1bnN1YnNjcmliZUV2ZW50cygpIHtcbiAgICAgICAgaWYgKCFpc0RvY3VtZW50QXZhaWxhYmxlKCkpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmNoYW5nZVN1YnNjcmlwdGlvbi51bnN1YnNjcmliZSgpO1xuICAgICAgICB0aGlzLm5hdmlnYXRpb25TdWJzY3JpcHRpb24udW5zdWJzY3JpYmUoKTtcbiAgICAgICAgdGhpcy5jbG9zZVN1YnNjcmlwdGlvbi51bnN1YnNjcmliZSgpO1xuICAgICAgICB0aGlzLmVudGVyU3Vic2NyaXB0aW9uLnVuc3Vic2NyaWJlKCk7XG4gICAgICAgIHRoaXMuZXNjU3Vic2NyaXB0aW9uLnVuc3Vic2NyaWJlKCk7XG4gICAgICAgIHRoaXMudmFsdWVDaGFuZ2VTdWJzY3JpcHRpb24udW5zdWJzY3JpYmUoKTtcbiAgICAgICAgdGhpcy5mb2N1c1N1YnNjcmlwdGlvbi51bnN1YnNjcmliZSgpO1xuICAgIH1cbiAgICBoYW5kbGVJdGVtQ2hhbmdlKGV2ZW50KSB7XG4gICAgICAgIGNvbnN0IGluZGV4ID0gZXZlbnQuaW5kaWNlcy5sZW5ndGggPyBldmVudC5pbmRpY2VzWzBdIDogdW5kZWZpbmVkO1xuICAgICAgICB0aGlzLl9maWx0ZXJpbmcgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5zZWxlY3Rpb25TZXJ2aWNlLnJlc2V0U2VsZWN0aW9uKFstMV0pO1xuICAgICAgICBpZiAoIWlzUHJlc2VudChpbmRleCkpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBsZXQgdGV4dCA9IGdldHRlcih0aGlzLmRhdGFTZXJ2aWNlLml0ZW1BdChpbmRleCksIHRoaXMudmFsdWVGaWVsZCk7XG4gICAgICAgIHRoaXMuY2hhbmdlKHRleHQpO1xuICAgIH1cbiAgICBoYW5kbGVJdGVtRm9jdXMoX2V2ZW50KSB7XG4gICAgICAgIGNvbnN0IGZvY3VzZWQgPSB0aGlzLnNlbGVjdGlvblNlcnZpY2UuZm9jdXNlZDtcbiAgICAgICAgY29uc3Qgc2hvdWxkU3VnZ2VzdCA9IEJvb2xlYW4odGhpcy5zdWdnZXN0ICYmIHRoaXMuZGF0YSAmJiB0aGlzLmRhdGEubGVuZ3RoICYmIGZvY3VzZWQgPj0gMCk7XG4gICAgICAgIGlmIChzaG91bGRTdWdnZXN0KSB7XG4gICAgICAgICAgICB0aGlzLnN1Z2dlc3RlZFRleHQgPSBnZXR0ZXIodGhpcy5kYXRhU2VydmljZS5pdGVtQXQoZm9jdXNlZCksIHRoaXMudmFsdWVGaWVsZCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgY3JlYXRlUG9wdXAoKSB7XG4gICAgICAgIGlmICh0aGlzLnZpcnR1YWwpIHtcbiAgICAgICAgICAgIHRoaXMudmlydHVhbC5za2lwID0gMDtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBob3Jpem9udGFsQWxpZ24gPSB0aGlzLmRpcmVjdGlvbiA9PT0gXCJydGxcIiA/IFwicmlnaHRcIiA6IFwibGVmdFwiO1xuICAgICAgICBjb25zdCBhbmNob3JQb3NpdGlvbiA9IHsgaG9yaXpvbnRhbDogaG9yaXpvbnRhbEFsaWduLCB2ZXJ0aWNhbDogXCJib3R0b21cIiB9O1xuICAgICAgICBjb25zdCBwb3B1cFBvc2l0aW9uID0geyBob3Jpem9udGFsOiBob3Jpem9udGFsQWxpZ24sIHZlcnRpY2FsOiBcInRvcFwiIH07XG4gICAgICAgIHRoaXMucG9wdXBSZWYgPSB0aGlzLnBvcHVwU2VydmljZS5vcGVuKHtcbiAgICAgICAgICAgIGFuY2hvcjogdGhpcy53cmFwcGVyLFxuICAgICAgICAgICAgYW5pbWF0ZTogdGhpcy5wb3B1cFNldHRpbmdzLmFuaW1hdGUsXG4gICAgICAgICAgICBhcHBlbmRUbzogdGhpcy5hcHBlbmRUbyxcbiAgICAgICAgICAgIGNvbnRlbnQ6IHRoaXMucG9wdXBUZW1wbGF0ZSxcbiAgICAgICAgICAgIHBvcHVwQ2xhc3M6IHRoaXMubGlzdENvbnRhaW5lckNsYXNzZXMsXG4gICAgICAgICAgICBwb3NpdGlvbk1vZGU6ICdhYnNvbHV0ZScsXG4gICAgICAgICAgICBwb3B1cEFsaWduOiBwb3B1cFBvc2l0aW9uLFxuICAgICAgICAgICAgYW5jaG9yQWxpZ246IGFuY2hvclBvc2l0aW9uXG4gICAgICAgIH0pO1xuICAgICAgICBjb25zdCBwb3B1cFdyYXBwZXIgPSB0aGlzLnBvcHVwUmVmLnBvcHVwRWxlbWVudDtcbiAgICAgICAgY29uc3QgeyBtaW4sIG1heCB9ID0gdGhpcy53aWR0aDtcbiAgICAgICAgcG9wdXBXcmFwcGVyLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlZG93bicsIHRoaXMucG9wdXBNb3VzZURvd25IYW5kbGVyKTtcbiAgICAgICAgcG9wdXBXcmFwcGVyLnN0eWxlLm1pbldpZHRoID0gbWluO1xuICAgICAgICBwb3B1cFdyYXBwZXIuc3R5bGUud2lkdGggPSBtYXg7XG4gICAgICAgIHBvcHVwV3JhcHBlci5zdHlsZS5oZWlnaHQgPSB0aGlzLmhlaWdodDtcbiAgICAgICAgcG9wdXBXcmFwcGVyLnNldEF0dHJpYnV0ZShcImRpclwiLCB0aGlzLmRpcmVjdGlvbik7XG4gICAgICAgIHRoaXMucG9wdXBSZWYucG9wdXBPcGVuLnN1YnNjcmliZSgoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLmNkci5kZXRlY3RDaGFuZ2VzKCk7XG4gICAgICAgICAgICB0aGlzLm9wdGlvbnNMaXN0LnNjcm9sbFRvSXRlbSh0aGlzLnNlbGVjdGlvblNlcnZpY2UuZm9jdXNlZCk7XG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLnBvcHVwUmVmLnBvcHVwQW5jaG9yVmlld3BvcnRMZWF2ZS5zdWJzY3JpYmUoKCkgPT4gdGhpcy50b2dnbGVQb3B1cChmYWxzZSkpO1xuICAgIH1cbiAgICBkZXN0cm95UG9wdXAoKSB7XG4gICAgICAgIGlmICh0aGlzLnBvcHVwUmVmKSB7XG4gICAgICAgICAgICB0aGlzLnBvcHVwUmVmLnBvcHVwRWxlbWVudFxuICAgICAgICAgICAgICAgIC5yZW1vdmVFdmVudExpc3RlbmVyKCdtb3VzZWRvd24nLCB0aGlzLnBvcHVwTW91c2VEb3duSGFuZGxlcik7XG4gICAgICAgICAgICB0aGlzLnBvcHVwUmVmLmNsb3NlKCk7XG4gICAgICAgICAgICB0aGlzLnBvcHVwUmVmID0gbnVsbDtcbiAgICAgICAgfVxuICAgIH1cbiAgICBfdG9nZ2xlKG9wZW4pIHtcbiAgICAgICAgdGhpcy5fb3BlbiA9IChvcGVuID09PSB1bmRlZmluZWQpID8gIXRoaXMuX29wZW4gOiBvcGVuO1xuICAgICAgICB0aGlzLmRlc3Ryb3lQb3B1cCgpO1xuICAgICAgICBpZiAodGhpcy5fb3Blbikge1xuICAgICAgICAgICAgdGhpcy5jcmVhdGVQb3B1cCgpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHRyaWdnZXJQb3B1cEV2ZW50cyhvcGVuKSB7XG4gICAgICAgIGNvbnN0IGV2ZW50QXJncyA9IG5ldyBQcmV2ZW50YWJsZUV2ZW50KCk7XG4gICAgICAgIGlmIChvcGVuKSB7XG4gICAgICAgICAgICB0aGlzLm9wZW4uZW1pdChldmVudEFyZ3MpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5jbG9zZS5lbWl0KGV2ZW50QXJncyk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGV2ZW50QXJncy5pc0RlZmF1bHRQcmV2ZW50ZWQoKTtcbiAgICB9XG4gICAgZmlyc3RGb2N1c2FibGVJbmRleChpbmRleCkge1xuICAgICAgICBjb25zdCBtYXhJbmRleCA9IHRoaXMuZGF0YS5sZW5ndGggLSAxO1xuICAgICAgICBpZiAodGhpcy5kaXNhYmxlZEl0ZW1zU2VydmljZS5pc0luZGV4RGlzYWJsZWQoaW5kZXgpKSB7XG4gICAgICAgICAgICByZXR1cm4gKGluZGV4IDwgbWF4SW5kZXgpID8gdGhpcy5maXJzdEZvY3VzYWJsZUluZGV4KGluZGV4ICsgMSkgOiB1bmRlZmluZWQ7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gaW5kZXg7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZmluZEluZGV4UHJlZGljYXRlKHRleHQpIHtcbiAgICAgICAgaWYgKHRoaXMuZGF0YVNlcnZpY2UuZ3JvdXBlZCkge1xuICAgICAgICAgICAgcmV0dXJuIChpdGVtKSA9PiB7XG4gICAgICAgICAgICAgICAgbGV0IGl0ZW1UZXh0ID0gZ2V0dGVyKGl0ZW0udmFsdWUsIHRoaXMudmFsdWVGaWVsZCk7XG4gICAgICAgICAgICAgICAgaXRlbVRleHQgPSAhaXNQcmVzZW50KGl0ZW1UZXh0KSA/IFwiXCIgOiBpdGVtVGV4dC50b1N0cmluZygpLnRvTG93ZXJDYXNlKCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGl0ZW1UZXh0LnN0YXJ0c1dpdGgodGV4dC50b0xvd2VyQ2FzZSgpKTtcbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gKGl0ZW0pID0+IHtcbiAgICAgICAgICAgICAgICBsZXQgaXRlbVRleHQgPSBnZXR0ZXIoaXRlbSwgdGhpcy52YWx1ZUZpZWxkKTtcbiAgICAgICAgICAgICAgICBpdGVtVGV4dCA9ICFpc1ByZXNlbnQoaXRlbVRleHQpID8gXCJcIiA6IGl0ZW1UZXh0LnRvU3RyaW5nKCkudG9Mb3dlckNhc2UoKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gaXRlbVRleHQuc3RhcnRzV2l0aCh0ZXh0LnRvTG93ZXJDYXNlKCkpO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBzZXRNZXNzYWdlcygpIHtcbiAgICAgICAgdGhpcy5fem9uZS5ydW5PdXRzaWRlQW5ndWxhcigoKSA9PiB7XG4gICAgICAgICAgICBjbGVhclRpbWVvdXQodGhpcy5tZXNzYWdlc1RpbWVvdXQpO1xuICAgICAgICAgICAgdGhpcy5tZXNzYWdlc1RpbWVvdXQgPSBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLm5vRGF0YVRleHQgPSB0aGlzLmxvY2FsaXphdGlvbi5nZXQoJ25vRGF0YVRleHQnKTtcbiAgICAgICAgICAgICAgICB0aGlzLmNkci5kZXRlY3RDaGFuZ2VzKCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgfVxufVxuQXV0b0NvbXBsZXRlQ29tcG9uZW50LmRlY29yYXRvcnMgPSBbXG4gICAgeyB0eXBlOiBDb21wb25lbnQsIGFyZ3M6IFt7XG4gICAgICAgICAgICAgICAgZXhwb3J0QXM6ICdrZW5kb0F1dG9Db21wbGV0ZScsXG4gICAgICAgICAgICAgICAgcHJvdmlkZXJzOiBbXG4gICAgICAgICAgICAgICAgICAgIEFVVE9DT01QTEVURV9WQUxVRV9BQ0NFU1NPUixcbiAgICAgICAgICAgICAgICAgICAgRGF0YVNlcnZpY2UsXG4gICAgICAgICAgICAgICAgICAgIFNlbGVjdGlvblNlcnZpY2UsXG4gICAgICAgICAgICAgICAgICAgIE5hdmlnYXRpb25TZXJ2aWNlLFxuICAgICAgICAgICAgICAgICAgICBEaXNhYmxlZEl0ZW1zU2VydmljZSxcbiAgICAgICAgICAgICAgICAgICAgTG9jYWxpemF0aW9uU2VydmljZSxcbiAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgcHJvdmlkZTogTDEwTl9QUkVGSVgsXG4gICAgICAgICAgICAgICAgICAgICAgICB1c2VWYWx1ZTogJ2tlbmRvLmF1dG9jb21wbGV0ZSdcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgcHJvdmlkZTogRmlsdGVyYWJsZURyb3BEb3duQ29tcG9uZW50QmFzZSwgdXNlRXhpc3Rpbmc6IGZvcndhcmRSZWYoKCkgPT4gQXV0b0NvbXBsZXRlQ29tcG9uZW50KVxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICBwcm92aWRlOiBLZW5kb0lucHV0LCB1c2VFeGlzdGluZzogZm9yd2FyZFJlZigoKSA9PiBBdXRvQ29tcGxldGVDb21wb25lbnQpXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBdLFxuICAgICAgICAgICAgICAgIHNlbGVjdG9yOiAna2VuZG8tYXV0b2NvbXBsZXRlJyxcbiAgICAgICAgICAgICAgICB0ZW1wbGF0ZTogYFxuICAgICAgICA8bmctY29udGFpbmVyIGtlbmRvQXV0b0NvbXBsZXRlTG9jYWxpemVkTWVzc2FnZXNcbiAgICAgICAgICAgIGkxOG4tbm9EYXRhVGV4dD1cImtlbmRvLmF1dG9jb21wbGV0ZS5ub0RhdGFUZXh0fFRoZSB0ZXh0IGRpc3BsYXllZCBpbiB0aGUgcG9wdXAgd2hlbiB0aGVyZSBhcmUgbm8gaXRlbXNcIlxuICAgICAgICAgICAgbm9EYXRhVGV4dD1cIk5PIERBVEEgRk9VTkRcIlxuXG4gICAgICAgICAgICBpMThuLWNsZWFyVGl0bGU9XCJrZW5kby5hdXRvY29tcGxldGUuY2xlYXJUaXRsZXxUaGUgdGl0bGUgb2YgdGhlIGNsZWFyIGJ1dHRvblwiXG4gICAgICAgICAgICBjbGVhclRpdGxlPVwiY2xlYXJcIlxuICAgICAgICA+XG4gICAgICAgIDwvbmctY29udGFpbmVyPlxuICAgICAgICA8a2VuZG8tc2VhcmNoYmFyICNzZWFyY2hiYXJcbiAgICAgICAgICAgIFtyb2xlXT1cIidjb21ib2JveCdcIlxuICAgICAgICAgICAgW2lkXT1cImZvY3VzYWJsZUlkXCJcbiAgICAgICAgICAgIFtsaXN0SWRdPVwibGlzdEJveElkXCJcbiAgICAgICAgICAgIFthY3RpdmVEZXNjZW5kYW50XT1cImFjdGl2ZURlc2NlbmRhbnRcIlxuICAgICAgICAgICAgW25vRGF0YUxhYmVsXT1cIm5vRGF0YUxhYmVsXCJcbiAgICAgICAgICAgIFt1c2VySW5wdXRdPVwidGV4dFwiXG4gICAgICAgICAgICBbc3VnZ2VzdGVkVGV4dF09XCJzdWdnZXN0aW9uXCJcbiAgICAgICAgICAgIFtkaXNhYmxlZF09XCJkaXNhYmxlZFwiXG4gICAgICAgICAgICBbcmVhZG9ubHldPVwicmVhZG9ubHlcIlxuICAgICAgICAgICAgW3RhYkluZGV4XT1cInRhYkluZGV4XCJcbiAgICAgICAgICAgIFtwb3B1cE9wZW5dPVwiaXNPcGVuXCJcbiAgICAgICAgICAgIFtwbGFjZWhvbGRlcl09XCJwbGFjZWhvbGRlclwiXG4gICAgICAgICAgICAob25OYXZpZ2F0ZSk9XCJoYW5kbGVOYXZpZ2F0ZSgkZXZlbnQpXCJcbiAgICAgICAgICAgICh2YWx1ZUNoYW5nZSk9XCJzZWFyY2hCYXJDaGFuZ2UoJGV2ZW50KVwiXG4gICAgICAgICAgICAob25CbHVyKT1cImhhbmRsZUJsdXIoKVwiXG4gICAgICAgICAgICAob25Gb2N1cyk9XCJoYW5kbGVGb2N1cygpXCJcbiAgICAgICAgPjwva2VuZG8tc2VhcmNoYmFyPlxuICAgICAgICA8c3BhbiAqbmdJZj1cIiFsb2FkaW5nICYmICFyZWFkb25seSAmJiAoY2xlYXJCdXR0b24gJiYgdGV4dD8ubGVuZ3RoKVwiIGNsYXNzPVwiay1pY29uIGstY2xlYXItdmFsdWUgay1pLWNsb3NlXCIgW2F0dHIudGl0bGVdPVwiY2xlYXJUaXRsZVwiIHJvbGU9XCJidXR0b25cIiB0YWJpbmRleD1cIi0xXCIgKGNsaWNrKT1cImNsZWFyVmFsdWUoJGV2ZW50KVwiIChtb3VzZWRvd24pPVwiJGV2ZW50LnByZXZlbnREZWZhdWx0KClcIj5cbjwvc3Bhbj5cbiAgICAgICAgPHNwYW4gKm5nSWY9XCJsb2FkaW5nXCIgY2xhc3M9XCJrLWljb24gay1pLWxvYWRpbmdcIj48L3NwYW4+XG4gICAgICAgIDxuZy10ZW1wbGF0ZSAjcG9wdXBUZW1wbGF0ZT5cbiAgICAgICAgICAgIDwhLS1oZWFkZXIgdGVtcGxhdGUtLT5cbiAgICAgICAgICAgIDxuZy10ZW1wbGF0ZSAqbmdJZj1cImhlYWRlclRlbXBsYXRlXCJcbiAgICAgICAgICAgICAgICBbdGVtcGxhdGVDb250ZXh0XT1cIntcbiAgICAgICAgICAgICAgICAgICAgdGVtcGxhdGVSZWY6IGhlYWRlclRlbXBsYXRlLnRlbXBsYXRlUmVmXG4gICAgICAgICAgICAgICAgfVwiPlxuICAgICAgICAgICAgPC9uZy10ZW1wbGF0ZT5cbiAgICAgICAgICAgIDwhLS1saXN0LS0+XG4gICAgICAgICAgICA8a2VuZG8tbGlzdFxuICAgICAgICAgICAgICAgICNvcHRpb25zTGlzdFxuICAgICAgICAgICAgICAgIFtpZF09XCJsaXN0Qm94SWRcIlxuICAgICAgICAgICAgICAgIFtvcHRpb25QcmVmaXhdPVwib3B0aW9uUHJlZml4XCJcbiAgICAgICAgICAgICAgICBbZGF0YV09XCJkYXRhXCJcbiAgICAgICAgICAgICAgICBbdGV4dEZpZWxkXT1cInZhbHVlRmllbGRcIlxuICAgICAgICAgICAgICAgIFt2YWx1ZUZpZWxkXT1cInZhbHVlRmllbGRcIlxuICAgICAgICAgICAgICAgIFt0ZW1wbGF0ZV09XCJ0ZW1wbGF0ZVwiXG4gICAgICAgICAgICAgICAgW2dyb3VwVGVtcGxhdGVdPVwiZ3JvdXBUZW1wbGF0ZVwiXG4gICAgICAgICAgICAgICAgW2ZpeGVkR3JvdXBUZW1wbGF0ZV09XCJmaXhlZEdyb3VwVGVtcGxhdGVcIlxuICAgICAgICAgICAgICAgIFtoZWlnaHRdPVwibGlzdEhlaWdodFwiXG4gICAgICAgICAgICAgICAgW3Nob3ddPVwiaXNPcGVuXCJcbiAgICAgICAgICAgICAgICBbdmlydHVhbF09XCJ2aXJ0dWFsXCJcbiAgICAgICAgICAgICAgICAocGFnZUNoYW5nZSk9XCJwYWdlQ2hhbmdlKCRldmVudClcIlxuICAgICAgICAgICAgPlxuICAgICAgICAgICAgPC9rZW5kby1saXN0PlxuICAgICAgICAgICAgPCEtLW5vLWRhdGEgdGVtcGxhdGUtLT5cbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJrLW5vZGF0YVwiICpuZ0lmPVwiZGF0YS5sZW5ndGggPT09IDBcIj5cbiAgICAgICAgICAgICAgICA8bmctdGVtcGxhdGUgW25nSWZdPVwibm9EYXRhVGVtcGxhdGVcIlxuICAgICAgICAgICAgICAgICAgICBbdGVtcGxhdGVDb250ZXh0XT1cIntcbiAgICAgICAgICAgICAgICAgICAgICAgIHRlbXBsYXRlUmVmOiBub0RhdGFUZW1wbGF0ZT8udGVtcGxhdGVSZWZcbiAgICAgICAgICAgICAgICAgICAgfVwiPlxuICAgICAgICAgICAgICAgIDwvbmctdGVtcGxhdGU+XG4gICAgICAgICAgICAgICAgPG5nLXRlbXBsYXRlIFtuZ0lmXT1cIiFub0RhdGFUZW1wbGF0ZVwiPlxuICAgICAgICAgICAgICAgICAgICA8ZGl2Pnt7IG5vRGF0YVRleHQgfX08L2Rpdj5cbiAgICAgICAgICAgICAgICA8L25nLXRlbXBsYXRlPlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICA8IS0tZm9vdGVyIHRlbXBsYXRlLS0+XG4gICAgICAgICAgICA8bmctdGVtcGxhdGUgKm5nSWY9XCJmb290ZXJUZW1wbGF0ZVwiXG4gICAgICAgICAgICAgICAgW3RlbXBsYXRlQ29udGV4dF09XCJ7XG4gICAgICAgICAgICAgICAgICAgIHRlbXBsYXRlUmVmOiBmb290ZXJUZW1wbGF0ZS50ZW1wbGF0ZVJlZlxuICAgICAgICAgICAgICAgIH1cIj5cbiAgICAgICAgICAgIDwvbmctdGVtcGxhdGU+XG4gICAgICAgIDwvbmctdGVtcGxhdGU+XG4gICAgICAgIDxuZy10ZW1wbGF0ZSBbbmdJZl09XCJpc09wZW5cIj5cbiAgICAgICAgICAgIDxrZW5kby1yZXNpemUtc2Vuc29yIChyZXNpemUpPVwib25SZXNpemUoKVwiPjwva2VuZG8tcmVzaXplLXNlbnNvcj5cbiAgICAgICAgPC9uZy10ZW1wbGF0ZT5cbiAgICAgICAgPG5nLWNvbnRhaW5lciAjY29udGFpbmVyPjwvbmctY29udGFpbmVyPlxuICBgXG4gICAgICAgICAgICB9LF0gfSxcbl07XG4vKiogQG5vY29sbGFwc2UgKi9cbkF1dG9Db21wbGV0ZUNvbXBvbmVudC5jdG9yUGFyYW1ldGVycyA9ICgpID0+IFtcbiAgICB7IHR5cGU6IExvY2FsaXphdGlvblNlcnZpY2UgfSxcbiAgICB7IHR5cGU6IERhdGFTZXJ2aWNlIH0sXG4gICAgeyB0eXBlOiBQb3B1cFNlcnZpY2UgfSxcbiAgICB7IHR5cGU6IFNlbGVjdGlvblNlcnZpY2UgfSxcbiAgICB7IHR5cGU6IE5hdmlnYXRpb25TZXJ2aWNlIH0sXG4gICAgeyB0eXBlOiBEaXNhYmxlZEl0ZW1zU2VydmljZSB9LFxuICAgIHsgdHlwZTogTmdab25lIH0sXG4gICAgeyB0eXBlOiBDaGFuZ2VEZXRlY3RvclJlZiB9LFxuICAgIHsgdHlwZTogUmVuZGVyZXIyIH0sXG4gICAgeyB0eXBlOiBFbGVtZW50UmVmIH1cbl07XG5BdXRvQ29tcGxldGVDb21wb25lbnQucHJvcERlY29yYXRvcnMgPSB7XG4gICAgaGlnaGxpZ2h0Rmlyc3Q6IFt7IHR5cGU6IElucHV0IH1dLFxuICAgIGZvY3VzYWJsZUlkOiBbeyB0eXBlOiBJbnB1dCB9XSxcbiAgICBkYXRhOiBbeyB0eXBlOiBJbnB1dCB9XSxcbiAgICB2YWx1ZTogW3sgdHlwZTogSW5wdXQgfV0sXG4gICAgdmFsdWVGaWVsZDogW3sgdHlwZTogSW5wdXQgfV0sXG4gICAgcGxhY2Vob2xkZXI6IFt7IHR5cGU6IElucHV0IH1dLFxuICAgIHBvcHVwU2V0dGluZ3M6IFt7IHR5cGU6IElucHV0IH1dLFxuICAgIGxpc3RIZWlnaHQ6IFt7IHR5cGU6IElucHV0IH1dLFxuICAgIGxvYWRpbmc6IFt7IHR5cGU6IElucHV0IH1dLFxuICAgIGNsZWFyQnV0dG9uOiBbeyB0eXBlOiBJbnB1dCB9XSxcbiAgICBzdWdnZXN0OiBbeyB0eXBlOiBJbnB1dCB9XSxcbiAgICBkaXNhYmxlZDogW3sgdHlwZTogSW5wdXQgfV0sXG4gICAgaXRlbURpc2FibGVkOiBbeyB0eXBlOiBJbnB1dCB9XSxcbiAgICByZWFkb25seTogW3sgdHlwZTogSW5wdXQgfV0sXG4gICAgdGFiaW5kZXg6IFt7IHR5cGU6IElucHV0IH1dLFxuICAgIHRhYkluZGV4OiBbeyB0eXBlOiBJbnB1dCwgYXJnczogW1widGFiSW5kZXhcIixdIH1dLFxuICAgIGZpbHRlcmFibGU6IFt7IHR5cGU6IElucHV0IH1dLFxuICAgIHZpcnR1YWw6IFt7IHR5cGU6IElucHV0IH1dLFxuICAgIHZhbHVlQ2hhbmdlOiBbeyB0eXBlOiBPdXRwdXQgfV0sXG4gICAgZmlsdGVyQ2hhbmdlOiBbeyB0eXBlOiBPdXRwdXQgfV0sXG4gICAgb3BlbjogW3sgdHlwZTogT3V0cHV0IH1dLFxuICAgIGNsb3NlOiBbeyB0eXBlOiBPdXRwdXQgfV0sXG4gICAgb25Gb2N1czogW3sgdHlwZTogT3V0cHV0LCBhcmdzOiBbJ2ZvY3VzJyxdIH1dLFxuICAgIG9uQmx1cjogW3sgdHlwZTogT3V0cHV0LCBhcmdzOiBbJ2JsdXInLF0gfV0sXG4gICAgdGVtcGxhdGU6IFt7IHR5cGU6IENvbnRlbnRDaGlsZCwgYXJnczogW0l0ZW1UZW1wbGF0ZURpcmVjdGl2ZSxdIH1dLFxuICAgIGhlYWRlclRlbXBsYXRlOiBbeyB0eXBlOiBDb250ZW50Q2hpbGQsIGFyZ3M6IFtIZWFkZXJUZW1wbGF0ZURpcmVjdGl2ZSxdIH1dLFxuICAgIGZvb3RlclRlbXBsYXRlOiBbeyB0eXBlOiBDb250ZW50Q2hpbGQsIGFyZ3M6IFtGb290ZXJUZW1wbGF0ZURpcmVjdGl2ZSxdIH1dLFxuICAgIG5vRGF0YVRlbXBsYXRlOiBbeyB0eXBlOiBDb250ZW50Q2hpbGQsIGFyZ3M6IFtOb0RhdGFUZW1wbGF0ZURpcmVjdGl2ZSxdIH1dLFxuICAgIGdyb3VwVGVtcGxhdGU6IFt7IHR5cGU6IENvbnRlbnRDaGlsZCwgYXJnczogW0dyb3VwVGVtcGxhdGVEaXJlY3RpdmUsXSB9XSxcbiAgICBmaXhlZEdyb3VwVGVtcGxhdGU6IFt7IHR5cGU6IENvbnRlbnRDaGlsZCwgYXJnczogW0ZpeGVkR3JvdXBUZW1wbGF0ZURpcmVjdGl2ZSxdIH1dLFxuICAgIGNvbnRhaW5lcjogW3sgdHlwZTogVmlld0NoaWxkLCBhcmdzOiBbJ2NvbnRhaW5lcicsIHsgcmVhZDogVmlld0NvbnRhaW5lclJlZiB9LF0gfV0sXG4gICAgcG9wdXBUZW1wbGF0ZTogW3sgdHlwZTogVmlld0NoaWxkLCBhcmdzOiBbJ3BvcHVwVGVtcGxhdGUnLF0gfV0sXG4gICAgc2VhcmNoYmFyOiBbeyB0eXBlOiBWaWV3Q2hpbGQsIGFyZ3M6IFtTZWFyY2hCYXJDb21wb25lbnQsXSB9XSxcbiAgICBvcHRpb25zTGlzdDogW3sgdHlwZTogVmlld0NoaWxkLCBhcmdzOiBbJ29wdGlvbnNMaXN0JyxdIH1dLFxuICAgIHdpZGdldENsYXNzZXM6IFt7IHR5cGU6IEhvc3RCaW5kaW5nLCBhcmdzOiBbJ2NsYXNzLmstd2lkZ2V0JyxdIH0sIHsgdHlwZTogSG9zdEJpbmRpbmcsIGFyZ3M6IFsnY2xhc3Muay1hdXRvY29tcGxldGUnLF0gfSwgeyB0eXBlOiBIb3N0QmluZGluZywgYXJnczogWydjbGFzcy5rLWhlYWRlcicsXSB9XSxcbiAgICBpc0ZvY3VzZWQ6IFt7IHR5cGU6IEhvc3RCaW5kaW5nLCBhcmdzOiBbJ2NsYXNzLmstc3RhdGUtZm9jdXNlZCcsXSB9XSxcbiAgICBpc0Rpc2FibGVkOiBbeyB0eXBlOiBIb3N0QmluZGluZywgYXJnczogWydjbGFzcy5rLXN0YXRlLWRpc2FibGVkJyxdIH1dLFxuICAgIGRpcjogW3sgdHlwZTogSG9zdEJpbmRpbmcsIGFyZ3M6IFsnYXR0ci5kaXInLF0gfV1cbn07XG5cbi8qKlxuICogQGhpZGRlblxuICovXG5jb25zdCBUT1VDSF9FTkFCTEVEID0gbmV3IEluamVjdGlvblRva2VuKCdkcm9wZG93bnMtdG91Y2gtZW5hYmxlZCcpO1xuXG4vKipcbiAqIEBoaWRkZW5cbiAqL1xuLyogdHNsaW50OmRpc2FibGU6bWF4LWxpbmUtbGVuZ3RoICovXG4vKiB0c2xpbnQ6ZGlzYWJsZTp2YXJpYWJsZS1uYW1lICovXG5jb25zdCBNdWx0aXNlbGVjdE1lc3NhZ2VzID0ge1xuICAgICdhcnJheSc6ICdFeHBlY3RlZCB2YWx1ZXMgb2YgYXJyYXkgdHlwZS4gU2VlIGh0dHA6Ly93d3cudGVsZXJpay5jb20va2VuZG8tYW5ndWxhci11aS9jb21wb25lbnRzL2Ryb3Bkb3ducy9tdWx0aXNlbGVjdC8jdmFsdWUtc2VsZWN0aW9uJyxcbiAgICAnb2JqZWN0JzogJ0V4cGVjdGVkIHZhbHVlcyBvZiBPYmplY3QgdHlwZS4gU2VlIGh0dHA6Ly93d3cudGVsZXJpay5jb20va2VuZG8tYW5ndWxhci11aS9jb21wb25lbnRzL2Ryb3Bkb3ducy9tdWx0aXNlbGVjdC8jdmFsdWUtc2VsZWN0aW9uJyxcbiAgICAncHJpbWl0aXZlJzogJ0V4cGVjdGVkIHZhbHVlcyBvZiBwcmltaXRpdmUgdHlwZS4gU2VlIGh0dHA6Ly93d3cudGVsZXJpay5jb20va2VuZG8tYW5ndWxhci11aS9jb21wb25lbnRzL2Ryb3Bkb3ducy9tdWx0aXNlbGVjdC8jdmFsdWUtc2VsZWN0aW9uJyxcbiAgICAndGV4dEFuZFZhbHVlJzogJ0V4cGVjdGVkIHRleHRGaWVsZCBhbmQgdmFsdWVGaWVsZCBvcHRpb25zIHRvIGJlIHNldC4gU2VlIGh0dHA6Ly93d3cudGVsZXJpay5jb20va2VuZG8tYW5ndWxhci11aS9jb21wb25lbnRzL2Ryb3Bkb3ducy9tdWx0aXNlbGVjdC8jdG9jLWJpbmQtdG8tYXJyYXlzLW9mLWNvbXBsZXgtZGF0YSdcbn07XG4vKipcbiAqIEBoaWRkZW5cbiAqL1xuLyogdHNsaW50OmRpc2FibGU6bWF4LWxpbmUtbGVuZ3RoICovXG4vKiB0c2xpbnQ6ZGlzYWJsZTp2YXJpYWJsZS1uYW1lICovXG5jb25zdCBDb21ib0JveE1lc3NhZ2VzID0ge1xuICAgICdvYmplY3QnOiAnRXhwZWN0ZWQgdmFsdWUgb2YgdHlwZSBPYmplY3QuIFNlZSBodHRwOi8vd3d3LnRlbGVyaWsuY29tL2tlbmRvLWFuZ3VsYXItdWkvY29tcG9uZW50cy9kcm9wZG93bnMvY29tYm9ib3gvI3RvYy12YWx1ZS1zZWxlY3Rpb24nLFxuICAgICdwcmltaXRpdmUnOiAnRXhwZWN0ZWQgdmFsdWUgb2YgcHJpbWl0aXZlIHR5cGUuIFNlZSBodHRwOi8vd3d3LnRlbGVyaWsuY29tL2tlbmRvLWFuZ3VsYXItdWkvY29tcG9uZW50cy9kcm9wZG93bnMvY29tYm9ib3gvI3RvYy12YWx1ZS1zZWxlY3Rpb24nLFxuICAgICd0ZXh0QW5kVmFsdWUnOiAnRXhwZWN0ZWQgdGV4dEZpZWxkIGFuZCB2YWx1ZUZpZWxkIG9wdGlvbnMgdG8gYmUgc2V0LiBTZWUgaHR0cDovL3d3dy50ZWxlcmlrLmNvbS9rZW5kby1hbmd1bGFyLXVpL2NvbXBvbmVudHMvZHJvcGRvd25zL2NvbWJvYm94LyN0b2MtYmluZC10by1hcnJheXMtb2YtY29tcGxleC1kYXRhJyxcbiAgICAnbm9JdGVtSGVpZ2h0JzogJ0V4cGVjdGVkIHZpcnR1YWwuaXRlbUhlaWdodCBvZiB0eXBlIG51bWJlci4nXG59O1xuLyoqXG4gKiBAaGlkZGVuXG4gKi9cbi8qIHRzbGludDpkaXNhYmxlOm1heC1saW5lLWxlbmd0aCAqL1xuLyogdHNsaW50OmRpc2FibGU6dmFyaWFibGUtbmFtZSAqL1xuY29uc3QgRHJvcERvd25MaXN0TWVzc2FnZXMgPSB7XG4gICAgJ2RlZmF1bHRJdGVtJzogJ2RlZmF1bHRJdGVtIGFuZCBkYXRhIGl0ZW1zIG11c3QgYmUgb2Ygc2FtZSB0eXBlLiBTZWUgaHR0cDovL3d3dy50ZWxlcmlrLmNvbS9rZW5kby1hbmd1bGFyLXVpL2NvbXBvbmVudHMvZHJvcGRvd25zL2FwaS9Ecm9wRG93bkxpc3RDb21wb25lbnQvI3RvYy1kZWZhdWx0aXRlbScsXG4gICAgJ29iamVjdCc6ICdFeHBlY3RlZCB2YWx1ZSBvZiB0eXBlIE9iamVjdC4gU2VlIGh0dHA6Ly93d3cudGVsZXJpay5jb20va2VuZG8tYW5ndWxhci11aS9jb21wb25lbnRzL2Ryb3Bkb3ducy9kcm9wZG93bmxpc3QvI3RvYy12YWx1ZS1zZWxlY3Rpb24nLFxuICAgICdwcmltaXRpdmUnOiAnRXhwZWN0ZWQgdmFsdWUgb2YgcHJpbWl0aXZlIHR5cGUuIFNlZSBodHRwOi8vd3d3LnRlbGVyaWsuY29tL2tlbmRvLWFuZ3VsYXItdWkvY29tcG9uZW50cy9kcm9wZG93bnMvZHJvcGRvd25saXN0LyN0b2MtdmFsdWUtc2VsZWN0aW9uJyxcbiAgICAndGV4dEFuZFZhbHVlJzogJ0V4cGVjdGVkIHRleHRGaWVsZCBhbmQgdmFsdWVGaWVsZCBvcHRpb25zIHRvIGJlIHNldC4gU2VlIGh0dHA6Ly93d3cudGVsZXJpay5jb20va2VuZG8tYW5ndWxhci11aS9jb21wb25lbnRzL2Ryb3Bkb3ducy9kcm9wZG93bmxpc3QvI3RvYy1iaW5kLXRvLWFycmF5cy1vZi1jb21wbGV4LWRhdGEnXG59O1xuXG4vKiB0c2xpbnQ6ZGlzYWJsZTpuby1udWxsLWtleXdvcmQgKi9cbi8qKlxuICogQGhpZGRlblxuICovXG5jb25zdCBDT01CT0JPWF9WQUxVRV9BQ0NFU1NPUiA9IHtcbiAgICBtdWx0aTogdHJ1ZSxcbiAgICBwcm92aWRlOiBOR19WQUxVRV9BQ0NFU1NPUixcbiAgICAvLyB0c2xpbnQ6ZGlzYWJsZS1uZXh0LWxpbmU6bm8tdXNlLWJlZm9yZS1kZWNsYXJlXG4gICAgdXNlRXhpc3Rpbmc6IGZvcndhcmRSZWYoKCkgPT4gQ29tYm9Cb3hDb21wb25lbnQpXG59O1xuLyoqXG4gKiBSZXByZXNlbnRzIHRoZSBbS2VuZG8gVUkgQ29tYm9Cb3ggY29tcG9uZW50IGZvciBBbmd1bGFyXSh7JSBzbHVnIG92ZXJ2aWV3X2NvbWJvYm94ICV9KS5cbiAqXG4gKiBAZXhhbXBsZVxuICogYGBgdHNcbiAqIF9AQ29tcG9uZW50KHtcbiAqIHNlbGVjdG9yOiAnbXktYXBwJyxcbiAqIHRlbXBsYXRlOiBgXG4gKiAgPGtlbmRvLWNvbWJvYm94IFtkYXRhXT1cImxpc3RJdGVtc1wiPlxuICogIDwva2VuZG8tY29tYm9ib3g+XG4gKiBgXG4gKiB9KVxuICogY2xhc3MgQXBwQ29tcG9uZW50IHtcbiAqICAgcHVibGljIGxpc3RJdGVtczogQXJyYXk8c3RyaW5nPiA9IFtcIkl0ZW0gMVwiLCBcIkl0ZW0gMlwiLCBcIkl0ZW0gM1wiLCBcIkl0ZW0gNFwiXTtcbiAqIH1cbiAqIGBgYFxuICovXG5jbGFzcyBDb21ib0JveENvbXBvbmVudCB7XG4gICAgY29uc3RydWN0b3IobG9jYWxpemF0aW9uLCBwb3B1cFNlcnZpY2UsIHNlbGVjdGlvblNlcnZpY2UsIG5hdmlnYXRpb25TZXJ2aWNlLCBkaXNhYmxlZEl0ZW1zU2VydmljZSwgZGF0YVNlcnZpY2UsIF96b25lLCBjZHIsIHJlbmRlcmVyLCB3cmFwcGVyLCB0b3VjaEVuYWJsZWQpIHtcbiAgICAgICAgdGhpcy5sb2NhbGl6YXRpb24gPSBsb2NhbGl6YXRpb247XG4gICAgICAgIHRoaXMucG9wdXBTZXJ2aWNlID0gcG9wdXBTZXJ2aWNlO1xuICAgICAgICB0aGlzLnNlbGVjdGlvblNlcnZpY2UgPSBzZWxlY3Rpb25TZXJ2aWNlO1xuICAgICAgICB0aGlzLm5hdmlnYXRpb25TZXJ2aWNlID0gbmF2aWdhdGlvblNlcnZpY2U7XG4gICAgICAgIHRoaXMuZGlzYWJsZWRJdGVtc1NlcnZpY2UgPSBkaXNhYmxlZEl0ZW1zU2VydmljZTtcbiAgICAgICAgdGhpcy5kYXRhU2VydmljZSA9IGRhdGFTZXJ2aWNlO1xuICAgICAgICB0aGlzLl96b25lID0gX3pvbmU7XG4gICAgICAgIHRoaXMuY2RyID0gY2RyO1xuICAgICAgICB0aGlzLnJlbmRlcmVyID0gcmVuZGVyZXI7XG4gICAgICAgIHRoaXMudG91Y2hFbmFibGVkID0gdG91Y2hFbmFibGVkO1xuICAgICAgICB0aGlzLnNlbGVjdGVkID0gW107XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAaGlkZGVuXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmZvY3VzYWJsZUlkID0gYGstJHtndWlkKCl9YDtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFNwZWNpZmllcyB3aGV0aGVyIHRoZSBDb21ib0JveCBhbGxvd3MgdXNlci1kZWZpbmVkIHZhbHVlcyB0aGF0IGFyZSBub3QgcHJlc2VudCBpbiB0aGUgZGF0YXNldFxuICAgICAgICAgKiAoW21vcmUgaW5mb3JtYXRpb24gYW5kIGV4YW1wbGVzXSh7JSBzbHVnIGN1c3RvbV92YWx1ZXNfY29tYm9ib3ggJX0pKS5cbiAgICAgICAgICogRGVmYXVsdHMgdG8gYGZhbHNlYC5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuYWxsb3dDdXN0b20gPSBmYWxzZTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEEgdXNlci1kZWZpbmVkIGNhbGxiYWNrIHdoaWNoIHJldHVybnMgbm9ybWFsaXplZCBjdXN0b20gdmFsdWVzLlxuICAgICAgICAgKiBUeXBpY2FsbHkgdXNlZCB3aGVuIHRoZSBkYXRhIGl0ZW1zIGFyZSBkaWZmZXJlbnQgZnJvbSB0eXBlIGBzdHJpbmdgLlxuICAgICAgICAgKiBAcGFyYW0geyBBbnkgfSB2YWx1ZSAtIFRoZSBjdXN0b20gdmFsdWUgZGVmaW5lZCBieSB0aGUgdXNlci5cbiAgICAgICAgICogQHJldHVybnMgeyBBbnkgfVxuICAgICAgICAgKlxuICAgICAgICAgKiBAZXhhbXBsZVxuICAgICAgICAgKiBgYGB0c1xuICAgICAgICAgKiBpbXBvcnQgeyBtYXAgfSBmcm9tICdyeGpzL29wZXJhdG9ycyc7XG4gICAgICAgICAqXG4gICAgICAgICAqIF9AQ29tcG9uZW50KHtcbiAgICAgICAgICogc2VsZWN0b3I6ICdteS1hcHAnLFxuICAgICAgICAgKiB0ZW1wbGF0ZTogYFxuICAgICAgICAgKiAgIDxrZW5kby1jb21ib2JveFxuICAgICAgICAgKiAgICAgICBbYWxsb3dDdXN0b21dPVwidHJ1ZVwiXG4gICAgICAgICAqICAgICAgIFtkYXRhXT1cImxpc3RJdGVtc1wiXG4gICAgICAgICAqICAgICAgIFt0ZXh0RmllbGRdPVwiJ3RleHQnXCJcbiAgICAgICAgICogICAgICAgW3ZhbHVlRmllbGRdPVwiJ3ZhbHVlJ1wiXG4gICAgICAgICAqICAgICAgIFt2YWx1ZU5vcm1hbGl6ZXJdPVwidmFsdWVOb3JtYWxpemVyXCJcbiAgICAgICAgICogICAgICAgKHZhbHVlQ2hhbmdlKT1cIm9uVmFsdWVDaGFuZ2UoJGV2ZW50KVwiXG4gICAgICAgICAqICAgPlxuICAgICAgICAgKiAgIDwva2VuZG8tY29tYm9ib3g+XG4gICAgICAgICAqIGBcbiAgICAgICAgICogfSlcbiAgICAgICAgICpcbiAgICAgICAgICogY2xhc3MgQXBwQ29tcG9uZW50IHtcbiAgICAgICAgICogICBwdWJsaWMgbGlzdEl0ZW1zOiBBcnJheTx7IHRleHQ6IHN0cmluZywgdmFsdWU6IG51bWJlciB9PiA9IFtcbiAgICAgICAgICogICAgICAgeyB0ZXh0OiBcIlNtYWxsXCIsIHZhbHVlOiAxIH0sXG4gICAgICAgICAqICAgICAgIHsgdGV4dDogXCJNZWRpdW1cIiwgdmFsdWU6IDIgfSxcbiAgICAgICAgICogICAgICAgeyB0ZXh0OiBcIkxhcmdlXCIsIHZhbHVlOiAzIH1cbiAgICAgICAgICogICBdO1xuICAgICAgICAgKlxuICAgICAgICAgKiAgIHB1YmxpYyBvblZhbHVlQ2hhbmdlKHZhbHVlKSB7XG4gICAgICAgICAqICAgICAgIGNvbnNvbGUubG9nKFwidmFsdWVDaGFuZ2UgOiBcIiwgdmFsdWUpO1xuICAgICAgICAgKiAgIH1cbiAgICAgICAgICpcbiAgICAgICAgICogICBwdWJsaWMgdmFsdWVOb3JtYWxpemVyID0gKHRleHQkOiBPYnNlcnZhYmxlPHN0cmluZz4pID0+IHRleHQkLnBpcGUobWFwKCh0ZXh0OiBzdHJpbmcpID0+IHtcbiAgICAgICAgICogICAgICByZXR1cm4geyBQcm9kdWN0SUQ6IG51bGwsIFByb2R1Y3ROYW1lOiB0ZXh0IH07XG4gICAgICAgICAqICAgfSkpO1xuICAgICAgICAgKlxuICAgICAgICAgKiB9XG4gICAgICAgICAqIGBgYFxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy52YWx1ZU5vcm1hbGl6ZXIgPSAodGV4dCkgPT4gdGV4dC5waXBlKG1hcCgodXNlcklucHV0KSA9PiB1c2VySW5wdXQpKTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFRoZSBoaW50IHRoYXQgaXMgZGlzcGxheWVkIHdoZW4gdGhlIGNvbXBvbmVudCBpcyBlbXB0eS5cbiAgICAgICAgICpcbiAgICAgICAgICovXG4gICAgICAgIHRoaXMucGxhY2Vob2xkZXIgPSBcIlwiO1xuICAgICAgICAvKipcbiAgICAgICAgICogU2V0cyB0aGUgaGVpZ2h0IG9mIHRoZSBzdWdnZXN0aW9ucyBsaXN0LiBCeSBkZWZhdWx0LCBgbGlzdEhlaWdodGAgaXMgMjAwcHguXG4gICAgICAgICAqXG4gICAgICAgICAqID4gVGhlIGBsaXN0SGVpZ2h0YCBwcm9wZXJ0eSBhZmZlY3RzIG9ubHkgdGhlIGxpc3Qgb2Ygc3VnZ2VzdGlvbnMgYW5kIG5vdCB0aGUgd2hvbGUgcG9wdXAgY29udGFpbmVyLlxuICAgICAgICAgKiA+IFRvIHNldCB0aGUgaGVpZ2h0IG9mIHRoZSBwb3B1cCBjb250YWluZXIsIHVzZSBgcG9wdXBTZXR0aW5ncy5oZWlnaHRgLlxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5saXN0SGVpZ2h0ID0gMjAwO1xuICAgICAgICAvKipcbiAgICAgICAgICogRW5hYmxlcyB0aGUgYXV0by1jb21wbGV0aW9uIG9mIHRoZSB0ZXh0IGJhc2VkIG9uIHRoZSBmaXJzdCBkYXRhIGl0ZW0uXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLnN1Z2dlc3QgPSBmYWxzZTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIElmIHNldCB0byBgdHJ1ZWAsIHJlbmRlcnMgYSBidXR0b24gb24gaG92ZXJpbmcgb3ZlciB0aGUgY29tcG9uZW50LlxuICAgICAgICAgKiBDbGlja2luZyB0aGlzIGJ1dHRvbiByZXNldHMgdGhlIHZhbHVlIG9mIHRoZSBjb21wb25lbnQgdG8gYHVuZGVmaW5lZGAgYW5kIHRyaWdnZXJzIHRoZSBgY2hhbmdlYCBldmVudC5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuY2xlYXJCdXR0b24gPSB0cnVlO1xuICAgICAgICAvKipcbiAgICAgICAgICogU2V0cyB0aGUgZGlzYWJsZWQgc3RhdGUgb2YgdGhlIGNvbXBvbmVudC5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuZGlzYWJsZWQgPSBmYWxzZTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFNldHMgdGhlIHJlYWQtb25seSBzdGF0ZSBvZiB0aGUgY29tcG9uZW50LlxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5yZWFkb25seSA9IGZhbHNlO1xuICAgICAgICAvKipcbiAgICAgICAgICogU3BlY2lmaWVzIHRoZSBbYHRhYmluZGV4YF0oaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvSFRNTC9HbG9iYWxfYXR0cmlidXRlcy90YWJpbmRleCkgb2YgdGhlIGNvbXBvbmVudC5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMudGFiaW5kZXggPSAwO1xuICAgICAgICAvKipcbiAgICAgICAgICogRW5hYmxlcyB0aGUgW2ZpbHRlcmluZ10oeyUgc2x1ZyBmaWx0ZXJpbmdfY29tYm9ib3ggJX0pIGZ1bmN0aW9uYWxpdHkuXG4gICAgICAgICAqIElmIHNldCB0byBgdHJ1ZWAsIHRoZSBjb21wb25lbnQgZW1pdHMgdGhlIGBmaWx0ZXJDaGFuZ2VgIGV2ZW50LlxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5maWx0ZXJhYmxlID0gZmFsc2U7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBGaXJlcyBlYWNoIHRpbWUgdGhlIHZhbHVlIGlzIGNoYW5nZWQmbWRhc2g7XG4gICAgICAgICAqIHdoZW4gdGhlIGNvbXBvbmVudCBpcyBibHVycmVkIG9yIHRoZSB2YWx1ZSBpcyBjbGVhcmVkIHRocm91Z2ggdGhlICoqQ2xlYXIqKiBidXR0b25cbiAgICAgICAgICogKFtzZWUgZXhhbXBsZV0oeyUgc2x1ZyBvdmVydmlld19jb21ib2JveCAlfSN0b2MtZXZlbnRzKSkuXG4gICAgICAgICAqIFdoZW4gdGhlIHZhbHVlIG9mIHRoZSBjb21wb25lbnQgaXMgcHJvZ3JhbW1hdGljYWxseSBjaGFuZ2VkIHRvIGBuZ01vZGVsYCBvciBgZm9ybUNvbnRyb2xgXG4gICAgICAgICAqIHRocm91Z2ggaXRzIEFQSSBvciBmb3JtIGJpbmRpbmcsIHRoZSBgdmFsdWVDaGFuZ2VgIGV2ZW50IGlzIG5vdCB0cmlnZ2VyZWQgYmVjYXVzZSBpdFxuICAgICAgICAgKiBtaWdodCBjYXVzZSBhIG1peC11cCB3aXRoIHRoZSBidWlsdC1pbiBgdmFsdWVDaGFuZ2VgIG1lY2hhbmlzbXMgb2YgdGhlIGBuZ01vZGVsYCBvciBgZm9ybUNvbnRyb2xgIGJpbmRpbmdzLlxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy52YWx1ZUNoYW5nZSA9IG5ldyBFdmVudEVtaXR0ZXIoKTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEZpcmVzIGVhY2ggdGltZSBhbiBpdGVtIHNlbGVjdGlvbiBpcyBjaGFuZ2VkXG4gICAgICAgICAqIChbc2VlIGV4YW1wbGVdKHslIHNsdWcgb3ZlcnZpZXdfY29tYm9ib3ggJX0jdG9jLWV2ZW50cykpLlxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5zZWxlY3Rpb25DaGFuZ2UgPSBuZXcgRXZlbnRFbWl0dGVyKCk7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBGaXJlcyBlYWNoIHRpbWUgdGhlIHVzZXIgdHlwZXMgaW4gdGhlIGlucHV0IGZpZWxkLlxuICAgICAgICAgKiBZb3UgY2FuIGZpbHRlciB0aGUgc291cmNlIGJhc2VkIG9uIHRoZSBwYXNzZWQgZmlsdHJhdGlvbiB2YWx1ZVxuICAgICAgICAgKiAoW3NlZSBleGFtcGxlXSh7JSBzbHVnIG92ZXJ2aWV3X2NvbWJvYm94ICV9I3RvYy1ldmVudHMpKS5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuZmlsdGVyQ2hhbmdlID0gbmV3IEV2ZW50RW1pdHRlcigpO1xuICAgICAgICAvKipcbiAgICAgICAgICogRmlyZXMgZWFjaCB0aW1lIHRoZSBwb3B1cCBpcyBhYm91dCB0byBvcGVuLlxuICAgICAgICAgKiBUaGlzIGV2ZW50IGlzIHByZXZlbnRhYmxlLiBJZiB5b3UgY2FuY2VsIGl0LCB0aGUgcG9wdXAgd2lsbCByZW1haW4gY2xvc2VkLlxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5vcGVuID0gbmV3IEV2ZW50RW1pdHRlcigpO1xuICAgICAgICAvKipcbiAgICAgICAgICogRmlyZXMgZWFjaCB0aW1lIHRoZSBwb3B1cCBpcyBhYm91dCB0byBjbG9zZS5cbiAgICAgICAgICogVGhpcyBldmVudCBpcyBwcmV2ZW50YWJsZS4gSWYgeW91IGNhbmNlbCBpdCwgdGhlIHBvcHVwIHdpbGwgcmVtYWluIG9wZW4uXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmNsb3NlID0gbmV3IEV2ZW50RW1pdHRlcigpO1xuICAgICAgICAvKipcbiAgICAgICAgICogRmlyZXMgZWFjaCB0aW1lIHRoZSB1c2VyIGZvY3VzZXMgdGhlIENvbWJvQm94LlxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5vbkZvY3VzID0gbmV3IEV2ZW50RW1pdHRlcigpOyAvL3RzbGludDpkaXNhYmxlLWxpbmU6bm8tb3V0cHV0LXJlbmFtZVxuICAgICAgICAvKipcbiAgICAgICAgICogRmlyZXMgZWFjaCB0aW1lIHRoZSBDb21ib0JveCBnZXRzIGJsdXJyZWQuXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLm9uQmx1ciA9IG5ldyBFdmVudEVtaXR0ZXIoKTsgLy90c2xpbnQ6ZGlzYWJsZS1saW5lOm5vLW91dHB1dC1yZW5hbWVcbiAgICAgICAgdGhpcy53aWRnZXRDbGFzc2VzID0gdHJ1ZTtcbiAgICAgICAgdGhpcy5pc0ZvY3VzZWQgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5saXN0Qm94SWQgPSBndWlkKCk7XG4gICAgICAgIHRoaXMub3B0aW9uUHJlZml4ID0gZ3VpZCgpO1xuICAgICAgICB0aGlzLm9uQ2hhbmdlQ2FsbGJhY2sgPSAoXykgPT4geyB9O1xuICAgICAgICB0aGlzLm9uVG91Y2hlZENhbGxiYWNrID0gKF8pID0+IHsgfTtcbiAgICAgICAgdGhpcy5fZmlsdGVyaW5nID0gZmFsc2U7XG4gICAgICAgIHRoaXMuX3RleHQgPSAnJztcbiAgICAgICAgdGhpcy5maWx0ZXJUZXh0ID0gJyc7XG4gICAgICAgIHRoaXMuX29wZW4gPSBmYWxzZTtcbiAgICAgICAgdGhpcy5fcG9wdXBTZXR0aW5ncyA9IHsgYW5pbWF0ZTogdHJ1ZSB9O1xuICAgICAgICB0aGlzLnBvcHVwTW91c2VEb3duSGFuZGxlciA9IChldmVudCkgPT4gZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgdGhpcy5jdXN0b21WYWx1ZVN1YmplY3QgPSBuZXcgU3ViamVjdCgpO1xuICAgICAgICB0aGlzLnZhbHVlU3ViamVjdCA9IG5ldyBTdWJqZWN0KCk7XG4gICAgICAgIHRoaXMuY2xlYXJWYWx1ZVN1YmplY3QgPSBuZXcgU3ViamVjdCgpO1xuICAgICAgICB0aGlzLnNlbGVjdGlvblN1YmplY3QgPSBuZXcgU3ViamVjdCgpO1xuICAgICAgICB0aGlzLnN1YnMgPSBuZXcgU3Vic2NyaXB0aW9uKCk7XG4gICAgICAgIHRoaXMuZGlyZWN0aW9uID0gbG9jYWxpemF0aW9uLnJ0bCA/ICdydGwnIDogJ2x0cic7XG4gICAgICAgIHRoaXMud3JhcHBlciA9IHdyYXBwZXIubmF0aXZlRWxlbWVudDtcbiAgICAgICAgdGhpcy5kYXRhID0gW107XG4gICAgfVxuICAgIGdldCB3aWR0aCgpIHtcbiAgICAgICAgbGV0IHdyYXBwZXJPZmZzZXRXaWR0aCA9IDA7XG4gICAgICAgIGlmIChpc0RvY3VtZW50QXZhaWxhYmxlKCkpIHtcbiAgICAgICAgICAgIHdyYXBwZXJPZmZzZXRXaWR0aCA9IHRoaXMud3JhcHBlci5vZmZzZXRXaWR0aDtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCB3aWR0aCA9IHRoaXMucG9wdXBTZXR0aW5ncy53aWR0aCB8fCB3cmFwcGVyT2Zmc2V0V2lkdGg7XG4gICAgICAgIGNvbnN0IG1pbldpZHRoID0gaXNOYU4od3JhcHBlck9mZnNldFdpZHRoKSA/IHdyYXBwZXJPZmZzZXRXaWR0aCA6IGAke3dyYXBwZXJPZmZzZXRXaWR0aH1weGA7XG4gICAgICAgIGNvbnN0IG1heFdpZHRoID0gaXNOYU4od2lkdGgpID8gd2lkdGggOiBgJHt3aWR0aH1weGA7XG4gICAgICAgIHJldHVybiB7IG1pbjogbWluV2lkdGgsIG1heDogbWF4V2lkdGggfTtcbiAgICB9XG4gICAgZ2V0IGhlaWdodCgpIHtcbiAgICAgICAgY29uc3QgcG9wdXBIZWlnaHQgPSB0aGlzLnBvcHVwU2V0dGluZ3MuaGVpZ2h0O1xuICAgICAgICByZXR1cm4gaXNQcmVzZW50KHBvcHVwSGVpZ2h0KSA/IGAke3BvcHVwSGVpZ2h0fXB4YCA6ICdhdXRvJztcbiAgICB9XG4gICAgc2V0IHRleHQodGV4dCkge1xuICAgICAgICB0aGlzLl90ZXh0ID0gaXNQcmVzZW50KHRleHQpID8gdGV4dC50b1N0cmluZygpIDogXCJcIjtcbiAgICB9XG4gICAgZ2V0IHRleHQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl90ZXh0O1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAaGlkZGVuXG4gICAgICovXG4gICAgdG9nZ2xlUG9wdXAob3Blbikge1xuICAgICAgICBjb25zdCBpc0Rpc2FibGVkID0gdGhpcy5kaXNhYmxlZCB8fCB0aGlzLnJlYWRvbmx5O1xuICAgICAgICBjb25zdCBzYW1lU3RhdGUgPSB0aGlzLmlzT3BlbiA9PT0gb3BlbjtcbiAgICAgICAgaWYgKGlzRGlzYWJsZWQgfHwgc2FtZVN0YXRlKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgaXNEZWZhdWx0UHJldmVudGVkID0gdGhpcy50cmlnZ2VyUG9wdXBFdmVudHMob3Blbik7XG4gICAgICAgIGlmICghaXNEZWZhdWx0UHJldmVudGVkKSB7XG4gICAgICAgICAgICB0aGlzLl90b2dnbGUob3Blbik7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZ2V0IGFjdGl2ZURlc2NlbmRhbnQoKSB7XG4gICAgICAgIGlmICghdGhpcy5pc09wZW4gfHwgIWlzUHJlc2VudCh0aGlzLnNlbGVjdGlvblNlcnZpY2UuZm9jdXNlZCkgfHwgdGhpcy5zZWxlY3Rpb25TZXJ2aWNlLmZvY3VzZWQgPT09IC0xKSB7XG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBkYXRhSXRlbSA9IHRoaXMuZGF0YVNlcnZpY2UuaXRlbUF0KHRoaXMuc2VsZWN0aW9uU2VydmljZS5mb2N1c2VkKTtcbiAgICAgICAgcmV0dXJuIHRoaXMub3B0aW9uUHJlZml4ICsgXCItXCIgKyAoZGF0YUl0ZW0gPyBnZXR0ZXIoZGF0YUl0ZW0sIHRoaXMudmFsdWVGaWVsZCkgOiBcIlwiKTtcbiAgICB9XG4gICAgZ2V0IG5vRGF0YUxhYmVsKCkge1xuICAgICAgICBpZiAodGhpcy5kYXRhLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMubm9EYXRhVGV4dDtcbiAgICAgICAgfVxuICAgIH1cbiAgICBnZXQgY2xlYXJUaXRsZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubG9jYWxpemF0aW9uLmdldCgnY2xlYXJUaXRsZScpO1xuICAgIH1cbiAgICBnZXQgYXBwZW5kVG8oKSB7XG4gICAgICAgIGNvbnN0IHsgYXBwZW5kVG8gfSA9IHRoaXMucG9wdXBTZXR0aW5ncztcbiAgICAgICAgaWYgKCFhcHBlbmRUbyB8fCBhcHBlbmRUbyA9PT0gJ3Jvb3QnKSB7XG4gICAgICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBhcHBlbmRUbyA9PT0gJ2NvbXBvbmVudCcgPyB0aGlzLmNvbnRhaW5lciA6IGFwcGVuZFRvO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBTZXRzIHRoZSBkYXRhIG9mIHRoZSBDb21ib0JveC5cbiAgICAgKlxuICAgICAqID4gVGhlIGRhdGEgaGFzIHRvIGJlIHByb3ZpZGVkIGluIGFuIGFycmF5LWxpa2UgbGlzdC5cbiAgICAgKi9cbiAgICBzZXQgZGF0YShkYXRhKSB7XG4gICAgICAgIHRoaXMuZGF0YVNlcnZpY2UuZGF0YSA9IGRhdGEgfHwgW107XG4gICAgICAgIGlmICh0aGlzLnZpcnR1YWwpIHtcbiAgICAgICAgICAgIHRoaXMudmlydHVhbC5za2lwID0gMDtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnNldFN0YXRlKCk7XG4gICAgICAgIGlmICh0aGlzLl9maWx0ZXJpbmcpIHtcbiAgICAgICAgICAgIGNvbnN0IHF1ZXJ5QW5kRGF0YVByZXNlbnQgPSB0aGlzLnRleHQubGVuZ3RoID4gMCAmJiB0aGlzLmRhdGFTZXJ2aWNlLml0ZW1zQ291bnQgPiAwO1xuICAgICAgICAgICAgY29uc3QgaW5kZXggPSBxdWVyeUFuZERhdGFQcmVzZW50ID8gdGhpcy5maXJzdEZvY3VzYWJsZUluZGV4KDApIDogLTE7XG4gICAgICAgICAgICB0aGlzLnNlbGVjdGlvblNlcnZpY2UuZm9jdXNlZCA9IGluZGV4O1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLnN1Z2dlc3QgJiYgdGhpcy5kYXRhU2VydmljZS5pdGVtc0NvdW50ICYmIHRoaXMudGV4dCkge1xuICAgICAgICAgICAgdGhpcy5zdWdnZXN0ZWRUZXh0ID0gZ2V0dGVyKHRoaXMuZGF0YVNlcnZpY2UuaXRlbUF0KDApLCB0aGlzLnRleHRGaWVsZCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZ2V0IGRhdGEoKSB7XG4gICAgICAgIGNvbnN0IHZpcnR1YWwgPSB0aGlzLnZpcnR1YWw7XG4gICAgICAgIGlmICh2aXJ0dWFsKSB7XG4gICAgICAgICAgICBjb25zdCBzdGFydCA9IHZpcnR1YWwuc2tpcCB8fCAwO1xuICAgICAgICAgICAgY29uc3QgZW5kID0gc3RhcnQgKyB2aXJ0dWFsLnBhZ2VTaXplO1xuICAgICAgICAgICAgLy8gVXNlIGxlbmd0aCBpbnN0ZWFkIG9mIGl0ZW1zQ291bnQgYmVjYXVzZSBvZiB0aGUgZ3JvdXBpbmcuXG4gICAgICAgICAgICB2aXJ0dWFsLnRvdGFsID0gdGhpcy5kYXRhU2VydmljZS5kYXRhLmxlbmd0aDtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmRhdGFTZXJ2aWNlLmRhdGEuc2xpY2Uoc3RhcnQsIGVuZCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXMuZGF0YVNlcnZpY2UuZGF0YTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogU2V0cyB0aGUgdmFsdWUgb2YgdGhlIENvbWJvQm94LlxuICAgICAqIEl0IGNhbiBlaXRoZXIgYmUgb2YgdGhlIHByaW1pdGl2ZSAoc3RyaW5nLCBudW1iZXJzKSBvciBvZiB0aGUgY29tcGxleCAob2JqZWN0cykgdHlwZS5cbiAgICAgKiBUbyBkZWZpbmUgdGhlIHR5cGUsIHVzZSB0aGUgYHZhbHVlUHJpbWl0aXZlYCBvcHRpb24uXG4gICAgICpcbiAgICAgKiA+IEFsbCBzZWxlY3RlZCB2YWx1ZXMgd2hpY2ggYXJlIG5vdCBwcmVzZW50IGluIHRoZSBkYXRhc2V0IGFyZSBjb25zaWRlcmVkIGN1c3RvbSB2YWx1ZXMuXG4gICAgICogPiBXaGVuIHRoZSBgRW50ZXJgIGtleSBpcyBwcmVzc2VkIG9yIHRoZSBjb21wb25lbnQgbG9zZXMgZm9jdXMsIGN1c3RvbSB2YWx1ZXMgZ2V0IGRpc21pc3NlZCB1bmxlc3MgYGFsbG93Q3VzdG9tYCBpcyBzZXQgdG8gYHRydWVgLlxuICAgICAqL1xuICAgIHNldCB2YWx1ZShuZXdWYWx1ZSkge1xuICAgICAgICB0aGlzLnZlcmlmeVNldHRpbmdzKG5ld1ZhbHVlKTtcbiAgICAgICAgdGhpcy5fdmFsdWUgPSBuZXdWYWx1ZTtcbiAgICAgICAgdGhpcy5jZHIubWFya0ZvckNoZWNrKCk7XG4gICAgfVxuICAgIGdldCB2YWx1ZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3ZhbHVlO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDb25maWd1cmVzIHRoZSBwb3B1cCBvZiB0aGUgQ29tYm9Cb3guXG4gICAgICpcbiAgICAgKiBUaGUgYXZhaWxhYmxlIG9wdGlvbnMgYXJlOlxuICAgICAqIC0gYGFuaW1hdGU6IEJvb2xlYW5gJm1kYXNoO0NvbnRyb2xzIHRoZSBwb3B1cCBhbmltYXRpb24uIEJ5IGRlZmF1bHQsIHRoZSBvcGVuIGFuZCBjbG9zZSBhbmltYXRpb25zIGFyZSBlbmFibGVkLlxuICAgICAqIC0gYHdpZHRoOiBOdW1iZXIgfCBTdHJpbmdgJm1kYXNoO1NldHMgdGhlIHdpZHRoIG9mIHRoZSBwb3B1cCBjb250YWluZXIuIEJ5IGRlZmF1bHQsIHRoZSB3aWR0aCBvZiB0aGUgaG9zdCBlbGVtZW50IGlzIHVzZWQuIElmIHNldCB0byBgYXV0b2AsIHRoZSBjb21wb25lbnQgYXV0b21hdGljYWxseSBhZGp1c3RzIHRoZSB3aWR0aCBvZiB0aGUgcG9wdXAgYW5kIG5vIGl0ZW0gbGFiZWxzIGFyZSB3cmFwcGVkLiBUaGUgYGF1dG9gIG1vZGUgaXMgbm90IHN1cHBvcnRlZCB3aGVuIHZpcnR1YWwgc2Nyb2xsaW5nIGlzIGVuYWJsZWQuXG4gICAgICogLSBgaGVpZ2h0OiBOdW1iZXJgJm1kYXNoO1NldHMgdGhlIGhlaWdodCBvZiB0aGUgcG9wdXAgY29udGFpbmVyLlxuICAgICAqIC0gYHBvcHVwQ2xhc3M6IFN0cmluZ2AmbWRhc2g7U3BlY2lmaWVzIGEgbGlzdCBvZiBDU1MgY2xhc3NlcyB0aGF0IGFyZSB1c2VkIHRvIHN0eWxlIHRoZSBwb3B1cC5cbiAgICAgKiAtIGBhcHBlbmRUbzogXCJyb290XCIgfCBcImNvbXBvbmVudFwiIHwgVmlld0NvbnRhaW5lclJlZmAmbWRhc2g7U3BlY2lmaWVzIHRoZSBjb21wb25lbnQgdG8gd2hpY2ggdGhlIHBvcHVwIHdpbGwgYmUgYXBwZW5kZWQuXG4gICAgICovXG4gICAgc2V0IHBvcHVwU2V0dGluZ3Moc2V0dGluZ3MpIHtcbiAgICAgICAgdGhpcy5fcG9wdXBTZXR0aW5ncyA9IE9iamVjdC5hc3NpZ24oeyBhbmltYXRlOiB0cnVlIH0sIHNldHRpbmdzKTtcbiAgICB9XG4gICAgZ2V0IHBvcHVwU2V0dGluZ3MoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9wb3B1cFNldHRpbmdzO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBEZWZpbmVzIGEgQm9vbGVhbiBmdW5jdGlvbiB0aGF0IGlzIGV4ZWN1dGVkIGZvciBlYWNoIGRhdGEgaXRlbSBpbiB0aGUgY29tcG9uZW50XG4gICAgICogKFtzZWUgZXhhbXBsZXNdKHslIHNsdWcgZGlzYWJsZWRpdGVtc19jb21ib2JveCAlfSkpLiBEZXRlcm1pbmVzIHdoZXRoZXIgdGhlIGl0ZW0gd2lsbCBiZSBkaXNhYmxlZC5cbiAgICAgKi9cbiAgICBzZXQgaXRlbURpc2FibGVkKGZuKSB7XG4gICAgICAgIGlmICh0eXBlb2YgZm4gIT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgaXRlbURpc2FibGVkIG11c3QgYmUgYSBmdW5jdGlvbiwgYnV0IHJlY2VpdmVkICR7SlNPTi5zdHJpbmdpZnkoZm4pfS5gKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmRpc2FibGVkSXRlbXNTZXJ2aWNlLml0ZW1EaXNhYmxlZCA9IGZuO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAaGlkZGVuXG4gICAgICovXG4gICAgc2V0IHRhYkluZGV4KHRhYkluZGV4KSB7XG4gICAgICAgIHRoaXMudGFiaW5kZXggPSB0YWJJbmRleDtcbiAgICB9XG4gICAgZ2V0IHRhYkluZGV4KCkge1xuICAgICAgICByZXR1cm4gdGhpcy50YWJpbmRleDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogRW5hYmxlcyB0aGUgW3ZpcnR1YWxpemF0aW9uXSh7JSBzbHVnIHZpcnR1YWxpemF0aW9uX2NvbWJvYm94ICV9KSBmdW5jdGlvbmFsaXR5LlxuICAgICAqL1xuICAgIHNldCB2aXJ0dWFsKHNldHRpbmdzKSB7XG4gICAgICAgIHRoaXMuX3ZpcnR1YWxTZXR0aW5ncyA9IG5vcm1hbGl6ZVZpcnR1YWxpemF0aW9uU2V0dGluZ3Moc2V0dGluZ3MpO1xuICAgIH1cbiAgICBnZXQgdmlydHVhbCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3ZpcnR1YWxTZXR0aW5ncztcbiAgICB9XG4gICAgZ2V0IGNsZWFyYWJsZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuY2xlYXJCdXR0b247XG4gICAgfVxuICAgIGdldCBkaXIoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmRpcmVjdGlvbjtcbiAgICB9XG4gICAgbmdPbkluaXQoKSB7XG4gICAgICAgIHRoaXMucmVuZGVyZXIucmVtb3ZlQXR0cmlidXRlKHRoaXMud3JhcHBlciwgXCJ0YWJpbmRleFwiKTtcbiAgICAgICAgdGhpcy5hdHRhY2hTdHJlYW1zKCk7XG4gICAgICAgIHRoaXMuY3JlYXRlU2VsZWN0aW9uU3RyZWFtKCk7XG4gICAgICAgIHRoaXMuY3JlYXRlVmFsdWVTdHJlYW0oKTtcbiAgICAgICAgdGhpcy5zZXRNZXNzYWdlcygpO1xuICAgIH1cbiAgICBjcmVhdGVWYWx1ZVN0cmVhbSgpIHtcbiAgICAgICAgY29uc3QgdmFsdWVTdHJlYW0gPSB0aGlzLnZhbHVlU3ViamVjdC5waXBlKGZpbHRlcigoY2FuZGlkYXRlKSA9PiB7XG4gICAgICAgICAgICBjb25zdCB2YWx1ZUZyb20gPSB0aGlzLnByb3AodGhpcy52YWx1ZUZpZWxkLCB0aGlzLnZhbHVlUHJpbWl0aXZlKTtcbiAgICAgICAgICAgIGNvbnN0IHRleHRGcm9tID0gdGhpcy5wcm9wKHRoaXMudGV4dEZpZWxkLCB0aGlzLnZhbHVlUHJpbWl0aXZlKTtcbiAgICAgICAgICAgIGNvbnN0IGN1cnJlbnQgPSB2YWx1ZUZyb20odGhpcy52YWx1ZSk7XG4gICAgICAgICAgICBjb25zdCBuZXdWYWx1ZSA9IHZhbHVlRnJvbShjYW5kaWRhdGUpO1xuICAgICAgICAgICAgbGV0IG5ld1RleHQgPSB0ZXh0RnJvbShjYW5kaWRhdGUpO1xuICAgICAgICAgICAgaWYgKCFpc1ByZXNlbnQodGhpcy52YWx1ZSkgJiYgIWlzUHJlc2VudChuZXdWYWx1ZSkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoaXNQcmVzZW50KG5ld1RleHQpKSB7XG4gICAgICAgICAgICAgICAgbmV3VGV4dCA9IG5ld1RleHQudG9TdHJpbmcoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChjdXJyZW50ID09PSBuZXdWYWx1ZSAmJiB0aGlzLnRleHQgPT09IG5ld1RleHQpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmNsZWFyRmlsdGVyKCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pLCBtYXAoKGNhbmRpZGF0ZSkgPT4ge1xuICAgICAgICAgICAgY29uc3QgdmFsdWVGcm9tID0gdGhpcy5wcm9wKHRoaXMudmFsdWVGaWVsZCwgdGhpcy52YWx1ZVByaW1pdGl2ZSk7XG4gICAgICAgICAgICBjb25zdCB0ZXh0RnJvbSA9IHRoaXMucHJvcCh0aGlzLnRleHRGaWVsZCwgdGhpcy52YWx1ZVByaW1pdGl2ZSk7XG4gICAgICAgICAgICBjb25zdCBuZXdWYWx1ZSA9IHZhbHVlRnJvbShjYW5kaWRhdGUpO1xuICAgICAgICAgICAgY29uc3QgbmV3VGV4dCA9IHRleHRGcm9tKGNhbmRpZGF0ZSk7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIGRhdGFJdGVtOiBjYW5kaWRhdGUsXG4gICAgICAgICAgICAgICAgdGV4dDogbmV3VGV4dCxcbiAgICAgICAgICAgICAgICB2YWx1ZTogdGhpcy52YWx1ZVByaW1pdGl2ZSA/IG5ld1ZhbHVlIDogY2FuZGlkYXRlXG4gICAgICAgICAgICB9O1xuICAgICAgICB9KSk7XG4gICAgICAgIGNvbnN0IGN1c3RvbVZhbHVlU3RyZWFtcyA9IHBhcnRpdGlvbigoKSA9PiB0aGlzLmFsbG93Q3VzdG9tKSh0aGlzLmN1c3RvbVZhbHVlU3ViamVjdC5waXBlKHRocm90dGxlVGltZSgzMDApKSk7XG4gICAgICAgIGNvbnN0IGFsbG93Q3VzdG9tVmFsdWVTdHJlYW0gPSBjdXN0b21WYWx1ZVN0cmVhbXNbMF0ucGlwZSh0YXAoKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5sb2FkaW5nID0gdHJ1ZTtcbiAgICAgICAgICAgIHRoaXMuZGlzYWJsZWQgPSB0cnVlO1xuICAgICAgICAgICAgdGhpcy5jZHIuZGV0ZWN0Q2hhbmdlcygpO1xuICAgICAgICB9KSwgZmlsdGVyKCgpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHZhbHVlRnJvbSA9IHRoaXMucHJvcCh0aGlzLnZhbHVlRmllbGQsIHRoaXMudmFsdWVQcmltaXRpdmUpO1xuICAgICAgICAgICAgY29uc3QgaGFzQ2hhbmdlID0gdGhpcy50ZXh0ICE9PSB2YWx1ZUZyb20odGhpcy52YWx1ZSk7XG4gICAgICAgICAgICB0aGlzLmxvYWRpbmcgPSBoYXNDaGFuZ2U7XG4gICAgICAgICAgICB0aGlzLmRpc2FibGVkID0gaGFzQ2hhbmdlO1xuICAgICAgICAgICAgaWYgKCFoYXNDaGFuZ2UpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmNsZWFyRmlsdGVyKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gaGFzQ2hhbmdlO1xuICAgICAgICB9KSwgdGhpcy52YWx1ZU5vcm1hbGl6ZXIsIG1hcCgobm9ybWFsaXplZFZhbHVlKSA9PiB7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIGN1c3RvbTogdHJ1ZSxcbiAgICAgICAgICAgICAgICBkYXRhSXRlbTogbm9ybWFsaXplZFZhbHVlLFxuICAgICAgICAgICAgICAgIHRleHQ6IHRoaXMudGV4dCxcbiAgICAgICAgICAgICAgICB2YWx1ZTogbm9ybWFsaXplZFZhbHVlXG4gICAgICAgICAgICB9O1xuICAgICAgICB9KSk7XG4gICAgICAgIGNvbnN0IGRpc2FibGVDdXN0b21WYWx1ZVN0cmVhbSA9IGN1c3RvbVZhbHVlU3RyZWFtc1sxXS5waXBlKG1hcCgoKSA9PiB7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIGN1c3RvbTogdHJ1ZSxcbiAgICAgICAgICAgICAgICBkYXRhSXRlbTogdW5kZWZpbmVkLFxuICAgICAgICAgICAgICAgIHRleHQ6IHVuZGVmaW5lZCxcbiAgICAgICAgICAgICAgICB2YWx1ZTogdW5kZWZpbmVkXG4gICAgICAgICAgICB9O1xuICAgICAgICB9KSk7XG4gICAgICAgIGNvbnN0IGNsZWFyVmFsdWVTdHJlYW0gPSB0aGlzLmNsZWFyVmFsdWVTdWJqZWN0LnBpcGUobWFwKCgpID0+ICh7XG4gICAgICAgICAgICBkYXRhSXRlbTogdW5kZWZpbmVkLFxuICAgICAgICAgICAgdGV4dDogdW5kZWZpbmVkLFxuICAgICAgICAgICAgdmFsdWU6IHVuZGVmaW5lZFxuICAgICAgICB9KSkpO1xuICAgICAgICBpZiAodGhpcy52YWx1ZVN1YnNjcmlwdGlvbikge1xuICAgICAgICAgICAgdGhpcy52YWx1ZVN1YnNjcmlwdGlvbi51bnN1YnNjcmliZSgpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IG1lcmdlZCA9IG1lcmdlKHZhbHVlU3RyZWFtLCBhbGxvd0N1c3RvbVZhbHVlU3RyZWFtLCBkaXNhYmxlQ3VzdG9tVmFsdWVTdHJlYW0sIGNsZWFyVmFsdWVTdHJlYW0pO1xuICAgICAgICB0aGlzLnZhbHVlU3Vic2NyaXB0aW9uID0gbWVyZ2VkLnBpcGUoY2F0Y2hFcnJvcigoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLmRhdGFJdGVtID0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgdGhpcy52YWx1ZSA9IHVuZGVmaW5lZDtcbiAgICAgICAgICAgIHRoaXMudGV4dCA9IHVuZGVmaW5lZDtcbiAgICAgICAgICAgIHRoaXMubG9hZGluZyA9IGZhbHNlO1xuICAgICAgICAgICAgdGhpcy5kaXNhYmxlZCA9IGZhbHNlO1xuICAgICAgICAgICAgdGhpcy5lbWl0U2VsZWN0aW9uQ2hhbmdlKHVuZGVmaW5lZCk7XG4gICAgICAgICAgICB0aGlzLmVtaXRWYWx1ZUNoYW5nZSgpO1xuICAgICAgICAgICAgdGhpcy5jcmVhdGVWYWx1ZVN0cmVhbSgpO1xuICAgICAgICAgICAgcmV0dXJuIG9mKG51bGwpO1xuICAgICAgICB9KSlcbiAgICAgICAgICAgIC5zdWJzY3JpYmUoKHN0YXRlKSA9PiB7XG4gICAgICAgICAgICB0aGlzLmRhdGFJdGVtID0gc3RhdGUuZGF0YUl0ZW07XG4gICAgICAgICAgICB0aGlzLnZhbHVlID0gc3RhdGUudmFsdWU7XG4gICAgICAgICAgICB0aGlzLnRleHQgPSBzdGF0ZS50ZXh0O1xuICAgICAgICAgICAgdGhpcy5sb2FkaW5nID0gZmFsc2U7XG4gICAgICAgICAgICB0aGlzLmRpc2FibGVkID0gZmFsc2U7XG4gICAgICAgICAgICB0aGlzLmNsZWFyRmlsdGVyKCk7XG4gICAgICAgICAgICBpZiAoc3RhdGUuY3VzdG9tKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5zZWxlY3Rpb25TZXJ2aWNlLmZvY3VzZWQgPSAtMTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuZW1pdFNlbGVjdGlvbkNoYW5nZShzdGF0ZS5jdXN0b20gPyB1bmRlZmluZWQgOiB0aGlzLmRhdGFJdGVtKTtcbiAgICAgICAgICAgIHRoaXMuZW1pdFZhbHVlQ2hhbmdlKCk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBhdHRhY2hTdHJlYW1zKCkge1xuICAgICAgICBpZiAoIWlzRG9jdW1lbnRBdmFpbGFibGUoKSkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuc3Vicy5hZGQodGhpcy5sb2NhbGl6YXRpb25cbiAgICAgICAgICAgIC5jaGFuZ2VzLnN1YnNjcmliZSgoeyBydGwgfSkgPT4ge1xuICAgICAgICAgICAgdGhpcy5kaXJlY3Rpb24gPSBydGwgPyAncnRsJyA6ICdsdHInO1xuICAgICAgICAgICAgdGhpcy5zZXRNZXNzYWdlcygpO1xuICAgICAgICB9KSk7XG4gICAgICAgIHRoaXMuc3Vicy5hZGQobWVyZ2UodGhpcy5uYXZpZ2F0aW9uU2VydmljZS51cCwgdGhpcy5uYXZpZ2F0aW9uU2VydmljZS5kb3duLCB0aGlzLm5hdmlnYXRpb25TZXJ2aWNlLmhvbWUsIHRoaXMubmF2aWdhdGlvblNlcnZpY2UuZW5kKVxuICAgICAgICAgICAgLnBpcGUoZmlsdGVyKChldmVudCkgPT4gaXNQcmVzZW50KGV2ZW50LmluZGV4KSkpXG4gICAgICAgICAgICAuc3Vic2NyaWJlKChldmVudCkgPT4gdGhpcy5uYXZpZ2F0ZShldmVudC5pbmRleCkpKTtcbiAgICAgICAgdGhpcy5zdWJzLmFkZCh0aGlzLm5hdmlnYXRpb25TZXJ2aWNlLm9wZW4uc3Vic2NyaWJlKHRoaXMuaGFuZGxlTmF2aWdhdGlvbk9wZW4uYmluZCh0aGlzKSkpO1xuICAgICAgICB0aGlzLnN1YnMuYWRkKHRoaXMubmF2aWdhdGlvblNlcnZpY2UuY2xvc2Uuc3Vic2NyaWJlKCgpID0+IHRoaXMudG9nZ2xlUG9wdXAoZmFsc2UpKSk7XG4gICAgICAgIHRoaXMuc3Vicy5hZGQodGhpcy5uYXZpZ2F0aW9uU2VydmljZS5lc2Muc3Vic2NyaWJlKHRoaXMuaGFuZGxlRXNjYXBlLmJpbmQodGhpcykpKTtcbiAgICAgICAgdGhpcy5zdWJzLmFkZCh0aGlzLm5hdmlnYXRpb25TZXJ2aWNlLmVudGVyLnBpcGUodGFwKChldmVudCkgPT4ge1xuICAgICAgICAgICAgaWYgKHRoaXMuaXNPcGVuKSB7XG4gICAgICAgICAgICAgICAgZXZlbnQub3JpZ2luYWxFdmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KSlcbiAgICAgICAgICAgIC5zdWJzY3JpYmUodGhpcy5oYW5kbGVFbnRlci5iaW5kKHRoaXMpKSk7XG4gICAgICAgIHRoaXMuc3Vicy5hZGQobWVyZ2UodGhpcy5zZWxlY3Rpb25TZXJ2aWNlLm9uQ2hhbmdlLCB0aGlzLnNlbGVjdGlvblNlcnZpY2Uub25TZWxlY3QucGlwZShmaWx0ZXIoXyA9PiAhdGhpcy5pc09wZW4pKSlcbiAgICAgICAgICAgIC5waXBlKHRhcChfID0+IHtcbiAgICAgICAgICAgIHRoaXMuX2ZpbHRlcmluZyA9IGZhbHNlO1xuICAgICAgICAgICAgdGhpcy50b2dnbGVQb3B1cChmYWxzZSk7XG4gICAgICAgIH0pLCBtYXAoKGV2ZW50KSA9PiB0aGlzLmRhdGFTZXJ2aWNlLml0ZW1BdChldmVudC5pbmRpY2VzWzBdKSkpXG4gICAgICAgICAgICAuc3Vic2NyaWJlKGRhdGFJdGVtID0+IHtcbiAgICAgICAgICAgIHRoaXMuY2hhbmdlKGRhdGFJdGVtKTtcbiAgICAgICAgfSkpO1xuICAgICAgICB0aGlzLnN1YnMuYWRkKHRoaXMuc2VsZWN0aW9uU2VydmljZS5vblNlbGVjdC5waXBlKGZpbHRlcihfID0+IHRoaXMuaXNPcGVuKSwgdGFwKF8gPT4gdGhpcy5fZmlsdGVyaW5nID0gZmFsc2UpLCBtYXAoKGV2ZW50KSA9PiB0aGlzLmRhdGFTZXJ2aWNlLml0ZW1BdChldmVudC5pbmRpY2VzWzBdKSkpXG4gICAgICAgICAgICAuc3Vic2NyaWJlKGRhdGFJdGVtID0+IHtcbiAgICAgICAgICAgIHRoaXMudXBkYXRlU3RhdGUoeyBkYXRhSXRlbSB9KTtcbiAgICAgICAgICAgIHRoaXMuZW1pdFNlbGVjdGlvbkNoYW5nZShkYXRhSXRlbSk7XG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgbmdPbkRlc3Ryb3koKSB7XG4gICAgICAgIHRoaXMuZGVzdHJveVBvcHVwKCk7XG4gICAgICAgIGNsZWFyVGltZW91dCh0aGlzLm1lc3NhZ2VzVGltZW91dCk7XG4gICAgICAgIHRoaXMuc3Vicy51bnN1YnNjcmliZSgpO1xuICAgICAgICBbdGhpcy52YWx1ZVN1YnNjcmlwdGlvbiwgdGhpcy5zZWxlY3Rpb25TdWJzY3JpcHRpb25dLmZvckVhY2goc3ViID0+IGlzUHJlc2VudChzdWIpICYmIHN1Yi51bnN1YnNjcmliZSgpKTtcbiAgICB9XG4gICAgbmdPbkNoYW5nZXMoY2hhbmdlcykge1xuICAgICAgICBjb25zdCB2aXJ0dWFsID0gdGhpcy52aXJ0dWFsO1xuICAgICAgICBjb25zdCByZXF1ZXN0SW5pdGlhbERhdGEgPSB2aXJ0dWFsICYmIGNoYW5nZXMuZGF0YSAmJiBjaGFuZ2VzLmRhdGEuaXNGaXJzdENoYW5nZSgpO1xuICAgICAgICBpZiAocmVxdWVzdEluaXRpYWxEYXRhKSB7XG4gICAgICAgICAgICB0aGlzLnBhZ2VDaGFuZ2UoeyBza2lwOiAwLCB0YWtlOiB2aXJ0dWFsLnBhZ2VTaXplIH0pO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLnZhbHVlUHJpbWl0aXZlID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHRoaXMudmFsdWVQcmltaXRpdmUgPSB0aGlzLnZhbHVlRmllbGQgPyBmYWxzZSA6IHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy52ZXJpZnlTZXR0aW5ncyh0aGlzLnZhbHVlKTtcbiAgICAgICAgaWYgKGlzQ2hhbmdlZChcInZhbHVlTm9ybWFsaXplclwiLCBjaGFuZ2VzKSkge1xuICAgICAgICAgICAgdGhpcy5jcmVhdGVWYWx1ZVN0cmVhbSgpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChpc0NoYW5nZWQoXCJ2YWx1ZVwiLCBjaGFuZ2VzKSkge1xuICAgICAgICAgICAgdGhpcy5jcmVhdGVTZWxlY3Rpb25TdHJlYW0oKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy52YWx1ZVByaW1pdGl2ZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0aGlzLnZhbHVlUHJpbWl0aXZlID0gdGhpcy52YWx1ZUZpZWxkID8gZmFsc2UgOiB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IFNUQVRFX1BST1BTID0gLyh2YWx1ZXx0ZXh0RmllbGR8dmFsdWVGaWVsZHx2YWx1ZVByaW1pdGl2ZSkvZztcbiAgICAgICAgaWYgKFNUQVRFX1BST1BTLnRlc3QoT2JqZWN0LmtleXMoY2hhbmdlcykuam9pbigpKSkge1xuICAgICAgICAgICAgdGhpcy5zZXRTdGF0ZSgpO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEZvY3VzZXMgdGhlIENvbWJvQm94LlxuICAgICAqL1xuICAgIGZvY3VzKCkge1xuICAgICAgICBpZiAoIXRoaXMuZGlzYWJsZWQpIHtcbiAgICAgICAgICAgIHRoaXMuc2VhcmNoYmFyLmZvY3VzKCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogQmx1cnMgdGhlIENvbWJvQm94LlxuICAgICAqL1xuICAgIGJsdXIoKSB7XG4gICAgICAgIGlmICghdGhpcy5kaXNhYmxlZCkge1xuICAgICAgICAgICAgdGhpcy5zZWFyY2hiYXIuYmx1cigpO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFRvZ2dsZXMgdGhlIHZpc2liaWxpdHkgb2YgdGhlIHBvcHVwLiBJZiB5b3UgdXNlIHRoZSBgdG9nZ2xlYCBtZXRob2QgdG8gb3BlbiBvciBjbG9zZSB0aGUgcG9wdXAsXG4gICAgICogdGhlIGBvcGVuYCBhbmQgYGNsb3NlYCBldmVudHMgd2lsbCBub3QgYmUgZmlyZWQuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gb3BlbiAtIFRoZSBzdGF0ZSBvZiB0aGUgcG9wdXAuXG4gICAgICovXG4gICAgdG9nZ2xlKG9wZW4pIHtcbiAgICAgICAgUHJvbWlzZS5yZXNvbHZlKG51bGwpLnRoZW4oKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5fdG9nZ2xlKG9wZW4pO1xuICAgICAgICAgICAgdGhpcy5jZHIubWFya0ZvckNoZWNrKCk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHRoZSBjdXJyZW50IG9wZW4gc3RhdGUgb2YgdGhlIHBvcHVwLlxuICAgICAqL1xuICAgIGdldCBpc09wZW4oKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9vcGVuO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXNldHMgdGhlIHZhbHVlIG9mIHRoZSBDb21ib0JveC5cbiAgICAgKiBJZiB5b3UgdXNlIHRoZSBgcmVzZXRgIG1ldGhvZCB0byBjbGVhciB0aGUgdmFsdWUgb2YgdGhlIGNvbXBvbmVudCxcbiAgICAgKiB0aGUgbW9kZWwgd2lsbCBub3QgdXBkYXRlIGF1dG9tYXRpY2FsbHkgYW5kIHRoZSBgc2VsZWN0aW9uQ2hhbmdlYCBhbmQgYHZhbHVlQ2hhbmdlYCBldmVudHMgd2lsbCBub3QgYmUgZmlyZWQuXG4gICAgICovXG4gICAgcmVzZXQoKSB7XG4gICAgICAgIHRoaXMudmFsdWUgPSB1bmRlZmluZWQ7XG4gICAgICAgIHRoaXMuY2xlYXJTdGF0ZSgpO1xuICAgICAgICB0aGlzLnJlc2V0U2VsZWN0aW9uKCk7XG4gICAgICAgIHRoaXMuY3JlYXRlU2VsZWN0aW9uU3RyZWFtKCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEBoaWRkZW5cbiAgICAgKlxuICAgICAqIFVzZWQgYnkgdGhlIFRleHRCb3hDb250YWluZXIgdG8gZGV0ZXJtaW5lIGlmIHRoZSBmbG9hdGluZyBsYWJlbFxuICAgICAqIHNob3VsZCBiZSByZW5kZXJlZCBpbiB0aGUgaW5wdXQgd2hlbiB0aGUgY29tcG9uZW50IGlzIG5vdCBmb2N1c2VkLlxuICAgICAqL1xuICAgIGlzRW1wdHkoKSB7XG4gICAgICAgIGNvbnN0IHRleHRFbXB0eSA9ICFpc1ByZXNlbnQodGhpcy50ZXh0KSB8fCBpc0VtcHR5U3RyaW5nKHRoaXMudGV4dCk7XG4gICAgICAgIGNvbnN0IHZhbHVlRW1wdHkgPSAhaXNQcmVzZW50KHRoaXMudmFsdWUpIHx8IGlzRW1wdHlTdHJpbmcodGhpcy52YWx1ZSk7XG4gICAgICAgIHJldHVybiB0ZXh0RW1wdHkgJiYgdmFsdWVFbXB0eTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQGhpZGRlblxuICAgICAqL1xuICAgIGNsZWFyVmFsdWUoZXZlbnQpIHtcbiAgICAgICAgZXZlbnQuc3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uKCk7XG4gICAgICAgIHRoaXMuZm9jdXMoKTtcbiAgICAgICAgdGhpcy5fZmlsdGVyaW5nID0gdHJ1ZTtcbiAgICAgICAgdGhpcy5fcHJldmlvdXNEYXRhSXRlbSA9IHVuZGVmaW5lZDtcbiAgICAgICAgdGhpcy5zZWxlY3Rpb25TZXJ2aWNlLnJlc2V0U2VsZWN0aW9uKFtdKTtcbiAgICAgICAgdGhpcy5jbGVhclZhbHVlU3ViamVjdC5uZXh0KCk7XG4gICAgICAgIHRoaXMuX2ZpbHRlcmluZyA9IGZhbHNlO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAaGlkZGVuXG4gICAgICovXG4gICAgd3JpdGVWYWx1ZSh2YWx1ZSkge1xuICAgICAgICB0aGlzLnRleHQgPSBcIlwiO1xuICAgICAgICB0aGlzLnZhbHVlID0gdmFsdWUgPT09IG51bGwgPyB1bmRlZmluZWQgOiB2YWx1ZTtcbiAgICAgICAgdGhpcy5zZXRTdGF0ZSgpO1xuICAgICAgICB0aGlzLmNyZWF0ZVNlbGVjdGlvblN0cmVhbSgpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAaGlkZGVuXG4gICAgICovXG4gICAgcmVnaXN0ZXJPbkNoYW5nZShmbikge1xuICAgICAgICB0aGlzLm9uQ2hhbmdlQ2FsbGJhY2sgPSBmbjtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQGhpZGRlblxuICAgICAqL1xuICAgIHJlZ2lzdGVyT25Ub3VjaGVkKGZuKSB7XG4gICAgICAgIHRoaXMub25Ub3VjaGVkQ2FsbGJhY2sgPSBmbjtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQGhpZGRlblxuICAgICAqL1xuICAgIHNldERpc2FibGVkU3RhdGUoaXNEaXNhYmxlZCkge1xuICAgICAgICB0aGlzLmRpc2FibGVkID0gaXNEaXNhYmxlZDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQGhpZGRlblxuICAgICAqL1xuICAgIGdldCBidXR0b25DbGFzc2VzKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5sb2FkaW5nID8gJ2staS1sb2FkaW5nJyA6IHRoaXMuaWNvbkNsYXNzIHx8ICdrLWktYXJyb3ctcyc7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEBoaWRkZW5cbiAgICAgKi9cbiAgICBvblJlc2l6ZSgpIHtcbiAgICAgICAgaWYgKHRoaXMuaXNPcGVuKSB7XG4gICAgICAgICAgICBjb25zdCBwb3B1cFdyYXBwZXIgPSB0aGlzLnBvcHVwUmVmLnBvcHVwRWxlbWVudDtcbiAgICAgICAgICAgIGNvbnN0IHsgbWluLCBtYXggfSA9IHRoaXMud2lkdGg7XG4gICAgICAgICAgICBwb3B1cFdyYXBwZXIuc3R5bGUubWluV2lkdGggPSBtaW47XG4gICAgICAgICAgICBwb3B1cFdyYXBwZXIuc3R5bGUud2lkdGggPSBtYXg7XG4gICAgICAgIH1cbiAgICB9XG4gICAgdmVyaWZ5U2V0dGluZ3MobmV3VmFsdWUpIHtcbiAgICAgICAgY29uc3QgdmFsdWVPclRleHQgPSAhaXNQcmVzZW50KHRoaXMudmFsdWVGaWVsZCkgIT09ICFpc1ByZXNlbnQodGhpcy50ZXh0RmllbGQpO1xuICAgICAgICBpZiAoIWlzRGV2TW9kZSgpKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMudmFsdWVQcmltaXRpdmUgPT09IHRydWUgJiYgaXNQcmVzZW50KG5ld1ZhbHVlKSAmJiB0eXBlb2YgbmV3VmFsdWUgPT09IFwib2JqZWN0XCIpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihDb21ib0JveE1lc3NhZ2VzLnByaW1pdGl2ZSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMudmFsdWVQcmltaXRpdmUgPT09IGZhbHNlICYmIGlzUHJlc2VudChuZXdWYWx1ZSkgJiYgdHlwZW9mIG5ld1ZhbHVlICE9PSBcIm9iamVjdFwiKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoQ29tYm9Cb3hNZXNzYWdlcy5vYmplY3QpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh2YWx1ZU9yVGV4dCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKENvbWJvQm94TWVzc2FnZXMudGV4dEFuZFZhbHVlKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy52aXJ0dWFsICYmIGlzTmFOKHRoaXMudmlydHVhbC5pdGVtSGVpZ2h0KSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKENvbWJvQm94TWVzc2FnZXMubm9JdGVtSGVpZ2h0KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBzZXRTdGF0ZSgpIHtcbiAgICAgICAgLy8gRmlsdGVyaW5nIGluIHByb2Nlc3MsIGRvIG5vdGhpbmcuXG4gICAgICAgIGlmICh0aGlzLl9maWx0ZXJpbmcpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCB2YWx1ZSA9IHRoaXMudmFsdWU7XG4gICAgICAgIGNvbnN0IHZhbHVlRmllbGQgPSB0aGlzLnZhbHVlRmllbGQ7XG4gICAgICAgIGNvbnN0IHByaW1pdGl2ZSA9IHRoaXMudmFsdWVQcmltaXRpdmU7XG4gICAgICAgIGNvbnN0IHJlc29sdmVkID0gdGhpcy5maW5kRGF0YUl0ZW0oeyBwcmltaXRpdmUsIHZhbHVlRmllbGQsIHZhbHVlIH0pO1xuICAgICAgICBpZiAoaXNQcmVzZW50KHJlc29sdmVkLmRhdGFJdGVtKSkge1xuICAgICAgICAgICAgdGhpcy51cGRhdGVTdGF0ZSh7IGRhdGFJdGVtOiByZXNvbHZlZC5kYXRhSXRlbSwgY29uZmlybTogdHJ1ZSB9KTtcbiAgICAgICAgICAgIHRoaXMucmVzZXRTZWxlY3Rpb24ocmVzb2x2ZWQuaW5kZXgpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGlzUHJlc2VudCh2YWx1ZSkgJiYgdGhpcy5hbGxvd0N1c3RvbSkge1xuICAgICAgICAgICAgdGhpcy51cGRhdGVTdGF0ZSh7IGRhdGFJdGVtOiB2YWx1ZSB9KTtcbiAgICAgICAgICAgIHRoaXMucmVzZXRTZWxlY3Rpb24oLTEpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHRoaXMuX3ByZXZpb3VzRGF0YUl0ZW0gJiYgdGhpcy52YWx1ZSkge1xuICAgICAgICAgICAgdGhpcy51cGRhdGVTdGF0ZSh7IGRhdGFJdGVtOiB0aGlzLl9wcmV2aW91c0RhdGFJdGVtIH0pO1xuICAgICAgICAgICAgdGhpcy5yZXNldFNlbGVjdGlvbigpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5jbGVhclN0YXRlKCk7XG4gICAgICAgICAgICB0aGlzLnJlc2V0U2VsZWN0aW9uKC0xKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICB1cGRhdGVTdGF0ZSh7IGRhdGFJdGVtLCBjb25maXJtID0gZmFsc2UgfSkge1xuICAgICAgICB0aGlzLmRhdGFJdGVtID0gZGF0YUl0ZW07XG4gICAgICAgIHRoaXMudGV4dCA9IHRoaXMucHJvcCh0aGlzLnRleHRGaWVsZCwgdGhpcy52YWx1ZVByaW1pdGl2ZSkoZGF0YUl0ZW0pO1xuICAgICAgICBpZiAoY29uZmlybSkge1xuICAgICAgICAgICAgdGhpcy5fcHJldmlvdXNEYXRhSXRlbSA9IGRhdGFJdGVtO1xuICAgICAgICB9XG4gICAgfVxuICAgIGNsZWFyU3RhdGUoKSB7XG4gICAgICAgIHRoaXMudGV4dCA9IHVuZGVmaW5lZDtcbiAgICAgICAgdGhpcy5kYXRhSXRlbSA9IHVuZGVmaW5lZDtcbiAgICB9XG4gICAgcmVzZXRTZWxlY3Rpb24oaW5kZXgpIHtcbiAgICAgICAgY29uc3QgY2xlYXIgPSAhaXNQcmVzZW50KGluZGV4KSB8fCBpbmRleCA8IDA7XG4gICAgICAgIHRoaXMuc2VsZWN0aW9uU2VydmljZS5yZXNldFNlbGVjdGlvbihjbGVhciA/IFtdIDogW2luZGV4XSk7XG4gICAgICAgIHRoaXMuc2VsZWN0aW9uU2VydmljZS5mb2N1c2VkID0gaW5kZXg7XG4gICAgfVxuICAgIGZpcnN0Rm9jdXNhYmxlSW5kZXgoaW5kZXgpIHtcbiAgICAgICAgY29uc3QgbWF4SW5kZXggPSB0aGlzLmRhdGEubGVuZ3RoIC0gMTtcbiAgICAgICAgaWYgKHRoaXMuZGlzYWJsZWRJdGVtc1NlcnZpY2UuaXNJbmRleERpc2FibGVkKGluZGV4KSkge1xuICAgICAgICAgICAgcmV0dXJuIChpbmRleCA8IG1heEluZGV4KSA/IHRoaXMuZmlyc3RGb2N1c2FibGVJbmRleChpbmRleCArIDEpIDogdW5kZWZpbmVkO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIGluZGV4O1xuICAgICAgICB9XG4gICAgfVxuICAgIGZpbmRJbmRleFByZWRpY2F0ZSh0ZXh0KSB7XG4gICAgICAgIGlmICh0aGlzLmRhdGFTZXJ2aWNlLmdyb3VwZWQpIHtcbiAgICAgICAgICAgIHJldHVybiAoaXRlbSkgPT4ge1xuICAgICAgICAgICAgICAgIGxldCBpdGVtVGV4dCA9IHRoaXMucHJvcCh0aGlzLnRleHRGaWVsZCwgdGhpcy52YWx1ZVByaW1pdGl2ZSkoaXRlbS52YWx1ZSk7XG4gICAgICAgICAgICAgICAgaXRlbVRleHQgPSAhaXNQcmVzZW50KGl0ZW1UZXh0KSA/IFwiXCIgOiBpdGVtVGV4dC50b1N0cmluZygpLnRvTG93ZXJDYXNlKCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGl0ZW1UZXh0LnN0YXJ0c1dpdGgodGV4dC50b0xvd2VyQ2FzZSgpKTtcbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gKGl0ZW0pID0+IHtcbiAgICAgICAgICAgICAgICBsZXQgaXRlbVRleHQgPSB0aGlzLnByb3AodGhpcy50ZXh0RmllbGQsIHRoaXMudmFsdWVQcmltaXRpdmUpKGl0ZW0pO1xuICAgICAgICAgICAgICAgIGl0ZW1UZXh0ID0gIWlzUHJlc2VudChpdGVtVGV4dCkgPyBcIlwiIDogaXRlbVRleHQudG9TdHJpbmcoKS50b0xvd2VyQ2FzZSgpO1xuICAgICAgICAgICAgICAgIHJldHVybiBpdGVtVGV4dC5zdGFydHNXaXRoKHRleHQudG9Mb3dlckNhc2UoKSk7XG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgfVxuICAgIHByb3AoZmllbGQsIHVzZVByaW1pdGl2ZSkge1xuICAgICAgICByZXR1cm4gKGRhdGFJdGVtKSA9PiB7XG4gICAgICAgICAgICBpZiAoaXNQcmVzZW50KGRhdGFJdGVtKSkge1xuICAgICAgICAgICAgICAgIGlmICh1c2VQcmltaXRpdmUpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZpZWxkICYmIGlzT2JqZWN0KGRhdGFJdGVtKSA/IGRhdGFJdGVtW2ZpZWxkXSA6IGRhdGFJdGVtO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGRhdGFJdGVtW2ZpZWxkXTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfTtcbiAgICB9XG4gICAgZmluZERhdGFJdGVtKHsgcHJpbWl0aXZlLCB2YWx1ZUZpZWxkLCB2YWx1ZSB9KSB7XG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IHtcbiAgICAgICAgICAgIGRhdGFJdGVtOiBudWxsLFxuICAgICAgICAgICAgaW5kZXg6IC0xXG4gICAgICAgIH07XG4gICAgICAgIGNvbnN0IHByb3AgPSB0aGlzLnByb3AodmFsdWVGaWVsZCwgcHJpbWl0aXZlKTtcbiAgICAgICAgbGV0IGNvbXBhcmVyO1xuICAgICAgICBpZiAodGhpcy5kYXRhU2VydmljZS5ncm91cGVkKSB7XG4gICAgICAgICAgICBjb21wYXJlciA9IChlbGVtZW50KSA9PiB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHByb3AoZWxlbWVudC52YWx1ZSkgPT09IHByb3AodmFsdWUpO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGNvbXBhcmVyID0gKGVsZW1lbnQpID0+IHtcbiAgICAgICAgICAgICAgICByZXR1cm4gcHJvcChlbGVtZW50KSA9PT0gcHJvcCh2YWx1ZSk7XG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGluZGV4ID0gdGhpcy5kYXRhU2VydmljZS5maW5kSW5kZXgoY29tcGFyZXIpO1xuICAgICAgICByZXN1bHQuZGF0YUl0ZW0gPSB0aGlzLmRhdGFTZXJ2aWNlLml0ZW1BdChpbmRleCk7XG4gICAgICAgIHJlc3VsdC5pbmRleCA9IGluZGV4O1xuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH1cbiAgICBzZWFyY2godGV4dCwgc3RhcnRGcm9tID0gMCkge1xuICAgICAgICBsZXQgaW5kZXg7XG4gICAgICAgIGlmICh0ZXh0Lmxlbmd0aCAmJiB0aGlzLmRhdGFTZXJ2aWNlLml0ZW1zQ291bnQpIHtcbiAgICAgICAgICAgIGluZGV4ID0gdGhpcy5kYXRhU2VydmljZS5maW5kSW5kZXgodGhpcy5maW5kSW5kZXhQcmVkaWNhdGUodGV4dCksIHN0YXJ0RnJvbSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBpbmRleCA9IC0xO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLmRpc2FibGVkSXRlbXNTZXJ2aWNlLmlzSW5kZXhEaXNhYmxlZChpbmRleCkpIHtcbiAgICAgICAgICAgIGlmIChpbmRleCArIDEgPCB0aGlzLmRhdGFTZXJ2aWNlLml0ZW1zQ291bnQpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnNlYXJjaCh0ZXh0LCBpbmRleCArIDEpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy5zZWxlY3Rpb25TZXJ2aWNlLmZvY3VzKC0xKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuc2VsZWN0aW9uU2VydmljZS5mb2N1cyhpbmRleCk7XG4gICAgICAgICAgICBpZiAodGhpcy5zdWdnZXN0KSB7XG4gICAgICAgICAgICAgICAgdGhpcy5zdWdnZXN0ZWRUZXh0ID0gZ2V0dGVyKHRoaXMuZGF0YVNlcnZpY2UuaXRlbUF0KGluZGV4KSwgdGhpcy50ZXh0RmllbGQpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEBoaWRkZW5cbiAgICAgKi9cbiAgICBnZXRTdWdnZXN0aW9uKCkge1xuICAgICAgICBjb25zdCBoYXNTZWxlY3RlZCA9ICEhdGhpcy5zZWxlY3Rpb25TZXJ2aWNlLnNlbGVjdGVkLmxlbmd0aDtcbiAgICAgICAgY29uc3Qgc2hvdWxkU3VnZ2VzdCA9IHRoaXMuc3VnZ2VzdCAmJiAhdGhpcy5iYWNrc3BhY2VQcmVzc2VkICYmIHRoaXMuc3VnZ2VzdGVkVGV4dCAmJiB0aGlzLnRleHQ7XG4gICAgICAgIGlmICghaGFzU2VsZWN0ZWQgJiYgc2hvdWxkU3VnZ2VzdCAmJiB0aGlzLnN1Z2dlc3RlZFRleHQudG9Mb3dlckNhc2UoKS5zdGFydHNXaXRoKHRoaXMudGV4dC50b0xvd2VyQ2FzZSgpKSkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuc3VnZ2VzdGVkVGV4dDtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuc3VnZ2VzdGVkVGV4dCA9IHVuZGVmaW5lZDtcbiAgICAgICAgfVxuICAgIH1cbiAgICBuYXZpZ2F0ZShpbmRleCkge1xuICAgICAgICBpZiAodGhpcy5kYXRhU2VydmljZS5pdGVtc0NvdW50ID09PSAwKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy50ZXh0ID0gdGhpcy5wcm9wKHRoaXMudGV4dEZpZWxkLCB0aGlzLnZhbHVlUHJpbWl0aXZlKSh0aGlzLmRhdGFTZXJ2aWNlLml0ZW1BdChpbmRleCkpO1xuICAgICAgICB0aGlzLnNlbGVjdGlvblNlcnZpY2Uuc2VsZWN0KGluZGV4KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQGhpZGRlblxuICAgICAqL1xuICAgIGhhbmRsZU5hdmlnYXRlKGV2ZW50KSB7XG4gICAgICAgIGNvbnN0IGhhc1NlbGVjdGVkID0gaXNQcmVzZW50KHRoaXMuc2VsZWN0aW9uU2VydmljZS5zZWxlY3RlZFswXSk7XG4gICAgICAgIGNvbnN0IGZvY3VzZWQgPSBpc05hTih0aGlzLnNlbGVjdGlvblNlcnZpY2UuZm9jdXNlZCkgPyB0aGlzLmZpcnN0Rm9jdXNhYmxlSW5kZXgoMCkgOiB0aGlzLnNlbGVjdGlvblNlcnZpY2UuZm9jdXNlZDtcbiAgICAgICAgbGV0IG9mZnNldCA9IDA7XG4gICAgICAgIGlmICh0aGlzLmRpc2FibGVkIHx8IHRoaXMucmVhZG9ubHkpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBpZiAoZXZlbnQua2V5Q29kZSA9PT0gS2V5cy5ob21lIHx8IGV2ZW50LmtleUNvZGUgPT09IEtleXMuZW5kKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFoYXNTZWxlY3RlZCkge1xuICAgICAgICAgICAgaWYgKGV2ZW50LmtleUNvZGUgPT09IEtleXMuZG93bikge1xuICAgICAgICAgICAgICAgIG9mZnNldCA9IC0xO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoZXZlbnQua2V5Q29kZSA9PT0gS2V5cy51cCkge1xuICAgICAgICAgICAgICAgIG9mZnNldCA9IDE7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgYWN0aW9uID0gdGhpcy5uYXZpZ2F0aW9uU2VydmljZS5wcm9jZXNzKHtcbiAgICAgICAgICAgIGN1cnJlbnQ6IG9mZnNldCArIGZvY3VzZWQsXG4gICAgICAgICAgICBtYXg6IHRoaXMuZGF0YVNlcnZpY2UuaXRlbXNDb3VudCAtIDEsXG4gICAgICAgICAgICBtaW46IDAsXG4gICAgICAgICAgICBvcmlnaW5hbEV2ZW50OiBldmVudFxuICAgICAgICB9KTtcbiAgICAgICAgaWYgKGFjdGlvbiAhPT0gTmF2aWdhdGlvbkFjdGlvbi5VbmRlZmluZWQgJiZcbiAgICAgICAgICAgIGFjdGlvbiAhPT0gTmF2aWdhdGlvbkFjdGlvbi5MZWZ0ICYmXG4gICAgICAgICAgICBhY3Rpb24gIT09IE5hdmlnYXRpb25BY3Rpb24uUmlnaHQgJiZcbiAgICAgICAgICAgIGFjdGlvbiAhPT0gTmF2aWdhdGlvbkFjdGlvbi5CYWNrc3BhY2UgJiZcbiAgICAgICAgICAgIGFjdGlvbiAhPT0gTmF2aWdhdGlvbkFjdGlvbi5EZWxldGUgJiZcbiAgICAgICAgICAgICgoYWN0aW9uID09PSBOYXZpZ2F0aW9uQWN0aW9uLkVudGVyICYmIHRoaXMuaXNPcGVuKSB8fCBhY3Rpb24gIT09IE5hdmlnYXRpb25BY3Rpb24uRW50ZXIpKSB7XG4gICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGhhbmRsZUVudGVyKCkge1xuICAgICAgICBjb25zdCB0ZXh0ID0gdGhpcy50ZXh0O1xuICAgICAgICBjb25zdCBmb2N1c2VkID0gdGhpcy5zZWxlY3Rpb25TZXJ2aWNlLmZvY3VzZWQ7XG4gICAgICAgIGNvbnN0IGhhc0ZvY3VzZWQgPSBpc1ByZXNlbnQoZm9jdXNlZCkgJiYgZm9jdXNlZCAhPT0gLTE7XG4gICAgICAgIGNvbnN0IHByZXZpb3VzVGV4dCA9IGdldHRlcih0aGlzLl9wcmV2aW91c0RhdGFJdGVtLCB0aGlzLnRleHRGaWVsZCkgfHwgXCJcIjtcbiAgICAgICAgY29uc3QgZm9jdXNlZEl0ZW1UZXh0ID0gZ2V0dGVyKHRoaXMuZGF0YVNlcnZpY2UuaXRlbUF0KGZvY3VzZWQpLCB0aGlzLnRleHRGaWVsZCk7XG4gICAgICAgIGNvbnN0IHRleHRIYXNDaGFuZ2VkID0gdGV4dCAhPT0gcHJldmlvdXNUZXh0O1xuICAgICAgICB0aGlzLnRvZ2dsZVBvcHVwKGZhbHNlKTtcbiAgICAgICAgdGhpcy5fZmlsdGVyaW5nID0gZmFsc2U7XG4gICAgICAgIGlmICh0aGlzLmFsbG93Q3VzdG9tICYmIHRleHRIYXNDaGFuZ2VkKSB7XG4gICAgICAgICAgICBpZiAodGV4dCA9PT0gZm9jdXNlZEl0ZW1UZXh0IHx8IHRoaXMudXNlU3VnZ2VzdGlvbigpKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5zZWxlY3Rpb25TZXJ2aWNlLmNoYW5nZShmb2N1c2VkKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMuY2hhbmdlKHRleHQsIHRydWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmICghdGhpcy5hbGxvd0N1c3RvbSkge1xuICAgICAgICAgICAgaWYgKGhhc0ZvY3VzZWQpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdGlvblNlcnZpY2UuY2hhbmdlKGZvY3VzZWQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAodGV4dEhhc0NoYW5nZWQpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmNoYW5nZSh0ZXh0LCB0cnVlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBAaGlkZGVuXG4gICAgICovXG4gICAgaGFuZGxlQmx1cigpIHtcbiAgICAgICAgdGhpcy5fZmlsdGVyaW5nID0gZmFsc2U7XG4gICAgICAgIGNvbnN0IGN1cnJlbnRUZXh0ID0gdGhpcy5zZWFyY2hiYXIudmFsdWU7IC8vIFRoZSB2YWx1ZSBpcyB1cGRhdGVkLCBidXQgdGhlIEFuZ3VsYXIgYGNoYW5nZWAgZXZlbnQgaXMgbm90IGVtaXR0ZWQgeWV0IGFuZCBgdGhpcy50ZXh0YCBpcyBub3QgdXBkYXRlZC4gRmFpbHMgb24gc3VnZ2VzdGVkIHRleHQuXG4gICAgICAgIGlmICghY3VycmVudFRleHQgJiYgIWlzUHJlc2VudCh0aGlzLl9wcmV2aW91c0RhdGFJdGVtKSAmJiAhaXNQcmVzZW50KHRoaXMuZGF0YUl0ZW0pKSB7XG4gICAgICAgICAgICB0aGlzLnRvZ2dsZVBvcHVwKGZhbHNlKTtcbiAgICAgICAgICAgIHRoaXMuaXNGb2N1c2VkID0gZmFsc2U7XG4gICAgICAgICAgICB0aGlzLm9uQmx1ci5lbWl0KCk7XG4gICAgICAgICAgICB0aGlzLm9uVG91Y2hlZENhbGxiYWNrKCk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgZm9jdXNlZCA9IHRoaXMuc2VsZWN0aW9uU2VydmljZS5mb2N1c2VkO1xuICAgICAgICBsZXQgaXRlbVRleHQ7XG4gICAgICAgIGNvbnN0IGlzSXRlbUZvY3VzZWQgPSBmb2N1c2VkICE9PSAtMSAmJiBmb2N1c2VkICE9PSB1bmRlZmluZWQ7XG4gICAgICAgIGlmIChpc0l0ZW1Gb2N1c2VkKSB7XG4gICAgICAgICAgICBpdGVtVGV4dCA9IGdldHRlcih0aGlzLmRhdGFTZXJ2aWNlLml0ZW1BdChmb2N1c2VkKSwgdGhpcy50ZXh0RmllbGQpO1xuICAgICAgICAgICAgaXRlbVRleHQgPSAhaXNQcmVzZW50KGl0ZW1UZXh0KSA/IFwiXCIgOiBpdGVtVGV4dC50b1N0cmluZygpLnRvTG93ZXJDYXNlKCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGl0ZW1UZXh0ID09PSBjdXJyZW50VGV4dC50b0xvd2VyQ2FzZSgpKSB7XG4gICAgICAgICAgICB0aGlzLnNlbGVjdGlvblNlcnZpY2UuY2hhbmdlKGZvY3VzZWQpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5jaGFuZ2UoY3VycmVudFRleHQsIHRydWUpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMudG9nZ2xlUG9wdXAoZmFsc2UpO1xuICAgICAgICB0aGlzLmlzRm9jdXNlZCA9IGZhbHNlO1xuICAgICAgICB0aGlzLm9uQmx1ci5lbWl0KCk7XG4gICAgICAgIHRoaXMub25Ub3VjaGVkQ2FsbGJhY2soKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQGhpZGRlblxuICAgICAqL1xuICAgIGhhbmRsZUVzY2FwZSgpIHtcbiAgICAgICAgdGhpcy50b2dnbGVQb3B1cChmYWxzZSk7XG4gICAgICAgIC8vIGNsZWFyIHRoZSBmb2N1cyBvbmx5IGlmIHRoZSBmb2N1c2VkIGl0ZW0gaXMgbm90IHNlbGVjdGVkXG4gICAgICAgIGNvbnN0IGhhc1NlbGVjdGVkID0gdGhpcy5zZWxlY3Rpb25TZXJ2aWNlLnNlbGVjdGVkLmxlbmd0aCA+IDA7XG4gICAgICAgIGlmICghaGFzU2VsZWN0ZWQpIHtcbiAgICAgICAgICAgIHRoaXMuc3VnZ2VzdGVkVGV4dCA9IG51bGw7XG4gICAgICAgICAgICB0aGlzLnNlbGVjdGlvblNlcnZpY2UuZm9jdXNlZCA9IC0xO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEBoaWRkZW5cbiAgICAgKi9cbiAgICBoYW5kbGVOYXZpZ2F0aW9uT3BlbigpIHtcbiAgICAgICAgdGhpcy5yZXN0b3JlSXRlbUZvY3VzKCk7XG4gICAgICAgIHRoaXMudG9nZ2xlUG9wdXAodHJ1ZSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEBoaWRkZW5cbiAgICAgKi9cbiAgICBzZWFyY2hCYXJDaGFuZ2UodGV4dCkge1xuICAgICAgICBjb25zdCBjdXJyZW50VGV4dExlbmd0aCA9IHRoaXMudGV4dCA/IHRoaXMudGV4dC5sZW5ndGggOiAwO1xuICAgICAgICB0aGlzLmJhY2tzcGFjZVByZXNzZWQgPSAodGV4dC5sZW5ndGggPCBjdXJyZW50VGV4dExlbmd0aCkgPyB0cnVlIDogZmFsc2U7XG4gICAgICAgIHRoaXMudGV4dCA9IHRleHQ7XG4gICAgICAgIC8vIFJlc2V0IHRoZSBzZWxlY3Rpb24gcHJpb3IgdG8gZmlsdGVyLiBJZiBhIG1hdGNoIGlzIHByZXNlbnQsIGl0IHdpbGwgYmUgcmVzb2x2ZWQuIElmIGEgbWF0Y2ggaXMgbm90IHByZXNlbnQsIGl0IGlzIG5vdCBuZWVkZWQuXG4gICAgICAgIHRoaXMuc2VsZWN0aW9uU2VydmljZS5yZXNldFNlbGVjdGlvbihbXSk7XG4gICAgICAgIHRoaXMudG9nZ2xlUG9wdXAodHJ1ZSk7XG4gICAgICAgIHRoaXMuX2ZpbHRlcmluZyA9IHRydWU7XG4gICAgICAgIGlmICh0aGlzLmZpbHRlcmFibGUgJiYgdGhpcy5maWx0ZXJUZXh0ICE9PSB0ZXh0KSB7XG4gICAgICAgICAgICB0aGlzLmZpbHRlclRleHQgPSB0ZXh0O1xuICAgICAgICAgICAgdGhpcy5maWx0ZXJDaGFuZ2UuZW1pdCh0ZXh0KTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuc2VhcmNoKHRleHQpO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEBoaWRkZW5cbiAgICAgKi9cbiAgICBoYW5kbGVGb2N1cygpIHtcbiAgICAgICAgdGhpcy5pc0ZvY3VzZWQgPSB0cnVlO1xuICAgICAgICB0aGlzLm9uRm9jdXMuZW1pdCgpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAaGlkZGVuXG4gICAgICovXG4gICAgcGFnZUNoYW5nZShldmVudCkge1xuICAgICAgICBjb25zdCB2aXJ0dWFsID0gdGhpcy52aXJ0dWFsO1xuICAgICAgICB2aXJ0dWFsLnNraXAgPSBldmVudC5za2lwO1xuICAgIH1cbiAgICBjaGFuZ2UoY2FuZGlkYXRlLCBpc0N1c3RvbSA9IGZhbHNlKSB7XG4gICAgICAgIGlmIChpc0N1c3RvbSkge1xuICAgICAgICAgICAgdGhpcy5jdXN0b21WYWx1ZVN1YmplY3QubmV4dChjYW5kaWRhdGUpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhpcy52YWx1ZVN1YmplY3QubmV4dChjYW5kaWRhdGUpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGVtaXRTZWxlY3Rpb25DaGFuZ2UoZGF0YUl0ZW0pIHtcbiAgICAgICAgdGhpcy5zZWxlY3Rpb25TdWJqZWN0Lm5leHQoZGF0YUl0ZW0pO1xuICAgIH1cbiAgICBlbWl0VmFsdWVDaGFuZ2UoKSB7XG4gICAgICAgIHRoaXMub25DaGFuZ2VDYWxsYmFjayh0aGlzLnZhbHVlKTtcbiAgICAgICAgdGhpcy52YWx1ZUNoYW5nZS5lbWl0KHRoaXMudmFsdWUpO1xuICAgICAgICB0aGlzLl9wcmV2aW91c0RhdGFJdGVtID0gdGhpcy5kYXRhSXRlbTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQGhpZGRlblxuICAgICAqL1xuICAgIHNlbGVjdENsaWNrKCkge1xuICAgICAgICBpZiAoIXRoaXMudG91Y2hFbmFibGVkKSB7XG4gICAgICAgICAgICB0aGlzLnNlYXJjaGJhci5mb2N1cygpO1xuICAgICAgICB9XG4gICAgICAgIGlmICghdGhpcy5pc09wZW4pIHtcbiAgICAgICAgICAgIHRoaXMucmVzdG9yZUl0ZW1Gb2N1cygpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMudG9nZ2xlUG9wdXAoIXRoaXMuaXNPcGVuKTtcbiAgICB9XG4gICAgZ2V0IGxpc3RDb250YWluZXJDbGFzc2VzKCkge1xuICAgICAgICBjb25zdCBjb250YWluZXJDbGFzc2VzID0gWydrLWxpc3QtY29udGFpbmVyJywgJ2stcmVzZXQnXTtcbiAgICAgICAgaWYgKHRoaXMucG9wdXBTZXR0aW5ncy5wb3B1cENsYXNzKSB7XG4gICAgICAgICAgICBjb250YWluZXJDbGFzc2VzLnB1c2godGhpcy5wb3B1cFNldHRpbmdzLnBvcHVwQ2xhc3MpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBjb250YWluZXJDbGFzc2VzO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBGb2N1c2VzIHRoZSBmaXJzdCBtYXRjaCB3aGVuIHRoZXJlJ3MgdGV4dCBpbiB0aGUgaW5wdXQgZmllbGQsIGJ1dCBubyBmb2N1c2VkIGl0ZW0uXG4gICAgICovXG4gICAgcmVzdG9yZUl0ZW1Gb2N1cygpIHtcbiAgICAgICAgY29uc3QgaGFzRm9jdXMgPSBpc1ByZXNlbnQodGhpcy5zZWxlY3Rpb25TZXJ2aWNlLmZvY3VzZWQpICYmIHRoaXMuc2VsZWN0aW9uU2VydmljZS5mb2N1c2VkID4gLTE7XG4gICAgICAgIGlmICghaGFzRm9jdXMgJiYgdGhpcy50ZXh0ICYmIHRoaXMuZGF0YVNlcnZpY2UuaXRlbXNDb3VudCkge1xuICAgICAgICAgICAgaWYgKHRoaXMuZmlsdGVyYWJsZSkge1xuICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0aW9uU2VydmljZS5mb2N1c2VkID0gdGhpcy5maXJzdEZvY3VzYWJsZUluZGV4KDApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy5zZWFyY2godGhpcy50ZXh0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICB1c2VTdWdnZXN0aW9uKCkge1xuICAgICAgICBpZiAoISh0aGlzLnN1Z2dlc3QgJiYgaXNQcmVzZW50KHRoaXMuc2VhcmNoYmFyLnZhbHVlKSkpIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBmb2N1c2VkRGF0YUl0ZW0gPSB0aGlzLmRhdGFTZXJ2aWNlLml0ZW1BdCh0aGlzLnNlbGVjdGlvblNlcnZpY2UuZm9jdXNlZCk7XG4gICAgICAgIGNvbnN0IGZvY3VzZWRJdGVtVGV4dCA9IHRoaXMucHJvcCh0aGlzLnRleHRGaWVsZCwgdGhpcy52YWx1ZVByaW1pdGl2ZSkoZm9jdXNlZERhdGFJdGVtKTtcbiAgICAgICAgaWYgKCFpc1ByZXNlbnQoZm9jdXNlZEl0ZW1UZXh0KSkge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLnNlYXJjaGJhci52YWx1ZS50b0xvd2VyQ2FzZSgpID09PSBmb2N1c2VkSXRlbVRleHQudG9Mb3dlckNhc2UoKTtcbiAgICB9XG4gICAgZGVzdHJveVBvcHVwKCkge1xuICAgICAgICBpZiAodGhpcy5wb3B1cFJlZikge1xuICAgICAgICAgICAgdGhpcy5wb3B1cFJlZi5wb3B1cEVsZW1lbnRcbiAgICAgICAgICAgICAgICAucmVtb3ZlRXZlbnRMaXN0ZW5lcignbW91c2Vkb3duJywgdGhpcy5wb3B1cE1vdXNlRG93bkhhbmRsZXIpO1xuICAgICAgICAgICAgdGhpcy5wb3B1cFJlZi5jbG9zZSgpO1xuICAgICAgICAgICAgdGhpcy5wb3B1cFJlZiA9IG51bGw7XG4gICAgICAgIH1cbiAgICB9XG4gICAgY3JlYXRlUG9wdXAoKSB7XG4gICAgICAgIGlmICh0aGlzLnZpcnR1YWwpIHtcbiAgICAgICAgICAgIHRoaXMudmlydHVhbC5za2lwID0gMDtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBob3Jpem9udGFsQWxpZ24gPSB0aGlzLmRpcmVjdGlvbiA9PT0gXCJydGxcIiA/IFwicmlnaHRcIiA6IFwibGVmdFwiO1xuICAgICAgICBjb25zdCBhbmNob3JQb3NpdGlvbiA9IHsgaG9yaXpvbnRhbDogaG9yaXpvbnRhbEFsaWduLCB2ZXJ0aWNhbDogXCJib3R0b21cIiB9O1xuICAgICAgICBjb25zdCBwb3B1cFBvc2l0aW9uID0geyBob3Jpem9udGFsOiBob3Jpem9udGFsQWxpZ24sIHZlcnRpY2FsOiBcInRvcFwiIH07XG4gICAgICAgIHRoaXMucG9wdXBSZWYgPSB0aGlzLnBvcHVwU2VydmljZS5vcGVuKHtcbiAgICAgICAgICAgIGFuY2hvcjogdGhpcy53cmFwcGVyLFxuICAgICAgICAgICAgYW5pbWF0ZTogdGhpcy5wb3B1cFNldHRpbmdzLmFuaW1hdGUsXG4gICAgICAgICAgICBhcHBlbmRUbzogdGhpcy5hcHBlbmRUbyxcbiAgICAgICAgICAgIGNvbnRlbnQ6IHRoaXMucG9wdXBUZW1wbGF0ZSxcbiAgICAgICAgICAgIHBvcHVwQ2xhc3M6IHRoaXMubGlzdENvbnRhaW5lckNsYXNzZXMsXG4gICAgICAgICAgICBwb3NpdGlvbk1vZGU6ICdhYnNvbHV0ZScsXG4gICAgICAgICAgICBhbmNob3JBbGlnbjogYW5jaG9yUG9zaXRpb24sXG4gICAgICAgICAgICBwb3B1cEFsaWduOiBwb3B1cFBvc2l0aW9uXG4gICAgICAgIH0pO1xuICAgICAgICBjb25zdCBwb3B1cFdyYXBwZXIgPSB0aGlzLnBvcHVwUmVmLnBvcHVwRWxlbWVudDtcbiAgICAgICAgY29uc3QgeyBtaW4sIG1heCB9ID0gdGhpcy53aWR0aDtcbiAgICAgICAgcG9wdXBXcmFwcGVyLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlZG93bicsIHRoaXMucG9wdXBNb3VzZURvd25IYW5kbGVyKTtcbiAgICAgICAgcG9wdXBXcmFwcGVyLnN0eWxlLm1pbldpZHRoID0gbWluO1xuICAgICAgICBwb3B1cFdyYXBwZXIuc3R5bGUud2lkdGggPSBtYXg7XG4gICAgICAgIHBvcHVwV3JhcHBlci5zdHlsZS5oZWlnaHQgPSB0aGlzLmhlaWdodDtcbiAgICAgICAgcG9wdXBXcmFwcGVyLnNldEF0dHJpYnV0ZShcImRpclwiLCB0aGlzLmRpcmVjdGlvbik7XG4gICAgICAgIHRoaXMucG9wdXBSZWYucG9wdXBPcGVuLnN1YnNjcmliZSgoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLmNkci5kZXRlY3RDaGFuZ2VzKCk7XG4gICAgICAgICAgICB0aGlzLm9wdGlvbnNMaXN0LnNjcm9sbFRvSXRlbSh0aGlzLnNlbGVjdGlvblNlcnZpY2UuZm9jdXNlZCk7XG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLnBvcHVwUmVmLnBvcHVwQW5jaG9yVmlld3BvcnRMZWF2ZS5zdWJzY3JpYmUoKCkgPT4gdGhpcy50b2dnbGVQb3B1cChmYWxzZSkpO1xuICAgIH1cbiAgICBfdG9nZ2xlKG9wZW4pIHtcbiAgICAgICAgdGhpcy5fb3BlbiA9IChvcGVuID09PSB1bmRlZmluZWQpID8gIXRoaXMuX29wZW4gOiBvcGVuO1xuICAgICAgICB0aGlzLmRlc3Ryb3lQb3B1cCgpO1xuICAgICAgICBpZiAodGhpcy5fb3Blbikge1xuICAgICAgICAgICAgdGhpcy5jcmVhdGVQb3B1cCgpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHRyaWdnZXJQb3B1cEV2ZW50cyhvcGVuKSB7XG4gICAgICAgIGNvbnN0IGV2ZW50QXJncyA9IG5ldyBQcmV2ZW50YWJsZUV2ZW50KCk7XG4gICAgICAgIGlmIChvcGVuKSB7XG4gICAgICAgICAgICB0aGlzLm9wZW4uZW1pdChldmVudEFyZ3MpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5jbG9zZS5lbWl0KGV2ZW50QXJncyk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGV2ZW50QXJncy5pc0RlZmF1bHRQcmV2ZW50ZWQoKTtcbiAgICB9XG4gICAgY2xlYXJGaWx0ZXIoKSB7XG4gICAgICAgIGlmICghKHRoaXMuZmlsdGVyYWJsZSAmJiB0aGlzLmZpbHRlclRleHQpKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5maWx0ZXJUZXh0ID0gJyc7XG4gICAgICAgIHRoaXMuZmlsdGVyQ2hhbmdlLmVtaXQodGhpcy5maWx0ZXJUZXh0KTtcbiAgICB9XG4gICAgc2V0TWVzc2FnZXMoKSB7XG4gICAgICAgIHRoaXMuX3pvbmUucnVuT3V0c2lkZUFuZ3VsYXIoKCkgPT4ge1xuICAgICAgICAgICAgY2xlYXJUaW1lb3V0KHRoaXMubWVzc2FnZXNUaW1lb3V0KTtcbiAgICAgICAgICAgIHRoaXMubWVzc2FnZXNUaW1lb3V0ID0gc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5ub0RhdGFUZXh0ID0gdGhpcy5sb2NhbGl6YXRpb24uZ2V0KCdub0RhdGFUZXh0Jyk7XG4gICAgICAgICAgICAgICAgdGhpcy5jZHIuZGV0ZWN0Q2hhbmdlcygpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBjcmVhdGVTZWxlY3Rpb25TdHJlYW0oKSB7XG4gICAgICAgIGlmIChpc1ByZXNlbnQodGhpcy5zZWxlY3Rpb25TdWJzY3JpcHRpb24pKSB7XG4gICAgICAgICAgICB0aGlzLnNlbGVjdGlvblN1YnNjcmlwdGlvbi51bnN1YnNjcmliZSgpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuc2VsZWN0aW9uU3Vic2NyaXB0aW9uID0gdGhpcy5zZWxlY3Rpb25TdWJqZWN0XG4gICAgICAgICAgICAucGlwZShkaXN0aW5jdFVudGlsQ2hhbmdlZCgpKVxuICAgICAgICAgICAgLnN1YnNjcmliZShkYXRhSXRlbSA9PiB0aGlzLnNlbGVjdGlvbkNoYW5nZS5lbWl0KGRhdGFJdGVtKSk7XG4gICAgfVxufVxuQ29tYm9Cb3hDb21wb25lbnQuZGVjb3JhdG9ycyA9IFtcbiAgICB7IHR5cGU6IENvbXBvbmVudCwgYXJnczogW3tcbiAgICAgICAgICAgICAgICBleHBvcnRBczogJ2tlbmRvQ29tYm9Cb3gnLFxuICAgICAgICAgICAgICAgIHByb3ZpZGVyczogW1xuICAgICAgICAgICAgICAgICAgICBDT01CT0JPWF9WQUxVRV9BQ0NFU1NPUixcbiAgICAgICAgICAgICAgICAgICAgRGF0YVNlcnZpY2UsXG4gICAgICAgICAgICAgICAgICAgIFNlbGVjdGlvblNlcnZpY2UsXG4gICAgICAgICAgICAgICAgICAgIE5hdmlnYXRpb25TZXJ2aWNlLFxuICAgICAgICAgICAgICAgICAgICBEaXNhYmxlZEl0ZW1zU2VydmljZSxcbiAgICAgICAgICAgICAgICAgICAgTG9jYWxpemF0aW9uU2VydmljZSxcbiAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgcHJvdmlkZTogTDEwTl9QUkVGSVgsXG4gICAgICAgICAgICAgICAgICAgICAgICB1c2VWYWx1ZTogJ2tlbmRvLmNvbWJvYm94J1xuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICBwcm92aWRlOiBGaWx0ZXJhYmxlRHJvcERvd25Db21wb25lbnRCYXNlLCB1c2VFeGlzdGluZzogZm9yd2FyZFJlZigoKSA9PiBDb21ib0JveENvbXBvbmVudClcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgcHJvdmlkZTogS2VuZG9JbnB1dCwgdXNlRXhpc3Rpbmc6IGZvcndhcmRSZWYoKCkgPT4gQ29tYm9Cb3hDb21wb25lbnQpXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBdLFxuICAgICAgICAgICAgICAgIHNlbGVjdG9yOiAna2VuZG8tY29tYm9ib3gnLFxuICAgICAgICAgICAgICAgIHRlbXBsYXRlOiBgXG4gICAgICAgIDxuZy1jb250YWluZXIga2VuZG9Db21ib0JveExvY2FsaXplZE1lc3NhZ2VzXG4gICAgICAgICAgICBpMThuLW5vRGF0YVRleHQ9XCJrZW5kby5jb21ib2JveC5ub0RhdGFUZXh0fFRoZSB0ZXh0IGRpc3BsYXllZCBpbiB0aGUgcG9wdXAgd2hlbiB0aGVyZSBhcmUgbm8gaXRlbXNcIlxuICAgICAgICAgICAgbm9EYXRhVGV4dD1cIk5PIERBVEEgRk9VTkRcIlxuXG4gICAgICAgICAgICBpMThuLWNsZWFyVGl0bGU9XCJrZW5kby5jb21ib2JveC5jbGVhclRpdGxlfFRoZSB0aXRsZSBvZiB0aGUgY2xlYXIgYnV0dG9uXCJcbiAgICAgICAgICAgIGNsZWFyVGl0bGU9XCJjbGVhclwiXG4gICAgICAgID5cbiAgICAgICAgPC9uZy1jb250YWluZXI+XG4gICAgICAgIDxzcGFuICN3cmFwcGVyIHVuc2VsZWN0YWJsZT1cIm9uXCJcbiAgICAgICAgICAgIGNsYXNzPVwiay1kcm9wZG93bi13cmFwXCJcbiAgICAgICAgICAgIFtuZ0NsYXNzXT1cInsgJ2stc3RhdGUtZGVmYXVsdCc6ICFkaXNhYmxlZCwgJ2stc3RhdGUtZGlzYWJsZWQnOiBkaXNhYmxlZCwgJ2stc3RhdGUtZm9jdXNlZCc6IGlzRm9jdXNlZCB9XCJcbiAgICAgICAgPlxuICAgICAgICAgIDxrZW5kby1zZWFyY2hiYXIgI3NlYXJjaGJhclxuICAgICAgICAgICAgICBbcm9sZV09XCInY29tYm9ib3gnXCJcbiAgICAgICAgICAgICAgW2lkXT1cImZvY3VzYWJsZUlkXCJcbiAgICAgICAgICAgICAgW2xpc3RJZF09XCJsaXN0Qm94SWRcIlxuICAgICAgICAgICAgICBbYWN0aXZlRGVzY2VuZGFudF09XCJhY3RpdmVEZXNjZW5kYW50XCJcbiAgICAgICAgICAgICAgW25vRGF0YUxhYmVsXT1cIm5vRGF0YUxhYmVsXCJcbiAgICAgICAgICAgICAgW3VzZXJJbnB1dF09XCJ0ZXh0XCJcbiAgICAgICAgICAgICAgW3N1Z2dlc3RlZFRleHRdPVwiZ2V0U3VnZ2VzdGlvbigpXCJcbiAgICAgICAgICAgICAgW2Rpc2FibGVkXT1cImRpc2FibGVkXCJcbiAgICAgICAgICAgICAgW3JlYWRvbmx5XT1cInJlYWRvbmx5XCJcbiAgICAgICAgICAgICAgW3RhYkluZGV4XT1cInRhYkluZGV4XCJcbiAgICAgICAgICAgICAgW3BvcHVwT3Blbl09XCJpc09wZW5cIlxuICAgICAgICAgICAgICBbcGxhY2Vob2xkZXJdPVwicGxhY2Vob2xkZXJcIlxuICAgICAgICAgICAgICAob25OYXZpZ2F0ZSk9XCJoYW5kbGVOYXZpZ2F0ZSgkZXZlbnQpXCJcbiAgICAgICAgICAgICAgKHZhbHVlQ2hhbmdlKT1cInNlYXJjaEJhckNoYW5nZSgkZXZlbnQpXCJcbiAgICAgICAgICAgICAgKG9uQmx1cik9XCJoYW5kbGVCbHVyKClcIlxuICAgICAgICAgICAgICAob25Gb2N1cyk9XCJoYW5kbGVGb2N1cygpXCJcbiAgICAgICAgICA+PC9rZW5kby1zZWFyY2hiYXI+XG4gICAgICAgICAgPHNwYW4gKm5nSWY9XCIhbG9hZGluZyAmJiAhcmVhZG9ubHkgJiYgKGNsZWFyQnV0dG9uICYmIHRleHQ/Lmxlbmd0aClcIiBjbGFzcz1cImstaWNvbiBrLWNsZWFyLXZhbHVlIGstaS1jbG9zZVwiIFthdHRyLnRpdGxlXT1cImNsZWFyVGl0bGVcIiByb2xlPVwiYnV0dG9uXCIgdGFiaW5kZXg9XCItMVwiIChjbGljayk9XCJjbGVhclZhbHVlKCRldmVudClcIiAobW91c2Vkb3duKT1cIiRldmVudC5wcmV2ZW50RGVmYXVsdCgpXCI+PC9zcGFuPlxuICAgICAgICAgIDxzcGFuIHVuc2VsZWN0YWJsZT1cIm9uXCJcbiAgICAgICAgICAgICAgY2xhc3M9XCJrLXNlbGVjdFwiXG4gICAgICAgICAgICAgIChjbGljayk9XCJzZWxlY3RDbGljaygpXCJcbiAgICAgICAgICAgICAgKG1vdXNlZG93bik9XCIkZXZlbnQucHJldmVudERlZmF1bHQoKVwiID5cbiAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9XCJrLWljb25cIiBbbmdDbGFzc109XCJidXR0b25DbGFzc2VzXCI+XG4gICAgICAgICAgICAgICA8L3NwYW4+XG4gICAgICAgICAgPC9zcGFuPlxuICAgICAgICAgIDxuZy10ZW1wbGF0ZSAjcG9wdXBUZW1wbGF0ZT5cbiAgICAgICAgICAgICAgPCEtLWhlYWRlciB0ZW1wbGF0ZS0tPlxuICAgICAgICAgICAgICA8bmctdGVtcGxhdGUgKm5nSWY9XCJoZWFkZXJUZW1wbGF0ZVwiXG4gICAgICAgICAgICAgICAgICBbdGVtcGxhdGVDb250ZXh0XT1cIntcbiAgICAgICAgICAgICAgICAgICAgICB0ZW1wbGF0ZVJlZjogaGVhZGVyVGVtcGxhdGUudGVtcGxhdGVSZWZcbiAgICAgICAgICAgICAgICAgIH1cIj5cbiAgICAgICAgICAgICAgPC9uZy10ZW1wbGF0ZT5cbiAgICAgICAgICAgICAgPCEtLWxpc3QtLT5cbiAgICAgICAgICAgICAgPGtlbmRvLWxpc3RcbiAgICAgICAgICAgICAgICAgICNvcHRpb25zTGlzdFxuICAgICAgICAgICAgICAgICAgW2lkXT1cImxpc3RCb3hJZFwiXG4gICAgICAgICAgICAgICAgICBbb3B0aW9uUHJlZml4XT1cIm9wdGlvblByZWZpeFwiXG4gICAgICAgICAgICAgICAgICBbZGF0YV09XCJkYXRhXCJcbiAgICAgICAgICAgICAgICAgIFt0ZXh0RmllbGRdPVwidGV4dEZpZWxkXCJcbiAgICAgICAgICAgICAgICAgIFt2YWx1ZUZpZWxkXT1cInZhbHVlRmllbGRcIlxuICAgICAgICAgICAgICAgICAgW3RlbXBsYXRlXT1cInRlbXBsYXRlXCJcbiAgICAgICAgICAgICAgICAgIFtncm91cFRlbXBsYXRlXT1cImdyb3VwVGVtcGxhdGVcIlxuICAgICAgICAgICAgICAgICAgW2ZpeGVkR3JvdXBUZW1wbGF0ZV09XCJmaXhlZEdyb3VwVGVtcGxhdGVcIlxuICAgICAgICAgICAgICAgICAgW2hlaWdodF09XCJsaXN0SGVpZ2h0XCJcbiAgICAgICAgICAgICAgICAgIFtzaG93XT1cImlzT3BlblwiXG4gICAgICAgICAgICAgICAgICBbdmlydHVhbF09XCJ2aXJ0dWFsXCJcbiAgICAgICAgICAgICAgICAgIChwYWdlQ2hhbmdlKT1cInBhZ2VDaGFuZ2UoJGV2ZW50KVwiXG4gICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgPC9rZW5kby1saXN0PlxuICAgICAgICAgICAgICA8IS0tbm8tZGF0YSB0ZW1wbGF0ZS0tPlxuICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiay1ub2RhdGFcIiAqbmdJZj1cImRhdGEubGVuZ3RoID09PSAwXCI+XG4gICAgICAgICAgICAgICAgICA8bmctdGVtcGxhdGUgW25nSWZdPVwibm9EYXRhVGVtcGxhdGVcIlxuICAgICAgICAgICAgICAgICAgICAgIFt0ZW1wbGF0ZUNvbnRleHRdPVwie1xuICAgICAgICAgICAgICAgICAgICAgICAgICB0ZW1wbGF0ZVJlZjogbm9EYXRhVGVtcGxhdGUgPyBub0RhdGFUZW1wbGF0ZS50ZW1wbGF0ZVJlZiA6IHVuZGVmaW5lZFxuICAgICAgICAgICAgICAgICAgICAgIH1cIj5cbiAgICAgICAgICAgICAgICAgIDwvbmctdGVtcGxhdGU+XG4gICAgICAgICAgICAgICAgICA8bmctdGVtcGxhdGUgW25nSWZdPVwiIW5vRGF0YVRlbXBsYXRlXCI+XG4gICAgICAgICAgICAgICAgICAgICAgPGRpdj57eyBub0RhdGFUZXh0IH19PC9kaXY+XG4gICAgICAgICAgICAgICAgICA8L25nLXRlbXBsYXRlPlxuICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgPCEtLWZvb3RlciB0ZW1wbGF0ZS0tPlxuICAgICAgICAgICAgICA8bmctdGVtcGxhdGUgKm5nSWY9XCJmb290ZXJUZW1wbGF0ZVwiXG4gICAgICAgICAgICAgICAgICBbdGVtcGxhdGVDb250ZXh0XT1cIntcbiAgICAgICAgICAgICAgICAgICAgICB0ZW1wbGF0ZVJlZjogZm9vdGVyVGVtcGxhdGUudGVtcGxhdGVSZWZcbiAgICAgICAgICAgICAgICAgIH1cIj5cbiAgICAgICAgICAgICAgPC9uZy10ZW1wbGF0ZT5cbiAgICAgICAgICA8L25nLXRlbXBsYXRlPlxuICAgICAgICA8L3NwYW4+XG4gICAgICAgIDxuZy10ZW1wbGF0ZSBbbmdJZl09XCJpc09wZW5cIj5cbiAgICAgICAgICAgIDxrZW5kby1yZXNpemUtc2Vuc29yIChyZXNpemUpPVwib25SZXNpemUoKVwiPjwva2VuZG8tcmVzaXplLXNlbnNvcj5cbiAgICAgICAgPC9uZy10ZW1wbGF0ZT5cbiAgICAgICAgPG5nLWNvbnRhaW5lciAjY29udGFpbmVyPjwvbmctY29udGFpbmVyPlxuICBgXG4gICAgICAgICAgICB9LF0gfSxcbl07XG4vKiogQG5vY29sbGFwc2UgKi9cbkNvbWJvQm94Q29tcG9uZW50LmN0b3JQYXJhbWV0ZXJzID0gKCkgPT4gW1xuICAgIHsgdHlwZTogTG9jYWxpemF0aW9uU2VydmljZSB9LFxuICAgIHsgdHlwZTogUG9wdXBTZXJ2aWNlIH0sXG4gICAgeyB0eXBlOiBTZWxlY3Rpb25TZXJ2aWNlIH0sXG4gICAgeyB0eXBlOiBOYXZpZ2F0aW9uU2VydmljZSB9LFxuICAgIHsgdHlwZTogRGlzYWJsZWRJdGVtc1NlcnZpY2UgfSxcbiAgICB7IHR5cGU6IERhdGFTZXJ2aWNlIH0sXG4gICAgeyB0eXBlOiBOZ1pvbmUgfSxcbiAgICB7IHR5cGU6IENoYW5nZURldGVjdG9yUmVmIH0sXG4gICAgeyB0eXBlOiBSZW5kZXJlcjIgfSxcbiAgICB7IHR5cGU6IEVsZW1lbnRSZWYgfSxcbiAgICB7IHR5cGU6IEJvb2xlYW4sIGRlY29yYXRvcnM6IFt7IHR5cGU6IE9wdGlvbmFsIH0sIHsgdHlwZTogSW5qZWN0LCBhcmdzOiBbVE9VQ0hfRU5BQkxFRCxdIH1dIH1cbl07XG5Db21ib0JveENvbXBvbmVudC5wcm9wRGVjb3JhdG9ycyA9IHtcbiAgICBmb2N1c2FibGVJZDogW3sgdHlwZTogSW5wdXQgfV0sXG4gICAgYWxsb3dDdXN0b206IFt7IHR5cGU6IElucHV0IH1dLFxuICAgIGRhdGE6IFt7IHR5cGU6IElucHV0IH1dLFxuICAgIHZhbHVlOiBbeyB0eXBlOiBJbnB1dCB9XSxcbiAgICB0ZXh0RmllbGQ6IFt7IHR5cGU6IElucHV0IH1dLFxuICAgIHZhbHVlRmllbGQ6IFt7IHR5cGU6IElucHV0IH1dLFxuICAgIHZhbHVlUHJpbWl0aXZlOiBbeyB0eXBlOiBJbnB1dCB9XSxcbiAgICB2YWx1ZU5vcm1hbGl6ZXI6IFt7IHR5cGU6IElucHV0IH1dLFxuICAgIHBsYWNlaG9sZGVyOiBbeyB0eXBlOiBJbnB1dCB9XSxcbiAgICBwb3B1cFNldHRpbmdzOiBbeyB0eXBlOiBJbnB1dCB9XSxcbiAgICBsaXN0SGVpZ2h0OiBbeyB0eXBlOiBJbnB1dCB9XSxcbiAgICBpY29uQ2xhc3M6IFt7IHR5cGU6IElucHV0IH1dLFxuICAgIGxvYWRpbmc6IFt7IHR5cGU6IElucHV0IH1dLFxuICAgIHN1Z2dlc3Q6IFt7IHR5cGU6IElucHV0IH1dLFxuICAgIGNsZWFyQnV0dG9uOiBbeyB0eXBlOiBJbnB1dCB9XSxcbiAgICBkaXNhYmxlZDogW3sgdHlwZTogSW5wdXQgfV0sXG4gICAgaXRlbURpc2FibGVkOiBbeyB0eXBlOiBJbnB1dCB9XSxcbiAgICByZWFkb25seTogW3sgdHlwZTogSW5wdXQgfV0sXG4gICAgdGFiaW5kZXg6IFt7IHR5cGU6IElucHV0IH1dLFxuICAgIHRhYkluZGV4OiBbeyB0eXBlOiBJbnB1dCwgYXJnczogW1widGFiSW5kZXhcIixdIH1dLFxuICAgIGZpbHRlcmFibGU6IFt7IHR5cGU6IElucHV0IH1dLFxuICAgIHZpcnR1YWw6IFt7IHR5cGU6IElucHV0IH1dLFxuICAgIHZhbHVlQ2hhbmdlOiBbeyB0eXBlOiBPdXRwdXQgfV0sXG4gICAgc2VsZWN0aW9uQ2hhbmdlOiBbeyB0eXBlOiBPdXRwdXQgfV0sXG4gICAgZmlsdGVyQ2hhbmdlOiBbeyB0eXBlOiBPdXRwdXQgfV0sXG4gICAgb3BlbjogW3sgdHlwZTogT3V0cHV0IH1dLFxuICAgIGNsb3NlOiBbeyB0eXBlOiBPdXRwdXQgfV0sXG4gICAgb25Gb2N1czogW3sgdHlwZTogT3V0cHV0LCBhcmdzOiBbJ2ZvY3VzJyxdIH1dLFxuICAgIG9uQmx1cjogW3sgdHlwZTogT3V0cHV0LCBhcmdzOiBbJ2JsdXInLF0gfV0sXG4gICAgdGVtcGxhdGU6IFt7IHR5cGU6IENvbnRlbnRDaGlsZCwgYXJnczogW0l0ZW1UZW1wbGF0ZURpcmVjdGl2ZSxdIH1dLFxuICAgIGhlYWRlclRlbXBsYXRlOiBbeyB0eXBlOiBDb250ZW50Q2hpbGQsIGFyZ3M6IFtIZWFkZXJUZW1wbGF0ZURpcmVjdGl2ZSxdIH1dLFxuICAgIGZvb3RlclRlbXBsYXRlOiBbeyB0eXBlOiBDb250ZW50Q2hpbGQsIGFyZ3M6IFtGb290ZXJUZW1wbGF0ZURpcmVjdGl2ZSxdIH1dLFxuICAgIG5vRGF0YVRlbXBsYXRlOiBbeyB0eXBlOiBDb250ZW50Q2hpbGQsIGFyZ3M6IFtOb0RhdGFUZW1wbGF0ZURpcmVjdGl2ZSxdIH1dLFxuICAgIGdyb3VwVGVtcGxhdGU6IFt7IHR5cGU6IENvbnRlbnRDaGlsZCwgYXJnczogW0dyb3VwVGVtcGxhdGVEaXJlY3RpdmUsXSB9XSxcbiAgICBmaXhlZEdyb3VwVGVtcGxhdGU6IFt7IHR5cGU6IENvbnRlbnRDaGlsZCwgYXJnczogW0ZpeGVkR3JvdXBUZW1wbGF0ZURpcmVjdGl2ZSxdIH1dLFxuICAgIGNvbnRhaW5lcjogW3sgdHlwZTogVmlld0NoaWxkLCBhcmdzOiBbJ2NvbnRhaW5lcicsIHsgcmVhZDogVmlld0NvbnRhaW5lclJlZiB9LF0gfV0sXG4gICAgcG9wdXBUZW1wbGF0ZTogW3sgdHlwZTogVmlld0NoaWxkLCBhcmdzOiBbJ3BvcHVwVGVtcGxhdGUnLF0gfV0sXG4gICAgc2VhcmNoYmFyOiBbeyB0eXBlOiBWaWV3Q2hpbGQsIGFyZ3M6IFtTZWFyY2hCYXJDb21wb25lbnQsXSB9XSxcbiAgICBvcHRpb25zTGlzdDogW3sgdHlwZTogVmlld0NoaWxkLCBhcmdzOiBbJ29wdGlvbnNMaXN0JyxdIH1dLFxuICAgIHdpZGdldENsYXNzZXM6IFt7IHR5cGU6IEhvc3RCaW5kaW5nLCBhcmdzOiBbJ2NsYXNzLmstd2lkZ2V0JyxdIH0sIHsgdHlwZTogSG9zdEJpbmRpbmcsIGFyZ3M6IFsnY2xhc3Muay1jb21ib2JveCcsXSB9LCB7IHR5cGU6IEhvc3RCaW5kaW5nLCBhcmdzOiBbJ2NsYXNzLmstaGVhZGVyJyxdIH1dLFxuICAgIGNsZWFyYWJsZTogW3sgdHlwZTogSG9zdEJpbmRpbmcsIGFyZ3M6IFsnY2xhc3Muay1jb21ib2JveC1jbGVhcmFibGUnLF0gfV0sXG4gICAgZGlyOiBbeyB0eXBlOiBIb3N0QmluZGluZywgYXJnczogWydhdHRyLmRpcicsXSB9XVxufTtcblxuLyogdHNsaW50OmRpc2FibGU6bWF4LWxpbmUtbGVuZ3RoICovXG4vKipcbiAqIFJlbmRlcnMgdGhlIHNlbGVjdGVkIHZhbHVlIG9mIHRoZSBEcm9wRG93bkxpc3RcbiAqIChbc2VlIGV4YW1wbGVdKHslIHNsdWcgdGVtcGxhdGVzX2RkbCAlfSN0b2MtdmFsdWUtdGVtcGxhdGUpKS5cbiAqIFRoZSB0ZW1wbGF0ZSBjb250ZXh0IGlzIHNldCB0byB0aGUgY3VycmVudCBjb21wb25lbnQuXG4gKiBUbyBnZXQgYSByZWZlcmVuY2UgdG8gdGhlIGN1cnJlbnQgZGF0YSBpdGVtLCB1c2UgdGhlIGBsZXQtZGF0YUl0ZW1gIGRpcmVjdGl2ZS5cbiAqXG4gKiA+IFRoZSBgVmFsdWVUZW1wbGF0ZWAgZGlyZWN0aXZlIGNhbiBvbmx5IGJlIHVzZWQgd2l0aCB0aGUgRHJvcERvd25MaXN0IGNvbXBvbmVudC5cbiAqXG4gKiBAZXhhbXBsZVxuICogYGBgdHNcbiAqIF9AQ29tcG9uZW50KHtcbiAqIHNlbGVjdG9yOiAnbXktYXBwJyxcbiAqIHRlbXBsYXRlOiBgXG4gKiAgPGtlbmRvLWRyb3Bkb3dubGlzdCBbZGF0YV09XCJsaXN0SXRlbXNcIj5cbiAqICAgIDxuZy10ZW1wbGF0ZSBrZW5kb0Ryb3BEb3duTGlzdFZhbHVlVGVtcGxhdGUgbGV0LWRhdGFJdGVtPlxuICogICAgICA8c3Bhbj57e2RhdGFJdGVtfX0gb3B0aW9uPC9zcGFuPlxuICogICAgPC9uZy10ZW1wbGF0ZT5cbiAqICA8L2tlbmRvLWRyb3Bkb3dubGlzdD5cbiAqIGBcbiAqIH0pXG4gKiBjbGFzcyBBcHBDb21wb25lbnQge1xuICogICBwdWJsaWMgbGlzdEl0ZW1zOiBBcnJheTxzdHJpbmc+ID0gW1wiSXRlbSAxXCIsIFwiSXRlbSAyXCIsIFwiSXRlbSAzXCIsIFwiSXRlbSA0XCJdO1xuICogfVxuICogYGBgXG4gKi9cbmNsYXNzIFZhbHVlVGVtcGxhdGVEaXJlY3RpdmUge1xuICAgIGNvbnN0cnVjdG9yKHRlbXBsYXRlUmVmKSB7XG4gICAgICAgIHRoaXMudGVtcGxhdGVSZWYgPSB0ZW1wbGF0ZVJlZjtcbiAgICB9XG59XG5WYWx1ZVRlbXBsYXRlRGlyZWN0aXZlLmRlY29yYXRvcnMgPSBbXG4gICAgeyB0eXBlOiBEaXJlY3RpdmUsIGFyZ3M6IFt7XG4gICAgICAgICAgICAgICAgc2VsZWN0b3I6ICdba2VuZG9Ecm9wRG93bkxpc3RWYWx1ZVRlbXBsYXRlXSdcbiAgICAgICAgICAgIH0sXSB9LFxuXTtcbi8qKiBAbm9jb2xsYXBzZSAqL1xuVmFsdWVUZW1wbGF0ZURpcmVjdGl2ZS5jdG9yUGFyYW1ldGVycyA9ICgpID0+IFtcbiAgICB7IHR5cGU6IFRlbXBsYXRlUmVmIH1cbl07XG5cbi8qIHRzbGludDpkaXNhYmxlOm1heC1saW5lLWxlbmd0aCAqL1xuLyoqXG4gKiBAaGlkZGVuXG4gKi9cbmNvbnN0IERST1BET1dOTElTVF9WQUxVRV9BQ0NFU1NPUiA9IHtcbiAgICBtdWx0aTogdHJ1ZSxcbiAgICBwcm92aWRlOiBOR19WQUxVRV9BQ0NFU1NPUixcbiAgICAvLyB0c2xpbnQ6ZGlzYWJsZS1uZXh0LWxpbmU6bm8tdXNlLWJlZm9yZS1kZWNsYXJlXG4gICAgdXNlRXhpc3Rpbmc6IGZvcndhcmRSZWYoKCkgPT4gRHJvcERvd25MaXN0Q29tcG9uZW50KVxufTtcbi8qKlxuICogUmVwcmVzZW50cyB0aGUgW0tlbmRvIFVJIERyb3BEb3duTGlzdCBjb21wb25lbnQgZm9yIEFuZ3VsYXJdKHslIHNsdWcgb3ZlcnZpZXdfZGRsICV9KS5cbiAqXG4gKiBAZXhhbXBsZVxuICogYGBgdHNcbiAqIF9AQ29tcG9uZW50KHtcbiAqIHNlbGVjdG9yOiAnbXktYXBwJyxcbiAqIHRlbXBsYXRlOiBgXG4gKiAgPGtlbmRvLWRyb3Bkb3dubGlzdCBbZGF0YV09XCJsaXN0SXRlbXNcIj5cbiAqICA8L2tlbmRvLWRyb3Bkb3dubGlzdD5cbiAqIGBcbiAqIH0pXG4gKiBjbGFzcyBBcHBDb21wb25lbnQge1xuICogICBwdWJsaWMgbGlzdEl0ZW1zOiBBcnJheTxzdHJpbmc+ID0gW1wiSXRlbSAxXCIsIFwiSXRlbSAyXCIsIFwiSXRlbSAzXCIsIFwiSXRlbSA0XCJdO1xuICogfVxuICogYGBgXG4gKi9cbmNsYXNzIERyb3BEb3duTGlzdENvbXBvbmVudCB7XG4gICAgY29uc3RydWN0b3IobG9jYWxpemF0aW9uLCBwb3B1cFNlcnZpY2UsIHNlbGVjdGlvblNlcnZpY2UsIG5hdmlnYXRpb25TZXJ2aWNlLCBkaXNhYmxlZEl0ZW1zU2VydmljZSwgZGF0YVNlcnZpY2UsIF96b25lLCByZW5kZXJlciwgaG9zdEVsZW1lbnQsIGNkciwgdG91Y2hFbmFibGVkKSB7XG4gICAgICAgIHRoaXMubG9jYWxpemF0aW9uID0gbG9jYWxpemF0aW9uO1xuICAgICAgICB0aGlzLnBvcHVwU2VydmljZSA9IHBvcHVwU2VydmljZTtcbiAgICAgICAgdGhpcy5zZWxlY3Rpb25TZXJ2aWNlID0gc2VsZWN0aW9uU2VydmljZTtcbiAgICAgICAgdGhpcy5uYXZpZ2F0aW9uU2VydmljZSA9IG5hdmlnYXRpb25TZXJ2aWNlO1xuICAgICAgICB0aGlzLmRpc2FibGVkSXRlbXNTZXJ2aWNlID0gZGlzYWJsZWRJdGVtc1NlcnZpY2U7XG4gICAgICAgIHRoaXMuZGF0YVNlcnZpY2UgPSBkYXRhU2VydmljZTtcbiAgICAgICAgdGhpcy5fem9uZSA9IF96b25lO1xuICAgICAgICB0aGlzLnJlbmRlcmVyID0gcmVuZGVyZXI7XG4gICAgICAgIHRoaXMuaG9zdEVsZW1lbnQgPSBob3N0RWxlbWVudDtcbiAgICAgICAgdGhpcy5jZHIgPSBjZHI7XG4gICAgICAgIHRoaXMudG91Y2hFbmFibGVkID0gdG91Y2hFbmFibGVkO1xuICAgICAgICAvKipcbiAgICAgICAgICogQGhpZGRlblxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5mb2N1c2FibGVJZCA9IGBrLSR7Z3VpZCgpfWA7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBTZXRzIHRoZSBoZWlnaHQgb2YgdGhlIG9wdGlvbnMgbGlzdC4gQnkgZGVmYXVsdCwgYGxpc3RIZWlnaHRgIGlzIDIwMHB4LlxuICAgICAgICAgKlxuICAgICAgICAgKiA+IFRoZSBgbGlzdEhlaWdodGAgcHJvcGVydHkgYWZmZWN0cyBvbmx5IHRoZSBsaXN0IG9mIG9wdGlvbnMgYW5kIG5vdCB0aGUgd2hvbGUgcG9wdXAgY29udGFpbmVyLlxuICAgICAgICAgKiA+IFRvIHNldCB0aGUgaGVpZ2h0IG9mIHRoZSBwb3B1cCBjb250YWluZXIsIHVzZSBgcG9wdXBTZXR0aW5ncy5oZWlnaHRgLlxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5saXN0SGVpZ2h0ID0gMjAwO1xuICAgICAgICAvKipcbiAgICAgICAgICogU2V0cyB0aGUgZGlzYWJsZWQgc3RhdGUgb2YgdGhlIGNvbXBvbmVudC5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuZGlzYWJsZWQgPSBmYWxzZTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFNldHMgdGhlIHJlYWQtb25seSBzdGF0ZSBvZiB0aGUgY29tcG9uZW50LlxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5yZWFkb25seSA9IGZhbHNlO1xuICAgICAgICAvKipcbiAgICAgICAgICogRW5hYmxlcyB0aGUgW2ZpbHRlcmluZ10oeyUgc2x1ZyBmaWx0ZXJpbmdfZGRsICV9KSBmdW5jdGlvbmFsaXR5IG9mIHRoZSBEcm9wRG93bkxpc3QuXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmZpbHRlcmFibGUgPSBmYWxzZTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEVuYWJsZXMgYSBjYXNlLWluc2Vuc2l0aXZlIHNlYXJjaC4gV2hlbiBmaWx0cmF0aW9uIGlzIGRpc2FibGVkLCB1c2UgdGhpcyBvcHRpb24uXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmlnbm9yZUNhc2UgPSB0cnVlO1xuICAgICAgICAvKipcbiAgICAgICAgICogU2V0cyB0aGUgZGVsYXkgYmVmb3JlIGFuIGl0ZW0gc2VhcmNoIGlzIHBlcmZvcm1lZC4gV2hlbiBmaWx0cmF0aW9uIGlzIGRpc2FibGVkLCB1c2UgdGhpcyBvcHRpb24uXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmRlbGF5ID0gNTAwO1xuICAgICAgICAvKipcbiAgICAgICAgICogU3BlY2lmaWVzIHRoZSBbYHRhYmluZGV4YF0oaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvSFRNTC9HbG9iYWxfYXR0cmlidXRlcy90YWJpbmRleCkgb2YgdGhlIGNvbXBvbmVudC5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMudGFiaW5kZXggPSAwO1xuICAgICAgICAvKipcbiAgICAgICAgICogRmlyZXMgZWFjaCB0aW1lIHRoZSB2YWx1ZSBpcyBjaGFuZ2VkIChbc2VlIGV4YW1wbGVdKHslIHNsdWcgb3ZlcnZpZXdfZGRsICV9I3RvYy1ldmVudHMpKS5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMudmFsdWVDaGFuZ2UgPSBuZXcgRXZlbnRFbWl0dGVyKCk7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBGaXJlcyBlYWNoIHRpbWUgdGhlIHVzZXIgdHlwZXMgaW4gdGhlIGlucHV0IGZpZWxkXG4gICAgICAgICAqIChbc2VlIGV4YW1wbGVdKHslIHNsdWcgb3ZlcnZpZXdfZGRsICV9I3RvYy1ldmVudHMpKS5cbiAgICAgICAgICogWW91IGNhbiBmaWx0ZXIgdGhlIHNvdXJjZSBiYXNlZCBvbiB0aGUgcGFzc2VkIGZpbHRyYXRpb24gdmFsdWUuXG4gICAgICAgICAqIFdoZW4gdGhlIHZhbHVlIG9mIHRoZSBjb21wb25lbnQgaXMgcHJvZ3JhbW1hdGljYWxseSBjaGFuZ2VkIHRvIGBuZ01vZGVsYCBvciBgZm9ybUNvbnRyb2xgXG4gICAgICAgICAqIHRocm91Z2ggaXRzIEFQSSBvciBmb3JtIGJpbmRpbmcsIHRoZSBgdmFsdWVDaGFuZ2VgIGV2ZW50IGlzIG5vdCB0cmlnZ2VyZWQgYmVjYXVzZSBpdFxuICAgICAgICAgKiBtaWdodCBjYXVzZSBhIG1peC11cCB3aXRoIHRoZSBidWlsdC1pbiBgdmFsdWVDaGFuZ2VgIG1lY2hhbmlzbXMgb2YgdGhlIGBuZ01vZGVsYCBvciBgZm9ybUNvbnRyb2xgIGJpbmRpbmdzLlxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5maWx0ZXJDaGFuZ2UgPSBuZXcgRXZlbnRFbWl0dGVyKCk7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBGaXJlcyBlYWNoIHRpbWUgdGhlIGl0ZW0gc2VsZWN0aW9uIGlzIGNoYW5nZWRcbiAgICAgICAgICogKFtzZWUgZXhhbXBsZV0oeyUgc2x1ZyBvdmVydmlld19kZGwgJX0jdG9jLWV2ZW50cykpLlxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5zZWxlY3Rpb25DaGFuZ2UgPSBuZXcgRXZlbnRFbWl0dGVyKCk7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBGaXJlcyBlYWNoIHRpbWUgdGhlIHBvcHVwIGlzIGFib3V0IHRvIG9wZW5cbiAgICAgICAgICogKFtzZWUgZXhhbXBsZV0oeyUgc2x1ZyBvcGVuc3RhdGVfZGRsICV9I3RvYy1wcmV2ZW50aW5nLW9wZW5pbmctYW5kLWNsb3NpbmcpKS5cbiAgICAgICAgICogVGhpcyBldmVudCBpcyBwcmV2ZW50YWJsZS4gSWYgeW91IGNhbmNlbCBpdCwgdGhlIHBvcHVwIHdpbGwgcmVtYWluIGNsb3NlZC5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMub3BlbiA9IG5ldyBFdmVudEVtaXR0ZXIoKTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEZpcmVzIGVhY2ggdGltZSB0aGUgcG9wdXAgaXMgYWJvdXQgdG8gY2xvc2VcbiAgICAgICAgICogKFtzZWUgZXhhbXBsZV0oeyUgc2x1ZyBvcGVuc3RhdGVfZGRsICV9I3RvYy1wcmV2ZW50aW5nLW9wZW5pbmctYW5kLWNsb3NpbmcpKS5cbiAgICAgICAgICogVGhpcyBldmVudCBpcyBwcmV2ZW50YWJsZS4gSWYgeW91IGNhbmNlbCBpdCwgdGhlIHBvcHVwIHdpbGwgcmVtYWluIG9wZW4uXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmNsb3NlID0gbmV3IEV2ZW50RW1pdHRlcigpO1xuICAgICAgICAvKipcbiAgICAgICAgICogRmlyZXMgZWFjaCB0aW1lIHRoZSB1c2VyIGZvY3VzZXMgdGhlIERyb3BEb3duTGlzdC5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMub25Gb2N1cyA9IG5ldyBFdmVudEVtaXR0ZXIoKTsgLy90c2xpbnQ6ZGlzYWJsZS1saW5lOm5vLW91dHB1dC1yZW5hbWVcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEZpcmVzIGVhY2ggdGltZSB0aGUgRHJvcERvd25MaXN0IGdldHMgYmx1cnJlZC5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMub25CbHVyID0gbmV3IEV2ZW50RW1pdHRlcigpOyAvL3RzbGludDpkaXNhYmxlLWxpbmU6bm8tb3V0cHV0LXJlbmFtZVxuICAgICAgICB0aGlzLndpZGdldENsYXNzZXMgPSB0cnVlO1xuICAgICAgICB0aGlzLmdyb3VwSW5kaWNlcyA9IFtdO1xuICAgICAgICB0aGlzLmxpc3RCb3hJZCA9IGd1aWQoKTtcbiAgICAgICAgdGhpcy5vcHRpb25QcmVmaXggPSBndWlkKCk7XG4gICAgICAgIHRoaXMuZmlsdGVyVGV4dCA9IFwiXCI7XG4gICAgICAgIHRoaXMuaXNGb2N1c2VkID0gZmFsc2U7XG4gICAgICAgIHRoaXMub25Ub3VjaGVkQ2FsbGJhY2sgPSAoXykgPT4geyB9O1xuICAgICAgICB0aGlzLm9uQ2hhbmdlQ2FsbGJhY2sgPSAoXykgPT4geyB9O1xuICAgICAgICB0aGlzLndvcmQgPSBcIlwiO1xuICAgICAgICB0aGlzLmxhc3QgPSBcIlwiO1xuICAgICAgICB0aGlzLmZpbHRlckZvY3VzZWQgPSBuZXcgRXZlbnRFbWl0dGVyKCk7XG4gICAgICAgIHRoaXMuZmlsdGVyQmx1cnJlZCA9IG5ldyBFdmVudEVtaXR0ZXIoKTtcbiAgICAgICAgdGhpcy53cmFwcGVyRm9jdXNlZCA9IG5ldyBFdmVudEVtaXR0ZXIoKTtcbiAgICAgICAgdGhpcy53cmFwcGVyQmx1cnJlZCA9IG5ldyBFdmVudEVtaXR0ZXIoKTtcbiAgICAgICAgdGhpcy5zZWxlY3Rpb25TdWJzY3JpcHRpb24gPSBuZXcgU3Vic2NyaXB0aW9uKCk7XG4gICAgICAgIHRoaXMuX29wZW4gPSBmYWxzZTtcbiAgICAgICAgdGhpcy5fcG9wdXBTZXR0aW5ncyA9IHsgYW5pbWF0ZTogdHJ1ZSB9O1xuICAgICAgICB0aGlzLmRpcmVjdGlvbiA9IGxvY2FsaXphdGlvbi5ydGwgPyAncnRsJyA6ICdsdHInO1xuICAgICAgICB0aGlzLmRhdGEgPSBbXTtcbiAgICAgICAgdGhpcy5zdWJzY3JpYmVFdmVudHMoKTtcbiAgICAgICAgdGhpcy5ob3N0RWxlbWVudCA9IGhvc3RFbGVtZW50Lm5hdGl2ZUVsZW1lbnQ7XG4gICAgICAgIHRoaXMucG9wdXBNb3VzZURvd25IYW5kbGVyID0gdGhpcy5vbk1vdXNlRG93bi5iaW5kKHRoaXMpO1xuICAgIH1cbiAgICBnZXQgd2lkdGgoKSB7XG4gICAgICAgIGNvbnN0IHdyYXBwZXJXaWR0aCA9IGlzRG9jdW1lbnRBdmFpbGFibGUoKSA/IHRoaXMud3JhcHBlci5uYXRpdmVFbGVtZW50Lm9mZnNldFdpZHRoIDogMDtcbiAgICAgICAgY29uc3Qgd2lkdGggPSB0aGlzLnBvcHVwU2V0dGluZ3Mud2lkdGggfHwgd3JhcHBlcldpZHRoO1xuICAgICAgICBjb25zdCBtaW5XaWR0aCA9IGlzTmFOKHdyYXBwZXJXaWR0aCkgPyB3cmFwcGVyV2lkdGggOiBgJHt3cmFwcGVyV2lkdGh9cHhgO1xuICAgICAgICBjb25zdCBtYXhXaWR0aCA9IGlzTmFOKHdpZHRoKSA/IHdpZHRoIDogYCR7d2lkdGh9cHhgO1xuICAgICAgICByZXR1cm4geyBtaW46IG1pbldpZHRoLCBtYXg6IG1heFdpZHRoIH07XG4gICAgfVxuICAgIGdldCBoZWlnaHQoKSB7XG4gICAgICAgIGNvbnN0IHBvcHVwSGVpZ2h0ID0gdGhpcy5wb3B1cFNldHRpbmdzLmhlaWdodDtcbiAgICAgICAgcmV0dXJuIGlzUHJlc2VudChwb3B1cEhlaWdodCkgPyBgJHtwb3B1cEhlaWdodH1weGAgOiAnYXV0byc7XG4gICAgfVxuICAgIGdldCB3aWRnZXRUYWJJbmRleCgpIHtcbiAgICAgICAgaWYgKHRoaXMuZGlzYWJsZWQpIHtcbiAgICAgICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgcHJvdmlkZWRUYWJJbmRleCA9IE51bWJlcih0aGlzLnRhYkluZGV4KTtcbiAgICAgICAgY29uc3QgZGVmYXVsdFRhYkluZGV4ID0gMDtcbiAgICAgICAgcmV0dXJuICFpc05hTihwcm92aWRlZFRhYkluZGV4KSA/IHByb3ZpZGVkVGFiSW5kZXggOiBkZWZhdWx0VGFiSW5kZXg7XG4gICAgfVxuICAgIGdldCBhcmlhRXhwYW5kZWQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmlzT3BlbjtcbiAgICB9XG4gICAgZ2V0IGFyaWFPd25zKCkge1xuICAgICAgICBpZiAoIXRoaXMuaXNPcGVuKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXMubGlzdEJveElkO1xuICAgIH1cbiAgICBnZXQgYXJpYUFjdGl2ZWRlc2NlbmRhbnQoKSB7XG4gICAgICAgIGlmICghaXNQcmVzZW50KHRoaXMuZGF0YUl0ZW0pKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXMub3B0aW9uUHJlZml4ICsgXCItXCIgKyBnZXR0ZXIodGhpcy5kYXRhSXRlbSwgdGhpcy52YWx1ZUZpZWxkKTtcbiAgICB9XG4gICAgZ2V0IG5vRGF0YUxhYmVsKCkge1xuICAgICAgICBpZiAodGhpcy5kYXRhU2VydmljZS5pdGVtc0NvdW50ID09PSAwKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5ub0RhdGFUZXh0O1xuICAgICAgICB9XG4gICAgfVxuICAgIGdldCBhcHBlbmRUbygpIHtcbiAgICAgICAgY29uc3QgeyBhcHBlbmRUbyB9ID0gdGhpcy5wb3B1cFNldHRpbmdzO1xuICAgICAgICBpZiAoIWFwcGVuZFRvIHx8IGFwcGVuZFRvID09PSAncm9vdCcpIHtcbiAgICAgICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGFwcGVuZFRvID09PSAnY29tcG9uZW50JyA/IHRoaXMuY29udGFpbmVyIDogYXBwZW5kVG87XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFNldHMgdGhlIGRhdGEgb2YgdGhlIERyb3BEb3duTGlzdC5cbiAgICAgKlxuICAgICAqID4gVGhlIGRhdGEgaGFzIHRvIGJlIHByb3ZpZGVkIGluIGFuIGFycmF5LWxpa2UgbGlzdC5cbiAgICAgKi9cbiAgICBzZXQgZGF0YShkYXRhKSB7XG4gICAgICAgIHRoaXMuZGF0YVNlcnZpY2UuZGF0YSA9IGRhdGEgfHwgW107XG4gICAgICAgIGlmICh0aGlzLnZpcnR1YWwpIHtcbiAgICAgICAgICAgIHRoaXMudmlydHVhbC5za2lwID0gMDtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnNldFN0YXRlKCk7XG4gICAgfVxuICAgIGdldCBkYXRhKCkge1xuICAgICAgICBjb25zdCB2aXJ0dWFsID0gdGhpcy52aXJ0dWFsO1xuICAgICAgICBpZiAodmlydHVhbCkge1xuICAgICAgICAgICAgY29uc3Qgc3RhcnQgPSB2aXJ0dWFsLnNraXAgfHwgMDtcbiAgICAgICAgICAgIGNvbnN0IGVuZCA9IHN0YXJ0ICsgdmlydHVhbC5wYWdlU2l6ZTtcbiAgICAgICAgICAgIC8vIFVzZSBsZW5ndGggaW5zdGVhZCBvZiBpdGVtc0NvdW50IGJlY2F1c2Ugb2YgdGhlIGdyb3VwaW5nLlxuICAgICAgICAgICAgdmlydHVhbC50b3RhbCA9IHRoaXMuZGF0YVNlcnZpY2UuZGF0YS5sZW5ndGg7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5kYXRhU2VydmljZS5kYXRhLnNsaWNlKHN0YXJ0LCBlbmQpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLmRhdGFTZXJ2aWNlLmRhdGE7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFNldHMgdGhlIHZhbHVlIG9mIHRoZSBEcm9wRG93bkxpc3QuXG4gICAgICogSXQgY2FuIGVpdGhlciBiZSBvZiB0aGUgcHJpbWl0aXZlIChzdHJpbmcsIG51bWJlcnMpIG9yIG9mIHRoZSBjb21wbGV4IChvYmplY3RzKSB0eXBlLlxuICAgICAqIFRvIGRlZmluZSB0aGUgdHlwZSwgdXNlIHRoZSBgdmFsdWVQcmltaXRpdmVgIG9wdGlvbi5cbiAgICAgKlxuICAgICAqID4gQWxsIHNlbGVjdGVkIHZhbHVlcyB3aGljaCBhcmUgbm90IHByZXNlbnQgaW4gdGhlIHNvdXJjZSBhcmUgaWdub3JlZC5cbiAgICAgKi9cbiAgICBzZXQgdmFsdWUobmV3VmFsdWUpIHtcbiAgICAgICAgdGhpcy5fdmFsdWUgPSBuZXdWYWx1ZTtcbiAgICAgICAgdGhpcy5jZHIubWFya0ZvckNoZWNrKCk7XG4gICAgfVxuICAgIGdldCB2YWx1ZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3ZhbHVlO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDb25maWd1cmVzIHRoZSBwb3B1cCBvZiB0aGUgRHJvcERvd25MaXN0LlxuICAgICAqXG4gICAgICogVGhlIGF2YWlsYWJsZSBvcHRpb25zIGFyZTpcbiAgICAgKiAtIGBhbmltYXRlOiBCb29sZWFuYCZtZGFzaDtDb250cm9scyB0aGUgcG9wdXAgYW5pbWF0aW9uLiBCeSBkZWZhdWx0LCB0aGUgb3BlbiBhbmQgY2xvc2UgYW5pbWF0aW9ucyBhcmUgZW5hYmxlZC5cbiAgICAgKiAtIGB3aWR0aDogTnVtYmVyIHwgU3RyaW5nYCZtZGFzaDtTZXRzIHRoZSB3aWR0aCBvZiB0aGUgcG9wdXAgY29udGFpbmVyLiBCeSBkZWZhdWx0LCB0aGUgd2lkdGggb2YgdGhlIGhvc3QgZWxlbWVudCBpcyB1c2VkLiBJZiBzZXQgdG8gYGF1dG9gLCB0aGUgY29tcG9uZW50IGF1dG9tYXRpY2FsbHkgYWRqdXN0cyB0aGUgd2lkdGggb2YgdGhlIHBvcHVwIGFuZCBubyBpdGVtIGxhYmVscyBhcmUgd3JhcHBlZC4gVGhlIGBhdXRvYCBtb2RlIGlzIG5vdCBzdXBwb3J0ZWQgd2hlbiB2aXJ0dWFsIHNjcm9sbGluZyBpcyBlbmFibGVkLlxuICAgICAqIC0gYGhlaWdodDogTnVtYmVyYCZtZGFzaDtTZXRzIHRoZSBoZWlnaHQgb2YgdGhlIHBvcHVwIGNvbnRhaW5lci5cbiAgICAgKiAtIGBwb3B1cENsYXNzOiBTdHJpbmdgJm1kYXNoO1NwZWNpZmllcyBhIGxpc3Qgb2YgQ1NTIGNsYXNzZXMgdGhhdCBhcmUgdXNlZCB0byBzdHlsZSB0aGUgcG9wdXAuXG4gICAgICogLSBgYXBwZW5kVG86IFwicm9vdFwiIHwgXCJjb21wb25lbnRcIiB8IFZpZXdDb250YWluZXJSZWZgJm1kYXNoO1NwZWNpZmllcyB0aGUgY29tcG9uZW50IHRvIHdoaWNoIHRoZSBwb3B1cCB3aWxsIGJlIGFwcGVuZGVkLlxuICAgICAqL1xuICAgIHNldCBwb3B1cFNldHRpbmdzKHNldHRpbmdzKSB7XG4gICAgICAgIHRoaXMuX3BvcHVwU2V0dGluZ3MgPSBPYmplY3QuYXNzaWduKHsgYW5pbWF0ZTogdHJ1ZSB9LCBzZXR0aW5ncyk7XG4gICAgfVxuICAgIGdldCBwb3B1cFNldHRpbmdzKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fcG9wdXBTZXR0aW5ncztcbiAgICB9XG4gICAgLyoqXG4gICAgICogRGVmaW5lcyBhIEJvb2xlYW4gZnVuY3Rpb24gdGhhdCBpcyBleGVjdXRlZCBmb3IgZWFjaCBkYXRhIGl0ZW0gaW4gdGhlIGNvbXBvbmVudFxuICAgICAqIChbc2VlIGV4YW1wbGVzXSh7JSBzbHVnIGRpc2FibGVkaXRlbXNfZGRsICV9KSkuIERldGVybWluZXMgd2hldGhlciB0aGUgaXRlbSB3aWxsIGJlIGRpc2FibGVkLlxuICAgICAqL1xuICAgIHNldCBpdGVtRGlzYWJsZWQoZm4pIHtcbiAgICAgICAgaWYgKHR5cGVvZiBmbiAhPT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBpdGVtRGlzYWJsZWQgbXVzdCBiZSBhIGZ1bmN0aW9uLCBidXQgcmVjZWl2ZWQgJHtKU09OLnN0cmluZ2lmeShmbil9LmApO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuZGlzYWJsZWRJdGVtc1NlcnZpY2UuaXRlbURpc2FibGVkID0gZm47XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEVuYWJsZXMgdGhlIFt2aXJ0dWFsaXphdGlvbl0oeyUgc2x1ZyB2aXJ0dWFsaXphdGlvbl9kZGwgJX0pIGZ1bmN0aW9uYWxpdHkuXG4gICAgICovXG4gICAgc2V0IHZpcnR1YWwoc2V0dGluZ3MpIHtcbiAgICAgICAgdGhpcy5fdmlydHVhbFNldHRpbmdzID0gbm9ybWFsaXplVmlydHVhbGl6YXRpb25TZXR0aW5ncyhzZXR0aW5ncyk7XG4gICAgfVxuICAgIGdldCB2aXJ0dWFsKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fdmlydHVhbFNldHRpbmdzO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAaGlkZGVuXG4gICAgICovXG4gICAgc2V0IHRhYkluZGV4KHRhYkluZGV4KSB7XG4gICAgICAgIHRoaXMudGFiaW5kZXggPSB0YWJJbmRleDtcbiAgICB9XG4gICAgZ2V0IHRhYkluZGV4KCkge1xuICAgICAgICByZXR1cm4gdGhpcy50YWJpbmRleDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQGhpZGRlblxuICAgICAqL1xuICAgIGJsdXJDb21wb25lbnQoKSB7XG4gICAgICAgIHRoaXMud3JhcHBlckJsdXJyZWQuZW1pdCgpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAaGlkZGVuXG4gICAgICovXG4gICAgYmx1ckZpbHRlcklucHV0KCkge1xuICAgICAgICB0aGlzLmZpbHRlckJsdXJyZWQuZW1pdCgpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAaGlkZGVuXG4gICAgICovXG4gICAgZm9jdXNDb21wb25lbnQoKSB7XG4gICAgICAgIHRoaXMud3JhcHBlckZvY3VzZWQuZW1pdCgpO1xuICAgICAgICBpZiAoIXRoaXMuaXNGb2N1c2VkKSB7XG4gICAgICAgICAgICB0aGlzLmlzRm9jdXNlZCA9IHRydWU7XG4gICAgICAgICAgICB0aGlzLm9uRm9jdXMuZW1pdCgpO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEBoaWRkZW5cbiAgICAgKi9cbiAgICBrZXlkb3duKGV2ZW50KSB7XG4gICAgICAgIGNvbnN0IGZpcnN0SW5kZXggPSBpc1ByZXNlbnQodGhpcy5kZWZhdWx0SXRlbSkgPyAtMSA6IDA7XG4gICAgICAgIGxldCBmb2N1c2VkID0gaXNOYU4odGhpcy5zZWxlY3Rpb25TZXJ2aWNlLmZvY3VzZWQpID8gdGhpcy5maXJzdEZvY3VzYWJsZUluZGV4KGZpcnN0SW5kZXgpIDogdGhpcy5zZWxlY3Rpb25TZXJ2aWNlLmZvY3VzZWQ7XG4gICAgICAgIGxldCBvZmZzZXQgPSAwO1xuICAgICAgICBpZiAodGhpcy5kaXNhYmxlZCB8fCB0aGlzLnJlYWRvbmx5KSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgaXNIb21lRW5kID0gZXZlbnQua2V5Q29kZSA9PT0gS2V5cy5ob21lIHx8IGV2ZW50LmtleUNvZGUgPT09IEtleXMuZW5kO1xuICAgICAgICBjb25zdCBpc0ZpbHRlckZvY3VzZWQgPSB0aGlzLmZpbHRlcmFibGUgJiYgdGhpcy5pc0ZvY3VzZWQgJiYgdGhpcy5pc09wZW47XG4gICAgICAgIGlmIChpc0ZpbHRlckZvY3VzZWQgJiYgaXNIb21lRW5kKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgaGFzU2VsZWN0ZWQgPSBpc1ByZXNlbnQodGhpcy5zZWxlY3Rpb25TZXJ2aWNlLnNlbGVjdGVkWzBdKTtcbiAgICAgICAgY29uc3QgZm9jdXNlZEl0ZW1Ob3RTZWxlY3RlZCA9IGlzUHJlc2VudCh0aGlzLnNlbGVjdGlvblNlcnZpY2UuZm9jdXNlZCkgJiYgIXRoaXMuc2VsZWN0aW9uU2VydmljZS5pc1NlbGVjdGVkKHRoaXMuc2VsZWN0aW9uU2VydmljZS5mb2N1c2VkKTtcbiAgICAgICAgaWYgKCFoYXNTZWxlY3RlZCB8fCBmb2N1c2VkSXRlbU5vdFNlbGVjdGVkKSB7XG4gICAgICAgICAgICBpZiAoZXZlbnQua2V5Q29kZSA9PT0gS2V5cy5kb3duIHx8IGV2ZW50LmtleUNvZGUgPT09IEtleXMucmlnaHQpIHtcbiAgICAgICAgICAgICAgICBvZmZzZXQgPSAtMTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGV2ZW50LmtleUNvZGUgPT09IEtleXMudXAgfHwgZXZlbnQua2V5Q29kZSA9PT0gS2V5cy5sZWZ0KSB7XG4gICAgICAgICAgICAgICAgb2Zmc2V0ID0gMTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBjb25zdCBldmVudERhdGEgPSBldmVudDtcbiAgICAgICAgY29uc3QgYWN0aW9uID0gdGhpcy5uYXZpZ2F0aW9uU2VydmljZS5wcm9jZXNzKHtcbiAgICAgICAgICAgIGN1cnJlbnQ6IGZvY3VzZWQgKyBvZmZzZXQsXG4gICAgICAgICAgICBtYXg6IHRoaXMuZGF0YVNlcnZpY2UuaXRlbXNDb3VudCAtIDEsXG4gICAgICAgICAgICBtaW46IHRoaXMuZGVmYXVsdEl0ZW0gPyAtMSA6IDAsXG4gICAgICAgICAgICBvcmlnaW5hbEV2ZW50OiBldmVudERhdGFcbiAgICAgICAgfSk7XG4gICAgICAgIGNvbnN0IGxlZnRSaWdodEtleXMgPSAoYWN0aW9uID09PSBOYXZpZ2F0aW9uQWN0aW9uLkxlZnQpIHx8IChhY3Rpb24gPT09IE5hdmlnYXRpb25BY3Rpb24uUmlnaHQpO1xuICAgICAgICBpZiAoYWN0aW9uICE9PSBOYXZpZ2F0aW9uQWN0aW9uLlVuZGVmaW5lZCAmJlxuICAgICAgICAgICAgYWN0aW9uICE9PSBOYXZpZ2F0aW9uQWN0aW9uLlRhYiAmJlxuICAgICAgICAgICAgYWN0aW9uICE9PSBOYXZpZ2F0aW9uQWN0aW9uLkJhY2tzcGFjZSAmJlxuICAgICAgICAgICAgYWN0aW9uICE9PSBOYXZpZ2F0aW9uQWN0aW9uLkRlbGV0ZSAmJlxuICAgICAgICAgICAgIShsZWZ0UmlnaHRLZXlzICYmIHRoaXMuZmlsdGVyYWJsZSkgJiZcbiAgICAgICAgICAgIGFjdGlvbiAhPT0gTmF2aWdhdGlvbkFjdGlvbi5FbnRlciAvL2VudGVyIHdoZW4gcG9wdXAgaXMgb3BlbmVkIGlzIGhhbmRsZWQgYmVmb3JlIGBoYW5kbGVFbnRlcmBcbiAgICAgICAgKSB7XG4gICAgICAgICAgICBldmVudERhdGEucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBAaGlkZGVuXG4gICAgICovXG4gICAga2V5cHJlc3MoZXZlbnQpIHtcbiAgICAgICAgaWYgKHRoaXMuZGlzYWJsZWQgfHwgdGhpcy5yZWFkb25seSB8fCB0aGlzLmZpbHRlcmFibGUpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLm9uS2V5UHJlc3MoZXZlbnQpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAaGlkZGVuXG4gICAgICovXG4gICAgY2xpY2soKSB7XG4gICAgICAgIHRoaXMuZm9jdXMoKTtcbiAgICAgICAgdGhpcy50b2dnbGVQb3B1cCghdGhpcy5pc09wZW4pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAaGlkZGVuXG4gICAgICovXG4gICAgb25SZXNpemUoKSB7XG4gICAgICAgIGlmICh0aGlzLl9vcGVuKSB7XG4gICAgICAgICAgICBjb25zdCBwb3B1cFdyYXBwZXIgPSB0aGlzLnBvcHVwUmVmLnBvcHVwRWxlbWVudDtcbiAgICAgICAgICAgIGNvbnN0IHsgbWluLCBtYXggfSA9IHRoaXMud2lkdGg7XG4gICAgICAgICAgICBwb3B1cFdyYXBwZXIuc3R5bGUubWluV2lkdGggPSBtaW47XG4gICAgICAgICAgICBwb3B1cFdyYXBwZXIuc3R5bGUud2lkdGggPSBtYXg7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZ2V0IGRpcigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZGlyZWN0aW9uO1xuICAgIH1cbiAgICBuZ09uSW5pdCgpIHtcbiAgICAgICAgdGhpcy5yZW5kZXJlci5yZW1vdmVBdHRyaWJ1dGUodGhpcy5ob3N0RWxlbWVudCwgXCJ0YWJpbmRleFwiKTtcbiAgICAgICAgdGhpcy5sb2NhbGl6YXRpb25DaGFuZ2VzU3Vic2NyaXB0aW9uID0gdGhpcy5sb2NhbGl6YXRpb25cbiAgICAgICAgICAgIC5jaGFuZ2VzLnN1YnNjcmliZSgoeyBydGwgfSkgPT4ge1xuICAgICAgICAgICAgdGhpcy5kaXJlY3Rpb24gPSBydGwgPyAncnRsJyA6ICdsdHInO1xuICAgICAgICAgICAgdGhpcy5zZXRNZXNzYWdlcygpO1xuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5zZXRNZXNzYWdlcygpO1xuICAgICAgICB0aGlzLmFzc2lnbkFyaWFEZXNjcmliZWRCeSgpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAaGlkZGVuXG4gICAgICogVXNlZCBieSB0aGUgVGV4dEJveENvbnRhaW5lciB0byBkZXRlcm1pbmUgaWYgdGhlIGNvbXBvbmVudCBpcyBlbXB0eS5cbiAgICAgKi9cbiAgICBpc0VtcHR5KCkge1xuICAgICAgICBjb25zdCB2YWx1ZSA9IHRoaXMudmFsdWU7XG4gICAgICAgIHJldHVybiAhKHZhbHVlID09PSAwIHx8IHZhbHVlID09PSBmYWxzZSB8fCB2YWx1ZSB8fCB0aGlzLmRlZmF1bHRJdGVtKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQGhpZGRlblxuICAgICAqL1xuICAgIG9uRmlsdGVyRm9jdXMoKSB7XG4gICAgICAgIHRoaXMuZmlsdGVyRm9jdXNlZC5lbWl0KCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEBoaWRkZW5cbiAgICAgKi9cbiAgICBuZ09uRGVzdHJveSgpIHtcbiAgICAgICAgdGhpcy5kZXN0cm95UG9wdXAoKTtcbiAgICAgICAgdGhpcy51bnN1YnNjcmliZUV2ZW50cygpO1xuICAgICAgICBjbGVhclRpbWVvdXQodGhpcy5tZXNzYWdlc1RpbWVvdXQpO1xuICAgICAgICBpZiAodGhpcy5sb2NhbGl6YXRpb25DaGFuZ2VzU3Vic2NyaXB0aW9uKSB7XG4gICAgICAgICAgICB0aGlzLmxvY2FsaXphdGlvbkNoYW5nZXNTdWJzY3JpcHRpb24udW5zdWJzY3JpYmUoKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBAaGlkZGVuXG4gICAgICovXG4gICAgbmdPbkNoYW5nZXMoX2NoYW5nZXMpIHtcbiAgICAgICAgY29uc3QgdmlydHVhbCA9IHRoaXMudmlydHVhbDtcbiAgICAgICAgY29uc3QgcmVxdWVzdEluaXRpYWxEYXRhID0gdmlydHVhbCAmJiBfY2hhbmdlcy5kYXRhICYmIF9jaGFuZ2VzLmRhdGEuaXNGaXJzdENoYW5nZSgpO1xuICAgICAgICBpZiAocmVxdWVzdEluaXRpYWxEYXRhKSB7XG4gICAgICAgICAgICB0aGlzLnBhZ2VDaGFuZ2UoeyBza2lwOiAwLCB0YWtlOiB2aXJ0dWFsLnBhZ2VTaXplIH0pO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLnZhbHVlUHJpbWl0aXZlID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHRoaXMudmFsdWVQcmltaXRpdmUgPSB0aGlzLnZhbHVlRmllbGQgPyBmYWxzZSA6IHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKF9jaGFuZ2VzLmhhc093blByb3BlcnR5KFwidmFsdWVcIikpIHtcbiAgICAgICAgICAgIHRoaXMudmVyaWZ5U2V0dGluZ3MoX2NoYW5nZXMudmFsdWUuY3VycmVudFZhbHVlKTtcbiAgICAgICAgICAgIGlmICghaXNQcmVzZW50KHRoaXMudmFsdWUpKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5fcHJldmlvdXNEYXRhSXRlbSA9IHVuZGVmaW5lZDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAoX2NoYW5nZXMuaGFzT3duUHJvcGVydHkoXCJkZWZhdWx0SXRlbVwiKSkge1xuICAgICAgICAgICAgdGhpcy5kaXNhYmxlZEl0ZW1zU2VydmljZS5kZWZhdWx0SXRlbSA9IHRoaXMuZGVmYXVsdEl0ZW07XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgU1RBVEVfUFJPUFMgPSAvKHZhbHVlfHRleHRGaWVsZHx2YWx1ZUZpZWxkfHZhbHVlUHJpbWl0aXZlfGRlZmF1bHRJdGVtfGl0ZW1EaXNhYmxlZCkvZztcbiAgICAgICAgaWYgKFNUQVRFX1BST1BTLnRlc3QoT2JqZWN0LmtleXMoX2NoYW5nZXMpLmpvaW4oKSkpIHtcbiAgICAgICAgICAgIHRoaXMuc2V0U3RhdGUoKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBGb2N1c2VzIHRoZSBEcm9wRG93bkxpc3QuXG4gICAgICovXG4gICAgZm9jdXMoKSB7XG4gICAgICAgIGlmICghdGhpcy5kaXNhYmxlZCkge1xuICAgICAgICAgICAgdGhpcy53cmFwcGVyLm5hdGl2ZUVsZW1lbnQuZm9jdXMoKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBCbHVycyB0aGUgRHJvcERvd25MaXN0LlxuICAgICAqL1xuICAgIGJsdXIoKSB7XG4gICAgICAgIGlmICghdGhpcy5kaXNhYmxlZCkge1xuICAgICAgICAgICAgdGhpcy53cmFwcGVyLm5hdGl2ZUVsZW1lbnQuYmx1cigpO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFRvZ2dsZXMgdGhlIHZpc2liaWxpdHkgb2YgdGhlIHBvcHVwXG4gICAgICogKFtzZWUgZXhhbXBsZV0oeyUgc2x1ZyBvcGVuc3RhdGVfZGRsICV9I3RvYy1zZXR0aW5nLXRoZS1pbml0aWFsbHktb3BlbmVkLWNvbXBvbmVudCkpLlxuICAgICAqIElmIHlvdSB1c2UgdGhlIGB0b2dnbGVgIG1ldGhvZCB0byBvcGVuIG9yIGNsb3NlIHRoZSBwb3B1cCwgdGhlIGBvcGVuYCBhbmQgYGNsb3NlYCBldmVudHMgd2lsbCBub3QgYmUgZmlyZWQuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gb3BlbiAtIFRoZSBzdGF0ZSBvZiB0aGUgcG9wdXAuXG4gICAgICovXG4gICAgdG9nZ2xlKG9wZW4pIHtcbiAgICAgICAgLy8gVGhlIFByb21pc2UgaXMgcmVxdWlyZWQgdG8gb3BlbiB0aGUgcG9wdXAgb24gbG9hZC5cbiAgICAgICAgLy8gT3RoZXJ3aXNlLCB0aGUgXCJFeHByZXNzaW9uIGhhcyBjaGFuZ2VkLi4uXCIgdHlwZSBlcnJvciB3aWxsIGJlIHRocm93bi5cbiAgICAgICAgUHJvbWlzZS5yZXNvbHZlKG51bGwpLnRoZW4oKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5fdG9nZ2xlKG9wZW4pO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgX3RvZ2dsZShvcGVuKSB7XG4gICAgICAgIHRoaXMuX29wZW4gPSAob3BlbiA9PT0gdW5kZWZpbmVkKSA/ICF0aGlzLl9vcGVuIDogb3BlbjtcbiAgICAgICAgdGhpcy5kZXN0cm95UG9wdXAoKTtcbiAgICAgICAgaWYgKHRoaXMuX29wZW4pIHtcbiAgICAgICAgICAgIHRoaXMuY3JlYXRlUG9wdXAoKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICB0cmlnZ2VyUG9wdXBFdmVudHMob3Blbikge1xuICAgICAgICBjb25zdCBldmVudEFyZ3MgPSBuZXcgUHJldmVudGFibGVFdmVudCgpO1xuICAgICAgICBpZiAob3Blbikge1xuICAgICAgICAgICAgdGhpcy5vcGVuLmVtaXQoZXZlbnRBcmdzKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuY2xvc2UuZW1pdChldmVudEFyZ3MpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBldmVudEFyZ3MuaXNEZWZhdWx0UHJldmVudGVkKCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEBoaWRkZW5cbiAgICAgKi9cbiAgICB0b2dnbGVQb3B1cChvcGVuKSB7XG4gICAgICAgIGNvbnN0IGlzRGlzYWJsZWQgPSB0aGlzLmRpc2FibGVkIHx8IHRoaXMucmVhZG9ubHk7XG4gICAgICAgIGNvbnN0IHNhbWVTdGF0ZSA9IHRoaXMuaXNPcGVuID09PSBvcGVuO1xuICAgICAgICBpZiAoaXNEaXNhYmxlZCB8fCBzYW1lU3RhdGUpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBpc0RlZmF1bHRQcmV2ZW50ZWQgPSB0aGlzLnRyaWdnZXJQb3B1cEV2ZW50cyhvcGVuKTtcbiAgICAgICAgaWYgKCFpc0RlZmF1bHRQcmV2ZW50ZWQpIHtcbiAgICAgICAgICAgIGlmICghb3BlbiAmJiB0aGlzLmZpbHRlcmFibGUgJiYgdGhpcy5pc0ZvY3VzZWQpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmZvY3VzKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLl90b2dnbGUob3Blbik7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJucyB0aGUgY3VycmVudCBvcGVuIHN0YXRlIG9mIHRoZSBwb3B1cC5cbiAgICAgKi9cbiAgICBnZXQgaXNPcGVuKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fb3BlbjtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmVzZXRzIHRoZSB2YWx1ZSBvZiB0aGUgRHJvcERvd25MaXN0LlxuICAgICAqIElmIHlvdSB1c2UgdGhlIGByZXNldGAgbWV0aG9kIHRvIGNsZWFyIHRoZSB2YWx1ZSBvZiB0aGUgY29tcG9uZW50LFxuICAgICAqIHRoZSBtb2RlbCB3aWxsIG5vdCB1cGRhdGUgYXV0b21hdGljYWxseSBhbmQgdGhlIGBzZWxlY3Rpb25DaGFuZ2VgIGFuZCBgdmFsdWVDaGFuZ2VgIGV2ZW50cyB3aWxsIG5vdCBiZSBmaXJlZC5cbiAgICAgKi9cbiAgICByZXNldCgpIHtcbiAgICAgICAgdGhpcy5fcHJldmlvdXNEYXRhSXRlbSA9IHVuZGVmaW5lZDtcbiAgICAgICAgdGhpcy52YWx1ZSA9IHVuZGVmaW5lZDtcbiAgICAgICAgdGhpcy5zZXRTdGF0ZSgpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAaGlkZGVuXG4gICAgICovXG4gICAgd3JpdGVWYWx1ZSh2YWx1ZSkge1xuICAgICAgICB0aGlzLnZlcmlmeVNldHRpbmdzKHZhbHVlKTtcbiAgICAgICAgdGhpcy52YWx1ZSA9IHZhbHVlID09PSBudWxsID8gdW5kZWZpbmVkIDogdmFsdWU7XG4gICAgICAgIGlmICghaXNQcmVzZW50KHZhbHVlKSkge1xuICAgICAgICAgICAgdGhpcy5fcHJldmlvdXNEYXRhSXRlbSA9IHVuZGVmaW5lZDtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnNldFN0YXRlKCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEBoaWRkZW5cbiAgICAgKi9cbiAgICByZWdpc3Rlck9uQ2hhbmdlKGZuKSB7XG4gICAgICAgIHRoaXMub25DaGFuZ2VDYWxsYmFjayA9IGZuO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAaGlkZGVuXG4gICAgICovXG4gICAgcmVnaXN0ZXJPblRvdWNoZWQoZm4pIHtcbiAgICAgICAgdGhpcy5vblRvdWNoZWRDYWxsYmFjayA9IGZuO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAaGlkZGVuXG4gICAgICovXG4gICAgc2V0RGlzYWJsZWRTdGF0ZShpc0Rpc2FibGVkKSB7XG4gICAgICAgIHRoaXMuZGlzYWJsZWQgPSBpc0Rpc2FibGVkO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAaGlkZGVuXG4gICAgICovXG4gICAgZ2V0IGJ1dHRvbkNsYXNzZXMoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmxvYWRpbmcgPyAnay1pLWxvYWRpbmcnIDogdGhpcy5pY29uQ2xhc3MgfHwgJ2staS1hcnJvdy1zJztcbiAgICB9XG4gICAgLyoqXG4gICAgICogQGhpZGRlblxuICAgICAqL1xuICAgIGdldCBsaXN0Q29udGFpbmVyQ2xhc3NlcygpIHtcbiAgICAgICAgY29uc3QgY29udGFpbmVyQ2xhc3NlcyA9IFsnay1saXN0LWNvbnRhaW5lcicsICdrLXJlc2V0J107XG4gICAgICAgIGlmICh0aGlzLnBvcHVwU2V0dGluZ3MucG9wdXBDbGFzcykge1xuICAgICAgICAgICAgY29udGFpbmVyQ2xhc3Nlcy5wdXNoKHRoaXMucG9wdXBTZXR0aW5ncy5wb3B1cENsYXNzKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gY29udGFpbmVyQ2xhc3NlcztcbiAgICB9XG4gICAgLyoqXG4gICAgICogQGhpZGRlblxuICAgICAqL1xuICAgIGdldCBpc0Rpc2FibGVkRGVmYXVsdEl0ZW0oKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmRpc2FibGVkSXRlbXNTZXJ2aWNlLmlzSXRlbURpc2FibGVkKHRoaXMuZGVmYXVsdEl0ZW0pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAaGlkZGVuXG4gICAgICovXG4gICAgZ2V0VGV4dCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudGV4dDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQGhpZGRlblxuICAgICAqL1xuICAgIGdldERlZmF1bHRJdGVtVGV4dCgpIHtcbiAgICAgICAgcmV0dXJuIGdldHRlcih0aGlzLmRlZmF1bHRJdGVtLCB0aGlzLnRleHRGaWVsZCk7XG4gICAgfVxuICAgIGNyZWF0ZVBvcHVwKCkge1xuICAgICAgICBpZiAodGhpcy52aXJ0dWFsKSB7XG4gICAgICAgICAgICB0aGlzLnZpcnR1YWwuc2tpcCA9IDA7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgaG9yaXpvbnRhbEFsaWduID0gdGhpcy5kaXJlY3Rpb24gPT09IFwicnRsXCIgPyBcInJpZ2h0XCIgOiBcImxlZnRcIjtcbiAgICAgICAgY29uc3QgYW5jaG9yUG9zaXRpb24gPSB7IGhvcml6b250YWw6IGhvcml6b250YWxBbGlnbiwgdmVydGljYWw6IFwiYm90dG9tXCIgfTtcbiAgICAgICAgY29uc3QgcG9wdXBQb3NpdGlvbiA9IHsgaG9yaXpvbnRhbDogaG9yaXpvbnRhbEFsaWduLCB2ZXJ0aWNhbDogXCJ0b3BcIiB9O1xuICAgICAgICB0aGlzLnBvcHVwUmVmID0gdGhpcy5wb3B1cFNlcnZpY2Uub3Blbih7XG4gICAgICAgICAgICBhbmNob3I6IHRoaXMud3JhcHBlcixcbiAgICAgICAgICAgIGFuY2hvckFsaWduOiBhbmNob3JQb3NpdGlvbixcbiAgICAgICAgICAgIGFuaW1hdGU6IHRoaXMucG9wdXBTZXR0aW5ncy5hbmltYXRlLFxuICAgICAgICAgICAgYXBwZW5kVG86IHRoaXMuYXBwZW5kVG8sXG4gICAgICAgICAgICBjb250ZW50OiB0aGlzLnBvcHVwVGVtcGxhdGUsXG4gICAgICAgICAgICBwb3B1cEFsaWduOiBwb3B1cFBvc2l0aW9uLFxuICAgICAgICAgICAgcG9wdXBDbGFzczogdGhpcy5saXN0Q29udGFpbmVyQ2xhc3NlcyxcbiAgICAgICAgICAgIHBvc2l0aW9uTW9kZTogJ2Fic29sdXRlJ1xuICAgICAgICB9KTtcbiAgICAgICAgY29uc3QgcG9wdXBXcmFwcGVyID0gdGhpcy5wb3B1cFJlZi5wb3B1cEVsZW1lbnQ7XG4gICAgICAgIGNvbnN0IHsgbWluLCBtYXggfSA9IHRoaXMud2lkdGg7XG4gICAgICAgIHBvcHVwV3JhcHBlci5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWRvd24nLCB0aGlzLnBvcHVwTW91c2VEb3duSGFuZGxlcik7XG4gICAgICAgIHBvcHVwV3JhcHBlci5zdHlsZS5taW5XaWR0aCA9IG1pbjtcbiAgICAgICAgcG9wdXBXcmFwcGVyLnN0eWxlLndpZHRoID0gbWF4O1xuICAgICAgICBwb3B1cFdyYXBwZXIuc3R5bGUuaGVpZ2h0ID0gdGhpcy5oZWlnaHQ7XG4gICAgICAgIHBvcHVwV3JhcHBlci5zZXRBdHRyaWJ1dGUoXCJkaXJcIiwgdGhpcy5kaXJlY3Rpb24pO1xuICAgICAgICB0aGlzLnBvcHVwUmVmLnBvcHVwT3Blbi5zdWJzY3JpYmUoKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5jZHIuZGV0ZWN0Q2hhbmdlcygpO1xuICAgICAgICAgICAgdGhpcy5vcHRpb25zTGlzdC5zY3JvbGxUb0l0ZW0odGhpcy5zZWxlY3Rpb25TZXJ2aWNlLmZvY3VzZWQpO1xuICAgICAgICB9KTtcbiAgICAgICAgaWYgKCF0aGlzLmZpbHRlcmFibGUpIHtcbiAgICAgICAgICAgIHRoaXMucG9wdXBSZWYucG9wdXBBbmNob3JWaWV3cG9ydExlYXZlLnN1YnNjcmliZSgoKSA9PiB0aGlzLnRvZ2dsZVBvcHVwKGZhbHNlKSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZGVzdHJveVBvcHVwKCkge1xuICAgICAgICBpZiAodGhpcy5wb3B1cFJlZikge1xuICAgICAgICAgICAgdGhpcy5wb3B1cFJlZi5wb3B1cEVsZW1lbnRcbiAgICAgICAgICAgICAgICAucmVtb3ZlRXZlbnRMaXN0ZW5lcignbW91c2Vkb3duJywgdGhpcy5wb3B1cE1vdXNlRG93bkhhbmRsZXIpO1xuICAgICAgICAgICAgdGhpcy5wb3B1cFJlZi5jbG9zZSgpO1xuICAgICAgICAgICAgdGhpcy5wb3B1cFJlZiA9IG51bGw7XG4gICAgICAgIH1cbiAgICB9XG4gICAgdXBkYXRlU3RhdGUoeyBkYXRhSXRlbSwgY29uZmlybSA9IGZhbHNlIH0pIHtcbiAgICAgICAgdGhpcy5kYXRhSXRlbSA9IGRhdGFJdGVtO1xuICAgICAgICB0aGlzLnRleHQgPSB0aGlzLnByb3AodGhpcy50ZXh0RmllbGQsIHRoaXMudmFsdWVQcmltaXRpdmUpKGRhdGFJdGVtKTtcbiAgICAgICAgaWYgKGNvbmZpcm0pIHtcbiAgICAgICAgICAgIHRoaXMuX3ByZXZpb3VzRGF0YUl0ZW0gPSBkYXRhSXRlbTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBjbGVhclN0YXRlKCkge1xuICAgICAgICB0aGlzLnRleHQgPSB1bmRlZmluZWQ7XG4gICAgICAgIHRoaXMuZGF0YUl0ZW0gPSB1bmRlZmluZWQ7XG4gICAgfVxuICAgIHJlc2V0U2VsZWN0aW9uKGluZGV4KSB7XG4gICAgICAgIGNvbnN0IGNsZWFyID0gIWlzUHJlc2VudChpbmRleCk7XG4gICAgICAgIHRoaXMuc2VsZWN0aW9uU2VydmljZS5yZXNldFNlbGVjdGlvbihjbGVhciA/IFtdIDogW2luZGV4XSk7XG4gICAgICAgIHRoaXMuc2VsZWN0aW9uU2VydmljZS5mb2N1c2VkID0gY2xlYXIgPyB0aGlzLmZpcnN0Rm9jdXNhYmxlSW5kZXgoMCkgOiBpbmRleDtcbiAgICB9XG4gICAgb25TZWxlY3Rpb25DaGFuZ2UoeyBkYXRhSXRlbSB9KSB7XG4gICAgICAgIHRoaXMudXBkYXRlU3RhdGUoeyBkYXRhSXRlbSB9KTtcbiAgICAgICAgdGhpcy5zZWxlY3Rpb25DaGFuZ2UuZW1pdChkYXRhSXRlbSk7XG4gICAgICAgIC8vIHJlYXNzaWduaW5nIHRoZSB2YWx1ZSBsYWJlbCBJRCBhcyBhcmlhLWRlYXNjaWJlZGJ5IGZvcmNlcyBmaXJlZm94L252ZGEsIGZvcmVmb3gvamF3cyB0byByZWFkXG4gICAgICAgIC8vIHRoZSBuZXcgdmFsdWUgd2hlbiB0aGUgcG9wdXAgaXMgY2xvc2VkIGFuZCB0aGUgdmFsdWUgaXMgY2hhbmdlZCB3aXRoIHRoZSBhcnJvdyBrZXlzICh1cC9kb3duKVxuICAgICAgICB0aGlzLmFzc2lnbkFyaWFEZXNjcmliZWRCeSgpO1xuICAgIH1cbiAgICBzdWJzY3JpYmVFdmVudHMoKSB7XG4gICAgICAgIGlmICghaXNEb2N1bWVudEF2YWlsYWJsZSgpKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgLy8gSXRlbSBzZWxlY3Rpb24gd2hlbiB0aGUgcG9wdXAgaXMgb3Blbi5cbiAgICAgICAgdGhpcy5zZWxlY3Rpb25TdWJzY3JpcHRpb24uYWRkKHRoaXMuc2VsZWN0aW9uU2VydmljZS5vblNlbGVjdC5waXBlKGZpbHRlcihfID0+IHRoaXMuaXNPcGVuKSwgbWFwKHRoaXMuaXRlbUZyb21FdmVudC5iaW5kKHRoaXMpKSlcbiAgICAgICAgICAgIC5zdWJzY3JpYmUodGhpcy5vblNlbGVjdGlvbkNoYW5nZS5iaW5kKHRoaXMpKSk7XG4gICAgICAgIC8vIEl0ZW0gc2VsZWN0aW9uIHdoZW4gdGhlIHBvcHVwIGlzIGNsb3NlZCB8IGNsaWNrZWQgfCBlbnRlciwgYW5kIHNvIG9uLlxuICAgICAgICB0aGlzLnNlbGVjdGlvblN1YnNjcmlwdGlvbi5hZGQobWVyZ2UodGhpcy5zZWxlY3Rpb25TZXJ2aWNlLm9uU2VsZWN0LnBpcGUoZmlsdGVyKF8gPT4gIXRoaXMuaXNPcGVuKSksIHRoaXMuc2VsZWN0aW9uU2VydmljZS5vbkNoYW5nZSkucGlwZShtYXAodGhpcy5pdGVtRnJvbUV2ZW50LmJpbmQodGhpcykpLCB0YXAoXyA9PiB0aGlzLnRvZ2dsZVBvcHVwKGZhbHNlKSkpXG4gICAgICAgICAgICAuc3Vic2NyaWJlKCh7IGRhdGFJdGVtLCB2YWx1ZTogbmV3VmFsdWUsIG5ld1NlbGVjdGlvbiB9KSA9PiB7XG4gICAgICAgICAgICBpZiAobmV3U2VsZWN0aW9uKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5vblNlbGVjdGlvbkNoYW5nZSh7IGRhdGFJdGVtIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3Qgc2hvdWxkVXNlUHJldmlvdXMgPSAhaXNQcmVzZW50KGRhdGFJdGVtKSAmJiB0aGlzLl9wcmV2aW91c0RhdGFJdGVtO1xuICAgICAgICAgICAgY29uc3Qgc2hvdWxkVXNlTmV3VmFsdWUgPSBuZXdWYWx1ZSAhPT0gdGhpcy5wcm9wKHRoaXMudmFsdWVGaWVsZCwgdGhpcy52YWx1ZVByaW1pdGl2ZSkodGhpcy52YWx1ZSk7XG4gICAgICAgICAgICBpZiAoc2hvdWxkVXNlUHJldmlvdXMpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZVN0YXRlKHsgZGF0YUl0ZW06IHRoaXMuX3ByZXZpb3VzRGF0YUl0ZW0gfSk7XG4gICAgICAgICAgICAgICAgdGhpcy5yZXNldFNlbGVjdGlvbigpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoc2hvdWxkVXNlTmV3VmFsdWUpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnZhbHVlID0gdGhpcy52YWx1ZVByaW1pdGl2ZSA/IG5ld1ZhbHVlIDogZGF0YUl0ZW07XG4gICAgICAgICAgICAgICAgdGhpcy5fcHJldmlvdXNEYXRhSXRlbSA9IGRhdGFJdGVtO1xuICAgICAgICAgICAgICAgIHRoaXMuZW1pdENoYW5nZSh0aGlzLnZhbHVlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuY2xlYXJGaWx0ZXIoKTtcbiAgICAgICAgfSkpO1xuICAgICAgICB0aGlzLm5hdmlnYXRpb25TdWJzY3JpcHRpb24gPSBtZXJnZSh0aGlzLm5hdmlnYXRpb25TZXJ2aWNlLnVwLCB0aGlzLm5hdmlnYXRpb25TZXJ2aWNlLmRvd24sIHRoaXMubmF2aWdhdGlvblNlcnZpY2UubGVmdC5waXBlKHNraXBXaGlsZSgoKSA9PiB0aGlzLmZpbHRlcmFibGUpKSwgdGhpcy5uYXZpZ2F0aW9uU2VydmljZS5yaWdodC5waXBlKHNraXBXaGlsZSgoKSA9PiB0aGlzLmZpbHRlcmFibGUpKSwgdGhpcy5uYXZpZ2F0aW9uU2VydmljZS5ob21lLCB0aGlzLm5hdmlnYXRpb25TZXJ2aWNlLmVuZClcbiAgICAgICAgICAgIC5waXBlKGZpbHRlcigoZXZlbnQpID0+ICFpc05hTihldmVudC5pbmRleCkpKVxuICAgICAgICAgICAgLnN1YnNjcmliZSgoZXZlbnQpID0+IHRoaXMuc2VsZWN0aW9uU2VydmljZS5zZWxlY3QoZXZlbnQuaW5kZXgpKTtcbiAgICAgICAgdGhpcy5vcGVuU3Vic2NyaXB0aW9uID0gdGhpcy5uYXZpZ2F0aW9uU2VydmljZS5vcGVuLnN1YnNjcmliZSgoKSA9PiB0aGlzLnRvZ2dsZVBvcHVwKHRydWUpKTtcbiAgICAgICAgdGhpcy5jbG9zZVN1YnNjcmlwdGlvbiA9IHRoaXMubmF2aWdhdGlvblNlcnZpY2UuY2xvc2Uuc3Vic2NyaWJlKCgpID0+IHtcbiAgICAgICAgICAgIHRoaXMudG9nZ2xlUG9wdXAoZmFsc2UpO1xuICAgICAgICAgICAgdGhpcy5mb2N1cygpO1xuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5lbnRlclN1YnNjcmlwdGlvbiA9IHRoaXMubmF2aWdhdGlvblNlcnZpY2UuZW50ZXJcbiAgICAgICAgICAgIC5waXBlKHRhcCgoZXZlbnQpID0+IGV2ZW50Lm9yaWdpbmFsRXZlbnQucHJldmVudERlZmF1bHQoKSkpXG4gICAgICAgICAgICAuc3Vic2NyaWJlKHRoaXMuaGFuZGxlRW50ZXIuYmluZCh0aGlzKSk7XG4gICAgICAgIHRoaXMuZXNjU3Vic2NyaXB0aW9uID0gdGhpcy5uYXZpZ2F0aW9uU2VydmljZS5lc2NcbiAgICAgICAgICAgIC5zdWJzY3JpYmUodGhpcy5oYW5kbGVFc2NhcGUuYmluZCh0aGlzKSk7XG4gICAgICAgIHRoaXMuZmlsdGVyQmx1cnJlZFN1YnNjcmlwdGlvbiA9IHRoaXMuZmlsdGVyQmx1cnJlZC5waXBlKGNvbmNhdE1hcCgoKSA9PiBpbnRlcnZhbCgxMCkucGlwZSh0YWtlKDEpLCB0YWtlVW50aWwodGhpcy53cmFwcGVyRm9jdXNlZCkpKSlcbiAgICAgICAgICAgIC5zdWJzY3JpYmUoKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy53cmFwcGVyQmx1cnJlZC5lbWl0KCk7XG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLl96b25lLnJ1bk91dHNpZGVBbmd1bGFyKCgpID0+IHtcbiAgICAgICAgICAgIHRoaXMuY29tcG9uZW50Qmx1cnJlZFN1YnNjcmlwdGlvbiA9XG4gICAgICAgICAgICAgICAgbWVyZ2UodGhpcy53cmFwcGVyQmx1cnJlZC5waXBlKGNvbmNhdE1hcCgoKSA9PiBpbnRlcnZhbCgxMCkucGlwZSh0YWtlKDEpLCB0YWtlVW50aWwodGhpcy5maWx0ZXJGb2N1c2VkKSkpKSwgdGhpcy5uYXZpZ2F0aW9uU2VydmljZS50YWIpLnBpcGUodGFwKGV2ZW50ID0+IGV2ZW50IGluc3RhbmNlb2YgTmF2aWdhdGlvbkV2ZW50ICYmIHRoaXMuZm9jdXMoKSksIGZpbHRlcigoKSA9PiB0aGlzLmlzRm9jdXNlZCkpXG4gICAgICAgICAgICAgICAgICAgIC5zdWJzY3JpYmUoKCkgPT4gdGhpcy5fem9uZS5ydW4oKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmNvbXBvbmVudEJsdXIoKTtcbiAgICAgICAgICAgICAgICB9KSk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICB1bnN1YnNjcmliZUV2ZW50cygpIHtcbiAgICAgICAgaWYgKCFpc0RvY3VtZW50QXZhaWxhYmxlKCkpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLm5hdmlnYXRpb25TdWJzY3JpcHRpb24udW5zdWJzY3JpYmUoKTtcbiAgICAgICAgdGhpcy5vcGVuU3Vic2NyaXB0aW9uLnVuc3Vic2NyaWJlKCk7XG4gICAgICAgIHRoaXMuY2xvc2VTdWJzY3JpcHRpb24udW5zdWJzY3JpYmUoKTtcbiAgICAgICAgdGhpcy5lbnRlclN1YnNjcmlwdGlvbi51bnN1YnNjcmliZSgpO1xuICAgICAgICB0aGlzLmVzY1N1YnNjcmlwdGlvbi51bnN1YnNjcmliZSgpO1xuICAgICAgICB0aGlzLmNvbXBvbmVudEJsdXJyZWRTdWJzY3JpcHRpb24udW5zdWJzY3JpYmUoKTtcbiAgICAgICAgdGhpcy5maWx0ZXJCbHVycmVkU3Vic2NyaXB0aW9uLnVuc3Vic2NyaWJlKCk7XG4gICAgICAgIGlmICh0aGlzLnNlbGVjdGlvblN1YnNjcmlwdGlvbikge1xuICAgICAgICAgICAgdGhpcy5zZWxlY3Rpb25TdWJzY3JpcHRpb24udW5zdWJzY3JpYmUoKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBpdGVtRnJvbUV2ZW50KGV2ZW50KSB7XG4gICAgICAgIGNvbnN0IGluZGV4ID0gZXZlbnQuaW5kaWNlc1swXTtcbiAgICAgICAgbGV0IGRhdGFJdGVtID0gdGhpcy5kYXRhU2VydmljZS5pdGVtQXQoaW5kZXgpO1xuICAgICAgICBkYXRhSXRlbSA9IGlzUHJlc2VudChkYXRhSXRlbSkgPyBkYXRhSXRlbSA6IHRoaXMuY3VycmVudE9yRGVmYXVsdChpbmRleCk7XG4gICAgICAgIGNvbnN0IHZhbHVlID0gdGhpcy5wcm9wKHRoaXMudmFsdWVGaWVsZCwgdGhpcy52YWx1ZVByaW1pdGl2ZSkoZGF0YUl0ZW0pO1xuICAgICAgICBjb25zdCBuZXdTZWxlY3Rpb24gPSBldmVudC5uZXdTZWxlY3Rpb247XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBkYXRhSXRlbSxcbiAgICAgICAgICAgIGluZGV4LFxuICAgICAgICAgICAgbmV3U2VsZWN0aW9uLFxuICAgICAgICAgICAgdmFsdWVcbiAgICAgICAgfTtcbiAgICB9XG4gICAgY3VycmVudE9yRGVmYXVsdChzZWxlY3RlZEluZGV4KSB7XG4gICAgICAgIGNvbnN0IGRlZmF1bHRJdGVtSW5kZXggPSAtMTtcbiAgICAgICAgaWYgKGlzUHJlc2VudCh0aGlzLmRhdGFJdGVtKSAmJiBzZWxlY3RlZEluZGV4ICE9PSBkZWZhdWx0SXRlbUluZGV4KSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5kYXRhSXRlbTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmRlZmF1bHRJdGVtO1xuICAgICAgICB9XG4gICAgfVxuICAgIGZpcnN0Rm9jdXNhYmxlSW5kZXgoaW5kZXgpIHtcbiAgICAgICAgY29uc3QgbWF4SW5kZXggPSB0aGlzLmRhdGFTZXJ2aWNlLml0ZW1zQ291bnQgLSAxO1xuICAgICAgICBpZiAodGhpcy5kaXNhYmxlZEl0ZW1zU2VydmljZS5pc0luZGV4RGlzYWJsZWQoaW5kZXgpKSB7XG4gICAgICAgICAgICByZXR1cm4gKGluZGV4IDwgbWF4SW5kZXgpID8gdGhpcy5maXJzdEZvY3VzYWJsZUluZGV4KGluZGV4ICsgMSkgOiB1bmRlZmluZWQ7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gaW5kZXg7XG4gICAgICAgIH1cbiAgICB9XG4gICAgaGFuZGxlRW50ZXIoKSB7XG4gICAgICAgIGlmICh0aGlzLmlzT3Blbikge1xuICAgICAgICAgICAgdGhpcy5zZWxlY3Rpb25TZXJ2aWNlLmNoYW5nZSh0aGlzLnNlbGVjdGlvblNlcnZpY2UuZm9jdXNlZCk7XG4gICAgICAgICAgICB0aGlzLmZvY3VzKCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aGlzLnRvZ2dsZVBvcHVwKHRydWUpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGhhbmRsZUVzY2FwZSgpIHtcbiAgICAgICAgaWYgKGlzUHJlc2VudCh0aGlzLnNlbGVjdGlvblNlcnZpY2Uuc2VsZWN0ZWRbMF0pKSB7XG4gICAgICAgICAgICB0aGlzLnNlbGVjdGlvblNlcnZpY2UuY2hhbmdlKHRoaXMuc2VsZWN0aW9uU2VydmljZS5zZWxlY3RlZFswXSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aGlzLnRvZ2dsZVBvcHVwKGZhbHNlKTtcbiAgICAgICAgICAgIHRoaXMuY2xlYXJGaWx0ZXIoKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmZvY3VzKCk7XG4gICAgfVxuICAgIGNsZWFyRmlsdGVyKCkge1xuICAgICAgICBpZiAoISh0aGlzLmZpbHRlcmFibGUgJiYgdGhpcy5maWx0ZXJUZXh0KSkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuZmlsdGVyVGV4dCA9IFwiXCI7XG4gICAgICAgIHRoaXMuY2RyLm1hcmtGb3JDaGVjaygpO1xuICAgICAgICB0aGlzLmZpbHRlckNoYW5nZS5lbWl0KHRoaXMuZmlsdGVyVGV4dCk7XG4gICAgfVxuICAgIHZlcmlmeVNldHRpbmdzKG5ld1ZhbHVlKSB7XG4gICAgICAgIGNvbnN0IHZhbHVlT3JUZXh0ID0gIWlzUHJlc2VudCh0aGlzLnZhbHVlRmllbGQpICE9PSAhaXNQcmVzZW50KHRoaXMudGV4dEZpZWxkKTtcbiAgICAgICAgaWYgKCFpc0Rldk1vZGUoKSkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLmRlZmF1bHRJdGVtICYmIHRoaXMudmFsdWVGaWVsZCAmJiB0eXBlb2YgdGhpcy5kZWZhdWx0SXRlbSAhPT0gXCJvYmplY3RcIikge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKERyb3BEb3duTGlzdE1lc3NhZ2VzLmRlZmF1bHRJdGVtKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy52YWx1ZVByaW1pdGl2ZSA9PT0gdHJ1ZSAmJiBpc1ByZXNlbnQobmV3VmFsdWUpICYmIHR5cGVvZiBuZXdWYWx1ZSA9PT0gXCJvYmplY3RcIikge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKERyb3BEb3duTGlzdE1lc3NhZ2VzLnByaW1pdGl2ZSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMudmFsdWVQcmltaXRpdmUgPT09IGZhbHNlICYmIGlzUHJlc2VudChuZXdWYWx1ZSkgJiYgdHlwZW9mIG5ld1ZhbHVlICE9PSBcIm9iamVjdFwiKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoRHJvcERvd25MaXN0TWVzc2FnZXMub2JqZWN0KTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodmFsdWVPclRleHQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihEcm9wRG93bkxpc3RNZXNzYWdlcy50ZXh0QW5kVmFsdWUpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGNvbXBvbmVudEJsdXIoKSB7XG4gICAgICAgIHRoaXMuaXNGb2N1c2VkID0gZmFsc2U7XG4gICAgICAgIGlmIChpc1ByZXNlbnQodGhpcy5zZWxlY3Rpb25TZXJ2aWNlLnNlbGVjdGVkWzBdKSkge1xuICAgICAgICAgICAgdGhpcy5zZWxlY3Rpb25TZXJ2aWNlLmNoYW5nZSh0aGlzLnNlbGVjdGlvblNlcnZpY2Uuc2VsZWN0ZWRbMF0pO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhpcy50b2dnbGVQb3B1cChmYWxzZSk7XG4gICAgICAgICAgICB0aGlzLmNsZWFyRmlsdGVyKCk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5vbkJsdXIuZW1pdCgpO1xuICAgICAgICB0aGlzLm9uVG91Y2hlZENhbGxiYWNrKCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEBoaWRkZW5cbiAgICAgKi9cbiAgICBvbk1vdXNlRG93bihldmVudCkge1xuICAgICAgICBjb25zdCB0YWdOYW1lID0gZXZlbnQudGFyZ2V0LnRhZ05hbWUudG9Mb3dlckNhc2UoKTtcbiAgICAgICAgaWYgKHRhZ05hbWUgIT09IFwiaW5wdXRcIikge1xuICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBvbktleVByZXNzKGV2ZW50KSB7XG4gICAgICAgIGlmIChldmVudC53aGljaCA9PT0gMCB8fCBldmVudC5rZXlDb2RlID09PSBLZXlzLmVudGVyKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgbGV0IGNoYXJhY3RlciA9IFN0cmluZy5mcm9tQ2hhckNvZGUoZXZlbnQuY2hhckNvZGUgfHwgZXZlbnQua2V5Q29kZSk7XG4gICAgICAgIGlmICh0aGlzLmlnbm9yZUNhc2UpIHtcbiAgICAgICAgICAgIGNoYXJhY3RlciA9IGNoYXJhY3Rlci50b0xvd2VyQ2FzZSgpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChjaGFyYWN0ZXIgPT09IFwiIFwiKSB7XG4gICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMud29yZCArPSBjaGFyYWN0ZXI7XG4gICAgICAgIHRoaXMubGFzdCA9IGNoYXJhY3RlcjtcbiAgICAgICAgdGhpcy5zZWFyY2goKTtcbiAgICB9XG4gICAgc2VhcmNoKCkge1xuICAgICAgICBjbGVhclRpbWVvdXQodGhpcy50eXBpbmdUaW1lb3V0KTtcbiAgICAgICAgaWYgKCF0aGlzLmZpbHRlcmFibGUpIHtcbiAgICAgICAgICAgIHRoaXMudHlwaW5nVGltZW91dCA9IHNldFRpbWVvdXQoKCkgPT4geyB0aGlzLndvcmQgPSBcIlwiOyB9LCB0aGlzLmRlbGF5KTtcbiAgICAgICAgICAgIHRoaXMuc2VsZWN0TmV4dCgpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHNlbGVjdE5leHQoKSB7XG4gICAgICAgIGxldCBkYXRhID0gdGhpcy5kYXRhU2VydmljZVxuICAgICAgICAgICAgLmZpbHRlcigoaXRlbSkgPT4gaXNQcmVzZW50KGl0ZW0pICYmICFpdGVtLmhlYWRlciAmJiAhdGhpcy5kaXNhYmxlZEl0ZW1zU2VydmljZS5pc0l0ZW1EaXNhYmxlZChpdGVtKSlcbiAgICAgICAgICAgIC5tYXAoKGl0ZW0pID0+IHtcbiAgICAgICAgICAgIGlmICh0aGlzLmRhdGFTZXJ2aWNlLmdyb3VwZWQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4geyBpdGVtOiBpdGVtLnZhbHVlLCBpdGVtSW5kZXg6IGl0ZW0ub2Zmc2V0SW5kZXggfTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB7IGl0ZW06IGl0ZW0sIGl0ZW1JbmRleDogdGhpcy5kYXRhU2VydmljZS5pbmRleE9mKGl0ZW0pIH07XG4gICAgICAgIH0pO1xuICAgICAgICBjb25zdCBpc0luTG9vcCA9IHNhbWVDaGFyc09ubHkodGhpcy53b3JkLCB0aGlzLmxhc3QpO1xuICAgICAgICBsZXQgZGF0YUxlbmd0aCA9IGRhdGEubGVuZ3RoO1xuICAgICAgICBsZXQgaGFzU2VsZWN0ZWQgPSAhaXNOYU4odGhpcy5zZWxlY3Rpb25TZXJ2aWNlLnNlbGVjdGVkWzBdKTtcbiAgICAgICAgbGV0IHN0YXJ0SW5kZXggPSAhaGFzU2VsZWN0ZWQgPyAwIDogdGhpcy5zZWxlY3Rpb25TZXJ2aWNlLnNlbGVjdGVkWzBdO1xuICAgICAgICBsZXQgdGV4dCwgaW5kZXgsIGRlZmF1bHRJdGVtO1xuICAgICAgICBpZiAodGhpcy5kZWZhdWx0SXRlbSAmJiAhdGhpcy5kaXNhYmxlZEl0ZW1zU2VydmljZS5pc0l0ZW1EaXNhYmxlZCh0aGlzLmRlZmF1bHRJdGVtKSkge1xuICAgICAgICAgICAgZGVmYXVsdEl0ZW0gPSB7IGl0ZW06IHRoaXMuZGVmYXVsdEl0ZW0sIGl0ZW1JbmRleDogLTEgfTtcbiAgICAgICAgICAgIGRhdGFMZW5ndGggKz0gMTtcbiAgICAgICAgICAgIHN0YXJ0SW5kZXggKz0gMTtcbiAgICAgICAgfVxuICAgICAgICBzdGFydEluZGV4ICs9IGlzSW5Mb29wICYmIGhhc1NlbGVjdGVkID8gMSA6IDA7XG4gICAgICAgIGRhdGEgPSBzaHVmZmxlRGF0YShkYXRhLCBzdGFydEluZGV4LCBkZWZhdWx0SXRlbSk7XG4gICAgICAgIGluZGV4ID0gMDtcbiAgICAgICAgZm9yICg7IGluZGV4IDwgZGF0YUxlbmd0aDsgaW5kZXgrKykge1xuICAgICAgICAgICAgdGV4dCA9IGdldHRlcihkYXRhW2luZGV4XS5pdGVtLCB0aGlzLnRleHRGaWVsZCk7XG4gICAgICAgICAgICBjb25zdCBsb29wTWF0Y2ggPSBCb29sZWFuKGlzSW5Mb29wICYmIG1hdGNoVGV4dCh0ZXh0LCB0aGlzLmxhc3QsIHRoaXMuaWdub3JlQ2FzZSkpO1xuICAgICAgICAgICAgY29uc3QgbmV4dE1hdGNoID0gQm9vbGVhbihtYXRjaFRleHQodGV4dCwgdGhpcy53b3JkLCB0aGlzLmlnbm9yZUNhc2UpKTtcbiAgICAgICAgICAgIGlmIChsb29wTWF0Y2ggfHwgbmV4dE1hdGNoKSB7XG4gICAgICAgICAgICAgICAgaW5kZXggPSBkYXRhW2luZGV4XS5pdGVtSW5kZXg7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGluZGV4ICE9PSBkYXRhTGVuZ3RoKSB7XG4gICAgICAgICAgICB0aGlzLm5hdmlnYXRlKGluZGV4KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBlbWl0Q2hhbmdlKHZhbHVlKSB7XG4gICAgICAgIHRoaXMub25DaGFuZ2VDYWxsYmFjayh2YWx1ZSk7XG4gICAgICAgIHRoaXMudmFsdWVDaGFuZ2UuZW1pdCh2YWx1ZSk7XG4gICAgfVxuICAgIG5hdmlnYXRlKGluZGV4KSB7XG4gICAgICAgIHRoaXMuc2VsZWN0aW9uU2VydmljZS5zZWxlY3QoaW5kZXgpO1xuICAgIH1cbiAgICBwcm9wKGZpZWxkLCB1c2VQcmltaXRpdmUpIHtcbiAgICAgICAgcmV0dXJuIChkYXRhSXRlbSkgPT4ge1xuICAgICAgICAgICAgaWYgKGlzUHJlc2VudChkYXRhSXRlbSkpIHtcbiAgICAgICAgICAgICAgICBpZiAodXNlUHJpbWl0aXZlKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmaWVsZCAmJiBpc09iamVjdChkYXRhSXRlbSkgPyBkYXRhSXRlbVtmaWVsZF0gOiBkYXRhSXRlbTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBkYXRhSXRlbVtmaWVsZF07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH07XG4gICAgfVxuICAgIGZpbmREYXRhSXRlbSh7IHByaW1pdGl2ZSwgdmFsdWVGaWVsZCwgdmFsdWUgfSkge1xuICAgICAgICBjb25zdCByZXN1bHQgPSB7XG4gICAgICAgICAgICBkYXRhSXRlbTogbnVsbCxcbiAgICAgICAgICAgIGluZGV4OiAtMVxuICAgICAgICB9O1xuICAgICAgICBjb25zdCBwcm9wID0gdGhpcy5wcm9wKHZhbHVlRmllbGQsIHByaW1pdGl2ZSk7XG4gICAgICAgIGxldCBjb21wYXJlcjtcbiAgICAgICAgaWYgKHRoaXMuZGF0YVNlcnZpY2UuZ3JvdXBlZCkge1xuICAgICAgICAgICAgY29tcGFyZXIgPSAoZWxlbWVudCkgPT4ge1xuICAgICAgICAgICAgICAgIHJldHVybiBwcm9wKGVsZW1lbnQudmFsdWUpID09PSBwcm9wKHZhbHVlKTtcbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBjb21wYXJlciA9IChlbGVtZW50KSA9PiB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHByb3AoZWxlbWVudCkgPT09IHByb3AodmFsdWUpO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBpbmRleCA9IHRoaXMuZGF0YVNlcnZpY2UuZmluZEluZGV4KGNvbXBhcmVyKTtcbiAgICAgICAgcmVzdWx0LmRhdGFJdGVtID0gdGhpcy5kYXRhU2VydmljZS5pdGVtQXQoaW5kZXgpO1xuICAgICAgICByZXN1bHQuaW5kZXggPSBpbmRleDtcbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9XG4gICAgc2V0U3RhdGUoKSB7XG4gICAgICAgIGNvbnN0IHZhbHVlID0gdGhpcy52YWx1ZTtcbiAgICAgICAgY29uc3QgdmFsdWVGaWVsZCA9IHRoaXMudmFsdWVGaWVsZDtcbiAgICAgICAgY29uc3QgdGV4dEZpZWxkID0gdGhpcy50ZXh0RmllbGQ7XG4gICAgICAgIGNvbnN0IHByaW1pdGl2ZSA9IHRoaXMudmFsdWVQcmltaXRpdmU7XG4gICAgICAgIGlmICh0aGlzLmRlZmF1bHRJdGVtKSB7XG4gICAgICAgICAgICBjb25zdCBkZWZhdWx0VmFsdWUgPSB0aGlzLnByb3AodmFsdWVGaWVsZCwgcHJpbWl0aXZlKSh0aGlzLmRlZmF1bHRJdGVtKTtcbiAgICAgICAgICAgIGNvbnN0IGN1cnJlbnRWYWx1ZSA9IHRoaXMucHJvcCh2YWx1ZUZpZWxkLCBwcmltaXRpdmUpKHZhbHVlKTtcbiAgICAgICAgICAgIGlmICghaXNQcmVzZW50KHZhbHVlKSB8fCAoY3VycmVudFZhbHVlID09PSBkZWZhdWx0VmFsdWUpKSB7XG4gICAgICAgICAgICAgICAgdGhpcy51cGRhdGVTdGF0ZSh7IGRhdGFJdGVtOiB0aGlzLmRlZmF1bHRJdGVtLCBjb25maXJtOiB0cnVlIH0pO1xuICAgICAgICAgICAgICAgIHRoaXMucmVzZXRTZWxlY3Rpb24oLTEpO1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLmZpbHRlcmFibGUgJiYgdGhpcy5maWx0ZXJUZXh0ICYmIHRoaXMuZGF0YVNlcnZpY2UuaXRlbXNDb3VudCkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdGlvblNlcnZpY2UuZm9jdXNlZCA9IHRoaXMuZmlyc3RGb2N1c2FibGVJbmRleCgwKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHJlc29sdmVkID0gdGhpcy5maW5kRGF0YUl0ZW0oeyBwcmltaXRpdmUsIHZhbHVlRmllbGQsIHZhbHVlIH0pO1xuICAgICAgICAvLyBUaGUgZGF0YSBhbmQgdmFsdWUgYXJlIG9mIHNhbWUgc2hhcGUsXG4gICAgICAgIC8vIGZvciBleGFtcGxlLCB2YWx1ZTogJ2ZvbycsIGRhdGE6IFsnZm9vJywgJ2JhciddXG4gICAgICAgIC8vIG9yIHZhbHVlOiB7IHZhbHVlOiAxLCB0ZXh0OiAnZm9vJyB9LCBkYXRhOiBbeyB2YWx1ZTogMSwgdGV4dDogJ2ZvbycgfV0uXG4gICAgICAgIGNvbnN0IG9mU2FtZVR5cGUgPSAhKHByaW1pdGl2ZSAmJiB0ZXh0RmllbGQpO1xuICAgICAgICBpZiAocmVzb2x2ZWQuZGF0YUl0ZW0pIHtcbiAgICAgICAgICAgIHRoaXMudXBkYXRlU3RhdGUoeyBkYXRhSXRlbTogcmVzb2x2ZWQuZGF0YUl0ZW0sIGNvbmZpcm06IHRydWUgfSk7XG4gICAgICAgICAgICB0aGlzLnJlc2V0U2VsZWN0aW9uKHJlc29sdmVkLmluZGV4KTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChpc1ByZXNlbnQodmFsdWUpICYmIG9mU2FtZVR5cGUpIHtcbiAgICAgICAgICAgIHRoaXMudXBkYXRlU3RhdGUoeyBkYXRhSXRlbTogdmFsdWUgfSk7XG4gICAgICAgICAgICB0aGlzLnJlc2V0U2VsZWN0aW9uKCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAodGhpcy5fcHJldmlvdXNEYXRhSXRlbSkge1xuICAgICAgICAgICAgdGhpcy51cGRhdGVTdGF0ZSh7IGRhdGFJdGVtOiB0aGlzLl9wcmV2aW91c0RhdGFJdGVtIH0pO1xuICAgICAgICAgICAgdGhpcy5yZXNldFNlbGVjdGlvbigpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5jbGVhclN0YXRlKCk7XG4gICAgICAgICAgICB0aGlzLnJlc2V0U2VsZWN0aW9uKCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogQGhpZGRlblxuICAgICAqL1xuICAgIGhhbmRsZUZpbHRlcihldmVudCkge1xuICAgICAgICB0aGlzLmZpbHRlckNoYW5nZS5lbWl0KGV2ZW50LnRhcmdldC52YWx1ZSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEBoaWRkZW5cbiAgICAgKi9cbiAgICBwYWdlQ2hhbmdlKGV2ZW50KSB7XG4gICAgICAgIGNvbnN0IHZpcnR1YWwgPSB0aGlzLnZpcnR1YWw7XG4gICAgICAgIHZpcnR1YWwuc2tpcCA9IGV2ZW50LnNraXA7XG4gICAgfVxuICAgIHNldE1lc3NhZ2VzKCkge1xuICAgICAgICB0aGlzLl96b25lLnJ1bk91dHNpZGVBbmd1bGFyKCgpID0+IHtcbiAgICAgICAgICAgIGNsZWFyVGltZW91dCh0aGlzLm1lc3NhZ2VzVGltZW91dCk7XG4gICAgICAgICAgICB0aGlzLm1lc3NhZ2VzVGltZW91dCA9IHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMubm9EYXRhVGV4dCA9IHRoaXMubG9jYWxpemF0aW9uLmdldCgnbm9EYXRhVGV4dCcpO1xuICAgICAgICAgICAgICAgIHRoaXMuY2RyLmRldGVjdENoYW5nZXMoKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgYXNzaWduQXJpYURlc2NyaWJlZEJ5KCkge1xuICAgICAgICBjb25zdCBjdXJyZW50VmFsdWUgPSB0aGlzLndyYXBwZXIubmF0aXZlRWxlbWVudC5nZXRBdHRyaWJ1dGUoJ2FyaWEtZGVzY3JpYmVkYnknKSB8fCAnJztcbiAgICAgICAgY29uc3QgdHJpbW1lZCA9IGN1cnJlbnRWYWx1ZS5yZXBsYWNlKHRoaXMudmFsdWVMYWJlbElkLCAnJykudHJpbSgpO1xuICAgICAgICAvLyByZXNldCB0aGUgdmFsdWUgbGFiZWwgSUQgdG8gZm9yY2UgcmVhZGVycyB0byByZWFkIHRoZSBuZXcgdmFsdWVcbiAgICAgICAgdGhpcy52YWx1ZUxhYmVsSWQgPSBndWlkKCk7XG4gICAgICAgIC8vIGFkZCB0byB0aGUgY3VycmVudCB2YWx1ZSAtIGRvbid0IHJlcGxhY2UgaXRcbiAgICAgICAgY29uc3QgbmV3VmFsdWUgPSBgJHt0aGlzLnZhbHVlTGFiZWxJZH0gJHt0cmltbWVkfWAudHJpbSgpO1xuICAgICAgICB0aGlzLnJlbmRlcmVyLnNldEF0dHJpYnV0ZSh0aGlzLndyYXBwZXIubmF0aXZlRWxlbWVudCwgJ2FyaWEtZGVzY3JpYmVkYnknLCBuZXdWYWx1ZSk7XG4gICAgfVxufVxuRHJvcERvd25MaXN0Q29tcG9uZW50LmRlY29yYXRvcnMgPSBbXG4gICAgeyB0eXBlOiBDb21wb25lbnQsIGFyZ3M6IFt7XG4gICAgICAgICAgICAgICAgZXhwb3J0QXM6ICdrZW5kb0Ryb3BEb3duTGlzdCcsXG4gICAgICAgICAgICAgICAgcHJvdmlkZXJzOiBbXG4gICAgICAgICAgICAgICAgICAgIERST1BET1dOTElTVF9WQUxVRV9BQ0NFU1NPUixcbiAgICAgICAgICAgICAgICAgICAgRGF0YVNlcnZpY2UsXG4gICAgICAgICAgICAgICAgICAgIFNlbGVjdGlvblNlcnZpY2UsXG4gICAgICAgICAgICAgICAgICAgIE5hdmlnYXRpb25TZXJ2aWNlLFxuICAgICAgICAgICAgICAgICAgICBEaXNhYmxlZEl0ZW1zU2VydmljZSxcbiAgICAgICAgICAgICAgICAgICAgTG9jYWxpemF0aW9uU2VydmljZSxcbiAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgcHJvdmlkZTogTDEwTl9QUkVGSVgsXG4gICAgICAgICAgICAgICAgICAgICAgICB1c2VWYWx1ZTogJ2tlbmRvLmRyb3Bkb3dubGlzdCdcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgcHJvdmlkZTogRmlsdGVyYWJsZURyb3BEb3duQ29tcG9uZW50QmFzZSwgdXNlRXhpc3Rpbmc6IGZvcndhcmRSZWYoKCkgPT4gRHJvcERvd25MaXN0Q29tcG9uZW50KVxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICBwcm92aWRlOiBLZW5kb0lucHV0LCB1c2VFeGlzdGluZzogZm9yd2FyZFJlZigoKSA9PiBEcm9wRG93bkxpc3RDb21wb25lbnQpXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBdLFxuICAgICAgICAgICAgICAgIHNlbGVjdG9yOiAna2VuZG8tZHJvcGRvd25saXN0JyxcbiAgICAgICAgICAgICAgICB0ZW1wbGF0ZTogYFxuICAgICAgICA8bmctY29udGFpbmVyIGtlbmRvRHJvcERvd25MaXN0TG9jYWxpemVkTWVzc2FnZXNcbiAgICAgICAgICAgIGkxOG4tbm9EYXRhVGV4dD1cImtlbmRvLmRyb3Bkb3dubGlzdC5ub0RhdGFUZXh0fFRoZSB0ZXh0IGRpc3BsYXllZCBpbiB0aGUgcG9wdXAgd2hlbiB0aGVyZSBhcmUgbm8gaXRlbXNcIlxuICAgICAgICAgICAgbm9EYXRhVGV4dD1cIk5PIERBVEEgRk9VTkRcIlxuICAgICAgICA+XG4gICAgICAgIDwvbmctY29udGFpbmVyPlxuICAgICAgICA8c3BhbiAjd3JhcHBlciB1bnNlbGVjdGFibGU9XCJvblwiXG4gICAgICAgICAgcm9sZT1cImxpc3Rib3hcIlxuICAgICAgICAgIFtpZF09XCJmb2N1c2FibGVJZFwiXG4gICAgICAgICAgW25nQ2xhc3NdPVwie1xuICAgICAgICAgICAgJ2stZHJvcGRvd24td3JhcCc6IHRydWUsXG4gICAgICAgICAgICAnay1zdGF0ZS1kZWZhdWx0JzogIXRoaXMuZGlzYWJsZWQsXG4gICAgICAgICAgICAnay1zdGF0ZS1kaXNhYmxlZCc6IHRoaXMuZGlzYWJsZWQsXG4gICAgICAgICAgICAnay1zdGF0ZS1mb2N1c2VkJzogdGhpcy5pc0ZvY3VzZWRcbiAgICAgICAgICB9XCJcbiAgICAgICAgICBbYXR0ci5kaXJdPVwiZGlyZWN0aW9uXCJcbiAgICAgICAgICBbYXR0ci5yZWFkb25seV09XCJyZWFkb25seVwiXG4gICAgICAgICAgW2F0dHIudGFiaW5kZXhdPVwid2lkZ2V0VGFiSW5kZXhcIlxuICAgICAgICAgIFthdHRyLmFyaWEtZGlzYWJsZWRdPVwiZGlzYWJsZWRcIlxuICAgICAgICAgIFthdHRyLmFyaWEtcmVhZG9ubHldPVwicmVhZG9ubHlcIlxuICAgICAgICAgIGFyaWEtaGFzcG9wdXA9XCJsaXN0Ym94XCJcbiAgICAgICAgICBbYXR0ci5hcmlhLWV4cGFuZGVkXT1cImFyaWFFeHBhbmRlZFwiXG4gICAgICAgICAgW2F0dHIuYXJpYS1vd25zXT1cImFyaWFPd25zXCJcbiAgICAgICAgICBbYXR0ci5hcmlhLWFjdGl2ZWRlc2NlbmRhbnRdPVwiYXJpYUFjdGl2ZWRlc2NlbmRhbnRcIlxuICAgICAgICAgIFthdHRyLmFyaWEtbGFiZWxdPVwibm9EYXRhTGFiZWxcIlxuICAgICAgICAgIChmb2N1cyk9XCJmb2N1c0NvbXBvbmVudCgpXCJcbiAgICAgICAgICAoYmx1cik9XCJibHVyQ29tcG9uZW50KClcIlxuICAgICAgICAgIChrZXlkb3duKT1cImtleWRvd24oJGV2ZW50KVwiXG4gICAgICAgICAgKGtleXByZXNzKT1cImtleXByZXNzKCRldmVudClcIlxuICAgICAgICAgIChjbGljayk9XCJjbGljaygpXCJcbiAgICAgICAgPlxuICAgICAgICAgICAgPHNwYW4gY2xhc3M9XCJrLWlucHV0XCIgdW5zZWxlY3RhYmxlPVwib25cIiBbaWRdPVwidmFsdWVMYWJlbElkXCI+XG4gICAgICAgICAgICAgICA8bmctdGVtcGxhdGUgKm5nSWY9XCJ2YWx1ZVRlbXBsYXRlXCJcbiAgICAgICAgICAgICAgICAgICBbdGVtcGxhdGVDb250ZXh0XT1cIntcbiAgICAgICAgICAgICAgICAgICAgICAgdGVtcGxhdGVSZWY6IHZhbHVlVGVtcGxhdGUudGVtcGxhdGVSZWYsXG4gICAgICAgICAgICAgICAgICAgICAgICRpbXBsaWNpdDogZGF0YUl0ZW1cbiAgICAgICAgICAgICAgICAgICB9XCI+XG4gICAgICAgICAgICAgICA8L25nLXRlbXBsYXRlPlxuICAgICAgICAgICAgICAgPG5nLXRlbXBsYXRlIFtuZ0lmXT1cIiF2YWx1ZVRlbXBsYXRlXCI+e3sgZ2V0VGV4dCgpIH19PC9uZy10ZW1wbGF0ZT5cbiAgICAgICAgICAgPC9zcGFuPlxuICAgICAgICAgICA8c3BhbiBjbGFzcz1cImstc2VsZWN0XCIgdW5zZWxlY3RhYmxlPVwib25cIj5cbiAgICAgICAgICAgICAgIDxzcGFuXG4gICAgICAgICAgICAgICAgICAgIGNsYXNzPVwiay1pY29uXCJcbiAgICAgICAgICAgICAgICAgICAgdW5zZWxlY3RhYmxlPVwib25cIlxuICAgICAgICAgICAgICAgICAgICBbbmdDbGFzc109XCJidXR0b25DbGFzc2VzXCJcbiAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgPC9zcGFuPlxuICAgICAgICAgICA8L3NwYW4+XG4gICAgICAgICAgIDxuZy10ZW1wbGF0ZSAjcG9wdXBUZW1wbGF0ZT5cbiAgICAgICAgICAgICAgIDwhLS1maWx0ZXJhYmxlLS0+XG5cbiAgICAgICAgICAgICAgIDxuZy10ZW1wbGF0ZSBbbmdJZl09XCJmaWx0ZXJhYmxlXCI+XG4gICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9XCJrLWxpc3QtZmlsdGVyXCIgKGNsaWNrKT1cIiRldmVudC5zdG9wSW1tZWRpYXRlUHJvcGFnYXRpb24oKVwiPlxuICAgICAgICAgICAgICAgICAgICAgICA8aW5wdXRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgIFthdHRyLmFyaWEtb3duc109XCJhcmlhT3duc1wiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICBbYXR0ci5hcmlhLWFjdGl2ZWRlc2NlbmRhbnRdPVwiYXJpYUFjdGl2ZWRlc2NlbmRhbnRcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgW2F0dHIuYXJpYS1sYWJlbF09XCJub0RhdGFMYWJlbFwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICB0YWJpbmRleD1cIi0xXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgIFtmaWx0ZXJJbnB1dF09XCJpc0ZvY3VzZWQgJiYgIXRvdWNoRW5hYmxlZFwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICBbZGlyXT1cImRpcmVjdGlvblwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICBbKG5nTW9kZWwpXT1cImZpbHRlclRleHRcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3M9XCJrLXRleHRib3hcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgKGtleWRvd24pPVwia2V5ZG93bigkZXZlbnQpXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgIChpbnB1dCk9XCJoYW5kbGVGaWx0ZXIoJGV2ZW50KVwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAoZm9jdXMpPVwib25GaWx0ZXJGb2N1cygpXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgIChibHVyKT1cImJsdXJGaWx0ZXJJbnB1dCgpXCIgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9XCJrLWljb24gay1pLXNlYXJjaFwiIHVuc2VsZWN0YWJsZT1cIm9uXCI+PC9zcGFuPlxuICAgICAgICAgICAgICAgICAgIDwvc3Bhbj5cbiAgICAgICAgICAgICAgIDwvbmctdGVtcGxhdGU+XG4gICAgICAgICAgICAgICA8IS0tZGVmYXVsdCBpdGVtLS0+XG4gICAgICAgICAgICAgICA8bmctdGVtcGxhdGUgW25nSWZdPVwiZGVmYXVsdEl0ZW0gJiYgIWl0ZW1UZW1wbGF0ZVwiPlxuICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJrLWxpc3Qtb3B0aW9ubGFiZWxcIiBbbmdDbGFzc109XCJ7ICdrLXN0YXRlLWRpc2FibGVkJzogaXNEaXNhYmxlZERlZmF1bHRJdGVtIH1cIiBrZW5kb0Ryb3BEb3duc1NlbGVjdGFibGUgW2luZGV4XT1cIi0xXCI+XG4gICAgICAgICAgICAgICAgICAgICAgIHt7IGdldERlZmF1bHRJdGVtVGV4dCgpIH19XG4gICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICA8L25nLXRlbXBsYXRlPlxuICAgICAgICAgICAgICAgPG5nLXRlbXBsYXRlIFtuZ0lmXT1cImRlZmF1bHRJdGVtICYmIGl0ZW1UZW1wbGF0ZVwiPlxuICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJrLWxpc3Qtb3B0aW9ubGFiZWxcIiBbbmdDbGFzc109XCJ7ICdrLXN0YXRlLWRpc2FibGVkJzogaXNEaXNhYmxlZERlZmF1bHRJdGVtIH1cIiBrZW5kb0Ryb3BEb3duc1NlbGVjdGFibGUgW2luZGV4XT1cIi0xXCI+XG4gICAgICAgICAgICAgICAgICAgICAgIDxuZy10ZW1wbGF0ZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgW3RlbXBsYXRlQ29udGV4dF09XCJ7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVtcGxhdGVSZWY6IGl0ZW1UZW1wbGF0ZS50ZW1wbGF0ZVJlZixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkaW1wbGljaXQ6IGRlZmF1bHRJdGVtXG4gICAgICAgICAgICAgICAgICAgICAgICAgICB9XCI+XG4gICAgICAgICAgICAgICAgICAgICAgIDwvbmctdGVtcGxhdGU+XG4gICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICA8L25nLXRlbXBsYXRlPlxuICAgICAgICAgICAgICAgPCEtLWhlYWRlciB0ZW1wbGF0ZS0tPlxuICAgICAgICAgICAgICAgPG5nLXRlbXBsYXRlICpuZ0lmPVwiaGVhZGVyVGVtcGxhdGVcIlxuICAgICAgICAgICAgICAgICAgIFt0ZW1wbGF0ZUNvbnRleHRdPVwie1xuICAgICAgICAgICAgICAgICAgICAgICB0ZW1wbGF0ZVJlZjogaGVhZGVyVGVtcGxhdGUudGVtcGxhdGVSZWZcbiAgICAgICAgICAgICAgICAgICB9XCI+XG4gICAgICAgICAgICAgICA8L25nLXRlbXBsYXRlPlxuICAgICAgICAgICAgICAgPCEtLWxpc3QtLT5cbiAgICAgICAgICAgICAgIDxrZW5kby1saXN0XG4gICAgICAgICAgICAgICAgICAgI29wdGlvbnNMaXN0XG4gICAgICAgICAgICAgICAgICAgW2lkXT1cImxpc3RCb3hJZFwiXG4gICAgICAgICAgICAgICAgICAgW29wdGlvblByZWZpeF09XCJvcHRpb25QcmVmaXhcIlxuICAgICAgICAgICAgICAgICAgIFtkYXRhXT1cImRhdGFcIlxuICAgICAgICAgICAgICAgICAgIFt0ZXh0RmllbGRdPVwidGV4dEZpZWxkXCJcbiAgICAgICAgICAgICAgICAgICBbdmFsdWVGaWVsZF09XCJ2YWx1ZUZpZWxkXCJcbiAgICAgICAgICAgICAgICAgICBbdGVtcGxhdGVdPVwiaXRlbVRlbXBsYXRlXCJcbiAgICAgICAgICAgICAgICAgICBbZ3JvdXBUZW1wbGF0ZV09XCJncm91cFRlbXBsYXRlXCJcbiAgICAgICAgICAgICAgICAgICBbZml4ZWRHcm91cFRlbXBsYXRlXT1cImZpeGVkR3JvdXBUZW1wbGF0ZVwiXG4gICAgICAgICAgICAgICAgICAgW2hlaWdodF09XCJsaXN0SGVpZ2h0XCJcbiAgICAgICAgICAgICAgICAgICBbc2hvd109XCJpc09wZW5cIlxuICAgICAgICAgICAgICAgICAgIFt2aXJ0dWFsXT1cInZpcnR1YWxcIlxuICAgICAgICAgICAgICAgICAgIChwYWdlQ2hhbmdlKT1cInBhZ2VDaGFuZ2UoJGV2ZW50KVwiXG4gICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgPC9rZW5kby1saXN0PlxuICAgICAgICAgICAgICAgPCEtLW5vLWRhdGEgdGVtcGxhdGUtLT5cbiAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJrLW5vZGF0YVwiICpuZ0lmPVwiZGF0YS5sZW5ndGggPT09IDBcIj5cbiAgICAgICAgICAgICAgICAgICA8bmctdGVtcGxhdGUgW25nSWZdPVwibm9EYXRhVGVtcGxhdGVcIlxuICAgICAgICAgICAgICAgICAgICAgICBbdGVtcGxhdGVDb250ZXh0XT1cIntcbiAgICAgICAgICAgICAgICAgICAgICAgICAgIHRlbXBsYXRlUmVmOiBub0RhdGFUZW1wbGF0ZSA/IG5vRGF0YVRlbXBsYXRlLnRlbXBsYXRlUmVmIDogdW5kZWZpbmVkXG4gICAgICAgICAgICAgICAgICAgICAgIH1cIj5cbiAgICAgICAgICAgICAgICAgICA8L25nLXRlbXBsYXRlPlxuICAgICAgICAgICAgICAgICAgIDxuZy10ZW1wbGF0ZSBbbmdJZl09XCIhbm9EYXRhVGVtcGxhdGVcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgPGRpdj57eyBub0RhdGFUZXh0IH19PC9kaXY+XG4gICAgICAgICAgICAgICAgICAgPC9uZy10ZW1wbGF0ZT5cbiAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgPCEtLWZvb3RlciB0ZW1wbGF0ZS0tPlxuICAgICAgICAgICAgICAgPG5nLXRlbXBsYXRlICpuZ0lmPVwiZm9vdGVyVGVtcGxhdGVcIlxuICAgICAgICAgICAgICAgICAgIFt0ZW1wbGF0ZUNvbnRleHRdPVwie1xuICAgICAgICAgICAgICAgICAgICAgICB0ZW1wbGF0ZVJlZjogZm9vdGVyVGVtcGxhdGUudGVtcGxhdGVSZWZcbiAgICAgICAgICAgICAgICAgICB9XCI+XG4gICAgICAgICAgICAgICA8L25nLXRlbXBsYXRlPlxuICAgICAgICAgICAgPC9uZy10ZW1wbGF0ZT5cbiAgICAgICAgPC9zcGFuPlxuICAgICAgICA8bmctdGVtcGxhdGUgW25nSWZdPVwiaXNPcGVuXCI+XG4gICAgICAgICAgICA8a2VuZG8tcmVzaXplLXNlbnNvciAocmVzaXplKT1cIm9uUmVzaXplKClcIj48L2tlbmRvLXJlc2l6ZS1zZW5zb3I+XG4gICAgICAgIDwvbmctdGVtcGxhdGU+XG4gICAgICAgIDxuZy1jb250YWluZXIgI2NvbnRhaW5lcj48L25nLWNvbnRhaW5lcj5cbiAgYFxuICAgICAgICAgICAgfSxdIH0sXG5dO1xuLyoqIEBub2NvbGxhcHNlICovXG5Ecm9wRG93bkxpc3RDb21wb25lbnQuY3RvclBhcmFtZXRlcnMgPSAoKSA9PiBbXG4gICAgeyB0eXBlOiBMb2NhbGl6YXRpb25TZXJ2aWNlIH0sXG4gICAgeyB0eXBlOiBQb3B1cFNlcnZpY2UgfSxcbiAgICB7IHR5cGU6IFNlbGVjdGlvblNlcnZpY2UgfSxcbiAgICB7IHR5cGU6IE5hdmlnYXRpb25TZXJ2aWNlIH0sXG4gICAgeyB0eXBlOiBEaXNhYmxlZEl0ZW1zU2VydmljZSB9LFxuICAgIHsgdHlwZTogRGF0YVNlcnZpY2UgfSxcbiAgICB7IHR5cGU6IE5nWm9uZSB9LFxuICAgIHsgdHlwZTogUmVuZGVyZXIyIH0sXG4gICAgeyB0eXBlOiBFbGVtZW50UmVmIH0sXG4gICAgeyB0eXBlOiBDaGFuZ2VEZXRlY3RvclJlZiB9LFxuICAgIHsgdHlwZTogQm9vbGVhbiwgZGVjb3JhdG9yczogW3sgdHlwZTogT3B0aW9uYWwgfSwgeyB0eXBlOiBJbmplY3QsIGFyZ3M6IFtUT1VDSF9FTkFCTEVELF0gfV0gfVxuXTtcbkRyb3BEb3duTGlzdENvbXBvbmVudC5wcm9wRGVjb3JhdG9ycyA9IHtcbiAgICBmb2N1c2FibGVJZDogW3sgdHlwZTogSW5wdXQgfV0sXG4gICAgaWNvbkNsYXNzOiBbeyB0eXBlOiBJbnB1dCB9XSxcbiAgICBsb2FkaW5nOiBbeyB0eXBlOiBJbnB1dCB9XSxcbiAgICBkYXRhOiBbeyB0eXBlOiBJbnB1dCB9XSxcbiAgICB2YWx1ZTogW3sgdHlwZTogSW5wdXQgfV0sXG4gICAgdGV4dEZpZWxkOiBbeyB0eXBlOiBJbnB1dCB9XSxcbiAgICB2YWx1ZUZpZWxkOiBbeyB0eXBlOiBJbnB1dCB9XSxcbiAgICBwb3B1cFNldHRpbmdzOiBbeyB0eXBlOiBJbnB1dCB9XSxcbiAgICBsaXN0SGVpZ2h0OiBbeyB0eXBlOiBJbnB1dCB9XSxcbiAgICBkZWZhdWx0SXRlbTogW3sgdHlwZTogSW5wdXQgfV0sXG4gICAgZGlzYWJsZWQ6IFt7IHR5cGU6IElucHV0IH1dLFxuICAgIGl0ZW1EaXNhYmxlZDogW3sgdHlwZTogSW5wdXQgfV0sXG4gICAgcmVhZG9ubHk6IFt7IHR5cGU6IElucHV0IH1dLFxuICAgIGZpbHRlcmFibGU6IFt7IHR5cGU6IElucHV0IH1dLFxuICAgIHZpcnR1YWw6IFt7IHR5cGU6IElucHV0IH1dLFxuICAgIGlnbm9yZUNhc2U6IFt7IHR5cGU6IElucHV0IH1dLFxuICAgIGRlbGF5OiBbeyB0eXBlOiBJbnB1dCB9XSxcbiAgICB2YWx1ZVByaW1pdGl2ZTogW3sgdHlwZTogSW5wdXQgfV0sXG4gICAgdGFiaW5kZXg6IFt7IHR5cGU6IElucHV0IH1dLFxuICAgIHRhYkluZGV4OiBbeyB0eXBlOiBJbnB1dCwgYXJnczogW1widGFiSW5kZXhcIixdIH1dLFxuICAgIHZhbHVlQ2hhbmdlOiBbeyB0eXBlOiBPdXRwdXQgfV0sXG4gICAgZmlsdGVyQ2hhbmdlOiBbeyB0eXBlOiBPdXRwdXQgfV0sXG4gICAgc2VsZWN0aW9uQ2hhbmdlOiBbeyB0eXBlOiBPdXRwdXQgfV0sXG4gICAgb3BlbjogW3sgdHlwZTogT3V0cHV0IH1dLFxuICAgIGNsb3NlOiBbeyB0eXBlOiBPdXRwdXQgfV0sXG4gICAgb25Gb2N1czogW3sgdHlwZTogT3V0cHV0LCBhcmdzOiBbJ2ZvY3VzJyxdIH1dLFxuICAgIG9uQmx1cjogW3sgdHlwZTogT3V0cHV0LCBhcmdzOiBbJ2JsdXInLF0gfV0sXG4gICAgaXRlbVRlbXBsYXRlOiBbeyB0eXBlOiBDb250ZW50Q2hpbGQsIGFyZ3M6IFtJdGVtVGVtcGxhdGVEaXJlY3RpdmUsXSB9XSxcbiAgICBncm91cFRlbXBsYXRlOiBbeyB0eXBlOiBDb250ZW50Q2hpbGQsIGFyZ3M6IFtHcm91cFRlbXBsYXRlRGlyZWN0aXZlLF0gfV0sXG4gICAgZml4ZWRHcm91cFRlbXBsYXRlOiBbeyB0eXBlOiBDb250ZW50Q2hpbGQsIGFyZ3M6IFtGaXhlZEdyb3VwVGVtcGxhdGVEaXJlY3RpdmUsXSB9XSxcbiAgICB2YWx1ZVRlbXBsYXRlOiBbeyB0eXBlOiBDb250ZW50Q2hpbGQsIGFyZ3M6IFtWYWx1ZVRlbXBsYXRlRGlyZWN0aXZlLF0gfV0sXG4gICAgaGVhZGVyVGVtcGxhdGU6IFt7IHR5cGU6IENvbnRlbnRDaGlsZCwgYXJnczogW0hlYWRlclRlbXBsYXRlRGlyZWN0aXZlLF0gfV0sXG4gICAgZm9vdGVyVGVtcGxhdGU6IFt7IHR5cGU6IENvbnRlbnRDaGlsZCwgYXJnczogW0Zvb3RlclRlbXBsYXRlRGlyZWN0aXZlLF0gfV0sXG4gICAgbm9EYXRhVGVtcGxhdGU6IFt7IHR5cGU6IENvbnRlbnRDaGlsZCwgYXJnczogW05vRGF0YVRlbXBsYXRlRGlyZWN0aXZlLF0gfV0sXG4gICAgY29udGFpbmVyOiBbeyB0eXBlOiBWaWV3Q2hpbGQsIGFyZ3M6IFsnY29udGFpbmVyJywgeyByZWFkOiBWaWV3Q29udGFpbmVyUmVmIH0sXSB9XSxcbiAgICBwb3B1cFRlbXBsYXRlOiBbeyB0eXBlOiBWaWV3Q2hpbGQsIGFyZ3M6IFsncG9wdXBUZW1wbGF0ZScsXSB9XSxcbiAgICB3cmFwcGVyOiBbeyB0eXBlOiBWaWV3Q2hpbGQsIGFyZ3M6IFsnd3JhcHBlcicsIHsgc3RhdGljOiB0cnVlIH0sXSB9XSxcbiAgICBvcHRpb25zTGlzdDogW3sgdHlwZTogVmlld0NoaWxkLCBhcmdzOiBbJ29wdGlvbnNMaXN0JyxdIH1dLFxuICAgIHdpZGdldENsYXNzZXM6IFt7IHR5cGU6IEhvc3RCaW5kaW5nLCBhcmdzOiBbJ2NsYXNzLmstd2lkZ2V0JyxdIH0sIHsgdHlwZTogSG9zdEJpbmRpbmcsIGFyZ3M6IFsnY2xhc3Muay1kcm9wZG93bicsXSB9LCB7IHR5cGU6IEhvc3RCaW5kaW5nLCBhcmdzOiBbJ2NsYXNzLmstaGVhZGVyJyxdIH1dLFxuICAgIGRpcjogW3sgdHlwZTogSG9zdEJpbmRpbmcsIGFyZ3M6IFsnYXR0ci5kaXInLF0gfV1cbn07XG5cbi8qIHRzbGludDpkaXNhYmxlOm1heC1saW5lLWxlbmd0aCAqL1xuLyoqXG4gKiBSZW5kZXJzIHRoZSBjb250ZW50IG9mIHRoZSBjdXN0b20gbGlzdCBpdGVtIGluIHRoZSBNdWx0aVNlbGVjdFxuICogKFtzZWUgZXhhbXBsZV0oeyUgc2x1ZyB0ZW1wbGF0ZXNfbXVsdGlzZWxlY3QgJX0jdG9jLWN1c3RvbWl6aW5nLXRoZS1pdGVtLWNvbnRlbnQpKS5cbiAqIFRoZSB0ZW1wbGF0ZSBjb250ZXh0IGlzIHNldCB0byB0aGUgY3VycmVudCBjb21wb25lbnQuXG4gKiBUbyBnZXQgYSByZWZlcmVuY2UgdG8gdGhlIGN1cnJlbnQgdGV4dCB0aGF0IGlzIHR5cGVkIGJ5IHRoZVxuICogdXNlciwgdXNlIHRoZSBgbGV0LWN1c3RvbUl0ZW1gIGRpcmVjdGl2ZS5cbiAqXG4gKiA+IFRoZSBgQ3VzdG9tSXRlbVRlbXBsYXRlYCBkaXJlY3RpdmUgY2FuIG9ubHkgYmUgdXNlZCB3aXRoIHRoZSBNdWx0aVNlbGVjdCBjb21wb25lbnQuXG4gKlxuICogQGV4YW1wbGVcbiAqIGBgYHRzXG4gKiBfQENvbXBvbmVudCh7XG4gKiBzZWxlY3RvcjogJ215LWFwcCcsXG4gKiB0ZW1wbGF0ZTogYFxuICogIDxrZW5kby1tdWx0aXNlbGVjdCBbZGF0YV09XCJsaXN0SXRlbXNcIiBbYWxsb3dDdXN0b21dPVwidHJ1ZVwiPlxuICogICAgPG5nLXRlbXBsYXRlIGtlbmRvTXVsdGlTZWxlY3RDdXN0b21JdGVtVGVtcGxhdGUgbGV0LWN1c3RvbUl0ZW0+XG4gKiAgICAgIDxzcGFuPk5ldyBJdGVtOiB7e2N1c3RvbUl0ZW19fTwvc3Bhbj5cbiAqICAgIDwvbmctdGVtcGxhdGU+XG4gKiAgPC9rZW5kby1tdWx0aXNlbGVjdD5cbiAqIGBcbiAqIH0pXG4gKiBjbGFzcyBBcHBDb21wb25lbnQge1xuICogICBwdWJsaWMgbGlzdEl0ZW1zOiBBcnJheTxzdHJpbmc+ID0gW1wiSXRlbSAxXCIsIFwiSXRlbSAyXCIsIFwiSXRlbSAzXCIsIFwiSXRlbSA0XCJdO1xuICogfVxuICogYGBgXG4gKlxuICovXG5jbGFzcyBDdXN0b21JdGVtVGVtcGxhdGVEaXJlY3RpdmUge1xuICAgIGNvbnN0cnVjdG9yKHRlbXBsYXRlUmVmKSB7XG4gICAgICAgIHRoaXMudGVtcGxhdGVSZWYgPSB0ZW1wbGF0ZVJlZjtcbiAgICB9XG59XG5DdXN0b21JdGVtVGVtcGxhdGVEaXJlY3RpdmUuZGVjb3JhdG9ycyA9IFtcbiAgICB7IHR5cGU6IERpcmVjdGl2ZSwgYXJnczogW3tcbiAgICAgICAgICAgICAgICBzZWxlY3RvcjogJ1trZW5kb011bHRpU2VsZWN0Q3VzdG9tSXRlbVRlbXBsYXRlXSdcbiAgICAgICAgICAgIH0sXSB9LFxuXTtcbi8qKiBAbm9jb2xsYXBzZSAqL1xuQ3VzdG9tSXRlbVRlbXBsYXRlRGlyZWN0aXZlLmN0b3JQYXJhbWV0ZXJzID0gKCkgPT4gW1xuICAgIHsgdHlwZTogVGVtcGxhdGVSZWYgfVxuXTtcblxuLyogdHNsaW50OmRpc2FibGU6bWF4LWxpbmUtbGVuZ3RoICovXG4vKipcbiAqIFJlbmRlcnMgdGhlIHNlbGVjdGVkIHRhZyB2YWx1ZSBvZiB0aGUgTXVsdGlTZWxlY3RcbiAqIChbc2VlIGV4YW1wbGVdKHslIHNsdWcgdGVtcGxhdGVzX211bHRpc2VsZWN0ICV9I3RvYy10YWctdGVtcGxhdGUpKS5cbiAqIFRoZSB0ZW1wbGF0ZSBjb250ZXh0IGlzIHNldCB0byB0aGUgY3VycmVudCBjb21wb25lbnQuXG4gKiBUbyBnZXQgYSByZWZlcmVuY2UgdG8gdGhlIGN1cnJlbnQgZGF0YSBpdGVtLCB1c2UgdGhlIGBsZXQtZGF0YUl0ZW1gIGRpcmVjdGl2ZS5cbiAqXG4gKiA+IFRoZSBgVGFnVGVtcGxhdGVgIGRpcmVjdGl2ZSBjYW4gb25seSBiZSB1c2VkIHdpdGggdGhlIE11bHRpU2VsZWN0IGNvbXBvbmVudC5cbiAqXG4gKiBAZXhhbXBsZVxuICogYGBgdHNcbiAqIF9AQ29tcG9uZW50KHtcbiAqIHNlbGVjdG9yOiAnbXktYXBwJyxcbiAqIHRlbXBsYXRlOiBgXG4gKiAgPGtlbmRvLW11bHRpc2VsZWN0IFtkYXRhXT1cIml0ZW1zXCI+XG4gKiAgICA8bmctdGVtcGxhdGUga2VuZG9NdWx0aVNlbGVjdFRhZ1RlbXBsYXRlIGxldC1kYXRhSXRlbT5cbiAqICAgICAgPHNwYW4+e3tkYXRhSXRlbX19IG9wdGlvbjwvc3Bhbj5cbiAqICAgIDwvbmctdGVtcGxhdGU+XG4gKiAgPC9rZW5kby1tdWx0aXNlbGVjdD5cbiAqIGBcbiAqIH0pXG4gKiBjbGFzcyBBcHBDb21wb25lbnQge1xuICogICBwdWJsaWMgaXRlbXM6IEFycmF5PHN0cmluZz4gPSBbXCJJdGVtIDFcIiwgXCJJdGVtIDJcIiwgXCJJdGVtIDNcIiwgXCJJdGVtIDRcIl07XG4gKiB9XG4gKiBgYGBcbiAqL1xuY2xhc3MgVGFnVGVtcGxhdGVEaXJlY3RpdmUge1xuICAgIGNvbnN0cnVjdG9yKHRlbXBsYXRlUmVmKSB7XG4gICAgICAgIHRoaXMudGVtcGxhdGVSZWYgPSB0ZW1wbGF0ZVJlZjtcbiAgICB9XG59XG5UYWdUZW1wbGF0ZURpcmVjdGl2ZS5kZWNvcmF0b3JzID0gW1xuICAgIHsgdHlwZTogRGlyZWN0aXZlLCBhcmdzOiBbe1xuICAgICAgICAgICAgICAgIHNlbGVjdG9yOiAnW2tlbmRvTXVsdGlTZWxlY3RUYWdUZW1wbGF0ZV0nXG4gICAgICAgICAgICB9LF0gfSxcbl07XG4vKiogQG5vY29sbGFwc2UgKi9cblRhZ1RlbXBsYXRlRGlyZWN0aXZlLmN0b3JQYXJhbWV0ZXJzID0gKCkgPT4gW1xuICAgIHsgdHlwZTogVGVtcGxhdGVSZWYgfVxuXTtcblxuLyogdHNsaW50OmRpc2FibGU6bWF4LWxpbmUtbGVuZ3RoICovXG4vKipcbiAqIFJlbmRlcnMgdGhlIGdyb3VwZWQgdGFnIHZhbHVlcyBpbiB0aGUgTXVsdGlTZWxlY3RcbiAqIChbc2VlIGV4YW1wbGVdKHslIHNsdWcgc3VtbWFyeXRhZ21vZGVfbXVsdGlzZWxlY3QgJX0pKS5cbiAqIFRoZSB0ZW1wbGF0ZSBjb250ZXh0IGlzIHNldCB0byB0aGUgY3VycmVudCBjb21wb25lbnQuXG4gKiBUbyBnZXQgYSByZWZlcmVuY2UgdG8gdGhlIGN1cnJlbnQgZ3JvdXBlZFxuICogZGF0YSBpdGVtcyBjb2xsZWN0aW9uLCB1c2UgdGhlIGBsZXQtZGF0YUl0ZW1zYCBkaXJlY3RpdmUuXG4gKlxuICogPiBUaGUgYEdyb3VwVGFnVGVtcGxhdGVgIGRpcmVjdGl2ZSBjYW4gb25seSBiZSB1c2VkIHdpdGggdGhlIE11bHRpU2VsZWN0IGNvbXBvbmVudC5cbiAqXG4gKiBAZXhhbXBsZVxuICogYGBgdHNcbiAqIF9AQ29tcG9uZW50KHtcbiAqIHNlbGVjdG9yOiAnbXktYXBwJyxcbiAqIHRlbXBsYXRlOiBgXG4gKiAgPGtlbmRvLW11bHRpc2VsZWN0IGtlbmRvTXVsdGlTZWxlY3RTdW1tYXJ5VGFnIFtkYXRhXT1cIml0ZW1zXCI+XG4gKiAgICA8bmctdGVtcGxhdGUga2VuZG9NdWx0aVNlbGVjdEdyb3VwVGFnVGVtcGxhdGUgbGV0LWRhdGFJdGVtcz5cbiAqICAgICAgPHNwYW4+e3tkYXRhSXRlbXMubGVuZ3RofX0gaXRlbShzKSBzZWxlY3RlZDwvc3Bhbj5cbiAqICAgIDwvbmctdGVtcGxhdGU+XG4gKiAgPC9rZW5kby1tdWx0aXNlbGVjdD5cbiAqIGBcbiAqIH0pXG4gKiBjbGFzcyBBcHBDb21wb25lbnQge1xuICogICBwdWJsaWMgaXRlbXM6IEFycmF5PHN0cmluZz4gPSBbXCJJdGVtIDFcIiwgXCJJdGVtIDJcIiwgXCJJdGVtIDNcIiwgXCJJdGVtIDRcIl07XG4gKiB9XG4gKiBgYGBcbiAqL1xuY2xhc3MgR3JvdXBUYWdUZW1wbGF0ZURpcmVjdGl2ZSB7XG4gICAgY29uc3RydWN0b3IodGVtcGxhdGVSZWYpIHtcbiAgICAgICAgdGhpcy50ZW1wbGF0ZVJlZiA9IHRlbXBsYXRlUmVmO1xuICAgIH1cbn1cbkdyb3VwVGFnVGVtcGxhdGVEaXJlY3RpdmUuZGVjb3JhdG9ycyA9IFtcbiAgICB7IHR5cGU6IERpcmVjdGl2ZSwgYXJnczogW3tcbiAgICAgICAgICAgICAgICBzZWxlY3RvcjogJ1trZW5kb011bHRpU2VsZWN0R3JvdXBUYWdUZW1wbGF0ZV0nXG4gICAgICAgICAgICB9LF0gfSxcbl07XG4vKiogQG5vY29sbGFwc2UgKi9cbkdyb3VwVGFnVGVtcGxhdGVEaXJlY3RpdmUuY3RvclBhcmFtZXRlcnMgPSAoKSA9PiBbXG4gICAgeyB0eXBlOiBUZW1wbGF0ZVJlZiB9XG5dO1xuXG4vKipcbiAqIEFyZ3VtZW50cyBmb3IgdGhlIGByZW1vdmVUYWdgIGV2ZW50LiBUaGUgYHJlbW92ZVRhZ2AgZXZlbnQgZmlyZXMgd2hlbiBhIHRhZyBpcyBhYm91dFxuICogdG8gdGhlIHJlbW92ZWQuIElmIHlvdSBjYW5jZWwgdGhlIGV2ZW50LCB0aGUgcmVtb3ZhbCBpcyBwcmV2ZW50ZWQuXG4gKi9cbmNsYXNzIFJlbW92ZVRhZ0V2ZW50IGV4dGVuZHMgUHJldmVudGFibGVFdmVudCB7XG4gICAgLyoqXG4gICAgICogQ29uc3RydWN0cyB0aGUgZXZlbnQgYXJndW1lbnRzIGZvciB0aGUgYHJlbW92ZWAgZXZlbnQuXG4gICAgICogQHBhcmFtIGRhdGFJdGVtIC0gVGhlIGRhdGEgaXRlbSBvciBhbiBhcnJheSBvZiBkYXRhIGl0ZW1zIHRoYXQgd2lsbCBiZSByZW1vdmVkLlxuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKGRhdGFJdGVtKSB7XG4gICAgICAgIHN1cGVyKCk7XG4gICAgICAgIHRoaXMuZGF0YUl0ZW0gPSBkYXRhSXRlbTtcbiAgICB9XG59XG5cbi8qIHRzbGludDpkaXNhYmxlOm1heC1saW5lLWxlbmd0aCAqL1xuY29uc3QgTVVMVElTRUxFQ1RfVkFMVUVfQUNDRVNTT1IgPSB7XG4gICAgbXVsdGk6IHRydWUsXG4gICAgcHJvdmlkZTogTkdfVkFMVUVfQUNDRVNTT1IsXG4gICAgLy8gdHNsaW50OmRpc2FibGUtbmV4dC1saW5lOm5vLXVzZS1iZWZvcmUtZGVjbGFyZVxuICAgIHVzZUV4aXN0aW5nOiBmb3J3YXJkUmVmKCgpID0+IE11bHRpU2VsZWN0Q29tcG9uZW50KVxufTtcbi8qKlxuICogUmVwcmVzZW50cyB0aGUgW0tlbmRvIFVJIE11bHRpU2VsZWN0IGNvbXBvbmVudCBmb3IgQW5ndWxhcl0oeyUgc2x1ZyBvdmVydmlld19tdWx0aXNlbGVjdCAlfSkuXG4gKlxuICogQGV4YW1wbGVcbiAqIGBgYHRzXG4gKiBfQENvbXBvbmVudCh7XG4gKiBzZWxlY3RvcjogJ215LWFwcCcsXG4gKiB0ZW1wbGF0ZTogYFxuICogIDxrZW5kby1tdWx0aXNlbGVjdCBbZGF0YV09XCJsaXN0SXRlbXNcIj5cbiAqICA8L2tlbmRvLW11bHRpc2VsZWN0PlxuICogYFxuICogfSlcbiAqIGNsYXNzIEFwcENvbXBvbmVudCB7XG4gKiAgIHB1YmxpYyBsaXN0SXRlbXM6IEFycmF5PHN0cmluZz4gPSBbXCJJdGVtIDFcIiwgXCJJdGVtIDJcIiwgXCJJdGVtIDNcIiwgXCJJdGVtIDRcIl07XG4gKiB9XG4gKiBgYGBcbiAqL1xuY2xhc3MgTXVsdGlTZWxlY3RDb21wb25lbnQge1xuICAgIGNvbnN0cnVjdG9yKGxvY2FsaXphdGlvbiwgcG9wdXBTZXJ2aWNlLCBkYXRhU2VydmljZSwgc2VsZWN0aW9uU2VydmljZSwgbmF2aWdhdGlvblNlcnZpY2UsIGRpc2FibGVkSXRlbXNTZXJ2aWNlLCBjZHIsIGRpZmZlcnMsIHJlbmRlcmVyLCBob3N0RWxlbWVudCwgX3pvbmUsIHRvdWNoRW5hYmxlZCkge1xuICAgICAgICB0aGlzLmxvY2FsaXphdGlvbiA9IGxvY2FsaXphdGlvbjtcbiAgICAgICAgdGhpcy5wb3B1cFNlcnZpY2UgPSBwb3B1cFNlcnZpY2U7XG4gICAgICAgIHRoaXMuZGF0YVNlcnZpY2UgPSBkYXRhU2VydmljZTtcbiAgICAgICAgdGhpcy5zZWxlY3Rpb25TZXJ2aWNlID0gc2VsZWN0aW9uU2VydmljZTtcbiAgICAgICAgdGhpcy5uYXZpZ2F0aW9uU2VydmljZSA9IG5hdmlnYXRpb25TZXJ2aWNlO1xuICAgICAgICB0aGlzLmRpc2FibGVkSXRlbXNTZXJ2aWNlID0gZGlzYWJsZWRJdGVtc1NlcnZpY2U7XG4gICAgICAgIHRoaXMuY2RyID0gY2RyO1xuICAgICAgICB0aGlzLmRpZmZlcnMgPSBkaWZmZXJzO1xuICAgICAgICB0aGlzLnJlbmRlcmVyID0gcmVuZGVyZXI7XG4gICAgICAgIHRoaXMuaG9zdEVsZW1lbnQgPSBob3N0RWxlbWVudDtcbiAgICAgICAgdGhpcy5fem9uZSA9IF96b25lO1xuICAgICAgICB0aGlzLnRvdWNoRW5hYmxlZCA9IHRvdWNoRW5hYmxlZDtcbiAgICAgICAgdGhpcy5saXN0Qm94SWQgPSBndWlkKCk7XG4gICAgICAgIHRoaXMudGFnTGlzdElkID0gZ3VpZCgpO1xuICAgICAgICB0aGlzLnRhZ1ByZWZpeCA9IFwidGFnLVwiICsgZ3VpZCgpO1xuICAgICAgICB0aGlzLm9wdGlvblByZWZpeCA9IFwib3B0aW9uLVwiICsgZ3VpZCgpO1xuICAgICAgICB0aGlzLmZvY3VzZWRUYWdJbmRleCA9IHVuZGVmaW5lZDtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBoaWRkZW5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuZm9jdXNhYmxlSWQgPSBgay0ke2d1aWQoKX1gO1xuICAgICAgICAvKipcbiAgICAgICAgICogRGV0ZXJtaW5lcyB3aGV0aGVyIHRvIGNsb3NlIHRoZSBvcHRpb25zIGxpc3Qgb2YgdGhlIE11bHRpU2VsZWN0IGFmdGVyIHRoZSBpdGVtIHNlbGVjdGlvbiBpcyBmaW5pc2hlZFxuICAgICAgICAgKiAoW3NlZSBleGFtcGxlXSh7JSBzbHVnIG9wZW5zdGF0ZV9tdWx0aXNlbGVjdCAlfSN0b2Mta2VlcGluZy10aGUtb3B0aW9ucy1saXN0LW9wZW4td2hpbGUtb24tZm9jdXMpKS5cbiAgICAgICAgICogQGRlZmF1bHQgdHJ1ZVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5hdXRvQ2xvc2UgPSB0cnVlO1xuICAgICAgICAvKipcbiAgICAgICAgICogU3BlY2lmaWVzIHRoZSBbYHRhYmluZGV4YF0oaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvSFRNTC9HbG9iYWxfYXR0cmlidXRlcy90YWJpbmRleCkgb2YgdGhlIGNvbXBvbmVudC5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMudGFiaW5kZXggPSAwO1xuICAgICAgICAvKipcbiAgICAgICAgICogU2V0cyB0aGUgZGlzYWJsZWQgc3RhdGUgb2YgdGhlIGNvbXBvbmVudC5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuZGlzYWJsZWQgPSBmYWxzZTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFNldHMgdGhlIHJlYWQtb25seSBzdGF0ZSBvZiB0aGUgY29tcG9uZW50LlxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5yZWFkb25seSA9IGZhbHNlO1xuICAgICAgICAvKipcbiAgICAgICAgICogRW5hYmxlcyB0aGUgW2ZpbHRlcmluZ10oeyUgc2x1ZyBmaWx0ZXJpbmdfbXVsdGlzZWxlY3QgJX0pIGZ1bmN0aW9uYWxpdHkgb2YgdGhlIE11bHRpU2VsZWN0LlxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5maWx0ZXJhYmxlID0gZmFsc2U7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBTZXRzIHRoZSBoZWlnaHQgb2YgdGhlIHN1Z2dlc3Rpb25zIGxpc3QuIEJ5IGRlZmF1bHQsIGBsaXN0SGVpZ2h0YCBpcyAyMDBweC5cbiAgICAgICAgICpcbiAgICAgICAgICogPiBUaGUgYGxpc3RIZWlnaHRgIHByb3BlcnR5IGFmZmVjdHMgb25seSB0aGUgbGlzdCBvZiBzdWdnZXN0aW9ucyBhbmQgbm90IHRoZSB3aG9sZSBwb3B1cCBjb250YWluZXIuXG4gICAgICAgICAqID4gVG8gc2V0IHRoZSBoZWlnaHQgb2YgdGhlIHBvcHVwIGNvbnRhaW5lciwgdXNlIGBwb3B1cFNldHRpbmdzLmhlaWdodGAuXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmxpc3RIZWlnaHQgPSAyMDA7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBJZiBzZXQgdG8gYHRydWVgLCByZW5kZXJzIGEgYnV0dG9uIG9uIGhvdmVyaW5nIG92ZXIgdGhlIGNvbXBvbmVudC5cbiAgICAgICAgICogQ2xpY2tpbmcgdGhpcyBidXR0b24gcmVzZXRzIHRoZSB2YWx1ZSBvZiB0aGUgY29tcG9uZW50IHRvIGFuIGVtcHR5IGFycmF5IGFuZCB0cmlnZ2VycyB0aGUgYGNoYW5nZWAgZXZlbnQuXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmNsZWFyQnV0dG9uID0gdHJ1ZTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEEgdXNlci1kZWZpbmVkIGNhbGxiYWNrIGZ1bmN0aW9uIHdoaWNoIHJlY2VpdmVzIGFuIGFycmF5IG9mIHNlbGVjdGVkIGRhdGEgaXRlbXMgYW5kIG1hcHMgdGhlbSB0byBhbiBhcnJheSBvZiB0YWdzLlxuICAgICAgICAgKlxuICAgICAgICAgKiBAcGFyYW0geyBBbnlbXSB9IGRhdGFJdGVtcyAtIFRoZSBzZWxlY3RlZCBkYXRhIGl0ZW1zIGZyb20gdGhlIGxpc3QuXG4gICAgICAgICAqIEByZXR1cm5zIHsgQW55W10gfSAtIFRoZSB0YWdzIHRoYXQgd2lsbCBiZSByZW5kZXJlZCBieSB0aGUgY29tcG9uZW50LlxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy50YWdNYXBwZXIgPSAodGFncykgPT4gdGFncyB8fCBbXTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFNwZWNpZmllcyB3aGV0aGVyIHRoZSBNdWx0aVNlbGVjdCBhbGxvd3MgdXNlci1kZWZpbmVkIHZhbHVlcyB0aGF0IGFyZSBub3QgcHJlc2VudCBpbiB0aGUgZGF0YXNldFxuICAgICAgICAgKiAoW21vcmUgaW5mb3JtYXRpb24gYW5kIGV4YW1wbGVzXSh7JSBzbHVnIGN1c3RvbV92YWx1ZXNfbXVsdGlzZWxlY3QgJX0pKS5cbiAgICAgICAgICogRGVmYXVsdHMgdG8gYGZhbHNlYC5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuYWxsb3dDdXN0b20gPSBmYWxzZTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEEgdXNlci1kZWZpbmVkIGNhbGxiYWNrIGZ1bmN0aW9uIHdoaWNoIHJldHVybnMgbm9ybWFsaXplZCBjdXN0b20gdmFsdWVzLlxuICAgICAgICAgKiBUeXBpY2FsbHkgdXNlZCB3aGVuIHRoZSBkYXRhIGl0ZW1zIGFyZSBkaWZmZXJlbnQgZnJvbSB0eXBlIGBzdHJpbmdgLlxuICAgICAgICAgKlxuICAgICAgICAgKiBAcGFyYW0geyBBbnkgfSB2YWx1ZSAtIFRoZSBjdXN0b20gdmFsdWUgdGhhdCBpcyBkZWZpbmVkIGJ5IHRoZSB1c2VyLlxuICAgICAgICAgKiBAcmV0dXJucyB7IEFueSB9XG4gICAgICAgICAqXG4gICAgICAgICAqIEBleGFtcGxlXG4gICAgICAgICAqIGBgYHRzXG4gICAgICAgICAqIGltcG9ydCB7IG1hcCB9IGZyb20gJ3J4anMvb3BlcmF0b3JzJztcbiAgICAgICAgICpcbiAgICAgICAgICogX0BDb21wb25lbnQoe1xuICAgICAgICAgKiBzZWxlY3RvcjogJ215LWFwcCcsXG4gICAgICAgICAqIHRlbXBsYXRlOiBgXG4gICAgICAgICAqICAgPGtlbmRvLW11bHRpc2VsZWN0XG4gICAgICAgICAqICAgICAgIFthbGxvd0N1c3RvbV09XCJ0cnVlXCJcbiAgICAgICAgICogICAgICAgW2RhdGFdPVwibGlzdEl0ZW1zXCJcbiAgICAgICAgICogICAgICAgW3RleHRGaWVsZF09XCIndGV4dCdcIlxuICAgICAgICAgKiAgICAgICBbdmFsdWVGaWVsZF09XCIndmFsdWUnXCJcbiAgICAgICAgICogICAgICAgW3ZhbHVlTm9ybWFsaXplcl09XCJ2YWx1ZU5vcm1hbGl6ZXJcIlxuICAgICAgICAgKiAgICAgICAodmFsdWVDaGFuZ2UpPVwib25WYWx1ZUNoYW5nZSgkZXZlbnQpXCJcbiAgICAgICAgICogICA+XG4gICAgICAgICAqICAgPC9rZW5kby1tdWx0aXNlbGVjdD5cbiAgICAgICAgICogYFxuICAgICAgICAgKiB9KVxuICAgICAgICAgKlxuICAgICAgICAgKiBjbGFzcyBBcHBDb21wb25lbnQge1xuICAgICAgICAgKiAgIHB1YmxpYyBsaXN0SXRlbXM6IEFycmF5PHsgdGV4dDogc3RyaW5nLCB2YWx1ZTogbnVtYmVyIH0+ID0gW1xuICAgICAgICAgKiAgICAgICB7IHRleHQ6IFwiU21hbGxcIiwgdmFsdWU6IDEgfSxcbiAgICAgICAgICogICAgICAgeyB0ZXh0OiBcIk1lZGl1bVwiLCB2YWx1ZTogMiB9LFxuICAgICAgICAgKiAgICAgICB7IHRleHQ6IFwiTGFyZ2VcIiwgdmFsdWU6IDMgfVxuICAgICAgICAgKiAgIF07XG4gICAgICAgICAqXG4gICAgICAgICAqICAgcHVibGljIG9uVmFsdWVDaGFuZ2UodmFsdWUpIHtcbiAgICAgICAgICogICAgICAgY29uc29sZS5sb2coXCJ2YWx1ZUNoYW5nZSA6IFwiLCB2YWx1ZSk7XG4gICAgICAgICAqICAgfVxuICAgICAgICAgKlxuICAgICAgICAgKiAgIHB1YmxpYyB2YWx1ZU5vcm1hbGl6ZXIgPSAodGV4dCQ6IE9ic2VydmFibGU8c3RyaW5nPikgPT4gdGV4dCQucGlwZShtYXAoKHRleHQ6IHN0cmluZykgPT4ge1xuICAgICAgICAgKiAgICAgIHJldHVybiB7XG4gICAgICAgICAqICAgICAgICAgdmFsdWU6IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqICgxMDAwIC0gMTAwKSArIDEwMDApLCAvL2dlbmVyYXRlIHVuaXF1ZSB2YWx1ZUZpZWxkXG4gICAgICAgICAqICAgICAgICAgdGV4dDogdGV4dCB9O1xuICAgICAgICAgKiAgIH0pKTtcbiAgICAgICAgICpcbiAgICAgICAgICogfVxuICAgICAgICAgKiBgYGBcbiAgICAgICAgICovXG4gICAgICAgIHRoaXMudmFsdWVOb3JtYWxpemVyID0gKHRleHQpID0+IHRleHQucGlwZShtYXAoKHVzZXJJbnB1dCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgY29tcGFyZXIgPSAoaXRlbSkgPT4gdHlwZW9mIGl0ZW0gPT09ICdzdHJpbmcnICYmIHVzZXJJbnB1dC50b0xvd2VyQ2FzZSgpID09PSBpdGVtLnRvTG93ZXJDYXNlKCk7XG4gICAgICAgICAgICBjb25zdCBtYXRjaGluZ1ZhbHVlID0gdGhpcy52YWx1ZS5maW5kKGNvbXBhcmVyKTtcbiAgICAgICAgICAgIGlmIChtYXRjaGluZ1ZhbHVlKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG1hdGNoaW5nVmFsdWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBtYXRjaGluZ0l0ZW0gPSB0aGlzLmRhdGFTZXJ2aWNlLmZpbmQoY29tcGFyZXIpO1xuICAgICAgICAgICAgcmV0dXJuIG1hdGNoaW5nSXRlbSA/IG1hdGNoaW5nSXRlbSA6IHVzZXJJbnB1dDtcbiAgICAgICAgfSkpO1xuICAgICAgICAvKipcbiAgICAgICAgICogRmlyZXMgZWFjaCB0aW1lIHRoZSB1c2VyIHR5cGVzIGluIHRoZSBpbnB1dCBmaWVsZC5cbiAgICAgICAgICogWW91IGNhbiBmaWx0ZXIgdGhlIHNvdXJjZSBiYXNlZCBvbiB0aGUgcGFzc2VkIGZpbHRyYXRpb24gdmFsdWUuXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmZpbHRlckNoYW5nZSA9IG5ldyBFdmVudEVtaXR0ZXIoKTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEZpcmVzIGVhY2ggdGltZSB0aGUgdmFsdWUgaXMgY2hhbmdlZCZtZGFzaDtcbiAgICAgICAgICogd2hlbiB0aGUgY29tcG9uZW50IGlzIGJsdXJyZWQgb3IgdGhlIHZhbHVlIGlzIGNsZWFyZWQgdGhyb3VnaCB0aGUgKipDbGVhcioqIGJ1dHRvblxuICAgICAgICAgKiAoW3NlZSBleGFtcGxlXSh7JSBzbHVnIG92ZXJ2aWV3X211bHRpc2VsZWN0ICV9I3RvYy1ldmVudHMpKS5cbiAgICAgICAgICogV2hlbiB0aGUgdmFsdWUgb2YgdGhlIGNvbXBvbmVudCBpcyBwcm9ncmFtbWF0aWNhbGx5IGNoYW5nZWQgdG8gYG5nTW9kZWxgIG9yIGBmb3JtQ29udHJvbGBcbiAgICAgICAgICogdGhyb3VnaCBpdHMgQVBJIG9yIGZvcm0gYmluZGluZywgdGhlIGB2YWx1ZUNoYW5nZWAgZXZlbnQgaXMgbm90IHRyaWdnZXJlZCBiZWNhdXNlIGl0XG4gICAgICAgICAqIG1pZ2h0IGNhdXNlIGEgbWl4LXVwIHdpdGggdGhlIGJ1aWx0LWluIGB2YWx1ZUNoYW5nZWAgbWVjaGFuaXNtcyBvZiB0aGUgYG5nTW9kZWxgIG9yIGBmb3JtQ29udHJvbGAgYmluZGluZ3MuXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLnZhbHVlQ2hhbmdlID0gbmV3IEV2ZW50RW1pdHRlcigpO1xuICAgICAgICAvKipcbiAgICAgICAgICogRmlyZXMgZWFjaCB0aW1lIHRoZSBwb3B1cCBpcyBhYm91dCB0byBvcGVuXG4gICAgICAgICAqIChbc2VlIGV4YW1wbGVdKHslIHNsdWcgb3BlbnN0YXRlX211bHRpc2VsZWN0ICV9I3RvYy1wcmV2ZW50aW5nLW9wZW5pbmctYW5kLWNsb3NpbmcpKS5cbiAgICAgICAgICogVGhpcyBldmVudCBpcyBwcmV2ZW50YWJsZS4gSWYgeW91IGNhbmNlbCBpdCwgdGhlIHBvcHVwIHdpbGwgcmVtYWluIGNsb3NlZC5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMub3BlbiA9IG5ldyBFdmVudEVtaXR0ZXIoKTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEZpcmVzIGVhY2ggdGltZSB0aGUgcG9wdXAgaXMgYWJvdXQgdG8gY2xvc2VcbiAgICAgICAgICogKFtzZWUgZXhhbXBsZV0oeyUgc2x1ZyBvcGVuc3RhdGVfbXVsdGlzZWxlY3QgJX0jdG9jLXByZXZlbnRpbmctb3BlbmluZy1hbmQtY2xvc2luZykpLlxuICAgICAgICAgKiBUaGlzIGV2ZW50IGlzIHByZXZlbnRhYmxlLiBJZiB5b3UgY2FuY2VsIGl0LCB0aGUgcG9wdXAgd2lsbCByZW1haW4gb3Blbi5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuY2xvc2UgPSBuZXcgRXZlbnRFbWl0dGVyKCk7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBGaXJlcyBlYWNoIHRpbWUgdGhlIHVzZXIgZm9jdXNlcyB0aGUgTXVsdGlTZWxlY3QuXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLm9uRm9jdXMgPSBuZXcgRXZlbnRFbWl0dGVyKCk7IC8vdHNsaW50OmRpc2FibGUtbGluZTpuby1vdXRwdXQtcmVuYW1lXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBGaXJlcyBlYWNoIHRpbWUgdGhlIE11bHRpU2VsZWN0IGdldHMgYmx1cnJlZC5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMub25CbHVyID0gbmV3IEV2ZW50RW1pdHRlcigpOyAvL3RzbGludDpkaXNhYmxlLWxpbmU6bm8tb3V0cHV0LXJlbmFtZVxuICAgICAgICAvKipcbiAgICAgICAgICogRmlyZXMgZWFjaCB0aW1lIGEgdGFnIGlzIGFib3V0IHRvIGJlIHJlbW92ZWQuXG4gICAgICAgICAqIFRoaXMgZXZlbnQgaXMgcHJldmVudGFibGUuIElmIHlvdSBjYW5jZWwgaXQsIHRoZSB0YWcgd2lsbCBub3QgYmUgcmVtb3ZlZC5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMucmVtb3ZlVGFnID0gbmV3IEV2ZW50RW1pdHRlcigpO1xuICAgICAgICB0aGlzLndpZGdldENsYXNzZXMgPSB0cnVlO1xuICAgICAgICB0aGlzLm9uQ2hhbmdlQ2FsbGJhY2sgPSAoXykgPT4geyB9O1xuICAgICAgICB0aGlzLm9uVG91Y2hlZENhbGxiYWNrID0gKF8pID0+IHsgfTtcbiAgICAgICAgdGhpcy5fcGxhY2Vob2xkZXIgPSAnJztcbiAgICAgICAgdGhpcy5fb3BlbiA9IGZhbHNlO1xuICAgICAgICB0aGlzLl92YWx1ZSA9IFtdO1xuICAgICAgICB0aGlzLl9wb3B1cFNldHRpbmdzID0geyBhbmltYXRlOiB0cnVlIH07XG4gICAgICAgIHRoaXMuaXNGb2N1c2VkID0gZmFsc2U7XG4gICAgICAgIHRoaXMuc2VsZWN0ZWREYXRhSXRlbXMgPSBbXTtcbiAgICAgICAgdGhpcy5jdXN0b21WYWx1ZVN1YmplY3QgPSBuZXcgU3ViamVjdCgpO1xuICAgICAgICB0aGlzLm9ic2VydmFibGVTdWJzY3JpcHRpb25zID0gbmV3IFN1YnNjcmlwdGlvbigpO1xuICAgICAgICB0aGlzLmhvc3RFbGVtZW50ID0gaG9zdEVsZW1lbnQubmF0aXZlRWxlbWVudDtcbiAgICAgICAgdGhpcy5wb3B1cE1vdXNlRG93bkhhbmRsZXIgPSB0aGlzLm9uTW91c2VEb3duLmJpbmQodGhpcyk7XG4gICAgICAgIHRoaXMuZGF0YSA9IFtdO1xuICAgICAgICB0aGlzLmRpcmVjdGlvbiA9IHRoaXMubG9jYWxpemF0aW9uLnJ0bCA/ICdydGwnIDogJ2x0cic7XG4gICAgICAgIHRoaXMuc3Vic2NyaWJlRXZlbnRzKCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEZvY3VzZXMgdGhlIE11bHRpU2VsZWN0LlxuICAgICAqL1xuICAgIGZvY3VzKCkge1xuICAgICAgICBpZiAoIXRoaXMuZGlzYWJsZWQpIHtcbiAgICAgICAgICAgIHRoaXMuc2VhcmNoYmFyLmZvY3VzKCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogQGhpZGRlblxuICAgICAqL1xuICAgIG9uU2VhcmNoQmFyRm9jdXMoKSB7XG4gICAgICAgIGlmICghdGhpcy5pc0ZvY3VzZWQpIHtcbiAgICAgICAgICAgIHRoaXMuaXNGb2N1c2VkID0gdHJ1ZTtcbiAgICAgICAgICAgIHRoaXMub25Gb2N1cy5lbWl0KCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogQmx1cnMgdGhlIE11bHRpU2VsZWN0LlxuICAgICAqL1xuICAgIGJsdXIoKSB7XG4gICAgICAgIGlmICghdGhpcy5kaXNhYmxlZCkge1xuICAgICAgICAgICAgdGhpcy5zZWFyY2hiYXIuYmx1cigpO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEBoaWRkZW5cbiAgICAgKi9cbiAgICBvblNlYXJjaEJhckJsdXIoKSB7XG4gICAgICAgIGlmICh0aGlzLmlzRm9jdXNlZCkge1xuICAgICAgICAgICAgdGhpcy5jbG9zZVBvcHVwKCk7XG4gICAgICAgICAgICB0aGlzLmlzRm9jdXNlZCA9IGZhbHNlO1xuICAgICAgICAgICAgaWYgKCF0aGlzLmFsbG93Q3VzdG9tKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5jbGVhckZpbHRlcigpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5vbkJsdXIuZW1pdCgpO1xuICAgICAgICAgICAgdGhpcy5vblRvdWNoZWRDYWxsYmFjaygpO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEBoaWRkZW5cbiAgICAgKi9cbiAgICB3cmFwcGVyTW91c2Vkb3duKGV2ZW50KSB7XG4gICAgICAgIGNvbnN0IGlucHV0RWxlbWVudCA9IHRoaXMuc2VhcmNoYmFyLmlucHV0Lm5hdGl2ZUVsZW1lbnQ7XG4gICAgICAgIGlmIChldmVudC5idXR0b24gPT09IDApIHtcbiAgICAgICAgICAgIGlmICh0aGlzLmlzRm9jdXNlZCAmJiB0aGlzLmlzT3BlbiAmJiBldmVudC50YXJnZXQgPT09IGlucHV0RWxlbWVudCkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICghdGhpcy50b3VjaEVuYWJsZWQgfHwgKHRoaXMudG91Y2hFbmFibGVkICYmIGV2ZW50LnRhcmdldC50YWdOYW1lICE9PSAnU1BBTicpKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5zZWFyY2hiYXIuZm9jdXMoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMudG9nZ2xlUG9wdXAoIXRoaXMuaXNPcGVuKTtcbiAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogQGhpZGRlblxuICAgICAqL1xuICAgIG9uTW91c2VEb3duKGV2ZW50KSB7XG4gICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEBoaWRkZW5cbiAgICAgKi9cbiAgICBvblJlc2l6ZSgpIHtcbiAgICAgICAgaWYgKHRoaXMuX29wZW4pIHtcbiAgICAgICAgICAgIGNvbnN0IHBvcHVwV3JhcHBlciA9IHRoaXMucG9wdXBSZWYucG9wdXBFbGVtZW50O1xuICAgICAgICAgICAgY29uc3QgeyBtaW4sIG1heCB9ID0gdGhpcy53aWR0aDtcbiAgICAgICAgICAgIHBvcHVwV3JhcHBlci5zdHlsZS5taW5XaWR0aCA9IG1pbjtcbiAgICAgICAgICAgIHBvcHVwV3JhcHBlci5zdHlsZS53aWR0aCA9IG1heDtcbiAgICAgICAgfVxuICAgIH1cbiAgICBnZXQgYXBwZW5kVG8oKSB7XG4gICAgICAgIGNvbnN0IHsgYXBwZW5kVG8gfSA9IHRoaXMucG9wdXBTZXR0aW5ncztcbiAgICAgICAgaWYgKCFhcHBlbmRUbyB8fCBhcHBlbmRUbyA9PT0gJ3Jvb3QnKSB7XG4gICAgICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBhcHBlbmRUbyA9PT0gJ2NvbXBvbmVudCcgPyB0aGlzLmNvbnRhaW5lciA6IGFwcGVuZFRvO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBTZXRzIHRoZSBkYXRhIG9mIHRoZSBNdWx0aVNlbGVjdC5cbiAgICAgKlxuICAgICAqID4gVGhlIGRhdGEgaGFzIHRvIGJlIHByb3ZpZGVkIGluIGFuIGFycmF5LWxpa2UgbGlzdCBvZiBpdGVtcy5cbiAgICAgKi9cbiAgICBzZXQgZGF0YShkYXRhKSB7XG4gICAgICAgIHRoaXMuZGF0YVNlcnZpY2UuZGF0YSA9IGRhdGEgfHwgW107XG4gICAgICAgIGlmICh0aGlzLnZpcnR1YWwpIHtcbiAgICAgICAgICAgIHRoaXMudmlydHVhbC5za2lwID0gMDtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnNldFN0YXRlKHRoaXMudmFsdWUpO1xuICAgIH1cbiAgICBnZXQgZGF0YSgpIHtcbiAgICAgICAgY29uc3QgdmlydHVhbCA9IHRoaXMudmlydHVhbDtcbiAgICAgICAgaWYgKHZpcnR1YWwpIHtcbiAgICAgICAgICAgIGNvbnN0IHN0YXJ0ID0gdmlydHVhbC5za2lwIHx8IDA7XG4gICAgICAgICAgICBjb25zdCBlbmQgPSBzdGFydCArIHZpcnR1YWwucGFnZVNpemU7XG4gICAgICAgICAgICAvL1VzZSBsZW5ndGggaW5zdGVhZCBvZiBpdGVtc0NvdW50IGJlY2F1c2Ugb2YgZ3JvdXBpbmdcbiAgICAgICAgICAgIHZpcnR1YWwudG90YWwgPSB0aGlzLmRhdGFTZXJ2aWNlLmRhdGEubGVuZ3RoO1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZGF0YVNlcnZpY2UuZGF0YS5zbGljZShzdGFydCwgZW5kKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcy5kYXRhU2VydmljZS5kYXRhO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBTZXRzIHRoZSB2YWx1ZSBvZiB0aGUgTXVsdGlTZWxlY3QuIEl0IGNhbiBiZSBlaXRoZXIgb2YgdGhlIHByaW1pdGl2ZSAoc3RyaW5nLCBudW1iZXJzKSBvciBvZiB0aGUgY29tcGxleCAob2JqZWN0cykgdHlwZS5cbiAgICAgKiBUbyBkZWZpbmUgdGhlIHR5cGUsIHVzZSB0aGUgYHZhbHVlUHJpbWl0aXZlYCBvcHRpb24uXG4gICAgICpcbiAgICAgKiA+IEFsbCBzZWxlY3RlZCB2YWx1ZXMgd2hpY2ggYXJlIG5vdCBwcmVzZW50IGluIHRoZSBzb3VyY2UgYXJlIGlnbm9yZWQuXG4gICAgICovXG4gICAgc2V0IHZhbHVlKHZhbHVlcykge1xuICAgICAgICB0aGlzLl92YWx1ZSA9IHZhbHVlcyA/IHZhbHVlcyA6IFtdO1xuICAgICAgICBpZiAoIXRoaXMuZGlmZmVyICYmIHRoaXMudmFsdWUpIHtcbiAgICAgICAgICAgIHRoaXMuZGlmZmVyID0gdGhpcy5kaWZmZXJzLmZpbmQodGhpcy52YWx1ZSkuY3JlYXRlKCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZ2V0IHZhbHVlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fdmFsdWU7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEBoaWRkZW5cbiAgICAgKi9cbiAgICBzZXQgdGFiSW5kZXgodGFiSW5kZXgpIHtcbiAgICAgICAgdGhpcy50YWJpbmRleCA9IHRhYkluZGV4O1xuICAgIH1cbiAgICBnZXQgdGFiSW5kZXgoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnRhYmluZGV4O1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBUaGUgaGludCB3aGljaCBpcyBkaXNwbGF5ZWQgd2hlbiB0aGUgY29tcG9uZW50IGlzIGVtcHR5LlxuICAgICAqIFdoZW4gdGhlIHZhbHVlcyBhcmUgc2VsZWN0ZWQsIGl0IGRpc2FwcGVhcnMuXG4gICAgICovXG4gICAgc2V0IHBsYWNlaG9sZGVyKHRleHQpIHtcbiAgICAgICAgdGhpcy5fcGxhY2Vob2xkZXIgPSB0ZXh0IHx8ICcnO1xuICAgIH1cbiAgICBnZXQgcGxhY2Vob2xkZXIoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnNlbGVjdGVkRGF0YUl0ZW1zLmxlbmd0aCA/ICcnIDogdGhpcy5fcGxhY2Vob2xkZXI7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIERlZmluZXMgYSBCb29sZWFuIGZ1bmN0aW9uIHRoYXQgaXMgZXhlY3V0ZWQgZm9yIGVhY2ggZGF0YSBpdGVtIGluIHRoZSBjb21wb25lbnRcbiAgICAgKiAoW3NlZSBleGFtcGxlc10oeyUgc2x1ZyBkaXNhYmxlZGl0ZW1zX211bHRpc2VsZWN0ICV9KSkuIERldGVybWluZXMgd2hldGhlciB0aGUgaXRlbSB3aWxsIGJlIGRpc2FibGVkLlxuICAgICAqL1xuICAgIHNldCBpdGVtRGlzYWJsZWQoZm4pIHtcbiAgICAgICAgaWYgKHR5cGVvZiBmbiAhPT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBpdGVtRGlzYWJsZWQgbXVzdCBiZSBhIGZ1bmN0aW9uLCBidXQgcmVjZWl2ZWQgJHtKU09OLnN0cmluZ2lmeShmbil9LmApO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuZGlzYWJsZWRJdGVtc1NlcnZpY2UuaXRlbURpc2FibGVkID0gZm47XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEVuYWJsZXMgdGhlIFt2aXJ0dWFsaXphdGlvbl0oeyUgc2x1ZyB2aXJ0dWFsaXphdGlvbl9tdWx0aXNlbGVjdCAlfSkgZnVuY3Rpb25hbGl0eS5cbiAgICAgKi9cbiAgICBzZXQgdmlydHVhbChzZXR0aW5ncykge1xuICAgICAgICB0aGlzLl92aXJ0dWFsU2V0dGluZ3MgPSBub3JtYWxpemVWaXJ0dWFsaXphdGlvblNldHRpbmdzKHNldHRpbmdzKTtcbiAgICB9XG4gICAgZ2V0IHZpcnR1YWwoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl92aXJ0dWFsU2V0dGluZ3M7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENvbmZpZ3VyZXMgdGhlIHBvcHVwIG9mIHRoZSBNdWx0aVNlbGVjdC5cbiAgICAgKlxuICAgICAqIFRoZSBhdmFpbGFibGUgb3B0aW9ucyBhcmU6XG4gICAgICogLSBgYW5pbWF0ZTogQm9vbGVhbmAmbWRhc2g7Q29udHJvbHMgdGhlIHBvcHVwIGFuaW1hdGlvbi4gQnkgZGVmYXVsdCwgdGhlIG9wZW4gYW5kIGNsb3NlIGFuaW1hdGlvbnMgYXJlIGVuYWJsZWQuXG4gICAgICogLSBgd2lkdGg6IE51bWJlciB8IFN0cmluZ2AmbWRhc2g7U2V0cyB0aGUgd2lkdGggb2YgdGhlIHBvcHVwIGNvbnRhaW5lci4gQnkgZGVmYXVsdCwgdGhlIHdpZHRoIG9mIHRoZSBob3N0IGVsZW1lbnQgaXMgdXNlZC4gSWYgc2V0IHRvIGBhdXRvYCwgdGhlIGNvbXBvbmVudCBhdXRvbWF0aWNhbGx5IGFkanVzdHMgdGhlIHdpZHRoIG9mIHRoZSBwb3B1cCBhbmQgbm8gaXRlbSBsYWJlbHMgYXJlIHdyYXBwZWQuIFRoZSBgYXV0b2AgbW9kZSBpcyBub3Qgc3VwcG9ydGVkIHdoZW4gdmlydHVhbCBzY3JvbGxpbmcgaXMgZW5hYmxlZC5cbiAgICAgKiAtIGBoZWlnaHQ6IE51bWJlcmAmbWRhc2g7U2V0cyB0aGUgaGVpZ2h0IG9mIHRoZSBwb3B1cCBjb250YWluZXIuXG4gICAgICogLSBgcG9wdXBDbGFzczogU3RyaW5nYCZtZGFzaDtTcGVjaWZpZXMgYSBsaXN0IG9mIENTUyBjbGFzc2VzIHRoYXQgYXJlIHVzZWQgdG8gc3R5bGUgdGhlIHBvcHVwLlxuICAgICAqIC0gYGFwcGVuZFRvOiBcInJvb3RcIiB8IFwiY29tcG9uZW50XCIgfCBWaWV3Q29udGFpbmVyUmVmYCZtZGFzaDtTcGVjaWZpZXMgdGhlIGNvbXBvbmVudCB0byB3aGljaCB0aGUgcG9wdXAgd2lsbCBiZSBhcHBlbmRlZC5cbiAgICAgKi9cbiAgICBzZXQgcG9wdXBTZXR0aW5ncyhzZXR0aW5ncykge1xuICAgICAgICB0aGlzLl9wb3B1cFNldHRpbmdzID0gT2JqZWN0LmFzc2lnbih7IGFuaW1hdGU6IHRydWUgfSwgc2V0dGluZ3MpO1xuICAgIH1cbiAgICBnZXQgcG9wdXBTZXR0aW5ncygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3BvcHVwU2V0dGluZ3M7XG4gICAgfVxuICAgIGdldCBkaXIoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmRpcmVjdGlvbjtcbiAgICB9XG4gICAgZ2V0IGZvY3VzZWRDbGFzcygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuaXNGb2N1c2VkO1xuICAgIH1cbiAgICBnZXQgZGlzYWJsZWRDbGFzcygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZGlzYWJsZWQ7XG4gICAgfVxuICAgIGdldCBsaXN0Q29udGFpbmVyQ2xhc3NlcygpIHtcbiAgICAgICAgY29uc3QgY29udGFpbmVyQ2xhc3NlcyA9IFsnay1saXN0LWNvbnRhaW5lcicsICdrLXJlc2V0J107XG4gICAgICAgIGlmICh0aGlzLnBvcHVwU2V0dGluZ3MucG9wdXBDbGFzcykge1xuICAgICAgICAgICAgY29udGFpbmVyQ2xhc3Nlcy5wdXNoKHRoaXMucG9wdXBTZXR0aW5ncy5wb3B1cENsYXNzKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gY29udGFpbmVyQ2xhc3NlcztcbiAgICB9XG4gICAgZ2V0IHdpZHRoKCkge1xuICAgICAgICBsZXQgd3JhcHBlck9mZnNldFdpZHRoID0gMDtcbiAgICAgICAgaWYgKGlzRG9jdW1lbnRBdmFpbGFibGUoKSkge1xuICAgICAgICAgICAgd3JhcHBlck9mZnNldFdpZHRoID0gdGhpcy53cmFwcGVyLm5hdGl2ZUVsZW1lbnQub2Zmc2V0V2lkdGg7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3Qgd2lkdGggPSB0aGlzLnBvcHVwU2V0dGluZ3Mud2lkdGggfHwgd3JhcHBlck9mZnNldFdpZHRoO1xuICAgICAgICBjb25zdCBtaW5XaWR0aCA9IGlzTmFOKHdyYXBwZXJPZmZzZXRXaWR0aCkgPyB3cmFwcGVyT2Zmc2V0V2lkdGggOiBgJHt3cmFwcGVyT2Zmc2V0V2lkdGh9cHhgO1xuICAgICAgICBjb25zdCBtYXhXaWR0aCA9IGlzTmFOKHdpZHRoKSA/IHdpZHRoIDogYCR7d2lkdGh9cHhgO1xuICAgICAgICByZXR1cm4geyBtaW46IG1pbldpZHRoLCBtYXg6IG1heFdpZHRoIH07XG4gICAgfVxuICAgIGdldCBoZWlnaHQoKSB7XG4gICAgICAgIGNvbnN0IHBvcHVwSGVpZ2h0ID0gdGhpcy5wb3B1cFNldHRpbmdzLmhlaWdodDtcbiAgICAgICAgcmV0dXJuIGlzUHJlc2VudChwb3B1cEhlaWdodCkgPyBgJHtwb3B1cEhlaWdodH1weGAgOiAnYXV0byc7XG4gICAgfVxuICAgIGdldCBhY3RpdmVEZXNjZW5kYW50KCkge1xuICAgICAgICBjb25zdCBmb2N1c2VkVGFnSW5kZXggPSB0aGlzLmZvY3VzZWRUYWdJbmRleDtcbiAgICAgICAgY29uc3QgZm9jdXNlZExpc3RJbmRleCA9IHRoaXMuc2VsZWN0aW9uU2VydmljZS5mb2N1c2VkO1xuICAgICAgICBsZXQgcHJlZml4O1xuICAgICAgICBsZXQgaXRlbTtcbiAgICAgICAgaWYgKGlzUHJlc2VudChmb2N1c2VkVGFnSW5kZXgpICYmICF0aGlzLmlzT3Blbikge1xuICAgICAgICAgICAgaXRlbSA9IHRoaXMudGFnc1tmb2N1c2VkVGFnSW5kZXhdO1xuICAgICAgICAgICAgcHJlZml4ID0gdGhpcy50YWdQcmVmaXg7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoaXNQcmVzZW50KGZvY3VzZWRMaXN0SW5kZXgpICYmIGZvY3VzZWRMaXN0SW5kZXggIT09IC0xICYmIHRoaXMuaXNPcGVuKSB7XG4gICAgICAgICAgICBpdGVtID0gdGhpcy5kYXRhU2VydmljZS5pdGVtQXQoZm9jdXNlZExpc3RJbmRleCk7XG4gICAgICAgICAgICBwcmVmaXggPSB0aGlzLm9wdGlvblByZWZpeDtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBwcmVmaXggKyBcIi1cIiArIHRoaXMucHJvcCh0aGlzLnZhbHVlRmllbGQsIHRoaXMudmFsdWVQcmltaXRpdmUpKGl0ZW0pO1xuICAgIH1cbiAgICBnZXQgbm9EYXRhTGFiZWwoKSB7XG4gICAgICAgIGlmICh0aGlzLmRhdGFTZXJ2aWNlLml0ZW1zQ291bnQgPT09IDApIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLm5vRGF0YVRleHQ7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZ2V0IGNsZWFyVGl0bGUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmxvY2FsaXphdGlvbi5nZXQoJ2NsZWFyVGl0bGUnKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQGhpZGRlblxuICAgICAqL1xuICAgIHZlcmlmeVNldHRpbmdzKCkge1xuICAgICAgICBjb25zdCB2YWx1ZU9yVGV4dCA9ICFpc1ByZXNlbnQodGhpcy52YWx1ZUZpZWxkKSAhPT0gIWlzUHJlc2VudCh0aGlzLnRleHRGaWVsZCk7XG4gICAgICAgIGlmICghaXNEZXZNb2RlKCkgfHwgdGhpcy52YWx1ZS5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIWlzQXJyYXkodGhpcy52YWx1ZSkpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihNdWx0aXNlbGVjdE1lc3NhZ2VzLmFycmF5KTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy52YWx1ZVByaW1pdGl2ZSA9PT0gdHJ1ZSAmJiBpc09iamVjdEFycmF5KHRoaXMudmFsdWUpKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoTXVsdGlzZWxlY3RNZXNzYWdlcy5wcmltaXRpdmUpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLnZhbHVlUHJpbWl0aXZlID09PSBmYWxzZSAmJiAhaXNPYmplY3RBcnJheSh0aGlzLnZhbHVlKSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKE11bHRpc2VsZWN0TWVzc2FnZXMub2JqZWN0KTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodmFsdWVPclRleHQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihNdWx0aXNlbGVjdE1lc3NhZ2VzLnRleHRBbmRWYWx1ZSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogQGhpZGRlblxuICAgICAqL1xuICAgIGNoYW5nZShldmVudCkge1xuICAgICAgICBjb25zdCBpc0N1c3RvbUl0ZW0gPSAoaXNQcmVzZW50KGV2ZW50LmFkZGVkKSB8fCBpc1ByZXNlbnQoZXZlbnQucmVtb3ZlZCkpICYmIChldmVudC5hZGRlZCA9PT0gLTEgfHwgZXZlbnQucmVtb3ZlZCA9PT0gLTEpO1xuICAgICAgICBpZiAoaXNDdXN0b21JdGVtKSB7XG4gICAgICAgICAgICB0aGlzLmFkZEN1c3RvbVZhbHVlKHRoaXMudGV4dCk7XG4gICAgICAgICAgICByZXR1cm47IC8vIFRoZSBjaGFuZ2UgaXMgZW1pdGVkIGFzeW5jaHJvbm9zbHkuXG4gICAgICAgIH1cbiAgICAgICAgLy8gRXhpc3RpbmcgaXRlbXMuXG4gICAgICAgIGlmIChpc1ByZXNlbnQoZXZlbnQuYWRkZWQpKSB7XG4gICAgICAgICAgICBjb25zdCBkYXRhSXRlbSA9IHRoaXMuZGF0YVNlcnZpY2UuaXRlbUF0KGV2ZW50LmFkZGVkKTtcbiAgICAgICAgICAgIGNvbnN0IG5ld0l0ZW0gPSAodGhpcy52YWx1ZVByaW1pdGl2ZSAmJiBpc1ByZXNlbnQoZGF0YUl0ZW0pICYmIGlzUHJlc2VudChkYXRhSXRlbVt0aGlzLnZhbHVlRmllbGRdKSkgPyBkYXRhSXRlbVt0aGlzLnZhbHVlRmllbGRdIDogZGF0YUl0ZW07XG4gICAgICAgICAgICB0aGlzLnZhbHVlID0gWy4uLnRoaXMudmFsdWUsIG5ld0l0ZW1dO1xuICAgICAgICAgICAgdGhpcy5jZHIubWFya0ZvckNoZWNrKCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGlzUHJlc2VudChldmVudC5yZW1vdmVkKSkge1xuICAgICAgICAgICAgY29uc3QgZGF0YUl0ZW0gPSB0aGlzLmRhdGFTZXJ2aWNlLml0ZW1BdChldmVudC5yZW1vdmVkKTtcbiAgICAgICAgICAgIGNvbnN0IHByb3AgPSB0aGlzLnByb3AodGhpcy52YWx1ZUZpZWxkLCB0aGlzLnZhbHVlUHJpbWl0aXZlKTtcbiAgICAgICAgICAgIGNvbnN0IGZpbHRlciQkMSA9IChpdGVtKSA9PiBwcm9wKGl0ZW0pICE9PSBwcm9wKGRhdGFJdGVtKTtcbiAgICAgICAgICAgIHRoaXMudmFsdWUgPSB0aGlzLnZhbHVlLmZpbHRlcihmaWx0ZXIkJDEpO1xuICAgICAgICAgICAgdGhpcy5zZWxlY3RlZERhdGFJdGVtcyA9IHRoaXMuc2VsZWN0ZWREYXRhSXRlbXMuZmlsdGVyKGZpbHRlciQkMSk7XG4gICAgICAgICAgICB0aGlzLnRhZ3MgPSB0aGlzLnRhZ01hcHBlcih0aGlzLnNlbGVjdGVkRGF0YUl0ZW1zLnNsaWNlKCkpO1xuICAgICAgICAgICAgdGhpcy5jZHIuZGV0ZWN0Q2hhbmdlcygpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuZW1pdFZhbHVlQ2hhbmdlKCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEBoaWRkZW5cbiAgICAgKi9cbiAgICBzZXRTdGF0ZSh2YWx1ZSkge1xuICAgICAgICBjb25zdCBvYmplY3RBcnJheSA9IGlzT2JqZWN0QXJyYXkodmFsdWUpO1xuICAgICAgICBsZXQgZGF0YSA9IHRoaXMuZGF0YVNlcnZpY2UuZGF0YTtcbiAgICAgICAgaWYgKHRoaXMuZGF0YVNlcnZpY2UuZ3JvdXBlZCkge1xuICAgICAgICAgICAgZGF0YSA9IGRhdGEuZmlsdGVyKGl0ZW0gPT4gIWl0ZW0uaGVhZGVyKS5tYXAoaXRlbSA9PiBpdGVtLnZhbHVlKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBzZWxlY3Rpb24gPSBzZWxlY3RlZEluZGljZXModGhpcy52YWx1ZSwgZGF0YSwgdGhpcy52YWx1ZUZpZWxkKTtcbiAgICAgICAgdGhpcy5zZWxlY3Rpb25TZXJ2aWNlLnJlc2V0U2VsZWN0aW9uKHNlbGVjdGlvbik7XG4gICAgICAgIGlmICh0aGlzLmlzT3BlbiAmJiB0aGlzLnNlbGVjdGlvblNlcnZpY2UuZm9jdXNlZCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0aGlzLnNlbGVjdGlvblNlcnZpY2UuZm9jdXNlZCA9IHRoaXMuZGF0YVNlcnZpY2UuaXRlbXNDb3VudCA/IHRoaXMuZmlyc3RGb2N1c2FibGVJbmRleCgwKSA6IHRoaXMuYWxsb3dDdXN0b20gPyAtMSA6IHVuZGVmaW5lZDtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIXRoaXMudGV4dCkge1xuICAgICAgICAgICAgaWYgKCEoaXNQcmVzZW50KHZhbHVlKSAmJiB2YWx1ZS5sZW5ndGgpKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5zZWxlY3RlZERhdGFJdGVtcyA9IFtdO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMudmFsdWVQcmltaXRpdmUgJiYgIXRoaXMudmFsdWVGaWVsZCkge1xuICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWREYXRhSXRlbXMgPSB2YWx1ZS5zbGljZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKG9iamVjdEFycmF5IHx8IHRoaXMudmFsdWVQcmltaXRpdmUgJiYgdGhpcy52YWx1ZUZpZWxkKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5zZWxlY3RlZERhdGFJdGVtcyA9IHJlc29sdmVBbGxWYWx1ZXModmFsdWUsIGRhdGEsIHRoaXMudmFsdWVGaWVsZCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGhpcy5zZWxlY3RlZERhdGFJdGVtcy5sZW5ndGggPCB2YWx1ZS5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBwcm9wID0gdGhpcy5wcm9wKHRoaXMudmFsdWVGaWVsZCwgdGhpcy52YWx1ZVByaW1pdGl2ZSk7XG4gICAgICAgICAgICAgICAgY29uc3QgZGF0YUl0ZW1zID0gdmFsdWVcbiAgICAgICAgICAgICAgICAgICAgLm1hcChjdXJyZW50ID0+IHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgZGF0YUl0ZW0gPSB0aGlzLnNlbGVjdGVkRGF0YUl0ZW1zLmZpbmQoaXRlbSA9PiBwcm9wKGl0ZW0pID09PSBwcm9wKGN1cnJlbnQpKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGlzUHJlc2VudChkYXRhSXRlbSkgPyBkYXRhSXRlbSA6IHRoaXMucmVzb2x2ZURhdGFJdGVtRnJvbVRhZ3MoY3VycmVudCk7XG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgLmZpbHRlcihkYXRhSXRlbSA9PiBpc1ByZXNlbnQoZGF0YUl0ZW0pKTtcbiAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdGVkRGF0YUl0ZW1zID0gZGF0YUl0ZW1zO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHRoaXMudGFncyA9IHRoaXMudGFnTWFwcGVyKHRoaXMuc2VsZWN0ZWREYXRhSXRlbXMuc2xpY2UoMCkpO1xuICAgICAgICB0aGlzLmNkci5tYXJrRm9yQ2hlY2soKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQGhpZGRlblxuICAgICAqL1xuICAgIGhhbmRsZUZpbHRlcih0ZXh0KSB7XG4gICAgICAgIHRoaXMudGV4dCA9IHRleHQ7XG4gICAgICAgIGlmICh0ZXh0ICYmICF0aGlzLmlzT3Blbikge1xuICAgICAgICAgICAgdGhpcy5vcGVuUG9wdXAoKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5maWx0ZXJhYmxlKSB7XG4gICAgICAgICAgICB0aGlzLmZpbHRlckNoYW5nZS5lbWl0KHRleHQpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5zZWFyY2hUZXh0QW5kRm9jdXModGV4dCk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5zZWFyY2hiYXIuc2V0SW5wdXRTaXplKCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEBoaWRkZW5cbiAgICAgKi9cbiAgICBwYWdlQ2hhbmdlKGV2ZW50KSB7XG4gICAgICAgIGNvbnN0IHZpcnR1YWwgPSB0aGlzLnZpcnR1YWw7XG4gICAgICAgIHZpcnR1YWwuc2tpcCA9IGV2ZW50LnNraXA7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEBoaWRkZW5cbiAgICAgKi9cbiAgICBjbGVhckZpbHRlcigpIHtcbiAgICAgICAgaWYgKHRoaXMuZmlsdGVyYWJsZSAmJiB0aGlzLnRleHQpIHtcbiAgICAgICAgICAgIHRoaXMuZmlsdGVyQ2hhbmdlLmVtaXQoXCJcIik7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy50ZXh0ID0gXCJcIjtcbiAgICAgICAgLyogQ2xlYXJpbmcgdGhlIHZhbHVlIGZyb20gdGhlIGlucHV0IGFzIHRoZSBzZXRJbnB1dFNpemUgY2FsY3VsYXRpb24gd2lsbCBiZSBpbmNvcnJlY3Qgb3RoZXJ3aXNlLlxuICAgICAgICAgQ2FsbGluZyBjZHIuZGV0ZWN0Q2hhbmdlcyB0byBjbGVhciB0aGUgaW5wdXQgdmFsdWUgYXMgYSByZXN1bHQgb2YgcHJvcGVydHkgYmluZGluZ1xuICAgICAgICAgY2F1c2VzIEpBV1MgdG8gcmVhZCBvdXRkYXRlZCB0YWcgdmFsdWVzIGluIElFIHVwb24gdGFnIHNlbGVjdGlvbiBmb3Igc29tZSByZWFzb24uICovXG4gICAgICAgIHRoaXMuc2VhcmNoYmFyLmlucHV0Lm5hdGl2ZUVsZW1lbnQudmFsdWUgPSBcIlwiO1xuICAgICAgICB0aGlzLnNlYXJjaGJhci5zZXRJbnB1dFNpemUoKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQGhpZGRlblxuICAgICAqL1xuICAgIGhhbmRsZU5hdmlnYXRlKGV2ZW50KSB7XG4gICAgICAgIGNvbnN0IG5hdmlnYXRlSW5wdXQgPSB0aGlzLnRleHQgJiYgZXZlbnQua2V5Q29kZSAhPT0gS2V5cy5kb3duICYmIGV2ZW50LmtleUNvZGUgIT09IEtleXMudXA7XG4gICAgICAgIGNvbnN0IHNlbGVjdFZhbHVlID0gdGhpcy50ZXh0ICYmIGV2ZW50LmtleUNvZGUgPT09IEtleXMuZW50ZXIgfHwgZXZlbnQua2V5Q29kZSA9PT0gS2V5cy5lc2M7XG4gICAgICAgIGNvbnN0IGRlbGV0ZVRhZyA9ICF0aGlzLnRleHQgJiYgZXZlbnQua2V5Q29kZSA9PT0gS2V5cy5iYWNrc3BhY2UgJiYgdGhpcy50YWdzLmxlbmd0aCA+IDA7XG4gICAgICAgIGlmIChkZWxldGVUYWcpIHtcbiAgICAgICAgICAgIHRoaXMuaGFuZGxlQmFja3NwYWNlKCk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMuZGlzYWJsZWQgfHwgbmF2aWdhdGVJbnB1dCAmJiAhc2VsZWN0VmFsdWUpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBldmVudERhdGEgPSBldmVudDtcbiAgICAgICAgY29uc3QgZm9jdXNlZCA9IGlzTmFOKHRoaXMuc2VsZWN0aW9uU2VydmljZS5mb2N1c2VkKSA/IC0xIDogdGhpcy5zZWxlY3Rpb25TZXJ2aWNlLmZvY3VzZWQ7XG4gICAgICAgIGNvbnN0IGFjdGlvbiA9IHRoaXMubmF2aWdhdGlvblNlcnZpY2UucHJvY2Vzcyh7XG4gICAgICAgICAgICBjdXJyZW50OiBmb2N1c2VkLFxuICAgICAgICAgICAgbWF4OiB0aGlzLmRhdGFTZXJ2aWNlLml0ZW1zQ291bnQgLSAxLFxuICAgICAgICAgICAgbWluOiB0aGlzLmFsbG93Q3VzdG9tICYmIHRoaXMudGV4dCA/IC0xIDogMCxcbiAgICAgICAgICAgIG9wZW46IHRoaXMuaXNPcGVuLFxuICAgICAgICAgICAgb3JpZ2luYWxFdmVudDogZXZlbnREYXRhXG4gICAgICAgIH0pO1xuICAgICAgICBpZiAoYWN0aW9uICE9PSBOYXZpZ2F0aW9uQWN0aW9uLlVuZGVmaW5lZCAmJlxuICAgICAgICAgICAgKChhY3Rpb24gPT09IE5hdmlnYXRpb25BY3Rpb24uRW50ZXIgJiYgdGhpcy5pc09wZW4pIHx8IGFjdGlvbiAhPT0gTmF2aWdhdGlvbkFjdGlvbi5FbnRlcikpIHtcbiAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogQGhpZGRlblxuICAgICAqL1xuICAgIGhhbmRsZVJlbW92ZVRhZyh0YWdEYXRhKSB7XG4gICAgICAgIGNvbnN0IGV2ZW50QXJncyA9IG5ldyBSZW1vdmVUYWdFdmVudCh0YWdEYXRhKTtcbiAgICAgICAgaWYgKHRoaXMuZGlzYWJsZWQgfHwgdGhpcy5yZWFkb25seSkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuZm9jdXMoKTtcbiAgICAgICAgdGhpcy5yZW1vdmVUYWcuZW1pdChldmVudEFyZ3MpO1xuICAgICAgICBpZiAoZXZlbnRBcmdzLmlzRGVmYXVsdFByZXZlbnRlZCgpKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRhZ0RhdGEgaW5zdGFuY2VvZiBBcnJheSkge1xuICAgICAgICAgICAgdGhpcy5yZW1vdmVHcm91cFRhZyh0YWdEYXRhKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMucmVtb3ZlU2luZ2xlVGFnKHRhZ0RhdGEpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuY2RyLmRldGVjdENoYW5nZXMoKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQGhpZGRlblxuICAgICAqL1xuICAgIGNsZWFyQWxsKGV2ZW50KSB7XG4gICAgICAgIGV2ZW50LnN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbigpO1xuICAgICAgICB0aGlzLmNsZWFyRmlsdGVyKCk7XG4gICAgICAgIHRoaXMucmVzZXQoKTtcbiAgICAgICAgdGhpcy5lbWl0VmFsdWVDaGFuZ2UoKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQGhpZGRlblxuICAgICAqL1xuICAgIGFkZEN1c3RvbVZhbHVlKHRleHQpIHtcbiAgICAgICAgdGhpcy5jdXN0b21WYWx1ZVN1YmplY3QubmV4dCh0ZXh0KTtcbiAgICB9XG4gICAgbmdBZnRlckNvbnRlbnRDaGVja2VkKCkge1xuICAgICAgICB0aGlzLnZlcmlmeVNldHRpbmdzKCk7XG4gICAgfVxuICAgIG5nRG9DaGVjaygpIHtcbiAgICAgICAgaWYgKHRoaXMuZGlmZmVyKSB7XG4gICAgICAgICAgICBjb25zdCB2YWx1ZUNoYW5nZXMgPSB0aGlzLmRpZmZlci5kaWZmKHRoaXMudmFsdWUpO1xuICAgICAgICAgICAgaWYgKHZhbHVlQ2hhbmdlcyAmJiAhdGhpcy52YWx1ZUNoYW5nZURldGVjdGVkKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5zZWxlY3RlZERhdGFJdGVtcyA9IHRoaXMuZ2V0U2VsZWN0ZWREYXRhSXRlbXModmFsdWVDaGFuZ2VzKTtcbiAgICAgICAgICAgICAgICB0aGlzLnRhZ3MgPSB0aGlzLnRhZ01hcHBlcih0aGlzLnNlbGVjdGVkRGF0YUl0ZW1zLnNsaWNlKDApKTtcbiAgICAgICAgICAgICAgICBpZiAoISh0aGlzLnRhZ3MgJiYgdGhpcy5kYXRhU2VydmljZS5kYXRhKSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNvbnN0IGlzVmFsdWVDdXN0b20gPSAodmFsdWUpID0+IHRoaXMuZGF0YVNlcnZpY2UuaW5kZXhPZih2YWx1ZSkgPT09IC0xO1xuICAgICAgICAgICAgICAgIGNvbnN0IGlzVmFsdWVTZWxlY3RlZCA9ICh2YWx1ZSkgPT4gdGhpcy5zZWxlY3Rpb25TZXJ2aWNlLmlzU2VsZWN0ZWQodGhpcy5kYXRhU2VydmljZS5pbmRleE9mKHZhbHVlKSk7XG4gICAgICAgICAgICAgICAgY29uc3QgcmVzZWxlY3Rpb25SZXF1aXJlZCA9IHRoaXMuc2VsZWN0ZWREYXRhSXRlbXMuc29tZSh2YWx1ZSA9PiAhKGlzVmFsdWVDdXN0b20odmFsdWUpIHx8IGlzVmFsdWVTZWxlY3RlZCh2YWx1ZSkpKTtcbiAgICAgICAgICAgICAgICBpZiAocmVzZWxlY3Rpb25SZXF1aXJlZCkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnNldFN0YXRlKHRoaXMudmFsdWUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICB0aGlzLnZhbHVlQ2hhbmdlRGV0ZWN0ZWQgPSBmYWxzZTtcbiAgICB9XG4gICAgbmdPbkluaXQoKSB7XG4gICAgICAgIHRoaXMucmVuZGVyZXIucmVtb3ZlQXR0cmlidXRlKHRoaXMuaG9zdEVsZW1lbnQsIFwidGFiaW5kZXhcIik7XG4gICAgICAgIHRoaXMuY3JlYXRlQ3VzdG9tVmFsdWVTdHJlYW0oKTtcbiAgICAgICAgdGhpcy5sb2NhbGl6YXRpb25DaGFuZ2VTdWJzY3JpcHRpb24gPSB0aGlzLmxvY2FsaXphdGlvblxuICAgICAgICAgICAgLmNoYW5nZXMuc3Vic2NyaWJlKCh7IHJ0bCB9KSA9PiB7XG4gICAgICAgICAgICB0aGlzLmRpcmVjdGlvbiA9IHJ0bCA/ICdydGwnIDogJ2x0cic7XG4gICAgICAgICAgICB0aGlzLnNldE1lc3NhZ2VzKCk7XG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLnNldE1lc3NhZ2VzKCk7XG4gICAgfVxuICAgIG5nT25DaGFuZ2VzKGNoYW5nZXMpIHtcbiAgICAgICAgY29uc3QgdmlydHVhbCA9IHRoaXMudmlydHVhbDtcbiAgICAgICAgY29uc3QgcmVxdWVzdEluaXRpYWxEYXRhID0gdmlydHVhbCAmJiBjaGFuZ2VzLmRhdGEgJiYgY2hhbmdlcy5kYXRhLmlzRmlyc3RDaGFuZ2UoKTtcbiAgICAgICAgaWYgKHJlcXVlc3RJbml0aWFsRGF0YSkge1xuICAgICAgICAgICAgdGhpcy5wYWdlQ2hhbmdlKHsgc2tpcDogMCwgdGFrZTogdmlydHVhbC5wYWdlU2l6ZSB9KTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy52YWx1ZVByaW1pdGl2ZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0aGlzLnZhbHVlUHJpbWl0aXZlID0gIXRoaXMudmFsdWVGaWVsZDtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaXNDaGFuZ2VkKFwidmFsdWVOb3JtYWxpemVyXCIsIGNoYW5nZXMpKSB7XG4gICAgICAgICAgICB0aGlzLmNyZWF0ZUN1c3RvbVZhbHVlU3RyZWFtKCk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgU1RBVEVfUFJPUFMgPSAvKGRhdGF8dGV4dEZpZWxkfHZhbHVlRmllbGR8dmFsdWVQcmltaXRpdmV8dmFsdWUpL2c7XG4gICAgICAgIGlmIChjaGFuZ2VzLmhhc093blByb3BlcnR5KFwidmFsdWVcIikpIHtcbiAgICAgICAgICAgIHRoaXMudmFsdWVDaGFuZ2VEZXRlY3RlZCA9IHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKFNUQVRFX1BST1BTLnRlc3QoT2JqZWN0LmtleXMoY2hhbmdlcykuam9pbigpKSkge1xuICAgICAgICAgICAgdGhpcy5zZXRTdGF0ZSh0aGlzLnZhbHVlKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBuZ0FmdGVyVmlld0luaXQoKSB7XG4gICAgICAgIHRoaXMuc2VhcmNoYmFyLnNldElucHV0U2l6ZSgpO1xuICAgIH1cbiAgICBuZ09uRGVzdHJveSgpIHtcbiAgICAgICAgdGhpcy5fdG9nZ2xlKGZhbHNlKTtcbiAgICAgICAgdGhpcy51bnN1YnNjcmliZUV2ZW50cygpO1xuICAgICAgICBjbGVhclRpbWVvdXQodGhpcy5tZXNzYWdlc1RpbWVvdXQpO1xuICAgICAgICBpZiAodGhpcy5sb2NhbGl6YXRpb25DaGFuZ2VTdWJzY3JpcHRpb24pIHtcbiAgICAgICAgICAgIHRoaXMubG9jYWxpemF0aW9uQ2hhbmdlU3Vic2NyaXB0aW9uLnVuc3Vic2NyaWJlKCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogVG9nZ2xlcyB0aGUgdmlzaWJpbGl0eSBvZiB0aGUgcG9wdXBcbiAgICAgKiAoW3NlZSBleGFtcGxlXSh7JSBzbHVnIG9wZW5zdGF0ZV9tdWx0aXNlbGVjdCAlfSN0b2Mtc2V0dGluZy10aGUtaW5pdGlhbGx5LW9wZW5lZC1jb21wb25lbnQpKS5cbiAgICAgKiBJZiB5b3UgdXNlIHRoZSBgdG9nZ2xlYCBtZXRob2QgdG8gb3BlbiBvciBjbG9zZSB0aGUgcG9wdXAsIHRoZSByZXNwZWN0aXZlIGBvcGVuYCBhbmQgYGNsb3NlYCBldmVudHMgd2lsbCBub3QgYmUgZmlyZWQuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gb3BlbiAtIFRoZSBzdGF0ZSBvZiB0aGUgcG9wdXAuXG4gICAgICovXG4gICAgdG9nZ2xlKG9wZW4pIHtcbiAgICAgICAgLy8gVGhlIFByb21pc2UgaXMgcmVxdWlyZWQgZm9yIG9wZW5pbmcgdGhlIHBvcHVwIG9uIGxvYWQuXG4gICAgICAgIC8vIE90aGVyd2lzZSwgdGhlIFwiRXhwcmVzc2lvbiBoYXMgY2hhbmdlZC4uLlwiIHR5cGUgZXJyb3Igd2lsbCBiZSB0aHJvd24uXG4gICAgICAgIFByb21pc2UucmVzb2x2ZShudWxsKS50aGVuKCgpID0+IHtcbiAgICAgICAgICAgIHRoaXMuX3RvZ2dsZSgob3BlbiA9PT0gdW5kZWZpbmVkKSA/ICF0aGlzLl9vcGVuIDogb3Blbik7XG4gICAgICAgICAgICB0aGlzLmNkci5tYXJrRm9yQ2hlY2soKTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHVybnMgdGhlIGN1cnJlbnQgb3BlbiBzdGF0ZSBvZiB0aGUgcG9wdXAuXG4gICAgICovXG4gICAgZ2V0IGlzT3BlbigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX29wZW47XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJlc2V0cyB0aGUgdmFsdWUgb2YgdGhlIE11bHRpU2VsZWN0LlxuICAgICAqIElmIHlvdSB1c2UgdGhlIGByZXNldGAgbWV0aG9kIHRvIGNsZWFyIHRoZSB2YWx1ZSBvZiB0aGUgY29tcG9uZW50LFxuICAgICAqIHRoZSBtb2RlbCB3aWxsIG5vdCB1cGRhdGUgYXV0b21hdGljYWxseSBhbmQgdGhlIGBzZWxlY3Rpb25DaGFuZ2VgIGFuZCBgdmFsdWVDaGFuZ2VgIGV2ZW50cyB3aWxsIG5vdCBiZSBmaXJlZC5cbiAgICAgKi9cbiAgICByZXNldCgpIHtcbiAgICAgICAgdGhpcy50ZXh0ID0gXCJcIjtcbiAgICAgICAgdGhpcy52YWx1ZSA9IFtdO1xuICAgICAgICB0aGlzLnNlbGVjdGVkRGF0YUl0ZW1zID0gW107XG4gICAgICAgIHRoaXMuc2V0U3RhdGUoW10pO1xuICAgICAgICB0aGlzLmNkci5tYXJrRm9yQ2hlY2soKTtcbiAgICB9XG4gICAgLy8gTkcgTU9ERUwgQklORElOR1NcbiAgICAvKipcbiAgICAgKiBAaGlkZGVuXG4gICAgICovXG4gICAgd3JpdGVWYWx1ZSh2YWx1ZSkge1xuICAgICAgICB0aGlzLnZhbHVlID0gdmFsdWUgfHwgW107XG4gICAgICAgIHRoaXMuc2V0U3RhdGUodGhpcy52YWx1ZSk7XG4gICAgICAgIHRoaXMudmVyaWZ5U2V0dGluZ3MoKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQGhpZGRlblxuICAgICAqL1xuICAgIHJlZ2lzdGVyT25DaGFuZ2UoZm4pIHtcbiAgICAgICAgdGhpcy5vbkNoYW5nZUNhbGxiYWNrID0gZm47XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEBoaWRkZW5cbiAgICAgKi9cbiAgICByZWdpc3Rlck9uVG91Y2hlZChmbikge1xuICAgICAgICB0aGlzLm9uVG91Y2hlZENhbGxiYWNrID0gZm47XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEBoaWRkZW5cbiAgICAgKi9cbiAgICBzZXREaXNhYmxlZFN0YXRlKGlzRGlzYWJsZWQpIHtcbiAgICAgICAgdGhpcy5kaXNhYmxlZCA9IGlzRGlzYWJsZWQ7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEBoaWRkZW5cbiAgICAgKi9cbiAgICBvblRhZ01hcHBlckNoYW5nZSgpIHtcbiAgICAgICAgdGhpcy50YWdzID0gdGhpcy50YWdNYXBwZXIodGhpcy5zZWxlY3RlZERhdGFJdGVtcy5zbGljZSgwKSk7XG4gICAgICAgIHRoaXMuY2RyLm1hcmtGb3JDaGVjaygpO1xuICAgIH1cbiAgICBwcm9wKGZpZWxkLCB1c2VQcmltaXRpdmUpIHtcbiAgICAgICAgcmV0dXJuIChkYXRhSXRlbSkgPT4ge1xuICAgICAgICAgICAgaWYgKGlzUHJlc2VudChkYXRhSXRlbSkpIHtcbiAgICAgICAgICAgICAgICBpZiAodXNlUHJpbWl0aXZlKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmaWVsZCAmJiBpc09iamVjdChkYXRhSXRlbSkgPyBkYXRhSXRlbVtmaWVsZF0gOiBkYXRhSXRlbTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBkYXRhSXRlbVtmaWVsZF07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH07XG4gICAgfVxuICAgIHN1YnNjcmliZUV2ZW50cygpIHtcbiAgICAgICAgaWYgKCFpc0RvY3VtZW50QXZhaWxhYmxlKCkpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBpc09wZW4gPSAoKSA9PiB0aGlzLmlzT3BlbjtcbiAgICAgICAgY29uc3QgaXNDbG9zZWQgPSAoKSA9PiAhdGhpcy5pc09wZW47XG4gICAgICAgIGNvbnN0IGlzVGFnRm9jdXNlZCA9ICgpID0+ICF0aGlzLmlzT3BlbiAmJiB0aGlzLmZvY3VzZWRUYWdJbmRleCAhPT0gdW5kZWZpbmVkO1xuICAgICAgICBbXG4gICAgICAgICAgICB0aGlzLnNlbGVjdGlvblNlcnZpY2Uub25DaGFuZ2Uuc3Vic2NyaWJlKHRoaXMuaGFuZGxlSXRlbUNoYW5nZS5iaW5kKHRoaXMpKSxcbiAgICAgICAgICAgIHRoaXMubmF2aWdhdGlvblNlcnZpY2UuZXNjLnN1YnNjcmliZSh0aGlzLmNsb3NlUG9wdXAuYmluZCh0aGlzKSksXG4gICAgICAgICAgICB0aGlzLm5hdmlnYXRpb25TZXJ2aWNlLmVudGVyLnBpcGUoZmlsdGVyKGlzT3BlbikpLnN1YnNjcmliZSh0aGlzLmhhbmRsZUVudGVyLmJpbmQodGhpcykpLFxuICAgICAgICAgICAgdGhpcy5uYXZpZ2F0aW9uU2VydmljZS5vcGVuLnN1YnNjcmliZSh0aGlzLm9wZW5Qb3B1cC5iaW5kKHRoaXMpKSxcbiAgICAgICAgICAgIHRoaXMubmF2aWdhdGlvblNlcnZpY2UuY2xvc2Uuc3Vic2NyaWJlKHRoaXMuaGFuZGxlQ2xvc2UuYmluZCh0aGlzKSksXG4gICAgICAgICAgICB0aGlzLm5hdmlnYXRpb25TZXJ2aWNlLnVwLnBpcGUoZmlsdGVyKGlzT3BlbikpLnN1YnNjcmliZSgoZXZlbnQpID0+IHRoaXMuaGFuZGxlVXAoZXZlbnQuaW5kZXgpKSxcbiAgICAgICAgICAgIHRoaXMubmF2aWdhdGlvblNlcnZpY2UuaG9tZS5waXBlKGZpbHRlcigoKSA9PiBpc0Nsb3NlZCkpLnN1YnNjcmliZSh0aGlzLmhhbmRsZUhvbWUuYmluZCh0aGlzKSksXG4gICAgICAgICAgICB0aGlzLm5hdmlnYXRpb25TZXJ2aWNlLmVuZC5waXBlKGZpbHRlcigoKSA9PiBpc0Nsb3NlZCkpLnN1YnNjcmliZSh0aGlzLmhhbmRsZUVuZC5iaW5kKHRoaXMpKSxcbiAgICAgICAgICAgIHRoaXMubmF2aWdhdGlvblNlcnZpY2UuYmFja3NwYWNlLnBpcGUoZmlsdGVyKGlzVGFnRm9jdXNlZCkpLnN1YnNjcmliZSh0aGlzLmhhbmRsZUJhY2tzcGFjZS5iaW5kKHRoaXMpKSxcbiAgICAgICAgICAgIHRoaXMubmF2aWdhdGlvblNlcnZpY2UuZGVsZXRlLnBpcGUoZmlsdGVyKGlzVGFnRm9jdXNlZCkpLnN1YnNjcmliZSh0aGlzLmhhbmRsZURlbGV0ZS5iaW5kKHRoaXMpKSxcbiAgICAgICAgICAgIHRoaXMubmF2aWdhdGlvblNlcnZpY2UubGVmdC5zdWJzY3JpYmUodGhpcy5oYW5kbGVMZWZ0S2V5LmJpbmQodGhpcykpLFxuICAgICAgICAgICAgdGhpcy5uYXZpZ2F0aW9uU2VydmljZS5yaWdodC5zdWJzY3JpYmUodGhpcy5oYW5kbGVSaWdodEtleS5iaW5kKHRoaXMpKSxcbiAgICAgICAgICAgIHRoaXMubmF2aWdhdGlvblNlcnZpY2UuZG93bi5zdWJzY3JpYmUoKGV2ZW50KSA9PiB0aGlzLmhhbmRsZURvd25LZXkoZXZlbnQuaW5kZXgpKVxuICAgICAgICBdLmZvckVhY2gocyA9PiB0aGlzLm9ic2VydmFibGVTdWJzY3JpcHRpb25zLmFkZChzKSk7XG4gICAgfVxuICAgIHVuc3Vic2NyaWJlRXZlbnRzKCkge1xuICAgICAgICBpZiAoIWlzRG9jdW1lbnRBdmFpbGFibGUoKSkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMub2JzZXJ2YWJsZVN1YnNjcmlwdGlvbnMudW5zdWJzY3JpYmUoKTtcbiAgICAgICAgaWYgKHRoaXMuY3VzdG9tVmFsdWVTdWJzY3JpcHRpb24pIHtcbiAgICAgICAgICAgIHRoaXMuY3VzdG9tVmFsdWVTdWJzY3JpcHRpb24udW5zdWJzY3JpYmUoKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZW1vdmVHcm91cFRhZyhkYXRhSXRlbXMpIHtcbiAgICAgICAgY29uc3QgcHJvcCA9IHRoaXMucHJvcCh0aGlzLnZhbHVlRmllbGQsIHRoaXMudmFsdWVQcmltaXRpdmUpO1xuICAgICAgICBsZXQgZGF0YSA9IHRoaXMuZGF0YVNlcnZpY2UuZGF0YTtcbiAgICAgICAgaWYgKHRoaXMuZGF0YVNlcnZpY2UuZ3JvdXBlZCkge1xuICAgICAgICAgICAgZGF0YSA9IGRhdGEuZmlsdGVyKGl0ZW0gPT4gIWl0ZW0uaGVhZGVyKS5tYXAoaXRlbSA9PiBpdGVtLnZhbHVlKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBkYXRhSXRlbVZhbHVlcyA9IG5ldyBTZXQoZGF0YUl0ZW1zLm1hcChpdGVtID0+IHByb3AoaXRlbSkpKTtcbiAgICAgICAgdGhpcy52YWx1ZSA9IHRoaXMudmFsdWUuZmlsdGVyKHZhbHVlID0+ICFkYXRhSXRlbVZhbHVlcy5oYXMocHJvcCh2YWx1ZSkpKTtcbiAgICAgICAgdGhpcy5zZWxlY3RlZERhdGFJdGVtcyA9IHRoaXMuc2VsZWN0ZWREYXRhSXRlbXMuZmlsdGVyKHZhbHVlID0+ICFkYXRhSXRlbVZhbHVlcy5oYXMocHJvcCh2YWx1ZSkpKTtcbiAgICAgICAgY29uc3Qgc2VsZWN0aW9uID0gc2VsZWN0ZWRJbmRpY2VzKHRoaXMudmFsdWUsIGRhdGEsIHRoaXMudmFsdWVGaWVsZCk7XG4gICAgICAgIHRoaXMuc2VsZWN0aW9uU2VydmljZS5yZXNldFNlbGVjdGlvbihzZWxlY3Rpb24pO1xuICAgICAgICB0aGlzLnRhZ3MgPSB0aGlzLnRhZ01hcHBlcih0aGlzLnNlbGVjdGVkRGF0YUl0ZW1zLnNsaWNlKDApKTtcbiAgICAgICAgdGhpcy5jZHIubWFya0ZvckNoZWNrKCk7XG4gICAgICAgIHRoaXMuZW1pdFZhbHVlQ2hhbmdlKCk7XG4gICAgfVxuICAgIHJlbW92ZVNpbmdsZVRhZyhkYXRhSXRlbSkge1xuICAgICAgICBjb25zdCBwcm9wID0gdGhpcy5wcm9wKHRoaXMudmFsdWVGaWVsZCwgdGhpcy52YWx1ZVByaW1pdGl2ZSk7XG4gICAgICAgIGxldCBkYXRhID0gdGhpcy5kYXRhU2VydmljZS5kYXRhO1xuICAgICAgICBpZiAodGhpcy5kYXRhU2VydmljZS5ncm91cGVkKSB7XG4gICAgICAgICAgICBkYXRhID0gZGF0YS5maWx0ZXIoaXRlbSA9PiAhaXRlbS5oZWFkZXIpLm1hcChpdGVtID0+IGl0ZW0udmFsdWUpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGluZGV4ID0gc2VsZWN0ZWRJbmRpY2VzKFtkYXRhSXRlbV0sIGRhdGEsIHRoaXMudmFsdWVGaWVsZClbMF07XG4gICAgICAgIGlmIChpc051bWJlcihpbmRleCkpIHtcbiAgICAgICAgICAgIHRoaXMuc2VsZWN0aW9uU2VydmljZS51bnNlbGVjdChpbmRleCk7XG4gICAgICAgICAgICB0aGlzLnRvZ2dsZVBvcHVwKGZhbHNlKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHsgLy8gdGhlIGRlbGV0ZWQgaXRlbSBpcyBub3QgcHJlc2VudCBpbiB0aGUgc291cmNlXG4gICAgICAgICAgICBjb25zdCBmaWx0ZXIkJDEgPSBpdGVtID0+IHByb3AoaXRlbSkgIT09IHByb3AoZGF0YUl0ZW0pO1xuICAgICAgICAgICAgdGhpcy52YWx1ZSA9IHRoaXMudmFsdWUuZmlsdGVyKGZpbHRlciQkMSk7XG4gICAgICAgICAgICB0aGlzLnNlbGVjdGVkRGF0YUl0ZW1zID0gdGhpcy5zZWxlY3RlZERhdGFJdGVtcy5maWx0ZXIoZmlsdGVyJCQxKTtcbiAgICAgICAgICAgIHRoaXMudGFncyA9IHRoaXMudGFnTWFwcGVyKHRoaXMuc2VsZWN0ZWREYXRhSXRlbXMuc2xpY2UoMCkpO1xuICAgICAgICAgICAgdGhpcy5jZHIubWFya0ZvckNoZWNrKCk7XG4gICAgICAgICAgICB0aGlzLmVtaXRWYWx1ZUNoYW5nZSgpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGNyZWF0ZUN1c3RvbVZhbHVlU3RyZWFtKCkge1xuICAgICAgICBpZiAodGhpcy5jdXN0b21WYWx1ZVN1YnNjcmlwdGlvbikge1xuICAgICAgICAgICAgdGhpcy5jdXN0b21WYWx1ZVN1YnNjcmlwdGlvbi51bnN1YnNjcmliZSgpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuY3VzdG9tVmFsdWVTdWJzY3JpcHRpb24gPSB0aGlzLmN1c3RvbVZhbHVlU3ViamVjdC5waXBlKHRhcCgoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLmxvYWRpbmcgPSB0cnVlO1xuICAgICAgICAgICAgdGhpcy5kaXNhYmxlZCA9IHRydWU7XG4gICAgICAgICAgICB0aGlzLmNkci5kZXRlY3RDaGFuZ2VzKCk7XG4gICAgICAgIH0pLCB0aGlzLnZhbHVlTm9ybWFsaXplciwgY2F0Y2hFcnJvcigoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLmxvYWRpbmcgPSBmYWxzZTtcbiAgICAgICAgICAgIHRoaXMuZGlzYWJsZWQgPSBmYWxzZTtcbiAgICAgICAgICAgIHRoaXMuY2xlYXJGaWx0ZXIoKTtcbiAgICAgICAgICAgIGlmICh0aGlzLmF1dG9DbG9zZSkge1xuICAgICAgICAgICAgICAgIHRoaXMudG9nZ2xlUG9wdXAoZmFsc2UpO1xuICAgICAgICAgICAgICAgIHRoaXMubmV4dFRpY2soKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnNlYXJjaGJhci5mb2N1cygpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5jcmVhdGVDdXN0b21WYWx1ZVN0cmVhbSgpO1xuICAgICAgICAgICAgcmV0dXJuIG9mKG51bGwpO1xuICAgICAgICB9KSlcbiAgICAgICAgICAgIC5zdWJzY3JpYmUoKG5vcm1hbGl6ZWRWYWx1ZSkgPT4ge1xuICAgICAgICAgICAgdGhpcy5sb2FkaW5nID0gZmFsc2U7XG4gICAgICAgICAgICB0aGlzLmRpc2FibGVkID0gZmFsc2U7XG4gICAgICAgICAgICB0aGlzLmNsZWFyRmlsdGVyKCk7XG4gICAgICAgICAgICBpZiAoaXNQcmVzZW50KG5vcm1hbGl6ZWRWYWx1ZSkpIHsgLy9pZiB2YWx1ZU5vcm1hbGl6ZXIgcmV0dXJucyBgbnVsbGAgb3IgYHVuZGVmaW5lZGAgY3VzdG9tIHZhbHVlIGlzIGRpc2NhcmRlZFxuICAgICAgICAgICAgICAgIGNvbnN0IG5ld1ZhbHVlID0gdGhpcy52YWx1ZVByaW1pdGl2ZSA/IGdldHRlcihub3JtYWxpemVkVmFsdWUsIHRoaXMudmFsdWVGaWVsZCkgOiBub3JtYWxpemVkVmFsdWU7XG4gICAgICAgICAgICAgICAgY29uc3QgaXRlbUluZGV4ID0gdGhpcy5kYXRhU2VydmljZS5pbmRleE9mKG5ld1ZhbHVlKTtcbiAgICAgICAgICAgICAgICBjb25zdCBjdXN0b21JdGVtID0gaXRlbUluZGV4ID09PSAtMTtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy52YWx1ZS5pbmRleE9mKG5ld1ZhbHVlKSA9PT0gLTEpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFjdXN0b21JdGVtKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdGlvblNlcnZpY2UuYWRkKGl0ZW1JbmRleCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnZhbHVlID0gWy4uLnRoaXMudmFsdWUsIG5ld1ZhbHVlXTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdGVkRGF0YUl0ZW1zID0gWy4uLnRoaXMuc2VsZWN0ZWREYXRhSXRlbXMsIG5vcm1hbGl6ZWRWYWx1ZV07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBpZiAoIWN1c3RvbUl0ZW0gJiYgdGhpcy5zZWxlY3Rpb25TZXJ2aWNlLmlzU2VsZWN0ZWQoaXRlbUluZGV4KSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zZWxlY3Rpb25TZXJ2aWNlLnVuc2VsZWN0KGl0ZW1JbmRleCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnZhbHVlLnNwbGljZSh0aGlzLnZhbHVlLmluZGV4T2YobmV3VmFsdWUpLCAxKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWREYXRhSXRlbXMgPSB0aGlzLnNlbGVjdGVkRGF0YUl0ZW1zLmZpbHRlcihpdGVtID0+IGdldHRlcihpdGVtLCB0aGlzLnZhbHVlRmllbGQpICE9PSBuZXdWYWx1ZSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdGhpcy50YWdzID0gdGhpcy50YWdNYXBwZXIodGhpcy5zZWxlY3RlZERhdGFJdGVtcy5zbGljZSgwKSk7XG4gICAgICAgICAgICAgICAgdGhpcy5lbWl0VmFsdWVDaGFuZ2UoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGlzLmF1dG9DbG9zZSkge1xuICAgICAgICAgICAgICAgIHRoaXMudG9nZ2xlUG9wdXAoZmFsc2UpO1xuICAgICAgICAgICAgICAgIHRoaXMubmV4dFRpY2soKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnNlYXJjaGJhci5mb2N1cygpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG4gICAgaGFuZGxlSXRlbUNoYW5nZShldmVudCkge1xuICAgICAgICB0aGlzLmNoYW5nZShldmVudCk7XG4gICAgICAgIGlmICh0aGlzLmF1dG9DbG9zZSkge1xuICAgICAgICAgICAgdGhpcy50b2dnbGVQb3B1cChmYWxzZSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGlzUHJlc2VudChldmVudC5hZGRlZCkgJiYgZXZlbnQuYWRkZWQgIT09IC0xKSB7XG4gICAgICAgICAgICB0aGlzLmNsZWFyRmlsdGVyKCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgaGFuZGxlRW50ZXIoZXZlbnQpIHtcbiAgICAgICAgY29uc3Qgc2VydmljZSA9IHRoaXMuc2VsZWN0aW9uU2VydmljZTtcbiAgICAgICAgY29uc3QgZm9jdXNlZEluZGV4ID0gdGhpcy5zZWxlY3Rpb25TZXJ2aWNlLmZvY3VzZWQ7XG4gICAgICAgIGlmICh0aGlzLmlzT3Blbikge1xuICAgICAgICAgICAgZXZlbnQub3JpZ2luYWxFdmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChmb2N1c2VkSW5kZXggPT09IC0xKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5hbGxvd0N1c3RvbSAmJiB0aGlzLnRleHQpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmFkZEN1c3RvbVZhbHVlKHRoaXMudGV4dCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm47IC8vIENsZWFyIGZpbHRlciAmIGNsb3NlIGFyZSBkb25lIGF0IGN1c3RvbVZhbHVlU3Vic2NyaXB0aW9uIGR1ZSB0byByYWNlIGNvbmRpdGlvbnMuXG4gICAgICAgIH1cbiAgICAgICAgaWYgKHNlcnZpY2UuaXNTZWxlY3RlZChmb2N1c2VkSW5kZXgpKSB7XG4gICAgICAgICAgICBzZXJ2aWNlLnVuc2VsZWN0KGZvY3VzZWRJbmRleCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBzZXJ2aWNlLmFkZChmb2N1c2VkSW5kZXgpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuY2xlYXJGaWx0ZXIoKTtcbiAgICAgICAgaWYgKHRoaXMuYXV0b0Nsb3NlKSB7XG4gICAgICAgICAgICB0aGlzLnRvZ2dsZVBvcHVwKGZhbHNlKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBoYW5kbGVDbG9zZSgpIHtcbiAgICAgICAgdGhpcy5jbG9zZVBvcHVwKCk7XG4gICAgICAgIHRoaXMuc2VhcmNoYmFyLmZvY3VzKCk7XG4gICAgfVxuICAgIGhhbmRsZUVuZCgpIHtcbiAgICAgICAgdGhpcy5mb2N1c2VkVGFnSW5kZXggPSB0aGlzLnRhZ3MubGVuZ3RoIC0gMTtcbiAgICB9XG4gICAgaGFuZGxlSG9tZSgpIHtcbiAgICAgICAgdGhpcy5mb2N1c2VkVGFnSW5kZXggPSAwO1xuICAgIH1cbiAgICBoYW5kbGVVcChpbmRleCkge1xuICAgICAgICB0aGlzLnNlbGVjdGlvblNlcnZpY2UuZm9jdXNlZCA9IGluZGV4O1xuICAgIH1cbiAgICBoYW5kbGVCYWNrc3BhY2UoKSB7XG4gICAgICAgIGlmICh0aGlzLmZvY3VzZWRUYWdJbmRleCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0aGlzLmhhbmRsZURlbGV0ZSgpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5oYW5kbGVSZW1vdmVUYWcodGhpcy50YWdzW3RoaXMudGFncy5sZW5ndGggLSAxXSk7XG4gICAgICAgICAgICB0aGlzLnNlYXJjaGJhci5mb2N1cygpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGhhbmRsZURlbGV0ZSgpIHtcbiAgICAgICAgdGhpcy5oYW5kbGVSZW1vdmVUYWcodGhpcy50YWdzW3RoaXMuZm9jdXNlZFRhZ0luZGV4XSk7XG4gICAgICAgIGlmICh0aGlzLmZvY3VzZWRUYWdJbmRleCA9PT0gdGhpcy50YWdzLmxlbmd0aCkge1xuICAgICAgICAgICAgdGhpcy5mb2N1c2VkVGFnSW5kZXggPSB1bmRlZmluZWQ7XG4gICAgICAgIH1cbiAgICB9XG4gICAgaGFuZGxlTGVmdEtleSgpIHtcbiAgICAgICAgaWYgKHRoaXMuZGlyZWN0aW9uID09PSAncnRsJykge1xuICAgICAgICAgICAgaWYgKHRoaXMuZm9jdXNlZFRhZ0luZGV4ID09PSAwKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5mb2N1c2VkVGFnSW5kZXggPSB1bmRlZmluZWQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGhpcy5mb2N1c2VkVGFnSW5kZXggPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5mb2N1c2VkVGFnSW5kZXggPT09IHVuZGVmaW5lZCB8fCB0aGlzLmZvY3VzZWRUYWdJbmRleCA8IDApIHtcbiAgICAgICAgICAgIHRoaXMuZm9jdXNlZFRhZ0luZGV4ID0gdGhpcy50YWdzLmxlbmd0aCAtIDE7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAodGhpcy5mb2N1c2VkVGFnSW5kZXggIT09IDApIHtcbiAgICAgICAgICAgIHRoaXMuZm9jdXNlZFRhZ0luZGV4LS07XG4gICAgICAgIH1cbiAgICB9XG4gICAgaGFuZGxlRG93bktleShpbmRleCkge1xuICAgICAgICBpZiAodGhpcy5pc09wZW4pIHtcbiAgICAgICAgICAgIHRoaXMuc2VsZWN0aW9uU2VydmljZS5mb2N1c2VkID0gaW5kZXggfHwgdGhpcy5maXJzdEZvY3VzYWJsZUluZGV4KDApO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5vcGVuUG9wdXAoKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBoYW5kbGVSaWdodEtleSgpIHtcbiAgICAgICAgY29uc3QgbGFzdCA9IHRoaXMudGFncy5sZW5ndGggLSAxO1xuICAgICAgICBpZiAodGhpcy5kaXJlY3Rpb24gPT09ICdydGwnKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5mb2N1c2VkVGFnSW5kZXggPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIHRoaXMuZm9jdXNlZFRhZ0luZGV4ID0gMDtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGhpcy5mb2N1c2VkVGFnSW5kZXggPT09IGxhc3QpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMuZm9jdXNlZFRhZ0luZGV4ID09PSBsYXN0KSB7XG4gICAgICAgICAgICB0aGlzLmZvY3VzZWRUYWdJbmRleCA9IHVuZGVmaW5lZDtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICh0aGlzLmZvY3VzZWRUYWdJbmRleCA8IGxhc3QpIHtcbiAgICAgICAgICAgIHRoaXMuZm9jdXNlZFRhZ0luZGV4Kys7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZmluZEluZGV4KHRleHQsIHN0YXJ0c0Zyb20gPSAwKSB7XG4gICAgICAgIGxldCBpdGVtVGV4dDtcbiAgICAgICAgdGV4dCA9IHRleHQudG9Mb3dlckNhc2UoKTtcbiAgICAgICAgbGV0IGluZGV4ID0gdGhpcy5kYXRhU2VydmljZS5maW5kSW5kZXgoaXRlbSA9PiB7XG4gICAgICAgICAgICBpZiAodGhpcy5kYXRhU2VydmljZS5ncm91cGVkKSB7XG4gICAgICAgICAgICAgICAgaXRlbVRleHQgPSB0aGlzLnByb3AodGhpcy50ZXh0RmllbGQsIHRoaXMudmFsdWVQcmltaXRpdmUpKGl0ZW0udmFsdWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgaXRlbVRleHQgPSB0aGlzLnByb3AodGhpcy50ZXh0RmllbGQsIHRoaXMudmFsdWVQcmltaXRpdmUpKGl0ZW0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaXRlbVRleHQgPSAhaXNQcmVzZW50KGl0ZW1UZXh0KSA/IFwiXCIgOiBpdGVtVGV4dC50b1N0cmluZygpLnRvTG93ZXJDYXNlKCk7XG4gICAgICAgICAgICByZXR1cm4gdGV4dCAmJiBpdGVtVGV4dC5zdGFydHNXaXRoKHRleHQpO1xuICAgICAgICB9LCBzdGFydHNGcm9tKTtcbiAgICAgICAgaWYgKHRoaXMuZGlzYWJsZWRJdGVtc1NlcnZpY2UuaXNJbmRleERpc2FibGVkKGluZGV4KSkge1xuICAgICAgICAgICAgcmV0dXJuIChpbmRleCArIDEgPiB0aGlzLmRhdGFTZXJ2aWNlLml0ZW1zQ291bnQpID8gLTEgOiB0aGlzLmZpbmRJbmRleCh0ZXh0LCBpbmRleCArIDEpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIGluZGV4O1xuICAgICAgICB9XG4gICAgfVxuICAgIHNlYXJjaFRleHRBbmRGb2N1cyh0ZXh0KSB7XG4gICAgICAgIGNvbnN0IGluZGV4ID0gdGhpcy5maW5kSW5kZXgodGV4dCk7XG4gICAgICAgIHRoaXMuc2VsZWN0aW9uU2VydmljZS5mb2N1c2VkID0gaW5kZXg7XG4gICAgfVxuICAgIGNsb3NlUG9wdXAoKSB7XG4gICAgICAgIHRoaXMudG9nZ2xlUG9wdXAoZmFsc2UpO1xuICAgICAgICB0aGlzLmZvY3VzZWRUYWdJbmRleCA9IHVuZGVmaW5lZDtcbiAgICB9XG4gICAgb3BlblBvcHVwKCkge1xuICAgICAgICB0aGlzLnRvZ2dsZVBvcHVwKHRydWUpO1xuICAgICAgICB0aGlzLmZvY3VzZWRUYWdJbmRleCA9IHVuZGVmaW5lZDtcbiAgICB9XG4gICAgdG9nZ2xlUG9wdXAob3Blbikge1xuICAgICAgICBjb25zdCBpc0Rpc2FibGVkID0gdGhpcy5kaXNhYmxlZCB8fCB0aGlzLnJlYWRvbmx5O1xuICAgICAgICBjb25zdCBzYW1lU3RhdGUgPSB0aGlzLmlzT3BlbiA9PT0gb3BlbjtcbiAgICAgICAgaWYgKGlzRGlzYWJsZWQgfHwgc2FtZVN0YXRlKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgaXNEZWZhdWx0UHJldmVudGVkID0gdGhpcy50cmlnZ2VyUG9wdXBFdmVudHMob3Blbik7XG4gICAgICAgIGlmICghaXNEZWZhdWx0UHJldmVudGVkKSB7XG4gICAgICAgICAgICB0aGlzLl90b2dnbGUob3Blbik7XG4gICAgICAgIH1cbiAgICB9XG4gICAgdHJpZ2dlclBvcHVwRXZlbnRzKG9wZW4pIHtcbiAgICAgICAgY29uc3QgZXZlbnRBcmdzID0gbmV3IFByZXZlbnRhYmxlRXZlbnQoKTtcbiAgICAgICAgaWYgKG9wZW4pIHtcbiAgICAgICAgICAgIHRoaXMub3Blbi5lbWl0KGV2ZW50QXJncyk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aGlzLmNsb3NlLmVtaXQoZXZlbnRBcmdzKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZXZlbnRBcmdzLmlzRGVmYXVsdFByZXZlbnRlZCgpO1xuICAgIH1cbiAgICBfdG9nZ2xlKG9wZW4pIHtcbiAgICAgICAgdGhpcy5fb3BlbiA9IChvcGVuID09PSB1bmRlZmluZWQpID8gIXRoaXMuX29wZW4gOiBvcGVuO1xuICAgICAgICB0aGlzLmRlc3Ryb3lQb3B1cCgpO1xuICAgICAgICBpZiAodGhpcy5fb3Blbikge1xuICAgICAgICAgICAgdGhpcy5jcmVhdGVQb3B1cCgpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGRlc3Ryb3lQb3B1cCgpIHtcbiAgICAgICAgaWYgKHRoaXMucG9wdXBSZWYpIHtcbiAgICAgICAgICAgIHRoaXMucG9wdXBSZWYucG9wdXBFbGVtZW50XG4gICAgICAgICAgICAgICAgLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ21vdXNlZG93bicsIHRoaXMucG9wdXBNb3VzZURvd25IYW5kbGVyKTtcbiAgICAgICAgICAgIHRoaXMucG9wdXBSZWYuY2xvc2UoKTtcbiAgICAgICAgICAgIHRoaXMucG9wdXBSZWYgPSBudWxsO1xuICAgICAgICB9XG4gICAgfVxuICAgIGNyZWF0ZVBvcHVwKCkge1xuICAgICAgICBpZiAodGhpcy52aXJ0dWFsKSB7XG4gICAgICAgICAgICB0aGlzLnZpcnR1YWwuc2tpcCA9IDA7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgaG9yaXpvbnRhbEFsaWduID0gdGhpcy5kaXJlY3Rpb24gPT09IFwicnRsXCIgPyBcInJpZ2h0XCIgOiBcImxlZnRcIjtcbiAgICAgICAgY29uc3QgYW5jaG9yUG9zaXRpb24gPSB7IGhvcml6b250YWw6IGhvcml6b250YWxBbGlnbiwgdmVydGljYWw6IFwiYm90dG9tXCIgfTtcbiAgICAgICAgY29uc3QgcG9wdXBQb3NpdGlvbiA9IHsgaG9yaXpvbnRhbDogaG9yaXpvbnRhbEFsaWduLCB2ZXJ0aWNhbDogXCJ0b3BcIiB9O1xuICAgICAgICB0aGlzLnBvcHVwUmVmID0gdGhpcy5wb3B1cFNlcnZpY2Uub3Blbih7XG4gICAgICAgICAgICBhbmNob3I6IHRoaXMud3JhcHBlcixcbiAgICAgICAgICAgIGFuY2hvckFsaWduOiBhbmNob3JQb3NpdGlvbixcbiAgICAgICAgICAgIGFuaW1hdGU6IHRoaXMucG9wdXBTZXR0aW5ncy5hbmltYXRlLFxuICAgICAgICAgICAgYXBwZW5kVG86IHRoaXMuYXBwZW5kVG8sXG4gICAgICAgICAgICBjb250ZW50OiB0aGlzLnBvcHVwVGVtcGxhdGUsXG4gICAgICAgICAgICBwb3B1cEFsaWduOiBwb3B1cFBvc2l0aW9uLFxuICAgICAgICAgICAgcG9wdXBDbGFzczogdGhpcy5saXN0Q29udGFpbmVyQ2xhc3NlcyxcbiAgICAgICAgICAgIHBvc2l0aW9uTW9kZTogJ2Fic29sdXRlJ1xuICAgICAgICB9KTtcbiAgICAgICAgY29uc3QgcG9wdXBXcmFwcGVyID0gdGhpcy5wb3B1cFJlZi5wb3B1cEVsZW1lbnQ7XG4gICAgICAgIGNvbnN0IHsgbWluLCBtYXggfSA9IHRoaXMud2lkdGg7XG4gICAgICAgIHBvcHVwV3JhcHBlci5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWRvd24nLCB0aGlzLnBvcHVwTW91c2VEb3duSGFuZGxlcik7XG4gICAgICAgIHBvcHVwV3JhcHBlci5zdHlsZS5taW5XaWR0aCA9IG1pbjtcbiAgICAgICAgcG9wdXBXcmFwcGVyLnN0eWxlLndpZHRoID0gbWF4O1xuICAgICAgICBwb3B1cFdyYXBwZXIuc3R5bGUuaGVpZ2h0ID0gdGhpcy5oZWlnaHQ7XG4gICAgICAgIHBvcHVwV3JhcHBlci5zZXRBdHRyaWJ1dGUoXCJkaXJcIiwgdGhpcy5kaXJlY3Rpb24pO1xuICAgICAgICB0aGlzLnBvcHVwUmVmLnBvcHVwT3Blbi5zdWJzY3JpYmUoKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5jZHIuZGV0ZWN0Q2hhbmdlcygpO1xuICAgICAgICAgICAgdGhpcy5vcHRpb25zTGlzdC5zY3JvbGxUb0l0ZW0odGhpcy5zZWxlY3Rpb25TZXJ2aWNlLmZvY3VzZWQpO1xuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5wb3B1cFJlZi5wb3B1cEFuY2hvclZpZXdwb3J0TGVhdmUuc3Vic2NyaWJlKCgpID0+IHtcbiAgICAgICAgICAgIHRoaXMudG9nZ2xlUG9wdXAoZmFsc2UpO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgZW1pdFZhbHVlQ2hhbmdlKCkge1xuICAgICAgICB0aGlzLm9uQ2hhbmdlQ2FsbGJhY2sodGhpcy52YWx1ZSk7XG4gICAgICAgIHRoaXMudmFsdWVDaGFuZ2UuZW1pdCh0aGlzLnZhbHVlKTtcbiAgICB9XG4gICAgZ2V0U2VsZWN0ZWREYXRhSXRlbXModmFsdWVDaGFuZ2VzKSB7XG4gICAgICAgIGNvbnN0IGlzQm91bmRUb0NvbXBsZXhEYXRhID0gaXNPYmplY3RBcnJheSh0aGlzLmRhdGEpO1xuICAgICAgICBjb25zdCBwcm9wID0gdGhpcy5wcm9wKHRoaXMudmFsdWVGaWVsZCwgdGhpcy52YWx1ZVByaW1pdGl2ZSk7XG4gICAgICAgIGxldCBjdXJyZW50VmFsdWU7XG4gICAgICAgIGxldCBpbmRleDtcbiAgICAgICAgbGV0IHNlbGVjdGVkRGF0YUl0ZW1zID0gW107XG4gICAgICAgIHZhbHVlQ2hhbmdlcy5mb3JFYWNoSXRlbSgodmFsdWUpID0+IHtcbiAgICAgICAgICAgIGN1cnJlbnRWYWx1ZSA9IHZhbHVlLmN1cnJlbnRWYWx1ZTtcbiAgICAgICAgICAgIGlmICh0aGlzLmRhdGFTZXJ2aWNlLmdyb3VwZWQpIHtcbiAgICAgICAgICAgICAgICBpbmRleCA9IHRoaXMuZGF0YVNlcnZpY2UuZmluZEluZGV4KChpdGVtKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBwcm9wKGl0ZW0udmFsdWUpID09PSBwcm9wKGN1cnJlbnRWYWx1ZSk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBpbmRleCA9IHRoaXMuZGF0YVNlcnZpY2UuZmluZEluZGV4KChpdGVtKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBwcm9wKGl0ZW0pID09PSBwcm9wKGN1cnJlbnRWYWx1ZSk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoaW5kZXggIT09IC0xKSB7XG4gICAgICAgICAgICAgICAgc2VsZWN0ZWREYXRhSXRlbXMucHVzaCh0aGlzLmRhdGFTZXJ2aWNlLml0ZW1BdChpbmRleCkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoaXNQcmVzZW50KHZhbHVlKSAmJiAhKGlzQm91bmRUb0NvbXBsZXhEYXRhICYmIHRoaXMudmFsdWVQcmltaXRpdmUpKSB7IC8vdmFsdWUgaXMgbm90IHByZXNlbnQgaW4gdGhlIGRhdGFcbiAgICAgICAgICAgICAgICBzZWxlY3RlZERhdGFJdGVtcy5wdXNoKGN1cnJlbnRWYWx1ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHsgLy8gdmFsdWUgaXMgcHJpbWl0aXZlLCBkYXRhSXRlbSBpcyBhbiBvYmplY3QsIGRhdGFJdGVtIGlzIG5vdCBwcmVzZW50IGluIHRoZSBjdXJyZW50IGRhdGEgc2V0XG4gICAgICAgICAgICAgICAgY29uc3QgaXRlbSA9IHRoaXMucmVzb2x2ZURhdGFJdGVtRnJvbVRhZ3MoY3VycmVudFZhbHVlKTtcbiAgICAgICAgICAgICAgICBpZiAoaXNQcmVzZW50KGl0ZW0pKSB7XG4gICAgICAgICAgICAgICAgICAgIHNlbGVjdGVkRGF0YUl0ZW1zLnB1c2goaXRlbSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIHNlbGVjdGVkRGF0YUl0ZW1zO1xuICAgIH1cbiAgICByZXNvbHZlRGF0YUl0ZW1Gcm9tVGFncyh2YWx1ZSkge1xuICAgICAgICBpZiAoISh0aGlzLnRhZ3MgJiYgdGhpcy50YWdzLmxlbmd0aCAmJiBpc1ByZXNlbnQodmFsdWUpKSkge1xuICAgICAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICAgICAgfVxuICAgICAgICAvLyBGbGF0dGVuaW5nIHRoZSB0YWdzIGFycmF5IGluIGNhc2Ugb2YgYSBzdW1tYXJ5IHRhZyBvY2N1cnJlbmNlLlxuICAgICAgICBjb25zdCB0YWdzID0gdGhpcy50YWdzLnJlZHVjZSgoYWNjLCB0YWcpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGl0ZW1zID0gaXNBcnJheSh0YWcpID8gdGFnIDogW3RhZ107XG4gICAgICAgICAgICBhY2MucHVzaCguLi5pdGVtcyk7XG4gICAgICAgICAgICByZXR1cm4gYWNjO1xuICAgICAgICB9LCBbXSk7XG4gICAgICAgIGNvbnN0IHByb3AgPSB0aGlzLnByb3AodGhpcy52YWx1ZUZpZWxkLCB0aGlzLnZhbHVlUHJpbWl0aXZlKTtcbiAgICAgICAgcmV0dXJuIHRhZ3MuZmluZCh0YWcgPT4gcHJvcCh0YWcpID09PSBwcm9wKHZhbHVlKSk7XG4gICAgfVxuICAgIGZpcnN0Rm9jdXNhYmxlSW5kZXgoaW5kZXgpIHtcbiAgICAgICAgY29uc3QgbWF4SW5kZXggPSB0aGlzLmRhdGFTZXJ2aWNlLml0ZW1zQ291bnQ7XG4gICAgICAgIGlmICh0aGlzLmRpc2FibGVkSXRlbXNTZXJ2aWNlLmlzSW5kZXhEaXNhYmxlZChpbmRleCkpIHtcbiAgICAgICAgICAgIGNvbnN0IG5leHRJbmRleCA9IGluZGV4ICsgMTtcbiAgICAgICAgICAgIHJldHVybiAobmV4dEluZGV4IDwgbWF4SW5kZXgpID8gdGhpcy5maXJzdEZvY3VzYWJsZUluZGV4KG5leHRJbmRleCkgOiB1bmRlZmluZWQ7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gaW5kZXg7XG4gICAgICAgIH1cbiAgICB9XG4gICAgbmV4dFRpY2soZikge1xuICAgICAgICB0aGlzLl96b25lLnJ1bk91dHNpZGVBbmd1bGFyKCgpID0+IHtcbiAgICAgICAgICAgIC8vIFVzZSBgc2V0VGltZW91dGAgaW5zdGVhZCBvZiBhIHJlc29sdmVkIHByb21pc2VcbiAgICAgICAgICAgIC8vIGJlY2F1c2UgdGhlIGxhdHRlciBkb2VzIG5vdCB3YWl0IGxvbmcgZW5vdWdoLlxuICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB0aGlzLl96b25lLnJ1bihmKSk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBzZXRNZXNzYWdlcygpIHtcbiAgICAgICAgdGhpcy5fem9uZS5ydW5PdXRzaWRlQW5ndWxhcigoKSA9PiB7XG4gICAgICAgICAgICBjbGVhclRpbWVvdXQodGhpcy5tZXNzYWdlc1RpbWVvdXQpO1xuICAgICAgICAgICAgdGhpcy5tZXNzYWdlc1RpbWVvdXQgPSBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLm5vRGF0YVRleHQgPSB0aGlzLmxvY2FsaXphdGlvbi5nZXQoJ25vRGF0YVRleHQnKTtcbiAgICAgICAgICAgICAgICB0aGlzLmNkci5kZXRlY3RDaGFuZ2VzKCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgfVxufVxuTXVsdGlTZWxlY3RDb21wb25lbnQuZGVjb3JhdG9ycyA9IFtcbiAgICB7IHR5cGU6IENvbXBvbmVudCwgYXJnczogW3tcbiAgICAgICAgICAgICAgICBleHBvcnRBczogJ2tlbmRvTXVsdGlTZWxlY3QnLFxuICAgICAgICAgICAgICAgIHByb3ZpZGVyczogW1xuICAgICAgICAgICAgICAgICAgICBNVUxUSVNFTEVDVF9WQUxVRV9BQ0NFU1NPUixcbiAgICAgICAgICAgICAgICAgICAgRGF0YVNlcnZpY2UsXG4gICAgICAgICAgICAgICAgICAgIFNlbGVjdGlvblNlcnZpY2UsXG4gICAgICAgICAgICAgICAgICAgIE5hdmlnYXRpb25TZXJ2aWNlLFxuICAgICAgICAgICAgICAgICAgICBEaXNhYmxlZEl0ZW1zU2VydmljZSxcbiAgICAgICAgICAgICAgICAgICAgTG9jYWxpemF0aW9uU2VydmljZSxcbiAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgcHJvdmlkZTogTDEwTl9QUkVGSVgsXG4gICAgICAgICAgICAgICAgICAgICAgICB1c2VWYWx1ZTogJ2tlbmRvLm11bHRpc2VsZWN0J1xuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICBwcm92aWRlOiBGaWx0ZXJhYmxlRHJvcERvd25Db21wb25lbnRCYXNlLCB1c2VFeGlzdGluZzogZm9yd2FyZFJlZigoKSA9PiBNdWx0aVNlbGVjdENvbXBvbmVudClcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgcHJvdmlkZTogS2VuZG9JbnB1dCwgdXNlRXhpc3Rpbmc6IGZvcndhcmRSZWYoKCkgPT4gTXVsdGlTZWxlY3RDb21wb25lbnQpXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBdLFxuICAgICAgICAgICAgICAgIHNlbGVjdG9yOiAna2VuZG8tbXVsdGlzZWxlY3QnLFxuICAgICAgICAgICAgICAgIHRlbXBsYXRlOiBgXG4gICAgICAgIDxuZy1jb250YWluZXIga2VuZG9NdWx0aVNlbGVjdExvY2FsaXplZE1lc3NhZ2VzXG4gICAgICAgICAgICBpMThuLW5vRGF0YVRleHQ9XCJrZW5kby5tdWx0aXNlbGVjdC5ub0RhdGFUZXh0fFRoZSB0ZXh0IGRpc3BsYXllZCBpbiB0aGUgcG9wdXAgd2hlbiB0aGVyZSBhcmUgbm8gaXRlbXNcIlxuICAgICAgICAgICAgbm9EYXRhVGV4dD1cIk5PIERBVEEgRk9VTkRcIlxuXG4gICAgICAgICAgICBpMThuLWNsZWFyVGl0bGU9XCJrZW5kby5jb21ib2JveC5jbGVhclRpdGxlfFRoZSB0aXRsZSBvZiB0aGUgY2xlYXIgYnV0dG9uXCJcbiAgICAgICAgICAgIGNsZWFyVGl0bGU9XCJjbGVhclwiXG4gICAgICAgID5cbiAgICAgICAgPC9uZy1jb250YWluZXI+XG4gICAgICAgIDxkaXYgY2xhc3M9XCJrLW11bHRpc2VsZWN0LXdyYXAgay1mbG9hdHdyYXBcIlxuICAgICAgICAgICAgI3dyYXBwZXJcbiAgICAgICAgICAgIChtb3VzZWRvd24pPVwid3JhcHBlck1vdXNlZG93bigkZXZlbnQpXCJcbiAgICAgICAgPlxuICAgICAgICAgICAgPGtlbmRvLXRhZ2xpc3RcbiAgICAgICAgICAgICAgICBbaWRdPVwidGFnTGlzdElkXCJcbiAgICAgICAgICAgICAgICBbdGFnc109XCJ0YWdzXCJcbiAgICAgICAgICAgICAgICBbdGV4dEZpZWxkXT1cInRleHRGaWVsZFwiXG4gICAgICAgICAgICAgICAgW3ZhbHVlRmllbGRdPVwidmFsdWVGaWVsZFwiXG4gICAgICAgICAgICAgICAgW2ZvY3VzZWRdPVwiZm9jdXNlZFRhZ0luZGV4XCJcbiAgICAgICAgICAgICAgICBbZGlzYWJsZWRdPVwiZGlzYWJsZWRcIlxuICAgICAgICAgICAgICAgIFt0ZW1wbGF0ZV09XCJ0YWdUZW1wbGF0ZVwiXG4gICAgICAgICAgICAgICAgW2dyb3VwVGVtcGxhdGVdPVwiZ3JvdXBUYWdUZW1wbGF0ZVwiXG4gICAgICAgICAgICAgICAgW3RhZ1ByZWZpeF09XCJ0YWdQcmVmaXhcIlxuICAgICAgICAgICAgICAgIChyZW1vdmVUYWcpPVwiaGFuZGxlUmVtb3ZlVGFnKCRldmVudClcIlxuICAgICAgICAgICAgPlxuICAgICAgICAgICAgPC9rZW5kby10YWdsaXN0PlxuICAgICAgICAgICAgPGtlbmRvLXNlYXJjaGJhclxuICAgICAgICAgICAgICAgICNzZWFyY2hiYXJcbiAgICAgICAgICAgICAgICBbaWRdPVwiZm9jdXNhYmxlSWRcIlxuICAgICAgICAgICAgICAgIFtyb2xlXT1cIidsaXN0Ym94J1wiXG4gICAgICAgICAgICAgICAgW3RhZ0xpc3RJZF09XCJ0YWdMaXN0SWRcIlxuICAgICAgICAgICAgICAgIFthY3RpdmVEZXNjZW5kYW50XT1cImFjdGl2ZURlc2NlbmRhbnRcIlxuICAgICAgICAgICAgICAgIFtub0RhdGFMYWJlbF09XCJub0RhdGFMYWJlbFwiXG4gICAgICAgICAgICAgICAgW3VzZXJJbnB1dF09XCJ0ZXh0XCJcbiAgICAgICAgICAgICAgICBbZGlzYWJsZWRdPVwiZGlzYWJsZWRcIlxuICAgICAgICAgICAgICAgIFtyZWFkb25seV09XCJyZWFkb25seVwiXG4gICAgICAgICAgICAgICAgW3RhYkluZGV4XT1cInRhYkluZGV4XCJcbiAgICAgICAgICAgICAgICBbcG9wdXBPcGVuXT1cImlzT3BlblwiXG4gICAgICAgICAgICAgICAgW3BsYWNlaG9sZGVyXT1cInBsYWNlaG9sZGVyXCJcbiAgICAgICAgICAgICAgICAob25OYXZpZ2F0ZSk9XCJoYW5kbGVOYXZpZ2F0ZSgkZXZlbnQpXCJcbiAgICAgICAgICAgICAgICAodmFsdWVDaGFuZ2UpPVwiaGFuZGxlRmlsdGVyKCRldmVudClcIlxuICAgICAgICAgICAgICAgIChvbkJsdXIpPVwib25TZWFyY2hCYXJCbHVyKClcIlxuICAgICAgICAgICAgICAgIChvbkZvY3VzKT1cIm9uU2VhcmNoQmFyRm9jdXMoKVwiXG4gICAgICAgICAgICA+XG4gICAgICAgICAgICA8L2tlbmRvLXNlYXJjaGJhcj5cbiAgICAgICAgICAgIDxzcGFuICpuZ0lmPVwiIWxvYWRpbmcgJiYgIXJlYWRvbmx5ICYmIGNsZWFyQnV0dG9uICYmICh0YWdzPy5sZW5ndGggfHwgdGV4dD8ubGVuZ3RoKVwiIGNsYXNzPVwiay1pY29uIGstY2xlYXItdmFsdWUgay1pLWNsb3NlXCIgW2F0dHIudGl0bGVdPVwiY2xlYXJUaXRsZVwiIHJvbGU9XCJidXR0b25cIiB0YWJpbmRleD1cIi0xXCIgKG1vdXNlZG93bik9XCJjbGVhckFsbCgkZXZlbnQpXCI+PC9zcGFuPlxuICAgICAgICAgICAgPHNwYW4gKm5nSWY9XCJsb2FkaW5nXCIgY2xhc3M9XCJrLWljb24gay1pLWxvYWRpbmdcIj48L3NwYW4+XG4gICAgICAgIDwvZGl2PlxuICAgICAgICA8bmctdGVtcGxhdGUgI3BvcHVwVGVtcGxhdGU+XG4gICAgICAgICAgICA8IS0taGVhZGVyIHRlbXBsYXRlLS0+XG4gICAgICAgICAgICA8bmctdGVtcGxhdGUgKm5nSWY9XCJoZWFkZXJUZW1wbGF0ZVwiXG4gICAgICAgICAgICAgICAgW3RlbXBsYXRlQ29udGV4dF09XCJ7XG4gICAgICAgICAgICAgICAgICAgIHRlbXBsYXRlUmVmOiBoZWFkZXJUZW1wbGF0ZS50ZW1wbGF0ZVJlZlxuICAgICAgICAgICAgICAgIH1cIj5cbiAgICAgICAgICAgIDwvbmctdGVtcGxhdGU+XG4gICAgICAgICAgICA8IS0tY3VzdG9tIGl0ZW0gdGVtcGxhdGUtLT5cbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJrLWxpc3RcIiAqbmdJZj1cImFsbG93Q3VzdG9tICYmIHRleHRcIj5cbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiay1pdGVtIGstY3VzdG9tLWl0ZW1cIiBrZW5kb0Ryb3BEb3duc1NlbGVjdGFibGUgW211bHRpcGxlU2VsZWN0aW9uXT1cInRydWVcIiBbaW5kZXhdPVwiLTFcIj5cbiAgICAgICAgICAgICAgICAgICAgPG5nLXRlbXBsYXRlICpuZ0lmPVwiY3VzdG9tSXRlbVRlbXBsYXRlO2Vsc2UgZGVmYXVsdF9jdXN0b21faXRlbV90ZW1wbGF0ZVwiXG4gICAgICAgICAgICAgICAgICAgICAgICBbdGVtcGxhdGVDb250ZXh0XT1cIntcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZW1wbGF0ZVJlZjogY3VzdG9tSXRlbVRlbXBsYXRlLnRlbXBsYXRlUmVmLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICRpbXBsaWNpdDogdGV4dFxuICAgICAgICAgICAgICAgICAgICAgICAgfVwiPlxuICAgICAgICAgICAgICAgICAgICA8L25nLXRlbXBsYXRlPlxuICAgICAgICAgICAgICAgICAgICA8bmctdGVtcGxhdGUgI2RlZmF1bHRfY3VzdG9tX2l0ZW1fdGVtcGxhdGU+e3sgdGV4dCB9fTwvbmctdGVtcGxhdGU+XG4gICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPVwiay1pY29uIGstaS1wbHVzXCIgc3R5bGU9XCJmbG9hdDogcmlnaHRcIj48L3NwYW4+XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIDwhLS1saXN0LS0+XG4gICAgICAgICAgICA8a2VuZG8tbGlzdFxuICAgICAgICAgICAgICAgICNvcHRpb25zTGlzdFxuICAgICAgICAgICAgICAgIFtpZF09XCJsaXN0Qm94SWRcIlxuICAgICAgICAgICAgICAgIFtvcHRpb25QcmVmaXhdPVwib3B0aW9uUHJlZml4XCJcbiAgICAgICAgICAgICAgICBbZGF0YV09XCJkYXRhXCJcbiAgICAgICAgICAgICAgICBbdGV4dEZpZWxkXT1cInRleHRGaWVsZFwiXG4gICAgICAgICAgICAgICAgW3ZhbHVlRmllbGRdPVwidmFsdWVGaWVsZFwiXG4gICAgICAgICAgICAgICAgW2hlaWdodF09XCJsaXN0SGVpZ2h0XCJcbiAgICAgICAgICAgICAgICBbdGVtcGxhdGVdPVwidGVtcGxhdGVcIlxuICAgICAgICAgICAgICAgIFtncm91cFRlbXBsYXRlXT1cImdyb3VwVGVtcGxhdGVcIlxuICAgICAgICAgICAgICAgIFtmaXhlZEdyb3VwVGVtcGxhdGVdPVwiZml4ZWRHcm91cFRlbXBsYXRlXCJcbiAgICAgICAgICAgICAgICBbc2hvd109XCJpc09wZW5cIlxuICAgICAgICAgICAgICAgIFttdWx0aXBsZVNlbGVjdGlvbl09XCJ0cnVlXCJcbiAgICAgICAgICAgICAgICBbdmlydHVhbF09XCJ2aXJ0dWFsXCJcbiAgICAgICAgICAgICAgICAocGFnZUNoYW5nZSk9XCJwYWdlQ2hhbmdlKCRldmVudClcIlxuICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgIDwva2VuZG8tbGlzdD5cbiAgICAgICAgICAgIDwhLS1ubyBkYXRhIHRlbXBsYXRlLS0+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVwiay1ub2RhdGFcIiAqbmdJZj1cImRhdGEubGVuZ3RoID09PSAwXCI+XG4gICAgICAgICAgICAgICAgPG5nLXRlbXBsYXRlIFtuZ0lmXT1cIm5vRGF0YVRlbXBsYXRlXCJcbiAgICAgICAgICAgICAgICAgICAgW3RlbXBsYXRlQ29udGV4dF09XCJ7XG4gICAgICAgICAgICAgICAgICAgICAgICB0ZW1wbGF0ZVJlZjogbm9EYXRhVGVtcGxhdGUgPyBub0RhdGFUZW1wbGF0ZS50ZW1wbGF0ZVJlZiA6IHVuZGVmaW5lZFxuICAgICAgICAgICAgICAgICAgICB9XCI+XG4gICAgICAgICAgICAgICAgPC9uZy10ZW1wbGF0ZT5cbiAgICAgICAgICAgICAgICA8bmctdGVtcGxhdGUgW25nSWZdPVwiIW5vRGF0YVRlbXBsYXRlXCI+XG4gICAgICAgICAgICAgICAgICAgIDxkaXY+e3sgbm9EYXRhVGV4dCB9fTwvZGl2PlxuICAgICAgICAgICAgICAgIDwvbmctdGVtcGxhdGU+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIDwhLS1mb290ZXIgdGVtcGxhdGUtLT5cbiAgICAgICAgICAgIDxuZy10ZW1wbGF0ZSAqbmdJZj1cImZvb3RlclRlbXBsYXRlXCJcbiAgICAgICAgICAgICAgICBbdGVtcGxhdGVDb250ZXh0XT1cIntcbiAgICAgICAgICAgICAgICAgICAgdGVtcGxhdGVSZWY6IGZvb3RlclRlbXBsYXRlLnRlbXBsYXRlUmVmXG4gICAgICAgICAgICAgICAgfVwiPlxuICAgICAgICAgICAgPC9uZy10ZW1wbGF0ZT5cbiAgICAgICAgPC9uZy10ZW1wbGF0ZT5cbiAgICAgICAgPG5nLXRlbXBsYXRlIFtuZ0lmXT1cImlzT3BlblwiPlxuICAgICAgICAgICAgPGtlbmRvLXJlc2l6ZS1zZW5zb3IgKHJlc2l6ZSk9XCJvblJlc2l6ZSgpXCI+PC9rZW5kby1yZXNpemUtc2Vuc29yPlxuICAgICAgICA8L25nLXRlbXBsYXRlPlxuICAgICAgICA8bmctY29udGFpbmVyICNjb250YWluZXI+PC9uZy1jb250YWluZXI+XG4gIGBcbiAgICAgICAgICAgIH0sXSB9LFxuXTtcbi8qKiBAbm9jb2xsYXBzZSAqL1xuTXVsdGlTZWxlY3RDb21wb25lbnQuY3RvclBhcmFtZXRlcnMgPSAoKSA9PiBbXG4gICAgeyB0eXBlOiBMb2NhbGl6YXRpb25TZXJ2aWNlIH0sXG4gICAgeyB0eXBlOiBQb3B1cFNlcnZpY2UgfSxcbiAgICB7IHR5cGU6IERhdGFTZXJ2aWNlIH0sXG4gICAgeyB0eXBlOiBTZWxlY3Rpb25TZXJ2aWNlIH0sXG4gICAgeyB0eXBlOiBOYXZpZ2F0aW9uU2VydmljZSB9LFxuICAgIHsgdHlwZTogRGlzYWJsZWRJdGVtc1NlcnZpY2UgfSxcbiAgICB7IHR5cGU6IENoYW5nZURldGVjdG9yUmVmIH0sXG4gICAgeyB0eXBlOiBLZXlWYWx1ZURpZmZlcnMgfSxcbiAgICB7IHR5cGU6IFJlbmRlcmVyMiB9LFxuICAgIHsgdHlwZTogRWxlbWVudFJlZiB9LFxuICAgIHsgdHlwZTogTmdab25lIH0sXG4gICAgeyB0eXBlOiBCb29sZWFuLCBkZWNvcmF0b3JzOiBbeyB0eXBlOiBPcHRpb25hbCB9LCB7IHR5cGU6IEluamVjdCwgYXJnczogW1RPVUNIX0VOQUJMRUQsXSB9XSB9XG5dO1xuTXVsdGlTZWxlY3RDb21wb25lbnQucHJvcERlY29yYXRvcnMgPSB7XG4gICAgZm9jdXNhYmxlSWQ6IFt7IHR5cGU6IElucHV0IH1dLFxuICAgIGF1dG9DbG9zZTogW3sgdHlwZTogSW5wdXQgfV0sXG4gICAgbG9hZGluZzogW3sgdHlwZTogSW5wdXQgfV0sXG4gICAgZGF0YTogW3sgdHlwZTogSW5wdXQgfV0sXG4gICAgdmFsdWU6IFt7IHR5cGU6IElucHV0IH1dLFxuICAgIHZhbHVlRmllbGQ6IFt7IHR5cGU6IElucHV0IH1dLFxuICAgIHRleHRGaWVsZDogW3sgdHlwZTogSW5wdXQgfV0sXG4gICAgdGFiaW5kZXg6IFt7IHR5cGU6IElucHV0IH1dLFxuICAgIHRhYkluZGV4OiBbeyB0eXBlOiBJbnB1dCwgYXJnczogW1widGFiSW5kZXhcIixdIH1dLFxuICAgIHBsYWNlaG9sZGVyOiBbeyB0eXBlOiBJbnB1dCB9XSxcbiAgICBkaXNhYmxlZDogW3sgdHlwZTogSW5wdXQgfV0sXG4gICAgaXRlbURpc2FibGVkOiBbeyB0eXBlOiBJbnB1dCB9XSxcbiAgICByZWFkb25seTogW3sgdHlwZTogSW5wdXQgfV0sXG4gICAgZmlsdGVyYWJsZTogW3sgdHlwZTogSW5wdXQgfV0sXG4gICAgdmlydHVhbDogW3sgdHlwZTogSW5wdXQgfV0sXG4gICAgcG9wdXBTZXR0aW5nczogW3sgdHlwZTogSW5wdXQgfV0sXG4gICAgbGlzdEhlaWdodDogW3sgdHlwZTogSW5wdXQgfV0sXG4gICAgdmFsdWVQcmltaXRpdmU6IFt7IHR5cGU6IElucHV0IH1dLFxuICAgIGNsZWFyQnV0dG9uOiBbeyB0eXBlOiBJbnB1dCB9XSxcbiAgICB0YWdNYXBwZXI6IFt7IHR5cGU6IElucHV0IH1dLFxuICAgIGFsbG93Q3VzdG9tOiBbeyB0eXBlOiBJbnB1dCB9XSxcbiAgICB2YWx1ZU5vcm1hbGl6ZXI6IFt7IHR5cGU6IElucHV0IH1dLFxuICAgIGZpbHRlckNoYW5nZTogW3sgdHlwZTogT3V0cHV0IH1dLFxuICAgIHZhbHVlQ2hhbmdlOiBbeyB0eXBlOiBPdXRwdXQgfV0sXG4gICAgb3BlbjogW3sgdHlwZTogT3V0cHV0IH1dLFxuICAgIGNsb3NlOiBbeyB0eXBlOiBPdXRwdXQgfV0sXG4gICAgb25Gb2N1czogW3sgdHlwZTogT3V0cHV0LCBhcmdzOiBbJ2ZvY3VzJyxdIH1dLFxuICAgIG9uQmx1cjogW3sgdHlwZTogT3V0cHV0LCBhcmdzOiBbJ2JsdXInLF0gfV0sXG4gICAgcmVtb3ZlVGFnOiBbeyB0eXBlOiBPdXRwdXQgfV0sXG4gICAgY29udGFpbmVyOiBbeyB0eXBlOiBWaWV3Q2hpbGQsIGFyZ3M6IFsnY29udGFpbmVyJywgeyByZWFkOiBWaWV3Q29udGFpbmVyUmVmIH0sXSB9XSxcbiAgICBzZWFyY2hiYXI6IFt7IHR5cGU6IFZpZXdDaGlsZCwgYXJnczogW1NlYXJjaEJhckNvbXBvbmVudCxdIH1dLFxuICAgIHBvcHVwVGVtcGxhdGU6IFt7IHR5cGU6IFZpZXdDaGlsZCwgYXJnczogWydwb3B1cFRlbXBsYXRlJyxdIH1dLFxuICAgIHdyYXBwZXI6IFt7IHR5cGU6IFZpZXdDaGlsZCwgYXJnczogWyd3cmFwcGVyJyxdIH1dLFxuICAgIG9wdGlvbnNMaXN0OiBbeyB0eXBlOiBWaWV3Q2hpbGQsIGFyZ3M6IFsnb3B0aW9uc0xpc3QnLF0gfV0sXG4gICAgdGVtcGxhdGU6IFt7IHR5cGU6IENvbnRlbnRDaGlsZCwgYXJnczogW0l0ZW1UZW1wbGF0ZURpcmVjdGl2ZSxdIH1dLFxuICAgIGN1c3RvbUl0ZW1UZW1wbGF0ZTogW3sgdHlwZTogQ29udGVudENoaWxkLCBhcmdzOiBbQ3VzdG9tSXRlbVRlbXBsYXRlRGlyZWN0aXZlLF0gfV0sXG4gICAgZ3JvdXBUZW1wbGF0ZTogW3sgdHlwZTogQ29udGVudENoaWxkLCBhcmdzOiBbR3JvdXBUZW1wbGF0ZURpcmVjdGl2ZSxdIH1dLFxuICAgIGZpeGVkR3JvdXBUZW1wbGF0ZTogW3sgdHlwZTogQ29udGVudENoaWxkLCBhcmdzOiBbRml4ZWRHcm91cFRlbXBsYXRlRGlyZWN0aXZlLF0gfV0sXG4gICAgaGVhZGVyVGVtcGxhdGU6IFt7IHR5cGU6IENvbnRlbnRDaGlsZCwgYXJnczogW0hlYWRlclRlbXBsYXRlRGlyZWN0aXZlLF0gfV0sXG4gICAgZm9vdGVyVGVtcGxhdGU6IFt7IHR5cGU6IENvbnRlbnRDaGlsZCwgYXJnczogW0Zvb3RlclRlbXBsYXRlRGlyZWN0aXZlLF0gfV0sXG4gICAgdGFnVGVtcGxhdGU6IFt7IHR5cGU6IENvbnRlbnRDaGlsZCwgYXJnczogW1RhZ1RlbXBsYXRlRGlyZWN0aXZlLF0gfV0sXG4gICAgZ3JvdXBUYWdUZW1wbGF0ZTogW3sgdHlwZTogQ29udGVudENoaWxkLCBhcmdzOiBbR3JvdXBUYWdUZW1wbGF0ZURpcmVjdGl2ZSxdIH1dLFxuICAgIG5vRGF0YVRlbXBsYXRlOiBbeyB0eXBlOiBDb250ZW50Q2hpbGQsIGFyZ3M6IFtOb0RhdGFUZW1wbGF0ZURpcmVjdGl2ZSxdIH1dLFxuICAgIHdpZGdldENsYXNzZXM6IFt7IHR5cGU6IEhvc3RCaW5kaW5nLCBhcmdzOiBbJ2NsYXNzLmstd2lkZ2V0JyxdIH0sIHsgdHlwZTogSG9zdEJpbmRpbmcsIGFyZ3M6IFsnY2xhc3Muay1tdWx0aXNlbGVjdCcsXSB9LCB7IHR5cGU6IEhvc3RCaW5kaW5nLCBhcmdzOiBbJ2NsYXNzLmstaGVhZGVyJyxdIH1dLFxuICAgIGRpcjogW3sgdHlwZTogSG9zdEJpbmRpbmcsIGFyZ3M6IFsnYXR0ci5kaXInLF0gfV0sXG4gICAgZm9jdXNlZENsYXNzOiBbeyB0eXBlOiBIb3N0QmluZGluZywgYXJnczogWydjbGFzcy5rLXN0YXRlLWZvY3VzZWQnLF0gfV0sXG4gICAgZGlzYWJsZWRDbGFzczogW3sgdHlwZTogSG9zdEJpbmRpbmcsIGFyZ3M6IFsnY2xhc3Muay1zdGF0ZS1kaXNhYmxlZCcsXSB9XVxufTtcblxuLyogdHNsaW50OmRpc2FibGU6bWF4LWxpbmUtbGVuZ3RoICovXG4vKipcbiAqIEBoaWRkZW5cbiAqL1xuY2xhc3MgVGFnTGlzdENvbXBvbmVudCB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHRoaXMucmVtb3ZlVGFnID0gbmV3IEV2ZW50RW1pdHRlcigpO1xuICAgIH1cbiAgICB0YWdQcm9wKHRhZywgcHJvcCkge1xuICAgICAgICByZXR1cm4gcHJvcCAmJiBpc09iamVjdCh0YWcpID8gdGFnW3Byb3BdIDogdGFnO1xuICAgIH1cbiAgICBkZWxldGVUYWcoZXZlbnQsIHRhZykge1xuICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICBldmVudC5zdG9wSW1tZWRpYXRlUHJvcGFnYXRpb24oKTtcbiAgICAgICAgaWYgKCF0aGlzLmRpc2FibGVkICYmIGV2ZW50LndoaWNoID09PSAxKSB7XG4gICAgICAgICAgICB0aGlzLnJlbW92ZVRhZy5lbWl0KHRhZyk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgaXRlbUlkKHRhZykge1xuICAgICAgICBpZiAodGFnKSB7IC8vYmVjYXVzZSBvZiBjdXN0b20gdmFsdWVzXG4gICAgICAgICAgICByZXR1cm4gdGhpcy50YWdQcmVmaXggKyBcIi1cIiArIHRoaXMudGFnUHJvcCh0YWcsIHRoaXMudmFsdWVGaWVsZCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgaXNHcm91cFRhZyh0YWcpIHtcbiAgICAgICAgcmV0dXJuIHRhZyBpbnN0YW5jZW9mIEFycmF5O1xuICAgIH1cbn1cblRhZ0xpc3RDb21wb25lbnQuZGVjb3JhdG9ycyA9IFtcbiAgICB7IHR5cGU6IENvbXBvbmVudCwgYXJnczogW3tcbiAgICAgICAgICAgICAgICBzZWxlY3RvcjogJ2tlbmRvLXRhZ2xpc3QnLFxuICAgICAgICAgICAgICAgIHRlbXBsYXRlOiBgXG4gICAgICAgIDx1bCBbYXR0ci5pZF09XCJpZFwiIGNsYXNzPVwiay1yZXNldFwiPlxuICAgICAgICAgICAgPGxpIHJvbGU9XCJvcHRpb25cIiAqbmdGb3I9XCJsZXQgdGFnIG9mIHRhZ3M7IGxldCBpID0gaW5kZXg7XCIgYXJpYS1zZWxlY3RlZD1cInRydWVcIiBbYXR0ci5hcmlhLXNldHNpemVdPVwidGFncz8ubGVuZ3RoXCJcbiAgICAgICAgICAgICAgICBjbGFzcz1cImstYnV0dG9uXCIgW25nQ2xhc3NdPVwieyAnay1zdGF0ZS1mb2N1c2VkJzogaSA9PT0gZm9jdXNlZCB9XCIgW2F0dHIuaWRdPVwiaXRlbUlkKHRhZylcIlxuICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgIDxuZy10ZW1wbGF0ZSAqbmdJZj1cImlzR3JvdXBUYWcodGFnKTsgdGhlbiBncm91cFRhZyBlbHNlIHNpbmdsZVRhZ1wiPjwvbmctdGVtcGxhdGU+XG4gICAgICAgICAgICAgICAgICAgIDxuZy10ZW1wbGF0ZSAjZ3JvdXBUYWc+XG4gICAgICAgICAgICAgICAgICAgICAgICA8c3Bhbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8bmctdGVtcGxhdGUgKm5nSWY9XCJncm91cFRlbXBsYXRlXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgW3RlbXBsYXRlQ29udGV4dF09XCJ7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRlbXBsYXRlUmVmOiBncm91cFRlbXBsYXRlLnRlbXBsYXRlUmVmLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkaW1wbGljaXQ6IHRhZ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L25nLXRlbXBsYXRlPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxuZy10ZW1wbGF0ZSBbbmdJZl09XCIhZ3JvdXBUZW1wbGF0ZVwiPnt7IHRhZy5sZW5ndGggfX0ge3sgdGFnLmxlbmd0aCA9PT0gMSA/ICdpdGVtJyA6ICdpdGVtcycgfX0gc2VsZWN0ZWQ8L25nLXRlbXBsYXRlPlxuICAgICAgICAgICAgICAgICAgICAgICAgPC9zcGFuPlxuICAgICAgICAgICAgICAgICAgICA8L25nLXRlbXBsYXRlPlxuICAgICAgICAgICAgICAgICAgICA8bmctdGVtcGxhdGUgI3NpbmdsZVRhZz5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuPlxuICAgICAgICAgICAgICAgICAgICAgICAgPG5nLXRlbXBsYXRlICpuZ0lmPVwidGVtcGxhdGVcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBbdGVtcGxhdGVDb250ZXh0XT1cIntcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVtcGxhdGVSZWY6IHRlbXBsYXRlLnRlbXBsYXRlUmVmLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkaW1wbGljaXQ6IHRhZ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L25nLXRlbXBsYXRlPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxuZy10ZW1wbGF0ZSBbbmdJZl09XCIhdGVtcGxhdGVcIj57eyB0YWdQcm9wKHRhZywgdGV4dEZpZWxkKSB9fTwvbmctdGVtcGxhdGU+XG4gICAgICAgICAgICAgICAgICAgICAgICA8L3NwYW4+XG4gICAgICAgICAgICAgICAgICAgIDwvbmctdGVtcGxhdGU+XG5cbiAgICAgICAgICAgICAgICA8c3BhbiBhcmlhLWxhYmVsPVwiZGVsZXRlXCIgW2F0dHIuYXJpYS1oaWRkZW5dPVwiaSAhPT0gZm9jdXNlZFwiIGNsYXNzPVwiay1zZWxlY3RcIj5cbiAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9XCJrLWljb24gay1pLWNsb3NlXCIgKG1vdXNlZG93bik9XCJkZWxldGVUYWcoJGV2ZW50LCB0YWcpXCI+XG4gICAgICAgICAgICAgICAgICAgIDwvc3Bhbj5cbiAgICAgICAgICAgICAgICA8L3NwYW4+XG4gICAgICAgICAgICA8L2xpPlxuICAgICAgICA8L3VsPlxuICBgXG4gICAgICAgICAgICB9LF0gfSxcbl07XG5UYWdMaXN0Q29tcG9uZW50LnByb3BEZWNvcmF0b3JzID0ge1xuICAgIHRhZ3M6IFt7IHR5cGU6IElucHV0IH1dLFxuICAgIHRleHRGaWVsZDogW3sgdHlwZTogSW5wdXQgfV0sXG4gICAgdmFsdWVGaWVsZDogW3sgdHlwZTogSW5wdXQgfV0sXG4gICAgZm9jdXNlZDogW3sgdHlwZTogSW5wdXQgfV0sXG4gICAgdGVtcGxhdGU6IFt7IHR5cGU6IElucHV0IH1dLFxuICAgIGdyb3VwVGVtcGxhdGU6IFt7IHR5cGU6IElucHV0IH1dLFxuICAgIGRpc2FibGVkOiBbeyB0eXBlOiBJbnB1dCB9XSxcbiAgICB0YWdQcmVmaXg6IFt7IHR5cGU6IElucHV0IH1dLFxuICAgIGlkOiBbeyB0eXBlOiBJbnB1dCB9XSxcbiAgICByZW1vdmVUYWc6IFt7IHR5cGU6IE91dHB1dCB9XVxufTtcblxuLyoqXG4gKiBAaGlkZGVuXG4gKi9cbmNsYXNzIFRlbXBsYXRlQ29udGV4dERpcmVjdGl2ZSB7XG4gICAgY29uc3RydWN0b3Iodmlld0NvbnRhaW5lclJlZikge1xuICAgICAgICB0aGlzLnZpZXdDb250YWluZXJSZWYgPSB2aWV3Q29udGFpbmVyUmVmO1xuICAgIH1cbiAgICBzZXQgdGVtcGxhdGVDb250ZXh0KGNvbnRleHQpIHtcbiAgICAgICAgaWYgKHRoaXMuaW5zZXJ0ZWRWaWV3UmVmKSB7XG4gICAgICAgICAgICB0aGlzLnZpZXdDb250YWluZXJSZWYucmVtb3ZlKHRoaXMudmlld0NvbnRhaW5lclJlZi5pbmRleE9mKHRoaXMuaW5zZXJ0ZWRWaWV3UmVmKSk7XG4gICAgICAgICAgICB0aGlzLmluc2VydGVkVmlld1JlZiA9IHVuZGVmaW5lZDtcbiAgICAgICAgfVxuICAgICAgICBpZiAoY29udGV4dC50ZW1wbGF0ZVJlZikge1xuICAgICAgICAgICAgdGhpcy5pbnNlcnRlZFZpZXdSZWYgPSB0aGlzLnZpZXdDb250YWluZXJSZWYuY3JlYXRlRW1iZWRkZWRWaWV3KGNvbnRleHQudGVtcGxhdGVSZWYsIGNvbnRleHQpO1xuICAgICAgICB9XG4gICAgfVxufVxuVGVtcGxhdGVDb250ZXh0RGlyZWN0aXZlLmRlY29yYXRvcnMgPSBbXG4gICAgeyB0eXBlOiBEaXJlY3RpdmUsIGFyZ3M6IFt7XG4gICAgICAgICAgICAgICAgc2VsZWN0b3I6ICdbdGVtcGxhdGVDb250ZXh0XScgLy8gdHNsaW50OmRpc2FibGUtbGluZVxuICAgICAgICAgICAgfSxdIH0sXG5dO1xuLyoqIEBub2NvbGxhcHNlICovXG5UZW1wbGF0ZUNvbnRleHREaXJlY3RpdmUuY3RvclBhcmFtZXRlcnMgPSAoKSA9PiBbXG4gICAgeyB0eXBlOiBWaWV3Q29udGFpbmVyUmVmIH1cbl07XG5UZW1wbGF0ZUNvbnRleHREaXJlY3RpdmUucHJvcERlY29yYXRvcnMgPSB7XG4gICAgdGVtcGxhdGVDb250ZXh0OiBbeyB0eXBlOiBJbnB1dCB9XVxufTtcblxuLyoqXG4gKiBAaGlkZGVuXG4gKi9cbmNsYXNzIFNlbGVjdGFibGVEaXJlY3RpdmUge1xuICAgIGNvbnN0cnVjdG9yKHNlbGVjdGlvblNlcnZpY2UpIHtcbiAgICAgICAgLy8gQEhvc3RCaW5kaW5nKCdhdHRyLm9mZnNldC1pbmRleCcpXG4gICAgICAgIC8vIEBJbnB1dCgpIHB1YmxpYyBvZmZzZXRJbmRleDogbnVtYmVyO1xuICAgICAgICB0aGlzLm11bHRpcGxlU2VsZWN0aW9uID0gZmFsc2U7XG4gICAgICAgIHRoaXMuc2VsZWN0aW9uU2VydmljZSA9IHNlbGVjdGlvblNlcnZpY2U7XG4gICAgfVxuICAgIGdldCBmb2N1c2VkQ2xhc3NOYW1lKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5zZWxlY3Rpb25TZXJ2aWNlLmlzRm9jdXNlZCh0aGlzLmluZGV4KTtcbiAgICB9XG4gICAgZ2V0IHNlbGVjdGVkQ2xhc3NOYW1lKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5zZWxlY3Rpb25TZXJ2aWNlLmlzU2VsZWN0ZWQodGhpcy5pbmRleCk7XG4gICAgfVxuICAgIG9uQ2xpY2soZXZlbnQpIHtcbiAgICAgICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICAgIGlmICh0aGlzLm11bHRpcGxlU2VsZWN0aW9uKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5zZWxlY3Rpb25TZXJ2aWNlLmlzU2VsZWN0ZWQodGhpcy5pbmRleCkpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdGlvblNlcnZpY2UudW5zZWxlY3QodGhpcy5pbmRleCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdGlvblNlcnZpY2UuYWRkKHRoaXMuaW5kZXgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5zZWxlY3Rpb25TZXJ2aWNlLmNoYW5nZSh0aGlzLmluZGV4KTtcbiAgICAgICAgfVxuICAgIH1cbn1cblNlbGVjdGFibGVEaXJlY3RpdmUuZGVjb3JhdG9ycyA9IFtcbiAgICB7IHR5cGU6IERpcmVjdGl2ZSwgYXJnczogW3tcbiAgICAgICAgICAgICAgICBzZWxlY3RvcjogJ1trZW5kb0Ryb3BEb3duc1NlbGVjdGFibGVdJ1xuICAgICAgICAgICAgfSxdIH0sXG5dO1xuLyoqIEBub2NvbGxhcHNlICovXG5TZWxlY3RhYmxlRGlyZWN0aXZlLmN0b3JQYXJhbWV0ZXJzID0gKCkgPT4gW1xuICAgIHsgdHlwZTogU2VsZWN0aW9uU2VydmljZSB9XG5dO1xuU2VsZWN0YWJsZURpcmVjdGl2ZS5wcm9wRGVjb3JhdG9ycyA9IHtcbiAgICBpbmRleDogW3sgdHlwZTogSG9zdEJpbmRpbmcsIGFyZ3M6IFsnYXR0ci5pbmRleCcsXSB9LCB7IHR5cGU6IElucHV0IH1dLFxuICAgIGhlaWdodDogW3sgdHlwZTogSG9zdEJpbmRpbmcsIGFyZ3M6IFsnc3R5bGUuaGVpZ2h0LnB4JyxdIH0sIHsgdHlwZTogSG9zdEJpbmRpbmcsIGFyZ3M6IFsnc3R5bGUubWluSGVpZ2h0LnB4JyxdIH0sIHsgdHlwZTogSW5wdXQgfV0sXG4gICAgbXVsdGlwbGVTZWxlY3Rpb246IFt7IHR5cGU6IElucHV0IH1dLFxuICAgIGZvY3VzZWRDbGFzc05hbWU6IFt7IHR5cGU6IEhvc3RCaW5kaW5nLCBhcmdzOiBbJ2NsYXNzLmstc3RhdGUtZm9jdXNlZCcsXSB9XSxcbiAgICBzZWxlY3RlZENsYXNzTmFtZTogW3sgdHlwZTogSG9zdEJpbmRpbmcsIGFyZ3M6IFsnY2xhc3Muay1zdGF0ZS1zZWxlY3RlZCcsXSB9XSxcbiAgICBvbkNsaWNrOiBbeyB0eXBlOiBIb3N0TGlzdGVuZXIsIGFyZ3M6IFsnY2xpY2snLCBbJyRldmVudCddLF0gfV1cbn07XG5cbi8qKlxuICogQSBkaXJlY3RpdmUgd2hpY2ggY29uZmlndXJlcyB0aGUgTXVsdGlTZWxlY3QgdG8gc2hvdyBvbmUgc2luZ2xlIHN1bW1hcnkgdGFnIGZvciBhbGwgc2VsZWN0ZWQgZGF0YSBpdGVtcy5cbiAqIFdoZW4gYSBudW1iZXIgaXMgcHJvdmlkZWQsIHRoZSBzdW1tYXJ5IHRhZyBpcyBkaXNwbGF5ZWQgYWZ0ZXIgdGhlIGdpdmVuIGFtb3VudCBvZiBkYXRhIGl0ZW1zIGFyZSBzZWxlY3RlZFxuICogKFttb3JlIGluZm9ybWF0aW9uIGFuZCBleGFtcGxlc10oeyUgc2x1ZyBzdW1tYXJ5dGFnbW9kZV9tdWx0aXNlbGVjdCAlfSkpLlxuICpcbiAqIEBleGFtcGxlXG4gKiBgYGB0cy1uby1ydW5cbiAqIDxrZW5kby1tdWx0aXNlbGVjdCBrZW5kb011bHRpU2VsZWN0U3VtbWFyeVRhZyBbZGF0YV09XCJkYXRhXCI+PC9rZW5kby1tdWx0aXNlbGVjdD5cbiAqIGBgYFxuICpcbiAqIEBleGFtcGxlXG4gKiBgYGB0cy1uby1ydW5cbiAqIDxrZW5kby1tdWx0aXNlbGVjdCBba2VuZG9NdWx0aVNlbGVjdFN1bW1hcnlUYWddPVwiMlwiIFtkYXRhXT1cImRhdGFcIj48L2tlbmRvLW11bHRpc2VsZWN0PlxuICogYGBgXG4gKi9cbmNsYXNzIFN1bW1hcnlUYWdEaXJlY3RpdmUge1xuICAgIGNvbnN0cnVjdG9yKG11bHRpU2VsZWN0Q29tcG9uZW50KSB7XG4gICAgICAgIHRoaXMubXVsdGlTZWxlY3RDb21wb25lbnQgPSBtdWx0aVNlbGVjdENvbXBvbmVudDtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEEgbnVtZXJpYyB2YWx1ZSB0aGF0IGluZGljYXRlcyB0aGUgbnVtYmVyIG9mIHNlbGVjdGVkIGRhdGEgaXRlbXMgYWZ0ZXIgd2hpY2ggdGhlIHN1bW1hcnkgdGFnIHdpbGwgYXBwZWFyLlxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5zaG93QWZ0ZXIgPSAwOyAvLyB0c2xpbnQ6ZGlzYWJsZS1saW5lOm5vLWlucHV0LXJlbmFtZVxuICAgICAgICB0aGlzLmNyZWF0ZVRhZ01hcHBlcigpO1xuICAgIH1cbiAgICBuZ09uQ2hhbmdlcyhjaGFuZ2VzKSB7XG4gICAgICAgIGlmIChpc1ByZXNlbnQoY2hhbmdlcy5zaG93QWZ0ZXIpKSB7XG4gICAgICAgICAgICB0aGlzLmNyZWF0ZVRhZ01hcHBlcigpO1xuICAgICAgICAgICAgdGhpcy5tdWx0aVNlbGVjdENvbXBvbmVudC5vblRhZ01hcHBlckNoYW5nZSgpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGNyZWF0ZVRhZ01hcHBlcigpIHtcbiAgICAgICAgdGhpcy5tdWx0aVNlbGVjdENvbXBvbmVudC50YWdNYXBwZXIgPSAodGFncykgPT4ge1xuICAgICAgICAgICAgaWYgKHRhZ3MubGVuZ3RoID4gdGhpcy5zaG93QWZ0ZXIpIHtcbiAgICAgICAgICAgICAgICBsZXQgcmVzdWx0O1xuICAgICAgICAgICAgICAgIHJlc3VsdCA9IHRhZ3Muc2xpY2UoMCwgdGhpcy5zaG93QWZ0ZXIpO1xuICAgICAgICAgICAgICAgIHJlc3VsdC5wdXNoKHRhZ3Muc2xpY2UodGhpcy5zaG93QWZ0ZXIsIHRhZ3MubGVuZ3RoKSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHJldHVybiB0YWdzO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgIH1cbn1cblN1bW1hcnlUYWdEaXJlY3RpdmUuZGVjb3JhdG9ycyA9IFtcbiAgICB7IHR5cGU6IERpcmVjdGl2ZSwgYXJnczogW3tcbiAgICAgICAgICAgICAgICBzZWxlY3RvcjogJ1trZW5kb011bHRpU2VsZWN0U3VtbWFyeVRhZ10nXG4gICAgICAgICAgICB9LF0gfSxcbl07XG4vKiogQG5vY29sbGFwc2UgKi9cblN1bW1hcnlUYWdEaXJlY3RpdmUuY3RvclBhcmFtZXRlcnMgPSAoKSA9PiBbXG4gICAgeyB0eXBlOiBNdWx0aVNlbGVjdENvbXBvbmVudCB9XG5dO1xuU3VtbWFyeVRhZ0RpcmVjdGl2ZS5wcm9wRGVjb3JhdG9ycyA9IHtcbiAgICBzaG93QWZ0ZXI6IFt7IHR5cGU6IElucHV0LCBhcmdzOiBbJ2tlbmRvTXVsdGlTZWxlY3RTdW1tYXJ5VGFnJyxdIH1dXG59O1xuXG5jb25zdCBERUZBVUxUX0ZJTFRFUl9TRVRUSU5HUyA9IHtcbiAgICBjYXNlU2Vuc2l0aXZlOiBmYWxzZSxcbiAgICBvcGVyYXRvcjogJ3N0YXJ0c1dpdGgnXG59O1xuLyoqXG4gKiBJbXBsZW1lbnRzIGFuIGV2ZW50IGhhbmRsZXIgZm9yIHRoZSBgZmlsdGVyQ2hhbmdlYCBldmVudCBvZiBhIERyb3BEb3ducyBjb21wb25lbnRcbiAqIHdoaWNoIHBlcmZvcm1zIHNpbXBsZSBkYXRhIGZpbHRlcmluZy5cbiAqXG4gKiBAZXhhbXBsZVxuICogYGBgdHNcbiAqIF9AQ29tcG9uZW50KHtcbiAqIHNlbGVjdG9yOiAnbXktYXBwJyxcbiAqIHRlbXBsYXRlOiBgXG4gKiAgPGtlbmRvLWF1dG9jb21wbGV0ZVxuICogICAgICBbZGF0YV09XCJkYXRhXCJcbiAqICAgICAga2VuZG9Ecm9wRG93bkZpbHRlclxuICogICAgICBwbGFjZWhvbGRlcj1cImUuZy4gQW5kb3JyYVwiPlxuICogIDwva2VuZG8tYXV0b2NvbXBsZXRlPlxuICogYFxuICogfSlcbiAqIGNsYXNzIEFwcENvbXBvbmVudCB7XG4gKiAgICAgcHVibGljIGRhdGE6IEFycmF5PHN0cmluZz4gPSBbXCJBbGJhbmlhXCIsIFwiQW5kb3JyYVwiLCBcIkFybWVuaWFcIiwgXCJBdXN0cmlhXCIsIFwiQXplcmJhaWphblwiXTtcbiAqIH1cbiAqIGBgYFxuICovXG5jbGFzcyBGaWx0ZXJEaXJlY3RpdmUge1xuICAgIGNvbnN0cnVjdG9yKGNvbXBvbmVudCkge1xuICAgICAgICB0aGlzLmNvbXBvbmVudCA9IGNvbXBvbmVudDtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBoaWRkZW5cbiAgICAgICAgICpcbiAgICAgICAgICogU2V0cyB3aGV0aGVyIHRoZSBmaWx0ZXJpbmcgZnVuY3Rpb25hbGl0eSBpcyBlbmFibGVkIG9uIGNvbXBvbmVudCBpbml0LlxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5maWx0ZXJhYmxlID0gdHJ1ZTtcbiAgICAgICAgdGhpcy5fZGF0YSA9IFtdO1xuICAgICAgICB0aGlzLl9maWx0ZXJTZXR0aW5ncyA9IERFRkFVTFRfRklMVEVSX1NFVFRJTkdTO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBUaGUgaW5pdGlhbCBkYXRhIHRoYXQgd2lsbCBiZSB1c2VkIGFzIGEgc291cmNlIGFycmF5IGZvciB0aGUgZmlsdGVyaW5nIG9wZXJhdGlvbnMuXG4gICAgICovXG4gICAgc2V0IGRhdGEoZGF0YSkge1xuICAgICAgICB0aGlzLl9kYXRhID0gZGF0YSB8fCBbXTtcbiAgICB9XG4gICAgZ2V0IGRhdGEoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9kYXRhO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBUaGUgY29uZmlndXJhdGlvbiBvYmplY3Qgd2hpY2ggc2V0cyB0aGUgYmVoYXZpb3Igb2YgdGhlIGBrZW5kb0Ryb3BEb3duRmlsdGVyYCBkaXJlY3RpdmUuXG4gICAgICovXG4gICAgc2V0IGZpbHRlclNldHRpbmdzKHNldHRpbmdzKSB7XG4gICAgICAgIHRoaXMuX2ZpbHRlclNldHRpbmdzID0gT2JqZWN0LmFzc2lnbih7fSwgREVGQVVMVF9GSUxURVJfU0VUVElOR1MsIHNldHRpbmdzKTtcbiAgICB9XG4gICAgZ2V0IGZpbHRlclNldHRpbmdzKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fZmlsdGVyU2V0dGluZ3M7XG4gICAgfVxuICAgIG5nT25Jbml0KCkge1xuICAgICAgICB0aGlzLmNvbXBvbmVudC5maWx0ZXJhYmxlID0gdGhpcy5maWx0ZXJhYmxlO1xuICAgICAgICB0aGlzLmZpbHRlckNoYW5nZVN1YnNjcmlwdGlvbiA9IHRoaXMuY29tcG9uZW50LmZpbHRlckNoYW5nZVxuICAgICAgICAgICAgLnN1YnNjcmliZShxdWVyeSA9PiB0aGlzLmNvbXBvbmVudC5kYXRhID0gdGhpcy5nZXRGaWx0ZXJlZERhdGEocXVlcnkpKTtcbiAgICB9XG4gICAgbmdPbkRlc3Ryb3koKSB7XG4gICAgICAgIHRoaXMuZmlsdGVyQ2hhbmdlU3Vic2NyaXB0aW9uLnVuc3Vic2NyaWJlKCk7XG4gICAgfVxuICAgIGdldEZpbHRlcmVkRGF0YShxdWVyeSkge1xuICAgICAgICBjb25zdCBmaWVsZCA9IHRoaXMuY29tcG9uZW50LnRleHRGaWVsZCB8fCB0aGlzLmNvbXBvbmVudC52YWx1ZUZpZWxkO1xuICAgICAgICByZXR1cm4gdGhpcy5kYXRhLmZpbHRlcihpdGVtID0+IHRoaXMuY2hlY2tJdGVtKGdldHRlcihpdGVtLCBmaWVsZCksIHF1ZXJ5KSk7XG4gICAgfVxuICAgIGNoZWNrSXRlbSh0YXJnZXQsIHF1ZXJ5KSB7XG4gICAgICAgIHRhcmdldCA9IHRoaXMubm9ybWFsaXplVmFsdWUodGFyZ2V0KTtcbiAgICAgICAgcXVlcnkgPSB0aGlzLm5vcm1hbGl6ZVZhbHVlKHF1ZXJ5KTtcbiAgICAgICAgcmV0dXJuIHRoaXMuZmlsdGVyU2V0dGluZ3Mub3BlcmF0b3IgPT09ICdjb250YWlucycgPyB0YXJnZXQuaW5kZXhPZihxdWVyeSkgIT09IC0xIDogdGFyZ2V0LmluZGV4T2YocXVlcnkpID09PSAwO1xuICAgIH1cbiAgICBub3JtYWxpemVWYWx1ZSh2YWx1ZSkge1xuICAgICAgICBjb25zdCBub3JtYWxpemVkVmFsdWUgPSBpc1ByZXNlbnQodmFsdWUpID8gdmFsdWUudG9TdHJpbmcoKSA6ICcnO1xuICAgICAgICByZXR1cm4gdGhpcy5maWx0ZXJTZXR0aW5ncy5jYXNlU2Vuc2l0aXZlID8gbm9ybWFsaXplZFZhbHVlIDogbm9ybWFsaXplZFZhbHVlLnRvTG93ZXJDYXNlKCk7XG4gICAgfVxufVxuRmlsdGVyRGlyZWN0aXZlLmRlY29yYXRvcnMgPSBbXG4gICAgeyB0eXBlOiBEaXJlY3RpdmUsIGFyZ3M6IFt7XG4gICAgICAgICAgICAgICAgc2VsZWN0b3I6ICdba2VuZG9Ecm9wRG93bkZpbHRlcl0nXG4gICAgICAgICAgICB9LF0gfSxcbl07XG4vKiogQG5vY29sbGFwc2UgKi9cbkZpbHRlckRpcmVjdGl2ZS5jdG9yUGFyYW1ldGVycyA9ICgpID0+IFtcbiAgICB7IHR5cGU6IEZpbHRlcmFibGVEcm9wRG93bkNvbXBvbmVudEJhc2UgfVxuXTtcbkZpbHRlckRpcmVjdGl2ZS5wcm9wRGVjb3JhdG9ycyA9IHtcbiAgICBkYXRhOiBbeyB0eXBlOiBJbnB1dCB9XSxcbiAgICBmaWx0ZXJTZXR0aW5nczogW3sgdHlwZTogSW5wdXQsIGFyZ3M6IFsna2VuZG9Ecm9wRG93bkZpbHRlcicsXSB9XSxcbiAgICBmaWx0ZXJhYmxlOiBbeyB0eXBlOiBJbnB1dCB9XVxufTtcblxuLyoqXG4gKiBAaGlkZGVuXG4gKi9cbmNsYXNzIE1lc3NhZ2VzIGV4dGVuZHMgQ29tcG9uZW50TWVzc2FnZXMge1xufVxuTWVzc2FnZXMucHJvcERlY29yYXRvcnMgPSB7XG4gICAgbm9EYXRhVGV4dDogW3sgdHlwZTogSW5wdXQgfV0sXG4gICAgY2xlYXJUaXRsZTogW3sgdHlwZTogSW5wdXQgfV1cbn07XG5cbi8qKlxuICogQGhpZGRlblxuICovXG5jbGFzcyBMb2NhbGl6ZWRNZXNzYWdlc0RpcmVjdGl2ZSBleHRlbmRzIE1lc3NhZ2VzIHtcbiAgICBjb25zdHJ1Y3RvcihzZXJ2aWNlKSB7XG4gICAgICAgIHN1cGVyKCk7XG4gICAgICAgIHRoaXMuc2VydmljZSA9IHNlcnZpY2U7XG4gICAgfVxufVxuTG9jYWxpemVkTWVzc2FnZXNEaXJlY3RpdmUuZGVjb3JhdG9ycyA9IFtcbiAgICB7IHR5cGU6IERpcmVjdGl2ZSwgYXJnczogW3tcbiAgICAgICAgICAgICAgICBwcm92aWRlcnM6IFtcbiAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgcHJvdmlkZTogTWVzc2FnZXMsXG4gICAgICAgICAgICAgICAgICAgICAgICB1c2VFeGlzdGluZzogZm9yd2FyZFJlZigoKSA9PiBMb2NhbGl6ZWRNZXNzYWdlc0RpcmVjdGl2ZSkgLy8gdHNsaW50OmRpc2FibGUtbGluZTpuby1mb3J3YXJkLXJlZlxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgXSxcbiAgICAgICAgICAgICAgICBzZWxlY3RvcjogYFxuICAgIFtrZW5kb0Ryb3BEb3duTGlzdExvY2FsaXplZE1lc3NhZ2VzXSxcbiAgICBba2VuZG9Db21ib0JveExvY2FsaXplZE1lc3NhZ2VzXSxcbiAgICBba2VuZG9BdXRvQ29tcGxldGVMb2NhbGl6ZWRNZXNzYWdlc10sXG4gICAgW2tlbmRvTXVsdGlTZWxlY3RMb2NhbGl6ZWRNZXNzYWdlc11cbiAgYFxuICAgICAgICAgICAgfSxdIH0sXG5dO1xuLyoqIEBub2NvbGxhcHNlICovXG5Mb2NhbGl6ZWRNZXNzYWdlc0RpcmVjdGl2ZS5jdG9yUGFyYW1ldGVycyA9ICgpID0+IFtcbiAgICB7IHR5cGU6IExvY2FsaXphdGlvblNlcnZpY2UgfVxuXTtcblxuLyoqXG4gKiBDdXN0b20gY29tcG9uZW50IG1lc3NhZ2VzIG92ZXJyaWRlIGRlZmF1bHQgY29tcG9uZW50IG1lc3NhZ2VzXG4gKiAoW3NlZSBleGFtcGxlXSh7JSBzbHVnIHJ0bF9kcm9wZG93bnMgJX0jdG9jLW1lc3NhZ2VzKSkuXG4gKi9cbmNsYXNzIEN1c3RvbU1lc3NhZ2VzQ29tcG9uZW50IGV4dGVuZHMgTWVzc2FnZXMge1xuICAgIGNvbnN0cnVjdG9yKHNlcnZpY2UpIHtcbiAgICAgICAgc3VwZXIoKTtcbiAgICAgICAgdGhpcy5zZXJ2aWNlID0gc2VydmljZTtcbiAgICB9XG4gICAgZ2V0IG92ZXJyaWRlKCkge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG59XG5DdXN0b21NZXNzYWdlc0NvbXBvbmVudC5kZWNvcmF0b3JzID0gW1xuICAgIHsgdHlwZTogQ29tcG9uZW50LCBhcmdzOiBbe1xuICAgICAgICAgICAgICAgIHByb3ZpZGVyczogW1xuICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICBwcm92aWRlOiBNZXNzYWdlcyxcbiAgICAgICAgICAgICAgICAgICAgICAgIHVzZUV4aXN0aW5nOiBmb3J3YXJkUmVmKCgpID0+IEN1c3RvbU1lc3NhZ2VzQ29tcG9uZW50KVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgXSxcbiAgICAgICAgICAgICAgICBzZWxlY3RvcjogJ2tlbmRvLWRyb3Bkb3dubGlzdC1tZXNzYWdlcywga2VuZG8tY29tYm9ib3gtbWVzc2FnZXMsIGtlbmRvLWF1dG9jb21wbGV0ZS1tZXNzYWdlcywga2VuZG8tbXVsdGlzZWxlY3QtbWVzc2FnZXMnLFxuICAgICAgICAgICAgICAgIHRlbXBsYXRlOiBgYFxuICAgICAgICAgICAgfSxdIH0sXG5dO1xuLyoqIEBub2NvbGxhcHNlICovXG5DdXN0b21NZXNzYWdlc0NvbXBvbmVudC5jdG9yUGFyYW1ldGVycyA9ICgpID0+IFtcbiAgICB7IHR5cGU6IExvY2FsaXphdGlvblNlcnZpY2UgfVxuXTtcblxuY29uc3QgU0hBUkVEX0RJUkVDVElWRVMgPSBbXG4gICAgSGVhZGVyVGVtcGxhdGVEaXJlY3RpdmUsXG4gICAgRm9vdGVyVGVtcGxhdGVEaXJlY3RpdmUsXG4gICAgSXRlbVRlbXBsYXRlRGlyZWN0aXZlLFxuICAgIEdyb3VwVGVtcGxhdGVEaXJlY3RpdmUsXG4gICAgRml4ZWRHcm91cFRlbXBsYXRlRGlyZWN0aXZlLFxuICAgIE5vRGF0YVRlbXBsYXRlRGlyZWN0aXZlLFxuICAgIExvY2FsaXplZE1lc3NhZ2VzRGlyZWN0aXZlLFxuICAgIEN1c3RvbU1lc3NhZ2VzQ29tcG9uZW50LFxuICAgIEZpbHRlckRpcmVjdGl2ZVxuXTtcbi8qKlxuICogQGhpZGRlblxuICpcbiAqIFRoZSBleHBvcnRlZCBwYWNrYWdlIG1vZHVsZS5cbiAqXG4gKiBUaGUgcGFja2FnZSBleHBvcnRzOlxuICogLSBgSXRlbVRlbXBsYXRlRGlyZWN0aXZlYCZtZGFzaDtUaGUgaXRlbSB0ZW1wbGF0ZSBkaXJlY3RpdmUuXG4gKiAtIGBIZWFkZXJUZW1wbGF0ZURpcmVjdGl2ZWAmbWRhc2g7VGhlIGhlYWRlciB0ZW1wbGF0ZSBkaXJlY3RpdmUuXG4gKiAtIGBGb290ZXJUZW1wbGF0ZURpcmVjdGl2ZWAmbWRhc2g7VGhlIGZvb3RlciB0ZW1wbGF0ZSBkaXJlY3RpdmUuXG4gKiAtIGBOb0RhdGFUZW1wbGF0ZURpcmVjdGl2ZWAmbWRhc2g7VGhlIG5vRGF0YSB0ZW1wbGF0ZSBkaXJlY3RpdmUuXG4gKi9cbmNsYXNzIFNoYXJlZERpcmVjdGl2ZXNNb2R1bGUge1xufVxuU2hhcmVkRGlyZWN0aXZlc01vZHVsZS5kZWNvcmF0b3JzID0gW1xuICAgIHsgdHlwZTogTmdNb2R1bGUsIGFyZ3M6IFt7XG4gICAgICAgICAgICAgICAgZGVjbGFyYXRpb25zOiBbU0hBUkVEX0RJUkVDVElWRVNdLFxuICAgICAgICAgICAgICAgIGV4cG9ydHM6IFtTSEFSRURfRElSRUNUSVZFU11cbiAgICAgICAgICAgIH0sXSB9LFxuXTtcblxuY29uc3QgSU5URVJOQUxfRElSRUNUSVZFUyA9IFtcbiAgICBMaXN0Q29tcG9uZW50LFxuICAgIExpc3RJdGVtRGlyZWN0aXZlLFxuICAgIFNlbGVjdGFibGVEaXJlY3RpdmUsXG4gICAgU2VhcmNoQmFyQ29tcG9uZW50LFxuICAgIFRlbXBsYXRlQ29udGV4dERpcmVjdGl2ZVxuXTtcbi8qKlxuICogQGhpZGRlblxuICovXG5jbGFzcyBTaGFyZWRNb2R1bGUge1xufVxuU2hhcmVkTW9kdWxlLmRlY29yYXRvcnMgPSBbXG4gICAgeyB0eXBlOiBOZ01vZHVsZSwgYXJnczogW3tcbiAgICAgICAgICAgICAgICBkZWNsYXJhdGlvbnM6IFtJTlRFUk5BTF9ESVJFQ1RJVkVTXSxcbiAgICAgICAgICAgICAgICBleHBvcnRzOiBbSU5URVJOQUxfRElSRUNUSVZFUywgQ29tbW9uTW9kdWxlLCBGb3Jtc01vZHVsZSwgUG9wdXBNb2R1bGUsIFJlc2l6ZVNlbnNvck1vZHVsZSwgU2hhcmVkRGlyZWN0aXZlc01vZHVsZV0sXG4gICAgICAgICAgICAgICAgaW1wb3J0czogW0NvbW1vbk1vZHVsZSwgRm9ybXNNb2R1bGUsIFBvcHVwTW9kdWxlLCBSZXNpemVTZW5zb3JNb2R1bGUsIFNoYXJlZERpcmVjdGl2ZXNNb2R1bGVdXG4gICAgICAgICAgICB9LF0gfSxcbl07XG5cbmNvbnN0IEFVVE9DT01QTEVURV9ESVJFQ1RJVkVTID0gW1xuICAgIEF1dG9Db21wbGV0ZUNvbXBvbmVudFxuXTtcbi8qKlxuICogQGhpZGRlblxuICpcbiAqIFRoZSBleHBvcnRlZCBwYWNrYWdlIG1vZHVsZS5cbiAqXG4gKiBUaGUgcGFja2FnZSBleHBvcnRzOlxuICogLSBgQXV0b0NvbXBsZXRlQ29tcG9uZW50YCZtZGFzaDtUaGUgQXV0b0NvbXBsZXRlIGNvbXBvbmVudCBjbGFzcy5cbiAqIC0gYEl0ZW1UZW1wbGF0ZURpcmVjdGl2ZWAmbWRhc2g7VGhlIGl0ZW0gdGVtcGxhdGUgZGlyZWN0aXZlLlxuICogLSBgSGVhZGVyVGVtcGxhdGVEaXJlY3RpdmVgJm1kYXNoO1RoZSBoZWFkZXIgdGVtcGxhdGUgZGlyZWN0aXZlLlxuICogLSBgRm9vdGVyVGVtcGxhdGVEaXJlY3RpdmVgJm1kYXNoO1RoZSBmb290ZXIgdGVtcGxhdGUgZGlyZWN0aXZlLlxuICovXG5jbGFzcyBBdXRvQ29tcGxldGVNb2R1bGUge1xufVxuQXV0b0NvbXBsZXRlTW9kdWxlLmRlY29yYXRvcnMgPSBbXG4gICAgeyB0eXBlOiBOZ01vZHVsZSwgYXJnczogW3tcbiAgICAgICAgICAgICAgICBkZWNsYXJhdGlvbnM6IFtBVVRPQ09NUExFVEVfRElSRUNUSVZFU10sXG4gICAgICAgICAgICAgICAgZXhwb3J0czogW0FVVE9DT01QTEVURV9ESVJFQ1RJVkVTLCBTaGFyZWREaXJlY3RpdmVzTW9kdWxlXSxcbiAgICAgICAgICAgICAgICBpbXBvcnRzOiBbU2hhcmVkTW9kdWxlXVxuICAgICAgICAgICAgfSxdIH0sXG5dO1xuXG4vKiB0c2xpbnQ6ZGlzYWJsZTpvYmplY3QtbGl0ZXJhbC1zb3J0LWtleXMgKi9cbmNvbnN0IGFnZW50UnhzID0ge1xuICAgIHdwOiAvKFdpbmRvd3MgUGhvbmUoPzogT1MpPylcXHMoXFxkKylcXC4oXFxkKyhcXC5cXGQrKT8pLyxcbiAgICBmaXJlOiAvKFNpbGspXFwvKFxcZCspXFwuKFxcZCsoXFwuXFxkKyk/KS8sXG4gICAgYW5kcm9pZDogLyhBbmRyb2lkfEFuZHJvaWQuKig/Ok9wZXJhfEZpcmVmb3gpLio/XFwvKVxccyooXFxkKylcXC4oXFxkKyhcXC5cXGQrKT8pLyxcbiAgICBpcGhvbmU6IC8oaVBob25lfGlQb2QpLipPU1xccysoXFxkKylbXFwuX10oW1xcZFxcLl9dKykvLFxuICAgIGlwYWQ6IC8oaVBhZCkuKk9TXFxzKyhcXGQrKVtcXC5fXShbXFxkX10rKS8sXG4gICAgbWVlZ286IC8oTWVlR28pLitOb2tpYUJyb3dzZXJcXC8oXFxkKylcXC4oW1xcZFxcLl9dKykvLFxuICAgIHdlYm9zOiAvKHdlYk9TKVxcLyhcXGQrKVxcLihcXGQrKFxcLlxcZCspPykvLFxuICAgIGJsYWNrYmVycnk6IC8oQmxhY2tCZXJyeXxCQjEwKS4qP1ZlcnNpb25cXC8oXFxkKylcXC4oXFxkKyhcXC5cXGQrKT8pLyxcbiAgICBwbGF5Ym9vazogLyhQbGF5Qm9vaykuKj9UYWJsZXRcXHMqT1NcXHMqKFxcZCspXFwuKFxcZCsoXFwuXFxkKyk/KS8sXG4gICAgd2luZG93czogLyhNU0lFKVxccysoXFxkKylcXC4oXFxkKyhcXC5cXGQrKT8pLyxcbiAgICB0aXplbjogLyh0aXplbikuKj9WZXJzaW9uXFwvKFxcZCspXFwuKFxcZCsoXFwuXFxkKyk/KS9pLFxuICAgIHNhaWxmaXNoOiAvKHNhaWxmaXNoKS4qcnY6KFxcZCspXFwuKFxcZCsoXFwuXFxkKyk/KS4qZmlyZWZveC9pLFxuICAgIGZmb3M6IC8oTW9iaWxlKS4qcnY6KFxcZCspXFwuKFxcZCsoXFwuXFxkKyk/KS4qRmlyZWZveC9cbn07XG5jb25zdCBvc1J4cyA9IHtcbiAgICBpb3M6IC9eaShwaG9uZXxwYWR8cG9kKSQvaSxcbiAgICBhbmRyb2lkOiAvXmFuZHJvaWR8ZmlyZSQvaSxcbiAgICBibGFja2JlcnJ5OiAvXmJsYWNrYmVycnl8cGxheWJvb2svaSxcbiAgICB3aW5kb3dzOiAvd2luZG93cy8sXG4gICAgd3A6IC93cC8sXG4gICAgZmxhdDogL3NhaWxmaXNofGZmb3N8dGl6ZW4vaSxcbiAgICBtZWVnbzogL21lZWdvL1xufTtcbmNvbnN0IGRlc2t0b3BCcm93c2VyUnhzID0ge1xuICAgIGVkZ2U6IC8oZWRnZSlbIFxcL10oW1xcdy5dKykvaSxcbiAgICB3ZWJraXQ6IC8oY2hyb21lKVsgXFwvXShbXFx3Ll0rKS9pLFxuICAgIHNhZmFyaTogLyh3ZWJraXQpWyBcXC9dKFtcXHcuXSspL2ksXG4gICAgb3BlcmE6IC8ob3BlcmEpKD86Lip2ZXJzaW9ufClbIFxcL10oW1xcdy5dKykvaSxcbiAgICBtc2llOiAvKG1zaWVcXHN8dHJpZGVudC4qPyBydjopKFtcXHcuXSspL2ksXG4gICAgbW96aWxsYTogLyhtb3ppbGxhKSg/Oi4qPyBydjooW1xcdy5dKyl8KS9pXG59O1xuY29uc3QgbW9iaWxlQnJvd3NlclJ4cyA9IHtcbiAgICBvbWluaTogL09wZXJhXFxzTWluaS9pLFxuICAgIG9tb2JpbGU6IC9PcGVyYVxcc01vYmkvaSxcbiAgICBmaXJlZm94OiAvRmlyZWZveHxGZW5uZWMvaSxcbiAgICBtb2JpbGVzYWZhcmk6IC92ZXJzaW9uXFwvLipzYWZhcmkvaSxcbiAgICBpZTogL01TSUV8V2luZG93c1xcc1Bob25lL2ksXG4gICAgY2hyb21lOiAvY2hyb21lfGNyaW9zL2ksXG4gICAgd2Via2l0OiAvd2Via2l0L2lcbn07XG5jb25zdCB0ZXN0UnggPSAoYWdlbnQsIHJ4cywgZGZsdCkgPT4ge1xuICAgIGZvciAobGV0IHJ4IGluIHJ4cykge1xuICAgICAgICBpZiAocnhzLmhhc093blByb3BlcnR5KHJ4KSAmJiByeHNbcnhdLnRlc3QoYWdlbnQpKSB7XG4gICAgICAgICAgICByZXR1cm4gcng7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGRmbHQgIT09IHVuZGVmaW5lZCA/IGRmbHQgOiBhZ2VudDtcbn07XG4vKipcbiAqIEBoaWRkZW5cbiAqL1xuY29uc3QgZGV0ZWN0TW9iaWxlT1MgPSAodWEpID0+IHtcbiAgICBsZXQgbWlub3JWZXJzaW9uO1xuICAgIGxldCBtYXRjaCA9IFtdO1xuICAgIGZvciAobGV0IGFnZW50IGluIGFnZW50UnhzKSB7XG4gICAgICAgIGlmIChhZ2VudFJ4cy5oYXNPd25Qcm9wZXJ0eShhZ2VudCkpIHtcbiAgICAgICAgICAgIG1hdGNoID0gdWEubWF0Y2goYWdlbnRSeHNbYWdlbnRdKTtcbiAgICAgICAgICAgIGlmICghbWF0Y2gpIHtcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChhZ2VudCA9PT0gJ3dpbmRvd3MnICYmICdwbHVnaW5zJyBpbiB3aW5kb3cubmF2aWdhdG9yKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgICAgICB9IC8vIEJyZWFrIGlmIG5vdCBNZXRyby9Nb2JpbGUgV2luZG93c1xuICAgICAgICAgICAgY29uc3Qgb3MgPSB7fTtcbiAgICAgICAgICAgIG9zLmRldmljZSA9IGFnZW50O1xuICAgICAgICAgICAgb3MuYnJvd3NlciA9IHRlc3RSeCh1YSwgbW9iaWxlQnJvd3NlclJ4cywgJ2RlZmF1bHQnKTtcbiAgICAgICAgICAgIG9zLm5hbWUgPSB0ZXN0UngoYWdlbnQsIG9zUnhzKTtcbiAgICAgICAgICAgIG9zW29zLm5hbWVdID0gdHJ1ZTtcbiAgICAgICAgICAgIG9zLm1ham9yVmVyc2lvbiA9IG1hdGNoWzJdO1xuICAgICAgICAgICAgb3MubWlub3JWZXJzaW9uID0gbWF0Y2hbM10ucmVwbGFjZSgnXycsICcuJyk7XG4gICAgICAgICAgICBtaW5vclZlcnNpb24gPSBvcy5taW5vclZlcnNpb24ucmVwbGFjZSgnLicsICcnKS5zdWJzdHIoMCwgMik7XG4gICAgICAgICAgICBvcy5mbGF0VmVyc2lvbiA9IG9zLm1ham9yVmVyc2lvbiArIG1pbm9yVmVyc2lvbiArXG4gICAgICAgICAgICAgICAgKG5ldyBBcnJheSgzIC0gKG1pbm9yVmVyc2lvbi5sZW5ndGggPCAzID8gbWlub3JWZXJzaW9uLmxlbmd0aCA6IDIpKS5qb2luKCcwJykpO1xuICAgICAgICAgICAgb3MuY29yZG92YSA9IHR5cGVvZiB3aW5kb3cuUGhvbmVHYXAgIT09IHVuZGVmaW5lZFxuICAgICAgICAgICAgICAgIHx8IHR5cGVvZiB3aW5kb3cuY29yZG92YSAhPT0gdW5kZWZpbmVkOyAvLyBVc2UgZmlsZSBwcm90b2NvbCB0byBkZXRlY3QgYXBwTW9kZXMuXG4gICAgICAgICAgICBvcy5hcHBNb2RlID0gd2luZG93Lm5hdmlnYXRvci5zdGFuZGFsb25lXG4gICAgICAgICAgICAgICAgfHwgKC9maWxlfGxvY2FsfHdtYXBwLykudGVzdCh3aW5kb3cubG9jYXRpb24ucHJvdG9jb2wpXG4gICAgICAgICAgICAgICAgfHwgb3MuY29yZG92YTsgLy8gVXNlIGZpbGUgcHJvdG9jb2wgdG8gZGV0ZWN0IGFwcE1vZGVzLlxuICAgICAgICAgICAgcmV0dXJuIG9zO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBudWxsO1xufTtcbi8qKlxuICogQGhpZGRlblxuICovXG5jb25zdCBkZXRlY3REZXNrdG9wQnJvd3NlciA9ICh1YSkgPT4ge1xuICAgIGxldCBicm93c2VySW5mbyA9IG51bGw7XG4gICAgbGV0IG1hdGNoID0gW107XG4gICAgZm9yIChsZXQgYWdlbnQgaW4gZGVza3RvcEJyb3dzZXJSeHMpIHtcbiAgICAgICAgaWYgKGRlc2t0b3BCcm93c2VyUnhzLmhhc093blByb3BlcnR5KGFnZW50KSkge1xuICAgICAgICAgICAgbWF0Y2ggPSB1YS5tYXRjaChkZXNrdG9wQnJvd3NlclJ4c1thZ2VudF0pO1xuICAgICAgICAgICAgaWYgKG1hdGNoKSB7XG4gICAgICAgICAgICAgICAgYnJvd3NlckluZm8gPSB7fTtcbiAgICAgICAgICAgICAgICBicm93c2VySW5mb1thZ2VudF0gPSB0cnVlO1xuICAgICAgICAgICAgICAgIGJyb3dzZXJJbmZvW21hdGNoWzFdLnRvTG93ZXJDYXNlKCkuc3BsaXQoJyAnKVswXS5zcGxpdCgnLycpWzBdXSA9IHRydWU7XG4gICAgICAgICAgICAgICAgYnJvd3NlckluZm8udmVyc2lvbiA9IHBhcnNlSW50KGRvY3VtZW50LmRvY3VtZW50TW9kZSB8fCBtYXRjaFsyXSwgMTApO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBicm93c2VySW5mbztcbn07XG5jb25zdCB1c2VyQWdlbnQgPSBpc1dpbmRvd0F2YWlsYWJsZSgpICYmIHdpbmRvdy5uYXZpZ2F0b3IgPyB3aW5kb3cubmF2aWdhdG9yLnVzZXJBZ2VudCA6IG51bGw7XG4vKipcbiAqIEBoaWRkZW5cbiAqL1xuY29uc3QgYnJvd3NlciA9IHVzZXJBZ2VudCA/IGRldGVjdERlc2t0b3BCcm93c2VyKHVzZXJBZ2VudCkgOiBudWxsO1xuLyoqXG4gKiBAaGlkZGVuXG4gKi9cbmNvbnN0IG1vYmlsZU9TID0gdXNlckFnZW50ID8gZGV0ZWN0TW9iaWxlT1ModXNlckFnZW50KSA6IG51bGw7XG4vKipcbiAqIEBoaWRkZW5cbiAqL1xuY29uc3QgdG91Y2ggPSBpc1dpbmRvd0F2YWlsYWJsZSgpICYmICdvbnRvdWNoc3RhcnQnIGluIHdpbmRvdztcbi8qKlxuICogQGhpZGRlblxuICovXG5jb25zdCBtc1BvaW50ZXJzID0gYnJvd3NlciAmJiAhYnJvd3Nlci5jaHJvbWUgJiYgd2luZG93Lk1TUG9pbnRlckV2ZW50O1xuLyoqXG4gKiBAaGlkZGVuXG4gKi9cbmNvbnN0IHBvaW50ZXJzID0gYnJvd3NlciAmJiAhYnJvd3Nlci5jaHJvbWUgJiYgd2luZG93LlBvaW50ZXJFdmVudDtcbi8qKlxuICogQGhpZGRlblxuICovXG5jb25zdCB0b3VjaEVuYWJsZWQgPSBtb2JpbGVPUyAmJiAodG91Y2ggfHwgbXNQb2ludGVycyB8fCBwb2ludGVycyk7XG5cbmNvbnN0IENPTUJPQk9YX0RJUkVDVElWRVMgPSBbXG4gICAgQ29tYm9Cb3hDb21wb25lbnRcbl07XG5jb25zdCDJtTAkMSA9IHRvdWNoRW5hYmxlZDtcbi8qKlxuICogQGhpZGRlblxuICpcbiAqIFRoZSBleHBvcnRlZCBwYWNrYWdlIG1vZHVsZS5cbiAqXG4gKiBUaGUgcGFja2FnZSBleHBvcnRzOlxuICogLSBgQ29tYm9Cb3hDb21wb25lbnRgJm1kYXNoO1RoZSBDb21ib0JveCBjb21wb25lbnQgY2xhc3MuXG4gKiAtIGBJdGVtVGVtcGxhdGVEaXJlY3RpdmVgJm1kYXNoO1RoZSBpdGVtIHRlbXBsYXRlIGRpcmVjdGl2ZS5cbiAqIC0gYEhlYWRlclRlbXBsYXRlRGlyZWN0aXZlYCZtZGFzaDtUaGUgaGVhZGVyIHRlbXBsYXRlIGRpcmVjdGl2ZS5cbiAqIC0gYEZvb3RlclRlbXBsYXRlRGlyZWN0aXZlYCZtZGFzaDtUaGUgZm9vdGVyIHRlbXBsYXRlIGRpcmVjdGl2ZS5cbiAqL1xuY2xhc3MgQ29tYm9Cb3hNb2R1bGUge1xufVxuQ29tYm9Cb3hNb2R1bGUuZGVjb3JhdG9ycyA9IFtcbiAgICB7IHR5cGU6IE5nTW9kdWxlLCBhcmdzOiBbe1xuICAgICAgICAgICAgICAgIGRlY2xhcmF0aW9uczogW0NPTUJPQk9YX0RJUkVDVElWRVNdLFxuICAgICAgICAgICAgICAgIGV4cG9ydHM6IFtDT01CT0JPWF9ESVJFQ1RJVkVTLCBTaGFyZWREaXJlY3RpdmVzTW9kdWxlXSxcbiAgICAgICAgICAgICAgICBpbXBvcnRzOiBbU2hhcmVkTW9kdWxlXSxcbiAgICAgICAgICAgICAgICBwcm92aWRlcnM6IFt7IHByb3ZpZGU6IFRPVUNIX0VOQUJMRUQsIHVzZVZhbHVlOiDJtTAkMSB9XVxuICAgICAgICAgICAgfSxdIH0sXG5dO1xuXG4vKipcbiAqIEBoaWRkZW5cbiAqL1xuY2xhc3MgRmlsdGVySW5wdXREaXJlY3RpdmUge1xuICAgIGNvbnN0cnVjdG9yKGVsZW1lbnQsIHpvbmUpIHtcbiAgICAgICAgdGhpcy5lbGVtZW50ID0gZWxlbWVudDtcbiAgICAgICAgdGhpcy56b25lID0gem9uZTtcbiAgICB9XG4gICAgbmdPbkNoYW5nZXMoKSB7XG4gICAgICAgIGlmICh0aGlzLmZvY3VzZWQpIHtcbiAgICAgICAgICAgIHRoaXMubmV4dFRpY2soKCkgPT4gdGhpcy5lbGVtZW50Lm5hdGl2ZUVsZW1lbnQuZm9jdXMoKSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgbmV4dFRpY2soZm4pIHtcbiAgICAgICAgdGhpcy56b25lLnJ1bk91dHNpZGVBbmd1bGFyKCgpID0+IHNldFRpbWVvdXQoZm4pKTtcbiAgICB9XG59XG5GaWx0ZXJJbnB1dERpcmVjdGl2ZS5kZWNvcmF0b3JzID0gW1xuICAgIHsgdHlwZTogRGlyZWN0aXZlLCBhcmdzOiBbe1xuICAgICAgICAgICAgICAgIHNlbGVjdG9yOiAnW2ZpbHRlcklucHV0XScgLy8gdHNsaW50OmRpc2FibGUtbGluZVxuICAgICAgICAgICAgfSxdIH0sXG5dO1xuLyoqIEBub2NvbGxhcHNlICovXG5GaWx0ZXJJbnB1dERpcmVjdGl2ZS5jdG9yUGFyYW1ldGVycyA9ICgpID0+IFtcbiAgICB7IHR5cGU6IEVsZW1lbnRSZWYgfSxcbiAgICB7IHR5cGU6IE5nWm9uZSB9XG5dO1xuRmlsdGVySW5wdXREaXJlY3RpdmUucHJvcERlY29yYXRvcnMgPSB7XG4gICAgZm9jdXNlZDogW3sgdHlwZTogSW5wdXQsIGFyZ3M6IFsnZmlsdGVySW5wdXQnLF0gfV1cbn07XG5cbmNvbnN0IERST1BET1dOTElTVF9ESVJFQ1RJVkVTID0gW1xuICAgIERyb3BEb3duTGlzdENvbXBvbmVudCxcbiAgICBWYWx1ZVRlbXBsYXRlRGlyZWN0aXZlLFxuICAgIEZpbHRlcklucHV0RGlyZWN0aXZlXG5dO1xuLyoqXG4gKiBAaGlkZGVuXG4gKlxuICogVGhlIGV4cG9ydGVkIHBhY2thZ2UgbW9kdWxlLlxuICpcbiAqIFRoZSBwYWNrYWdlIGV4cG9ydHM6XG4gKiAtIGBEcm9wRG93bkxpc3RDb21wb25lbnRgJm1kYXNoO1RoZSBEcm9wRG93bkxpc3QgY29tcG9uZW50IGNsYXNzLlxuICogLSBgSXRlbVRlbXBsYXRlRGlyZWN0aXZlYCZtZGFzaDtUaGUgaXRlbSB0ZW1wbGF0ZSBkaXJlY3RpdmUuXG4gKiAtIGBWYWx1ZVRlbXBsYXRlRGlyZWN0aXZlYCZtZGFzaDtUaGUgdmFsdWUgdGVtcGxhdGUgZGlyZWN0aXZlLlxuICogLSBgSGVhZGVyVGVtcGxhdGVEaXJlY3RpdmVgJm1kYXNoO1RoZSBoZWFkZXIgdGVtcGxhdGUgZGlyZWN0aXZlLlxuICogLSBgRm9vdGVyVGVtcGxhdGVEaXJlY3RpdmVgJm1kYXNoO1RoZSBmb290ZXIgdGVtcGxhdGUgZGlyZWN0aXZlLlxuICovXG5jbGFzcyBEcm9wRG93bkxpc3RNb2R1bGUge1xufVxuRHJvcERvd25MaXN0TW9kdWxlLmRlY29yYXRvcnMgPSBbXG4gICAgeyB0eXBlOiBOZ01vZHVsZSwgYXJnczogW3tcbiAgICAgICAgICAgICAgICBkZWNsYXJhdGlvbnM6IFtEUk9QRE9XTkxJU1RfRElSRUNUSVZFU10sXG4gICAgICAgICAgICAgICAgZXhwb3J0czogW0RST1BET1dOTElTVF9ESVJFQ1RJVkVTLCBTaGFyZWREaXJlY3RpdmVzTW9kdWxlXSxcbiAgICAgICAgICAgICAgICBpbXBvcnRzOiBbU2hhcmVkTW9kdWxlXVxuICAgICAgICAgICAgfSxdIH0sXG5dO1xuXG5jb25zdCBNVUxUSVNFTEVDVF9ESVJFQ1RJVkVTID0gW1xuICAgIE11bHRpU2VsZWN0Q29tcG9uZW50LFxuICAgIFRhZ0xpc3RDb21wb25lbnQsXG4gICAgVGFnVGVtcGxhdGVEaXJlY3RpdmUsXG4gICAgR3JvdXBUYWdUZW1wbGF0ZURpcmVjdGl2ZSxcbiAgICBTdW1tYXJ5VGFnRGlyZWN0aXZlLFxuICAgIEN1c3RvbUl0ZW1UZW1wbGF0ZURpcmVjdGl2ZVxuXTtcbmNvbnN0IMm1MCQyID0gdG91Y2hFbmFibGVkO1xuLyoqXG4gKiBAaGlkZGVuXG4gKlxuICogVGhlIGV4cG9ydGVkIHBhY2thZ2UgbW9kdWxlLlxuICpcbiAqIFRoZSBwYWNrYWdlIGV4cG9ydHM6XG4gKiAtIGBNdWx0aVNlbGVjdENvbXBvbmVudGAmbWRhc2g7VGhlIE11bHRpU2VsZWN0IGNvbXBvbmVudCBjbGFzcy5cbiAqIC0gYFN1bW1hcnlUYWdEaXJlY3RpdmVgJm1kYXNoO1RoZSBNdWx0aVNlbGVjdCBzdW1tYXJ5IHRhZyBkaXJlY3RpdmUuXG4gKiAtIGBJdGVtVGVtcGxhdGVEaXJlY3RpdmVgJm1kYXNoO1RoZSBpdGVtIHRlbXBsYXRlIGRpcmVjdGl2ZS5cbiAqIC0gYEN1c3RvbUl0ZW1UZW1wbGF0ZURpcmVjdGl2ZWAmbWRhc2g7VGhlIGN1c3RvbSBpdGVtIHRlbXBsYXRlIGRpcmVjdGl2ZS5cbiAqIC0gYFRhZ1RlbXBsYXRlRGlyZWN0aXZlYCZtZGFzaDtUaGUgdGFnIHRlbXBsYXRlIGRpcmVjdGl2ZS5cbiAqIC0gYFN1bW1hcnlUYWdUZW1wbGF0ZURpcmVjdGl2ZWAmbWRhc2g7VGhlIHN1bW1hcnkgdGFnIHRlbXBsYXRlIGRpcmVjdGl2ZS5cbiAqIC0gYEhlYWRlclRlbXBsYXRlRGlyZWN0aXZlYCZtZGFzaDtUaGUgaGVhZGVyIHRlbXBsYXRlIGRpcmVjdGl2ZS5cbiAqIC0gYEZvb3RlclRlbXBsYXRlRGlyZWN0aXZlYCZtZGFzaDtUaGUgZm9vdGVyIHRlbXBsYXRlIGRpcmVjdGl2ZS5cbiAqIC0gYE5vRGF0YVRlbXBsYXRlRGlyZWN0aXZlYCZtZGFzaDtUaGUgbm8tZGF0YSB0ZW1wbGF0ZSBkaXJlY3RpdmUuXG4gKi9cbmNsYXNzIE11bHRpU2VsZWN0TW9kdWxlIHtcbn1cbk11bHRpU2VsZWN0TW9kdWxlLmRlY29yYXRvcnMgPSBbXG4gICAgeyB0eXBlOiBOZ01vZHVsZSwgYXJnczogW3tcbiAgICAgICAgICAgICAgICBkZWNsYXJhdGlvbnM6IFtNVUxUSVNFTEVDVF9ESVJFQ1RJVkVTXSxcbiAgICAgICAgICAgICAgICBleHBvcnRzOiBbTVVMVElTRUxFQ1RfRElSRUNUSVZFUywgU2hhcmVkRGlyZWN0aXZlc01vZHVsZV0sXG4gICAgICAgICAgICAgICAgaW1wb3J0czogW1NoYXJlZE1vZHVsZV0sXG4gICAgICAgICAgICAgICAgcHJvdmlkZXJzOiBbeyBwcm92aWRlOiBUT1VDSF9FTkFCTEVELCB1c2VWYWx1ZTogybUwJDIgfV1cbiAgICAgICAgICAgIH0sXSB9LFxuXTtcblxuLyoqXG4gKiBSZXByZXNlbnRzIHRoZSBbTmdNb2R1bGVdKHt7IHNpdGUuZGF0YS51cmxzLmFuZ3VsYXJbJ25nbW9kdWxlYXBpJ10gfX0pXG4gKiBkZWZpbml0aW9uIGZvciB0aGUgRHJvcGRvd25zIGNvbXBvbmVudHMuXG4gKlxuICogQGV4YW1wbGVcbiAqXG4gKiBgYGB0cy1uby1ydW5cbiAqIC8vIEltcG9ydCB0aGUgRHJvcGRvd25zIG1vZHVsZVxuICogaW1wb3J0IHsgRHJvcERvd25zTW9kdWxlIH0gZnJvbSAnQHByb2dyZXNzL2tlbmRvLWFuZ3VsYXItZHJvcGRvd25zJztcbiAqXG4gKiAvLyBUaGUgYnJvd3NlciBwbGF0Zm9ybSB3aXRoIGEgY29tcGlsZXJcbiAqIGltcG9ydCB7IHBsYXRmb3JtQnJvd3NlckR5bmFtaWMgfSBmcm9tICdAYW5ndWxhci9wbGF0Zm9ybS1icm93c2VyLWR5bmFtaWMnO1xuICpcbiAqIGltcG9ydCB7IE5nTW9kdWxlIH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG4gKlxuICogLy8gSW1wb3J0IHRoZSBhcHAgY29tcG9uZW50XG4gKiBpbXBvcnQgeyBBcHBDb21wb25lbnQgfSBmcm9tICcuL2FwcC5jb21wb25lbnQnO1xuICpcbiAqIC8vIERlZmluZSB0aGUgYXBwIG1vZHVsZVxuICogX0BOZ01vZHVsZSh7XG4gKiAgICAgZGVjbGFyYXRpb25zOiBbQXBwQ29tcG9uZW50XSwgLy8gZGVjbGFyZSB0aGUgYXBwIGNvbXBvbmVudFxuICogICAgIGltcG9ydHM6ICAgICAgW0Jyb3dzZXJNb2R1bGUsIERyb3BEb3duc01vZHVsZV0sIC8vIGltcG9ydCB0aGUgRHJvcGRvd25zIG1vZHVsZVxuICogICAgIGJvb3RzdHJhcDogICAgW0FwcENvbXBvbmVudF1cbiAqIH0pXG4gKiBleHBvcnQgY2xhc3MgQXBwTW9kdWxlIHt9XG4gKlxuICogLy8gQ29tcGlsZSBhbmQgbGF1bmNoIHRoZSBtb2R1bGVcbiAqIHBsYXRmb3JtQnJvd3NlckR5bmFtaWMoKS5ib290c3RyYXBNb2R1bGUoQXBwTW9kdWxlKTtcbiAqXG4gKiBgYGBcbiAqL1xuY2xhc3MgRHJvcERvd25zTW9kdWxlIHtcbn1cbkRyb3BEb3duc01vZHVsZS5kZWNvcmF0b3JzID0gW1xuICAgIHsgdHlwZTogTmdNb2R1bGUsIGFyZ3M6IFt7XG4gICAgICAgICAgICAgICAgZXhwb3J0czogW0F1dG9Db21wbGV0ZU1vZHVsZSwgQ29tYm9Cb3hNb2R1bGUsIERyb3BEb3duTGlzdE1vZHVsZSwgTXVsdGlTZWxlY3RNb2R1bGVdXG4gICAgICAgICAgICB9LF0gfSxcbl07XG5cbi8qKlxuICogR2VuZXJhdGVkIGJ1bmRsZSBpbmRleC4gRG8gbm90IGVkaXQuXG4gKi9cblxuZXhwb3J0IHsgQVVUT0NPTVBMRVRFX1ZBTFVFX0FDQ0VTU09SLCBDT01CT0JPWF9WQUxVRV9BQ0NFU1NPUiwgRGF0YVNlcnZpY2UsIERpc2FibGVkSXRlbXNTZXJ2aWNlLCBEUk9QRE9XTkxJU1RfVkFMVUVfQUNDRVNTT1IsIEZpbHRlcklucHV0RGlyZWN0aXZlLCBGaWx0ZXJhYmxlRHJvcERvd25Db21wb25lbnRCYXNlLCBMaXN0SXRlbURpcmVjdGl2ZSwgQ3VzdG9tTWVzc2FnZXNDb21wb25lbnQsIExvY2FsaXplZE1lc3NhZ2VzRGlyZWN0aXZlLCBNZXNzYWdlcywgTmF2aWdhdGlvblNlcnZpY2UsIFNlYXJjaEJhckNvbXBvbmVudCwgU2VsZWN0aW9uU2VydmljZSwgYnJvd3NlciwgZGV0ZWN0RGVza3RvcEJyb3dzZXIsIGRldGVjdE1vYmlsZU9TLCBtb2JpbGVPUywgbXNQb2ludGVycywgcG9pbnRlcnMsIHRvdWNoLCB0b3VjaEVuYWJsZWQsIE5vRGF0YVRlbXBsYXRlRGlyZWN0aXZlLCBUYWdUZW1wbGF0ZURpcmVjdGl2ZSwgVE9VQ0hfRU5BQkxFRCwgaXNXaW5kb3dBdmFpbGFibGUsIEF1dG9Db21wbGV0ZUNvbXBvbmVudCwgQ29tYm9Cb3hDb21wb25lbnQsIERyb3BEb3duTGlzdENvbXBvbmVudCwgTXVsdGlTZWxlY3RDb21wb25lbnQsIFRhZ0xpc3RDb21wb25lbnQsIEl0ZW1UZW1wbGF0ZURpcmVjdGl2ZSwgR3JvdXBUZW1wbGF0ZURpcmVjdGl2ZSwgRml4ZWRHcm91cFRlbXBsYXRlRGlyZWN0aXZlLCBDdXN0b21JdGVtVGVtcGxhdGVEaXJlY3RpdmUsIEhlYWRlclRlbXBsYXRlRGlyZWN0aXZlLCBGb290ZXJUZW1wbGF0ZURpcmVjdGl2ZSwgVmFsdWVUZW1wbGF0ZURpcmVjdGl2ZSwgVGVtcGxhdGVDb250ZXh0RGlyZWN0aXZlLCBHcm91cFRhZ1RlbXBsYXRlRGlyZWN0aXZlLCBTZWxlY3RhYmxlRGlyZWN0aXZlLCBTdW1tYXJ5VGFnRGlyZWN0aXZlLCBGaWx0ZXJEaXJlY3RpdmUsIERyb3BEb3duc01vZHVsZSwgTXVsdGlTZWxlY3RNb2R1bGUsIFNoYXJlZE1vZHVsZSwgQXV0b0NvbXBsZXRlTW9kdWxlLCBDb21ib0JveE1vZHVsZSwgRHJvcERvd25MaXN0TW9kdWxlLCBTaGFyZWREaXJlY3RpdmVzTW9kdWxlLCBMaXN0Q29tcG9uZW50LCBQcmV2ZW50YWJsZUV2ZW50IH07XG4iXX0=

/***/ }),

/***/ "../../node_modules/@progress/kendo-angular-l10n/dist/fesm2015/index.js":
/*!***********************************************************************************************************!*\
  !*** /home/abdel/www/project/formly/lib/node_modules/@progress/kendo-angular-l10n/dist/fesm2015/index.js ***!
  \***********************************************************************************************************/
/*! exports provided: MessageService, ComponentMessages, L10N_PREFIX, LocalizationService, RTL */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "MessageService", function() { return MessageService; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ComponentMessages", function() { return ComponentMessages; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "L10N_PREFIX", function() { return L10N_PREFIX; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "LocalizationService", function() { return LocalizationService; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "RTL", function() { return RTL; });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/core */ "../../node_modules/@angular/core/__ivy_ngcc__/fesm2015/core.js");
/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! rxjs */ "../../node_modules/rxjs/_esm2015/index.js");
/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! rxjs/operators */ "../../node_modules/rxjs/_esm2015/operators/index.js");
/**-----------------------------------------------------------------------------------------
* Copyright © 2019 Progress Software Corporation. All rights reserved.
* Licensed under commercial license. See LICENSE.md in the project root for more information
*-------------------------------------------------------------------------------------------*/




/* tslint:disable:max-line-length */
/**
 * A base class for a service that returns localized messages.
 *
 * For more information, refer to the section on [using the message service]({% slug messages_l10n %}#toc-using-the-message-service).
 */

class MessageService {
    constructor() {
        /**
         * @hidden
         */
        this.changes = new rxjs__WEBPACK_IMPORTED_MODULE_1__["Subject"]();
    }
    /**
     * Notifies the components that the messages were changed.
     *
     * @param rtl - (Optional) A new value for the [text direction token]({% slug api_l10n_rtl %}).
     */
    notify(rtl) {
        this.changes.next({ rtl });
    }
    /**
     * Returns a localized message for the supplied key.
     *
     * @param key - The message key. For example, `"kendo.grid.noRecords"`.
     * @return - The localized message for this key or `undefined` if not found.
     */
    get(key) {
        return undefined;
    }
}
MessageService.ɵfac = function MessageService_Factory(t) { return new (t || MessageService)(); };
MessageService.ɵprov = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdefineInjectable"]({ token: MessageService, factory: MessageService.ɵfac });
/*@__PURE__*/ (function () { _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵsetClassMetadata"](MessageService, [{
        type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Injectable"]
    }], function () { return []; }, null); })();

/**
 * Base class that acts as a component messages container.
 *
 * For internal use.
 * @hidden
 */
class ComponentMessages {
    get override() {
        return false;
    }
    ngOnChanges(changes) {
        this.register(changes);
        if (Object.keys(changes).some(field => !changes[field].isFirstChange())) {
            this.service.notifyChanges();
        }
    }
    ngOnInit() {
        this.subscription = this.service.changes.pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_2__["skip"])(1)).subscribe(() => this.register(this));
    }
    register(changes) {
        const keys = Object.keys(changes);
        keys.forEach(key => this.service.register(key, this[key], this.override));
    }
    ngOnDestroy() {
        if (this.subscription) {
            this.subscription.unsubscribe();
        }
    }
}
ComponentMessages.ɵfac = function ComponentMessages_Factory(t) { return new (t || ComponentMessages)(); };
ComponentMessages.ɵdir = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdefineDirective"]({ type: ComponentMessages, features: [_angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵNgOnChangesFeature"]] });


/**
 * A token that specifies the text direction of Kendo UI for Angular components.
 *
 * @example
 * {% embed_file rtl/app.module.ts preview %}
 * {% embed_file rtl/app.component.ts %}
 * {% embed_file shared/main.ts hidden %}
 *
 */
const RTL = new _angular_core__WEBPACK_IMPORTED_MODULE_0__["InjectionToken"]("Kendo UI Right-to-Left token");

/**
 * Localization prefix for the component messages.
 *
 * For internal use.
 * @hidden
 */
const L10N_PREFIX = new _angular_core__WEBPACK_IMPORTED_MODULE_0__["InjectionToken"]('Localization key prefix');
/**
 * Component localization service.
 *
 * For internal use.
 * @hidden
 */
class LocalizationService {
    constructor(prefix, messageService, _rtl) {
        this.prefix = prefix;
        this.messageService = messageService;
        this._rtl = _rtl;
        this.changes = new rxjs__WEBPACK_IMPORTED_MODULE_1__["BehaviorSubject"]({ rtl: this._rtl });
        this.dictionary = {};
        if (messageService) {
            this.subscription = messageService.changes
                .pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_2__["map"])(({ rtl }) => rtl !== undefined ? rtl : this._rtl), Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_2__["tap"])(rtl => this._rtl = rtl))
                .subscribe(rtl => {
                this.dictionary = {};
                this.changes.next({ rtl });
            });
        }
    }
    get rtl() {
        return this._rtl;
    }
    ngOnDestroy() {
        if (this.subscription) {
            this.subscription.unsubscribe();
        }
    }
    get(shortKey) {
        const key = this.key(shortKey);
        return this.dictionary[key];
    }
    register(shortKey, value, override = false) {
        const key = this.key(shortKey);
        let message = value;
        if (!override) {
            if (this.dictionary.hasOwnProperty(key)) {
                return;
            }
            message = this.defaultValue(key, value);
        }
        this.dictionary[key] = message;
    }
    notifyChanges() {
        this.changes.next({ rtl: this.rtl });
    }
    key(shortKey) {
        return this.prefix + '.' + shortKey;
    }
    defaultValue(key, value) {
        if (!this.messageService) {
            return value;
        }
        const alt = this.messageService.get(key);
        return (alt === undefined) ? value : alt;
    }
}
LocalizationService.ɵfac = function LocalizationService_Factory(t) { return new (t || LocalizationService)(_angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵinject"](L10N_PREFIX), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵinject"](MessageService, 8), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵinject"](RTL, 8)); };
LocalizationService.ɵprov = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdefineInjectable"]({ token: LocalizationService, factory: LocalizationService.ɵfac });
/** @nocollapse */
LocalizationService.ctorParameters = () => [
    { type: String, decorators: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Inject"], args: [L10N_PREFIX,] }] },
    { type: MessageService, decorators: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Optional"] }] },
    { type: Boolean, decorators: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Optional"] }, { type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Inject"], args: [RTL,] }] }
];
/*@__PURE__*/ (function () { _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵsetClassMetadata"](LocalizationService, [{
        type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Injectable"]
    }], function () { return [{ type: String, decorators: [{
                type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Inject"],
                args: [L10N_PREFIX]
            }] }, { type: MessageService, decorators: [{
                type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Optional"]
            }] }, { type: Boolean, decorators: [{
                type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Optional"]
            }, {
                type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Inject"],
                args: [RTL]
            }] }]; }, null); })();

/**
 * Generated bundle index. Do not edit.
 */



//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaW5kZXguanMiLCJzb3VyY2VzIjpbImluZGV4LmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7O2dEQUdFO0FBQ0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFBQztBQUNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7eUhBR0U7QUFDRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7Ozs7a0NBQUU7QUFDRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VzQ29udGVudCI6WyIvKiotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuKiBDb3B5cmlnaHQgwqkgMjAxOSBQcm9ncmVzcyBTb2Z0d2FyZSBDb3Jwb3JhdGlvbi4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiogTGljZW5zZWQgdW5kZXIgY29tbWVyY2lhbCBsaWNlbnNlLiBTZWUgTElDRU5TRS5tZCBpbiB0aGUgcHJvamVjdCByb290IGZvciBtb3JlIGluZm9ybWF0aW9uXG4qLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXG5pbXBvcnQgeyBJbmplY3QsIEluamVjdGFibGUsIEluamVjdGlvblRva2VuLCBPcHRpb25hbCB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuaW1wb3J0IHsgQmVoYXZpb3JTdWJqZWN0LCBTdWJqZWN0IH0gZnJvbSAncnhqcyc7XG5pbXBvcnQgeyBtYXAsIHNraXAsIHRhcCB9IGZyb20gJ3J4anMvb3BlcmF0b3JzJztcblxuLyogdHNsaW50OmRpc2FibGU6bWF4LWxpbmUtbGVuZ3RoICovXG4vKipcbiAqIEEgYmFzZSBjbGFzcyBmb3IgYSBzZXJ2aWNlIHRoYXQgcmV0dXJucyBsb2NhbGl6ZWQgbWVzc2FnZXMuXG4gKlxuICogRm9yIG1vcmUgaW5mb3JtYXRpb24sIHJlZmVyIHRvIHRoZSBzZWN0aW9uIG9uIFt1c2luZyB0aGUgbWVzc2FnZSBzZXJ2aWNlXSh7JSBzbHVnIG1lc3NhZ2VzX2wxMG4gJX0jdG9jLXVzaW5nLXRoZS1tZXNzYWdlLXNlcnZpY2UpLlxuICovXG5jbGFzcyBNZXNzYWdlU2VydmljZSB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAaGlkZGVuXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmNoYW5nZXMgPSBuZXcgU3ViamVjdCgpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBOb3RpZmllcyB0aGUgY29tcG9uZW50cyB0aGF0IHRoZSBtZXNzYWdlcyB3ZXJlIGNoYW5nZWQuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gcnRsIC0gKE9wdGlvbmFsKSBBIG5ldyB2YWx1ZSBmb3IgdGhlIFt0ZXh0IGRpcmVjdGlvbiB0b2tlbl0oeyUgc2x1ZyBhcGlfbDEwbl9ydGwgJX0pLlxuICAgICAqL1xuICAgIG5vdGlmeShydGwpIHtcbiAgICAgICAgdGhpcy5jaGFuZ2VzLm5leHQoeyBydGwgfSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHVybnMgYSBsb2NhbGl6ZWQgbWVzc2FnZSBmb3IgdGhlIHN1cHBsaWVkIGtleS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBrZXkgLSBUaGUgbWVzc2FnZSBrZXkuIEZvciBleGFtcGxlLCBgXCJrZW5kby5ncmlkLm5vUmVjb3Jkc1wiYC5cbiAgICAgKiBAcmV0dXJuIC0gVGhlIGxvY2FsaXplZCBtZXNzYWdlIGZvciB0aGlzIGtleSBvciBgdW5kZWZpbmVkYCBpZiBub3QgZm91bmQuXG4gICAgICovXG4gICAgZ2V0KGtleSkge1xuICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgIH1cbn1cbk1lc3NhZ2VTZXJ2aWNlLmRlY29yYXRvcnMgPSBbXG4gICAgeyB0eXBlOiBJbmplY3RhYmxlIH0sXG5dO1xuXG4vKipcbiAqIEJhc2UgY2xhc3MgdGhhdCBhY3RzIGFzIGEgY29tcG9uZW50IG1lc3NhZ2VzIGNvbnRhaW5lci5cbiAqXG4gKiBGb3IgaW50ZXJuYWwgdXNlLlxuICogQGhpZGRlblxuICovXG5jbGFzcyBDb21wb25lbnRNZXNzYWdlcyB7XG4gICAgZ2V0IG92ZXJyaWRlKCkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIG5nT25DaGFuZ2VzKGNoYW5nZXMpIHtcbiAgICAgICAgdGhpcy5yZWdpc3RlcihjaGFuZ2VzKTtcbiAgICAgICAgaWYgKE9iamVjdC5rZXlzKGNoYW5nZXMpLnNvbWUoZmllbGQgPT4gIWNoYW5nZXNbZmllbGRdLmlzRmlyc3RDaGFuZ2UoKSkpIHtcbiAgICAgICAgICAgIHRoaXMuc2VydmljZS5ub3RpZnlDaGFuZ2VzKCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgbmdPbkluaXQoKSB7XG4gICAgICAgIHRoaXMuc3Vic2NyaXB0aW9uID0gdGhpcy5zZXJ2aWNlLmNoYW5nZXMucGlwZShza2lwKDEpKS5zdWJzY3JpYmUoKCkgPT4gdGhpcy5yZWdpc3Rlcih0aGlzKSk7XG4gICAgfVxuICAgIHJlZ2lzdGVyKGNoYW5nZXMpIHtcbiAgICAgICAgY29uc3Qga2V5cyA9IE9iamVjdC5rZXlzKGNoYW5nZXMpO1xuICAgICAgICBrZXlzLmZvckVhY2goa2V5ID0+IHRoaXMuc2VydmljZS5yZWdpc3RlcihrZXksIHRoaXNba2V5XSwgdGhpcy5vdmVycmlkZSkpO1xuICAgIH1cbiAgICBuZ09uRGVzdHJveSgpIHtcbiAgICAgICAgaWYgKHRoaXMuc3Vic2NyaXB0aW9uKSB7XG4gICAgICAgICAgICB0aGlzLnN1YnNjcmlwdGlvbi51bnN1YnNjcmliZSgpO1xuICAgICAgICB9XG4gICAgfVxufVxuXG4vKipcbiAqIEEgdG9rZW4gdGhhdCBzcGVjaWZpZXMgdGhlIHRleHQgZGlyZWN0aW9uIG9mIEtlbmRvIFVJIGZvciBBbmd1bGFyIGNvbXBvbmVudHMuXG4gKlxuICogQGV4YW1wbGVcbiAqIHslIGVtYmVkX2ZpbGUgcnRsL2FwcC5tb2R1bGUudHMgcHJldmlldyAlfVxuICogeyUgZW1iZWRfZmlsZSBydGwvYXBwLmNvbXBvbmVudC50cyAlfVxuICogeyUgZW1iZWRfZmlsZSBzaGFyZWQvbWFpbi50cyBoaWRkZW4gJX1cbiAqXG4gKi9cbmNvbnN0IFJUTCA9IG5ldyBJbmplY3Rpb25Ub2tlbihcIktlbmRvIFVJIFJpZ2h0LXRvLUxlZnQgdG9rZW5cIik7XG5cbi8qKlxuICogTG9jYWxpemF0aW9uIHByZWZpeCBmb3IgdGhlIGNvbXBvbmVudCBtZXNzYWdlcy5cbiAqXG4gKiBGb3IgaW50ZXJuYWwgdXNlLlxuICogQGhpZGRlblxuICovXG5jb25zdCBMMTBOX1BSRUZJWCA9IG5ldyBJbmplY3Rpb25Ub2tlbignTG9jYWxpemF0aW9uIGtleSBwcmVmaXgnKTtcbi8qKlxuICogQ29tcG9uZW50IGxvY2FsaXphdGlvbiBzZXJ2aWNlLlxuICpcbiAqIEZvciBpbnRlcm5hbCB1c2UuXG4gKiBAaGlkZGVuXG4gKi9cbmNsYXNzIExvY2FsaXphdGlvblNlcnZpY2Uge1xuICAgIGNvbnN0cnVjdG9yKHByZWZpeCwgbWVzc2FnZVNlcnZpY2UsIF9ydGwpIHtcbiAgICAgICAgdGhpcy5wcmVmaXggPSBwcmVmaXg7XG4gICAgICAgIHRoaXMubWVzc2FnZVNlcnZpY2UgPSBtZXNzYWdlU2VydmljZTtcbiAgICAgICAgdGhpcy5fcnRsID0gX3J0bDtcbiAgICAgICAgdGhpcy5jaGFuZ2VzID0gbmV3IEJlaGF2aW9yU3ViamVjdCh7IHJ0bDogdGhpcy5fcnRsIH0pO1xuICAgICAgICB0aGlzLmRpY3Rpb25hcnkgPSB7fTtcbiAgICAgICAgaWYgKG1lc3NhZ2VTZXJ2aWNlKSB7XG4gICAgICAgICAgICB0aGlzLnN1YnNjcmlwdGlvbiA9IG1lc3NhZ2VTZXJ2aWNlLmNoYW5nZXNcbiAgICAgICAgICAgICAgICAucGlwZShtYXAoKHsgcnRsIH0pID0+IHJ0bCAhPT0gdW5kZWZpbmVkID8gcnRsIDogdGhpcy5fcnRsKSwgdGFwKHJ0bCA9PiB0aGlzLl9ydGwgPSBydGwpKVxuICAgICAgICAgICAgICAgIC5zdWJzY3JpYmUocnRsID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLmRpY3Rpb25hcnkgPSB7fTtcbiAgICAgICAgICAgICAgICB0aGlzLmNoYW5nZXMubmV4dCh7IHJ0bCB9KTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfVxuICAgIGdldCBydGwoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9ydGw7XG4gICAgfVxuICAgIG5nT25EZXN0cm95KCkge1xuICAgICAgICBpZiAodGhpcy5zdWJzY3JpcHRpb24pIHtcbiAgICAgICAgICAgIHRoaXMuc3Vic2NyaXB0aW9uLnVuc3Vic2NyaWJlKCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZ2V0KHNob3J0S2V5KSB7XG4gICAgICAgIGNvbnN0IGtleSA9IHRoaXMua2V5KHNob3J0S2V5KTtcbiAgICAgICAgcmV0dXJuIHRoaXMuZGljdGlvbmFyeVtrZXldO1xuICAgIH1cbiAgICByZWdpc3RlcihzaG9ydEtleSwgdmFsdWUsIG92ZXJyaWRlID0gZmFsc2UpIHtcbiAgICAgICAgY29uc3Qga2V5ID0gdGhpcy5rZXkoc2hvcnRLZXkpO1xuICAgICAgICBsZXQgbWVzc2FnZSA9IHZhbHVlO1xuICAgICAgICBpZiAoIW92ZXJyaWRlKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5kaWN0aW9uYXJ5Lmhhc093blByb3BlcnR5KGtleSkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBtZXNzYWdlID0gdGhpcy5kZWZhdWx0VmFsdWUoa2V5LCB2YWx1ZSk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5kaWN0aW9uYXJ5W2tleV0gPSBtZXNzYWdlO1xuICAgIH1cbiAgICBub3RpZnlDaGFuZ2VzKCkge1xuICAgICAgICB0aGlzLmNoYW5nZXMubmV4dCh7IHJ0bDogdGhpcy5ydGwgfSk7XG4gICAgfVxuICAgIGtleShzaG9ydEtleSkge1xuICAgICAgICByZXR1cm4gdGhpcy5wcmVmaXggKyAnLicgKyBzaG9ydEtleTtcbiAgICB9XG4gICAgZGVmYXVsdFZhbHVlKGtleSwgdmFsdWUpIHtcbiAgICAgICAgaWYgKCF0aGlzLm1lc3NhZ2VTZXJ2aWNlKSB7XG4gICAgICAgICAgICByZXR1cm4gdmFsdWU7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgYWx0ID0gdGhpcy5tZXNzYWdlU2VydmljZS5nZXQoa2V5KTtcbiAgICAgICAgcmV0dXJuIChhbHQgPT09IHVuZGVmaW5lZCkgPyB2YWx1ZSA6IGFsdDtcbiAgICB9XG59XG5Mb2NhbGl6YXRpb25TZXJ2aWNlLmRlY29yYXRvcnMgPSBbXG4gICAgeyB0eXBlOiBJbmplY3RhYmxlIH0sXG5dO1xuLyoqIEBub2NvbGxhcHNlICovXG5Mb2NhbGl6YXRpb25TZXJ2aWNlLmN0b3JQYXJhbWV0ZXJzID0gKCkgPT4gW1xuICAgIHsgdHlwZTogU3RyaW5nLCBkZWNvcmF0b3JzOiBbeyB0eXBlOiBJbmplY3QsIGFyZ3M6IFtMMTBOX1BSRUZJWCxdIH1dIH0sXG4gICAgeyB0eXBlOiBNZXNzYWdlU2VydmljZSwgZGVjb3JhdG9yczogW3sgdHlwZTogT3B0aW9uYWwgfV0gfSxcbiAgICB7IHR5cGU6IEJvb2xlYW4sIGRlY29yYXRvcnM6IFt7IHR5cGU6IE9wdGlvbmFsIH0sIHsgdHlwZTogSW5qZWN0LCBhcmdzOiBbUlRMLF0gfV0gfVxuXTtcblxuLyoqXG4gKiBHZW5lcmF0ZWQgYnVuZGxlIGluZGV4LiBEbyBub3QgZWRpdC5cbiAqL1xuXG5leHBvcnQgeyBNZXNzYWdlU2VydmljZSwgQ29tcG9uZW50TWVzc2FnZXMsIEwxME5fUFJFRklYLCBMb2NhbGl6YXRpb25TZXJ2aWNlLCBSVEwgfTtcbiJdfQ==

/***/ }),

/***/ "../../node_modules/@progress/kendo-angular-popup/dist/fesm2015/index.js":
/*!************************************************************************************************************!*\
  !*** /home/abdel/www/project/formly/lib/node_modules/@progress/kendo-angular-popup/dist/fesm2015/index.js ***!
  \************************************************************************************************************/
/*! exports provided: AlignService, AnimationService, DOMService, PositionService, ResizeService, ScrollableService, PopupService, POPUP_CONTAINER, PopupComponent, PopupModule, SCALE */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "AlignService", function() { return AlignService; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "AnimationService", function() { return AnimationService; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "DOMService", function() { return DOMService; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "PositionService", function() { return PositionService; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ResizeService", function() { return ResizeService; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ScrollableService", function() { return ScrollableService; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "PopupService", function() { return PopupService; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "POPUP_CONTAINER", function() { return POPUP_CONTAINER; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "PopupComponent", function() { return PopupComponent; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "PopupModule", function() { return PopupModule; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "SCALE", function() { return SCALE; });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/core */ "../../node_modules/@angular/core/__ivy_ngcc__/fesm2015/core.js");
/* harmony import */ var _progress_kendo_popup_common__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @progress/kendo-popup-common */ "../../node_modules/@progress/kendo-popup-common/dist/es2015/main.js");
/* harmony import */ var _progress_kendo_angular_common__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @progress/kendo-angular-common */ "../../node_modules/@progress/kendo-angular-common/dist/fesm2015/index.js");
/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! rxjs */ "../../node_modules/rxjs/_esm2015/index.js");
/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! rxjs/operators */ "../../node_modules/rxjs/_esm2015/operators/index.js");
/* harmony import */ var _angular_animations__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @angular/animations */ "../../node_modules/@angular/animations/__ivy_ngcc__/fesm2015/animations.js");
/* harmony import */ var _angular_common__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @angular/common */ "../../node_modules/@angular/common/__ivy_ngcc__/fesm2015/common.js");
/**-----------------------------------------------------------------------------------------
* Copyright © 2020 Progress Software Corporation. All rights reserved.
* Licensed under commercial license. See LICENSE.md in the project root for more information
*-------------------------------------------------------------------------------------------*/








/**
 * @hidden
 */





const _c0 = ["container"];
function PopupComponent_ng_template_3_Template(rf, ctx) { }
const _c1 = ["*"];
const eitherRect = (rect, offset$$1) => {
    if (!rect) {
        return { height: 0, left: offset$$1.left, top: offset$$1.top, width: 0 };
    }
    return rect;
};
/**
 * @hidden
 */

/**
 * @hidden
 */
const removeStackingOffset = (rect, stackingOffset) => {
    if (!stackingOffset) {
        return rect;
    }
    const result = {
        height: rect.height,
        left: rect.left - stackingOffset.left,
        top: rect.top - stackingOffset.top,
        width: rect.width
    };
    return result;
};
/**
 * @hidden
 */
const isDifferentOffset = (oldOffset, newOffset) => {
    const { left: oldLeft, top: oldTop } = oldOffset;
    const { left: newLeft, top: newTop } = newOffset;
    return Math.abs(oldLeft - newLeft) >= 1 || Math.abs(oldTop - newTop) >= 1;
};
/**
 * @hidden
 */
const isWindowAvailable = () => {
    return typeof window !== 'undefined';
};
/**
 * @hidden
 */

/**
 * @hidden
 */
const OVERFLOW_REGEXP = /auto|scroll/;
const overflowElementStyle = (element) => {
    return `${element.style.overflow}${element.style.overflowX}${element.style.overflowY}`;
};
const overflowComputedStyle = (element) => {
    const styles = window.getComputedStyle(element);
    return `${styles.overflow}${styles.overflowX}${styles.overflowY}`;
};
const overflowStyle = (element) => {
    return overflowElementStyle(element) || overflowComputedStyle(element);
};
/**
 * @hidden
 */
const scrollableParents = (element) => {
    const parentElements = [];
    if (!Object(_progress_kendo_angular_common__WEBPACK_IMPORTED_MODULE_2__["isDocumentAvailable"])() || !isWindowAvailable()) {
        return parentElements;
    }
    let parent = element.parentElement;
    while (parent) {
        if (OVERFLOW_REGEXP.test(overflowStyle(parent)) || parent.hasAttribute('data-scrollable')) {
            parentElements.push(parent);
        }
        parent = parent.parentElement;
    }
    parentElements.push(window);
    return parentElements;
};
/**
 * @hidden
 */
const FRAME_DURATION = 1000 / 60; //1000ms divided by 60fps
function memoize(fun) {
    let result;
    let called = false;
    return (...args) => {
        if (called) {
            return result;
        }
        result = fun(...args);
        called = true;
        return result;
    };
}
/**
 * @hidden
 */
const hasRelativeStackingContext = memoize(() => {
    if (!Object(_progress_kendo_angular_common__WEBPACK_IMPORTED_MODULE_2__["isDocumentAvailable"])() && document.body !== null) {
        return false;
    }
    const top = 10;
    const parent = document.createElement("div");
    parent.style.transform = "matrix(10, 0, 0, 10, 0, 0)";
    parent.innerHTML = `<div style="position: fixed; top: ${top}px;">child</div>`;
    document.body.appendChild(parent);
    const isDifferent = parent.children[0].getBoundingClientRect().top !== top;
    document.body.removeChild(parent);
    return isDifferent;
});
/**
 * @hidden
 */
const zIndex = (anchor, container) => {
    if (!anchor || !Object(_progress_kendo_angular_common__WEBPACK_IMPORTED_MODULE_2__["isDocumentAvailable"])() || !isWindowAvailable()) {
        return null;
    }
    const sibling = Object(_progress_kendo_popup_common__WEBPACK_IMPORTED_MODULE_1__["siblingContainer"])(anchor, container);
    if (!sibling) {
        return null;
    }
    const result = [anchor].concat(Object(_progress_kendo_popup_common__WEBPACK_IMPORTED_MODULE_1__["parents"])(anchor, sibling)).reduce((index, p) => {
        const zIndexStyle = p.style.zIndex || window.getComputedStyle(p).zIndex;
        const current = parseInt(zIndexStyle, 10);
        return current > index ? current : index;
    }, 0);
    return result ? (result + 1) : null;
};
/**
 * @hidden
 */
const scaleRect = (rect, scale) => {
    if (!rect || scale === 1) {
        return rect;
    }
    return {
        height: rect.height / scale,
        left: rect.left / scale,
        top: rect.top / scale,
        width: rect.width / scale
    };
};

const STYLES = [
    'font-size',
    'font-family',
    'font-stretch',
    'font-style',
    'font-weight',
    'line-height'
];
/**
 * @hidden
 */
class DOMService {
    addOffset(current, addition) {
        return {
            left: current.left + addition.left,
            top: current.top + addition.top
        };
    }
    addScroll(rect, scroll) {
        return Object(_progress_kendo_popup_common__WEBPACK_IMPORTED_MODULE_1__["addScroll"])(rect, scroll);
    }
    align(settings) {
        return Object(_progress_kendo_popup_common__WEBPACK_IMPORTED_MODULE_1__["align"])(settings);
    }
    boundingOffset(el) {
        return Object(_progress_kendo_popup_common__WEBPACK_IMPORTED_MODULE_1__["boundingOffset"])(this.nativeElement(el));
    }
    getFontStyles(el) {
        const window = this.getWindow();
        if (!window || !el) {
            return [];
        }
        const computedStyles = window.getComputedStyle(this.nativeElement(el));
        return STYLES.map(font => ({ key: font, value: computedStyles[font] }));
    }
    getWindow() {
        return isWindowAvailable() ? window : null;
    }
    hasOffsetParent(el) {
        if (!el) {
            return false;
        }
        return !!this.nativeElement(el).offsetParent;
    }
    offset(el) {
        if (!el) {
            return null;
        }
        return Object(_progress_kendo_popup_common__WEBPACK_IMPORTED_MODULE_1__["offset"])(this.nativeElement(el));
    }
    offsetAtPoint(el, currentLocation) {
        if (!el) {
            return null;
        }
        const element = this.nativeElement(el);
        const { left, top, transition } = element.style;
        element.style.transition = 'none';
        element.style.left = `${currentLocation.left}px`;
        element.style.top = `${currentLocation.top}px`;
        const currentOffset = Object(_progress_kendo_popup_common__WEBPACK_IMPORTED_MODULE_1__["offset"])(element);
        element.style.left = left;
        element.style.top = top;
        // prevents elements with transition to be animated because of the change
        // tslint:disable-next-line:no-unused-expression
        element.offsetHeight;
        element.style.transition = transition;
        return currentOffset;
    }
    nativeElement(el) {
        if (!el) {
            return null;
        }
        return el.nativeElement || el;
    }
    position(element, popup, scale = 1) {
        if (!element || !popup) {
            return null;
        }
        return Object(_progress_kendo_popup_common__WEBPACK_IMPORTED_MODULE_1__["positionWithScroll"])(this.nativeElement(element), this.nativeElement(popup), scale);
    }
    removeScroll(rect, scroll) {
        return Object(_progress_kendo_popup_common__WEBPACK_IMPORTED_MODULE_1__["removeScroll"])(rect, scroll);
    }
    restrictToView(settings) {
        return Object(_progress_kendo_popup_common__WEBPACK_IMPORTED_MODULE_1__["restrictToView"])(settings);
    }
    scrollPosition(el) {
        return Object(_progress_kendo_popup_common__WEBPACK_IMPORTED_MODULE_1__["scrollPosition"])(this.nativeElement(el));
    }
    scrollableParents(el) {
        return scrollableParents(this.nativeElement(el));
    }
    stackingElementOffset(el) {
        const relativeContextElement = this.getRelativeContextElement(el);
        if (!relativeContextElement) {
            return null;
        }
        return Object(_progress_kendo_popup_common__WEBPACK_IMPORTED_MODULE_1__["offset"])(relativeContextElement);
    }
    stackingElementScroll(el) {
        const relativeContextElement = this.getRelativeContextElement(el);
        if (!relativeContextElement) {
            return { x: 0, y: 0 };
        }
        return {
            x: relativeContextElement.scrollLeft,
            y: relativeContextElement.scrollTop
        };
    }
    getRelativeContextElement(el) {
        if (!el || !hasRelativeStackingContext()) {
            return null;
        }
        let parent = this.nativeElement(el).parentElement;
        while (parent) {
            if (window.getComputedStyle(parent).transform !== 'none') {
                return parent;
            }
            parent = parent.parentElement;
        }
        return null;
    }
    useRelativePosition(el) {
        return !!this.getRelativeContextElement(el);
    }
    windowViewPort(el) {
        return Object(_progress_kendo_popup_common__WEBPACK_IMPORTED_MODULE_1__["getWindowViewPort"])(this.nativeElement(el));
    }
    zIndex(anchor, container) {
        return zIndex(this.nativeElement(anchor), this.nativeElement(container));
    }
    zoomLevel() {
        if (!Object(_progress_kendo_angular_common__WEBPACK_IMPORTED_MODULE_2__["isDocumentAvailable"])() || !isWindowAvailable()) {
            return 1;
        }
        return parseFloat((document.documentElement.clientWidth / window.innerWidth).toFixed(2)) || 1;
    }
    isZoomed() {
        return this.zoomLevel() > 1;
    }
}
DOMService.ɵfac = function DOMService_Factory(t) { return new (t || DOMService)(); };
DOMService.ɵprov = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdefineInjectable"]({ token: DOMService, factory: DOMService.ɵfac });
/*@__PURE__*/ (function () { _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵsetClassMetadata"](DOMService, [{
        type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Injectable"]
    }], null, null); })();

/**
 * Used to set the document scale when using a [scale transform](https://developer.mozilla.org/en-US/docs/Web/CSS/transform-function/scale).
 *
 * The document or container scale is required to compute the popup position correctly. Detecting the scale is not reliable and must be set by providing a value for SCALE. See [Support for Document Scale]({% slug documentscale_popup %}).
 *
 * > Using this token is not necessary for user-applied browser zoom.
 *
 * {% meta height:300 %}
 * {% embed_file scale/app.component.ts preview %}
 * {% embed_file scale/app.module.ts %}
 * {% embed_file scale/main.ts %}
 * {% endmeta %}
 *
 *
 */
const SCALE = new _angular_core__WEBPACK_IMPORTED_MODULE_0__["InjectionToken"]('Popup Document Scale');

/**
 * @hidden
 */
class AlignService {
    constructor(_dom, scale = 1) {
        this._dom = _dom;
        this.scale = scale;
    }
    alignElement(settings) {
        const { anchor, element, anchorAlign, elementAlign, margin, offset: offset$$1, positionMode } = settings;
        const scale = this.scale || 1;
        const fixedMode = positionMode === 'fixed' || !this._dom.hasOffsetParent(element);
        const anchorRect = fixedMode ? this.absoluteRect(anchor, element, offset$$1, scale) : this.relativeRect(anchor, element, offset$$1, scale);
        const elementRect = scaleRect(this._dom.offset(element), scale);
        const result = this._dom.align({
            anchorAlign: anchorAlign,
            anchorRect: anchorRect,
            elementAlign: elementAlign,
            elementRect: elementRect,
            margin
        });
        return result;
    }
    absoluteRect(anchor, element, offset$$1, scale) {
        const scrollPos = this.elementScrollPosition(anchor, element);
        const rect = eitherRect(this._dom.offset(anchor), offset$$1);
        const stackScale = 2 * scale;
        const stackScroll = this._dom.stackingElementScroll(element);
        if (scale !== 1 && stackScroll) {
            stackScroll.x /= stackScale;
            stackScroll.y /= stackScale;
        }
        const stackOffset = this._dom.stackingElementOffset(element);
        if (scale !== 1 && stackOffset) {
            stackOffset.left /= stackScale;
            stackOffset.top /= stackScale;
        }
        return this._dom.removeScroll(this._dom.addScroll(removeStackingOffset(scaleRect(rect, scale), stackOffset), stackScroll), scrollPos);
    }
    elementScrollPosition(anchor, element) {
        return anchor ? { x: 0, y: 0 } : this._dom.scrollPosition(element);
    }
    relativeRect(anchor, element, offset$$1, scale) {
        const rect = eitherRect(this._dom.position(anchor, element, scale), offset$$1);
        return scaleRect(rect, scale);
    }
}
AlignService.ɵfac = function AlignService_Factory(t) { return new (t || AlignService)(_angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵinject"](DOMService), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵinject"](SCALE, 8)); };
AlignService.ɵprov = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdefineInjectable"]({ token: AlignService, factory: AlignService.ɵfac });
/** @nocollapse */
AlignService.ctorParameters = () => [
    { type: DOMService },
    { type: Number, decorators: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Inject"], args: [SCALE,] }, { type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Optional"] }] }
];
/*@__PURE__*/ (function () { _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵsetClassMetadata"](AlignService, [{
        type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Injectable"]
    }], function () { return [{ type: DOMService }, { type: Number, decorators: [{
                type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Inject"],
                args: [SCALE]
            }, {
                type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Optional"]
            }] }]; }, null); })();

/**
 * @hidden
 */
class PositionService {
    constructor(_dom, scale = 1) {
        this._dom = _dom;
        this.scale = scale;
    }
    positionElement(settings) {
        const { anchor, currentLocation, element, anchorAlign, elementAlign, collisions, margin } = settings;
        const dom = this._dom;
        const scale = this.scale || 1;
        const elementOffset = dom.offsetAtPoint(element, currentLocation);
        const elementRect = scaleRect(elementOffset, scale);
        const anchorOffset = scaleRect(dom.offset(anchor), scale);
        const anchorRect = eitherRect(anchorOffset, currentLocation);
        const viewPort = settings.viewPort || dom.windowViewPort(element);
        viewPort.width = viewPort.width / scale;
        viewPort.height = viewPort.height / scale;
        const result = dom.restrictToView({
            anchorAlign,
            anchorRect,
            collisions,
            elementAlign,
            elementRect,
            margin,
            viewPort
        });
        const offset$$1 = dom.addOffset(currentLocation, result.offset);
        return {
            flip: result.flip,
            flipped: result.flipped,
            offset: offset$$1
        };
    }
}
PositionService.ɵfac = function PositionService_Factory(t) { return new (t || PositionService)(_angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵinject"](DOMService), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵinject"](SCALE, 8)); };
PositionService.ɵprov = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdefineInjectable"]({ token: PositionService, factory: PositionService.ɵfac });
/** @nocollapse */
PositionService.ctorParameters = () => [
    { type: DOMService },
    { type: Number, decorators: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Inject"], args: [SCALE,] }, { type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Optional"] }] }
];
/*@__PURE__*/ (function () { _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵsetClassMetadata"](PositionService, [{
        type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Injectable"]
    }], function () { return [{ type: DOMService }, { type: Number, decorators: [{
                type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Inject"],
                args: [SCALE]
            }, {
                type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Optional"]
            }] }]; }, null); })();

/**
 * @hidden
 */
class ResizeService {
    constructor(_dom, _zone) {
        this._dom = _dom;
        this._zone = _zone;
    }
    subscribe(callback) {
        if (!Object(_progress_kendo_angular_common__WEBPACK_IMPORTED_MODULE_2__["isDocumentAvailable"])()) {
            return;
        }
        this._zone.runOutsideAngular(() => {
            this.subscription = Object(rxjs__WEBPACK_IMPORTED_MODULE_3__["fromEvent"])(this._dom.getWindow(), "resize")
                .pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_4__["auditTime"])(FRAME_DURATION))
                .subscribe(() => callback());
        });
    }
    unsubscribe() {
        if (!this.subscription) {
            return;
        }
        this.subscription.unsubscribe();
    }
    isUnsubscribed() {
        return this.subscription && this.subscription.closed;
    }
}
ResizeService.ɵfac = function ResizeService_Factory(t) { return new (t || ResizeService)(_angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵinject"](DOMService), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵinject"](_angular_core__WEBPACK_IMPORTED_MODULE_0__["NgZone"])); };
ResizeService.ɵprov = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdefineInjectable"]({ token: ResizeService, factory: ResizeService.ɵfac });
/** @nocollapse */
ResizeService.ctorParameters = () => [
    { type: DOMService },
    { type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["NgZone"] }
];
/*@__PURE__*/ (function () { _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵsetClassMetadata"](ResizeService, [{
        type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Injectable"]
    }], function () { return [{ type: DOMService }, { type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["NgZone"] }]; }, null); })();

/**
 * @hidden
 */
const THRESHOLD_DIFF = 1;
/**
 * @hidden
 */
class ScrollableService {
    constructor(_dom, _zone) {
        this._dom = _dom;
        this._zone = _zone;
    }
    forElement(element) {
        this.unsubscribe();
        this.element = element;
        return this;
    }
    subscribe(callback) {
        if (!callback || !Object(_progress_kendo_angular_common__WEBPACK_IMPORTED_MODULE_2__["isDocumentAvailable"])() || !this.element) {
            return;
        }
        const nativeElement = this._dom.nativeElement(this.element);
        const parents$$1 = this._dom.scrollableParents(this.element);
        this._zone.runOutsideAngular(() => {
            const observables = parents$$1.map(p => Object(rxjs__WEBPACK_IMPORTED_MODULE_3__["fromEvent"])(p, "scroll").pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_4__["auditTime"])(FRAME_DURATION)));
            const subscriber = (e) => {
                const target = e.target;
                const isParent = parents$$1.filter(p => p === target).length > 0;
                const isDocument = target === document;
                const isWindow = target === window;
                if (isParent || isDocument || isWindow) {
                    callback(this.isVisible(nativeElement, target));
                }
            };
            this.subscription = Object(rxjs__WEBPACK_IMPORTED_MODULE_3__["merge"])(...observables).subscribe(subscriber);
        });
    }
    unsubscribe() {
        if (!this.subscription) {
            return;
        }
        this.subscription.unsubscribe();
    }
    isVisible(elem, container) {
        const elemRect = this._dom.boundingOffset(elem);
        const containerRect = this._dom.boundingOffset(container);
        if (THRESHOLD_DIFF < (containerRect.top - elemRect.bottom)) {
            return false;
        }
        if (THRESHOLD_DIFF < (elemRect.top - containerRect.bottom)) {
            return false;
        }
        if (THRESHOLD_DIFF < (elemRect.left - containerRect.right)) {
            return false;
        }
        if (THRESHOLD_DIFF < (containerRect.left - elemRect.right)) {
            return false;
        }
        return true;
    }
}
ScrollableService.ɵfac = function ScrollableService_Factory(t) { return new (t || ScrollableService)(_angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵinject"](DOMService), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵinject"](_angular_core__WEBPACK_IMPORTED_MODULE_0__["NgZone"])); };
ScrollableService.ɵprov = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdefineInjectable"]({ token: ScrollableService, factory: ScrollableService.ɵfac });
/** @nocollapse */
ScrollableService.ctorParameters = () => [
    { type: DOMService },
    { type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["NgZone"] }
];
/*@__PURE__*/ (function () { _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵsetClassMetadata"](ScrollableService, [{
        type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Injectable"]
    }], function () { return [{ type: DOMService }, { type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["NgZone"] }]; }, null); })();

const LEFT = 'left';
const RIGHT = 'right';
const DOWN = 'down';
const UP = 'up';
const DEFAULT_TYPE = 'slide';
const DEFAULT_DURATION = 100;
const animationTypes = {};
/* tslint:disable:object-literal-sort-keys */
animationTypes.expand = (direction) => {
    const scale = direction === UP || direction === DOWN ? 'scaleY' : 'scaleX';
    const startScale = 0;
    const endScale = 1;
    let origin;
    if (direction === DOWN) {
        origin = 'top';
    }
    else if (direction === LEFT) {
        origin = RIGHT;
    }
    else if (direction === RIGHT) {
        origin = LEFT;
    }
    else {
        origin = 'bottom';
    }
    return {
        start: { transform: `${scale}(${startScale})`, transformOrigin: origin },
        end: { transform: `${scale}(${endScale})` }
    };
};
animationTypes.slide = (direction) => {
    const translate = direction === LEFT || direction === RIGHT ? 'translateX' : 'translateY';
    const start = direction === RIGHT || direction === DOWN ? -100 : 100;
    const end = 0;
    return {
        start: { transform: `${translate}(${start}%)` },
        end: { transform: `${translate}(${end}%)` }
    };
};
animationTypes.fade = () => {
    return {
        start: { opacity: 0 },
        end: { opacity: 1 }
    };
};
animationTypes.zoom = () => {
    const start = 0;
    const end = 1;
    return {
        start: { transform: `scale(${start})` },
        end: { transform: `scale(${end})` }
    };
};
/**
 * @hidden
 */
class AnimationService {
    constructor(animationBuilder) {
        this.animationBuilder = animationBuilder;
        this.start = new _angular_core__WEBPACK_IMPORTED_MODULE_0__["EventEmitter"]();
        this.end = new _angular_core__WEBPACK_IMPORTED_MODULE_0__["EventEmitter"]();
    }
    play(element, options, flip) {
        if (!this.flip || this.flip.horizontal !== flip.horizontal ||
            this.flip.vertical !== flip.vertical) {
            this.flip = flip;
            const type = options.type || DEFAULT_TYPE;
            const statesFn = animationTypes[type];
            if (statesFn) {
                const direction = this.getDirection(flip, options);
                const states = statesFn(direction);
                this.playStates(element, states, options);
            }
            else if (Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["isDevMode"])()) {
                throw new Error(`Unsupported animation type: "${type}". The supported types are slide, expand, fade and zoom.`);
            }
        }
    }
    ngOnDestroy() {
        this.stopPlayer();
    }
    playStates(element, states, options) {
        this.stopPlayer();
        const duration = options.duration || DEFAULT_DURATION;
        const factory = this.animationBuilder.build([
            Object(_angular_animations__WEBPACK_IMPORTED_MODULE_5__["style"])(states.start),
            Object(_angular_animations__WEBPACK_IMPORTED_MODULE_5__["animate"])(`${duration}ms ease-in`, Object(_angular_animations__WEBPACK_IMPORTED_MODULE_5__["style"])(states.end))
        ]);
        const player = this.player = factory.create(element);
        player.onDone(() => {
            this.end.emit();
            this.stopPlayer();
        });
        this.start.emit();
        player.play();
    }
    getDirection(flip, options) {
        let direction = options.direction || DOWN;
        if (flip.horizontal) {
            if (direction === LEFT) {
                direction = RIGHT;
            }
            else if (direction === RIGHT) {
                direction = LEFT;
            }
        }
        if (flip.vertical) {
            if (direction === DOWN) {
                direction = UP;
            }
            else if (direction === UP) {
                direction = DOWN;
            }
        }
        return direction;
    }
    stopPlayer() {
        if (this.player) {
            this.player.destroy();
            this.player = null;
        }
    }
}
AnimationService.ɵfac = function AnimationService_Factory(t) { return new (t || AnimationService)(_angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵinject"](_angular_animations__WEBPACK_IMPORTED_MODULE_5__["AnimationBuilder"])); };
AnimationService.ɵprov = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdefineInjectable"]({ token: AnimationService, factory: AnimationService.ɵfac });
/** @nocollapse */
AnimationService.ctorParameters = () => [
    { type: _angular_animations__WEBPACK_IMPORTED_MODULE_5__["AnimationBuilder"] }
];
/*@__PURE__*/ (function () { _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵsetClassMetadata"](AnimationService, [{
        type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Injectable"]
    }], function () { return [{ type: _angular_animations__WEBPACK_IMPORTED_MODULE_5__["AnimationBuilder"] }]; }, null); })();

const DEFAULT_OFFSET = { left: -10000, top: 0 };
const ANIMATION_CONTAINER = 'k-animation-container';
const ANIMATION_CONTAINER_FIXED = 'k-animation-container-fixed';
/**
 * Represents the [Kendo UI Popup component for Angular]({% slug overview_popup %}).
 *
 * @example
 * ```ts
 * _@Component({
 * selector: 'my-app',
 * template: `
 *  <button #anchor (click)="show=!show">Toggle</button>
 *  <kendo-popup *ngIf="show" [anchor]="anchor">
 *      <strong>Popup content!</strong>
 *  </kendo-popup>
 * `
 * })
 * class AppComponent {
 *   public show: boolean = false;
 * }
 * ```
 */
class PopupComponent {
    constructor(container, _alignService, domService, _positionService, _resizeService, _scrollableService, animationService, _renderer, _zone) {
        this.container = container;
        this._alignService = _alignService;
        this.domService = domService;
        this._positionService = _positionService;
        this._resizeService = _resizeService;
        this._scrollableService = _scrollableService;
        this.animationService = animationService;
        this._renderer = _renderer;
        this._zone = _zone;
        /**
         * Controls the Popup animation. By default, the opening and closing animations
         * are enabled ([see example]({% slug animations_popup %})).
         */
        this.animate = true;
        /**
         * Specifies the anchor pivot point
         * ([see example]({% slug alignmentpositioning_popup %}#toc-positioning)).
         */
        this.anchorAlign = { horizontal: 'left', vertical: 'bottom' };
        /**
         * Configures the collision behavior of the Popup
         * ([see example]({% slug viewportboundarydetection_popup %})).
         */
        this.collision = { horizontal: 'fit', vertical: 'flip' };
        /**
         * Specifies the pivot point of the Popup
         * ([see example]({% slug alignmentpositioning_popup %}#toc-positioning)).
         */
        this.popupAlign = { horizontal: 'left', vertical: 'top' };
        /**
         * Controls whether the component will copy the `anchor` font styles.
         */
        this.copyAnchorStyles = false;
        /**
         * Specifies the position mode of the component. By default, the Popup uses fixed positioning.
         * To make the Popup acquire absolute positioning, set this option to `absolute`.
         *
         * > If you need to support mobile browsers with the zoom option,
         * use the `absolute` positioning of the Popup.
         *
         * @example
         * ```html
         * <style>
         *  .parent-content {
         *     position: relative;
         *     width: 200px;
         *     height: 200px;
         *     overflow: auto;
         *     margin: 200px auto;
         *     border: 1px solid red;
         *  }
         *  .content {
         *     position: relative;
         *     width: 100px;
         *     height: 100px;
         *     overflow: auto;
         *     margin: 300px;
         *     border: 1px solid blue;
         *  }
         *  .anchor {
         *     position: absolute;
         *     top: 200px;
         *     left: 200px;
         *  }
         * </style>
         * ```
         * ```ts
         * _@Component({
         * selector: 'my-app',
         * template: `
         *   <div class="example-config">
         *      Position mode:
         *      <label><input type="radio" value="fixed" [(ngModel)]="mode" /> Fixed</label>
         *      <label><input type="radio" value="absolute" [(ngModel)]="mode" /> Absolute</label>
         *   </div>
         *   <div class="example-config">
         *       Append to
         *       <label>
         *           <input type="radio" name="place" [value]="1" [(ngModel)]="checked" />
         *           Root component
         *       </label>
         *       <label>
         *           <input type="radio" name="place" [value]="2" [(ngModel)]="checked" />
         *           <span style="color: red">Red Container</span>
         *       </label>
         *       <label>
         *           <input type="radio" name="place" [value]="3" [(ngModel)]="checked" />
         *           <span style="color: blue">Blue Container</span>
         *       </label>
         *   </div>
         *   <div class="example">
         *     <div class="parent-content" [scrollLeft]="250" [scrollTop]="230">
         *         <div class="content" [scrollLeft]="170" [scrollTop]="165">
         *           <button #anchor class="anchor" (click)="show = !show">Toggle</button>
         *           <kendo-popup [positionMode]="mode" [anchor]="anchor" (anchorViewportLeave)="show=false" *ngIf="show && checked === 3">
         *             <ul>
         *                 <li>Item1</li>
         *                 <li>Item2</li>
         *                 <li>Item3</li>
         *             </ul>
         *           </kendo-popup>
         *           <span style="position: absolute; top: 400px; left: 400px">Bottom/Right</span>
         *         </div>
         *         <kendo-popup [positionMode]="mode" [anchor]="anchor" (anchorViewportLeave)="show=false" *ngIf="show && checked === 2">
         *           <ul>
         *               <li>Item1</li>
         *               <li>Item2</li>
         *               <li>Item3</li>
         *           </ul>
         *         </kendo-popup>
         *         <span style="position: absolute; top: 600px; left: 600px">Bottom/Right</span>
         *     </div>
         *     <kendo-popup [positionMode]="mode" [anchor]="anchor" (anchorViewportLeave)="show=false" *ngIf="show && checked === 1">
         *       <ul>
         *           <li>Item1</li>
         *           <li>Item2</li>
         *           <li>Item3</li>
         *       </ul>
         *     </kendo-popup>
         *   </div>
         * `
         * })
         * class AppComponent {
         *   public checked: number = 3;
         *   public mode: string = 'absolute';
         *   public show: boolean = true;
         * }
         * ```
         */
        this.positionMode = 'fixed';
        /**
         * Specifies the absolute position of the element
         * ([see example]({% slug alignmentpositioning_popup %}#toc-aligning-to-absolute-points)).
         * The Popup opens next to that point. The Popup pivot point is defined by the `popupAlign` configuration option.
         * The boundary detection is applied by using the window viewport.
         */
        this.offset = DEFAULT_OFFSET;
        /**
         * Fires when the anchor is scrolled outside the screen boundaries.
         * ([see example]({% slug closing_popup %}#toc-after-leaving-the-viewport)).
         */
        this.anchorViewportLeave = new _angular_core__WEBPACK_IMPORTED_MODULE_0__["EventEmitter"]();
        /**
         * Fires after the component is closed.
         */
        this.close = new _angular_core__WEBPACK_IMPORTED_MODULE_0__["EventEmitter"]();
        /**
         * Fires after the component is opened and the opening animation ends.
         */
        this.open = new _angular_core__WEBPACK_IMPORTED_MODULE_0__["EventEmitter"]();
        /**
         * Fires after the component is opened and the Popup is positioned.
         */
        this.positionChange = new _angular_core__WEBPACK_IMPORTED_MODULE_0__["EventEmitter"]();
        this.resolvedPromise = Promise.resolve(null);
        this.initialCheck = true;
        this._renderer.addClass(container.nativeElement, ANIMATION_CONTAINER);
        this.updateFixedClass();
    }
    ngOnInit() {
        this.reposition = this.reposition.bind(this);
        this._resizeService.subscribe(this.reposition);
        this.animationSubscriptions = this.animationService.start.subscribe(this.onAnimationStart.bind(this));
        this.animationSubscriptions.add(this.animationService.end.subscribe(this.onAnimationEnd.bind(this)));
        this._scrollableService.forElement(this.anchor || this.container).subscribe(this.onScroll.bind(this));
        this.currentOffset = DEFAULT_OFFSET;
        this.setZIndex();
        this.copyFontStyles();
        this.updateFixedClass();
    }
    ngOnChanges(changes) {
        if (changes.copyAnchorStyles) {
            this.copyFontStyles();
        }
        if (changes.positionMode) {
            this.updateFixedClass();
        }
    }
    ngAfterViewInit() {
        this.reposition();
        if (!this.animate) {
            this.resolvedPromise.then(() => {
                this.onAnimationEnd();
            });
        }
    }
    ngAfterViewChecked() {
        if (this.initialCheck) {
            this.initialCheck = false;
            return;
        }
        this._zone.runOutsideAngular(() => {
            // workarounds https://github.com/angular/angular/issues/19094
            // uses promise because it is executed synchronously after the content is updated
            // does not use onStable in case the current zone is not the angular one.
            this.unsubscribeReposition();
            this.repositionSubscription = Object(rxjs__WEBPACK_IMPORTED_MODULE_3__["from"])(this.resolvedPromise)
                .subscribe(this.reposition);
        });
    }
    ngOnDestroy() {
        this.anchorViewportLeave.complete();
        this.positionChange.complete();
        this.close.emit();
        this.close.complete();
        this._resizeService.unsubscribe();
        this._scrollableService.unsubscribe();
        this.animationSubscriptions.unsubscribe();
        this.unsubscribeReposition();
    }
    /**
     * @hidden
     */
    onResize() {
        this.reposition();
    }
    onAnimationStart() {
        this._renderer.removeClass(this.container.nativeElement, 'k-animation-container-shown');
    }
    onAnimationEnd() {
        this._renderer.addClass(this.container.nativeElement, 'k-animation-container-shown');
        this.open.emit();
        this.open.complete();
    }
    get currentOffset() {
        return this._currentOffset;
    }
    set currentOffset(offset$$1) {
        this.setContainerStyle('left', `${offset$$1.left}px`);
        this.setContainerStyle('top', `${offset$$1.top}px`);
        this._currentOffset = offset$$1;
    }
    setZIndex() {
        if (this.anchor) {
            this.setContainerStyle('z-index', String(this.domService.zIndex(this.anchor, this.container)));
        }
    }
    reposition() {
        if (!Object(_progress_kendo_angular_common__WEBPACK_IMPORTED_MODULE_2__["isDocumentAvailable"])()) {
            return;
        }
        const { flip, offset: offset$$1 } = this.position();
        if (!this.currentOffset || isDifferentOffset(this.currentOffset, offset$$1)) {
            this.currentOffset = offset$$1;
            if (Object(_progress_kendo_angular_common__WEBPACK_IMPORTED_MODULE_2__["hasObservers"])(this.positionChange)) {
                this._zone.run(() => this.positionChange.emit({ offset: offset$$1, flip }));
            }
        }
        if (this.animate) {
            this.animationService.play(this.contentContainer.nativeElement, this.animate, flip);
        }
        this.resizeSensor.acceptSize();
    }
    position() {
        const alignedOffset = this._alignService.alignElement({
            anchor: this.anchor,
            anchorAlign: this.anchorAlign,
            element: this.container,
            elementAlign: this.popupAlign,
            margin: this.margin,
            offset: this.offset,
            positionMode: this.positionMode
        });
        return this._positionService.positionElement({
            anchor: this.anchor,
            anchorAlign: this.anchorAlign,
            collisions: this.collision,
            currentLocation: alignedOffset,
            element: this.container,
            elementAlign: this.popupAlign,
            margin: this.margin
        });
    }
    onScroll(isInViewPort) {
        const hasLeaveObservers = Object(_progress_kendo_angular_common__WEBPACK_IMPORTED_MODULE_2__["hasObservers"])(this.anchorViewportLeave);
        if (isInViewPort || !hasLeaveObservers) {
            this.reposition();
        }
        else if (hasLeaveObservers) {
            this._zone.run(() => {
                this.anchorViewportLeave.emit();
            });
        }
    }
    copyFontStyles() {
        if (!this.anchor || !this.copyAnchorStyles) {
            return;
        }
        this.domService.getFontStyles(this.anchor)
            .forEach(s => this.setContainerStyle(s.key, s.value));
    }
    updateFixedClass() {
        const action = this.positionMode === 'fixed' ? 'addClass' : 'removeClass';
        this._renderer[action](this.container.nativeElement, ANIMATION_CONTAINER_FIXED);
    }
    setContainerStyle(name, value) {
        this._renderer.setStyle(this.container.nativeElement, name, value);
    }
    unsubscribeReposition() {
        if (this.repositionSubscription) {
            this.repositionSubscription.unsubscribe();
        }
    }
}
PopupComponent.ɵfac = function PopupComponent_Factory(t) { return new (t || PopupComponent)(_angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](_angular_core__WEBPACK_IMPORTED_MODULE_0__["ElementRef"]), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](AlignService), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](DOMService), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](PositionService), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](ResizeService), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](ScrollableService), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](AnimationService), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](_angular_core__WEBPACK_IMPORTED_MODULE_0__["Renderer2"]), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](_angular_core__WEBPACK_IMPORTED_MODULE_0__["NgZone"])); };
PopupComponent.ɵcmp = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdefineComponent"]({ type: PopupComponent, selectors: [["kendo-popup"]], viewQuery: function PopupComponent_Query(rf, ctx) { if (rf & 1) {
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵviewQuery"](_c0, true);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵviewQuery"](_progress_kendo_angular_common__WEBPACK_IMPORTED_MODULE_2__["ResizeSensorComponent"], true);
    } if (rf & 2) {
        var _t;
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵqueryRefresh"](_t = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵloadQuery"]()) && (ctx.contentContainer = _t.first);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵqueryRefresh"](_t = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵloadQuery"]()) && (ctx.resizeSensor = _t.first);
    } }, inputs: { animate: "animate", anchorAlign: "anchorAlign", collision: "collision", popupAlign: "popupAlign", copyAnchorStyles: "copyAnchorStyles", positionMode: "positionMode", offset: "offset", anchor: "anchor", popupClass: "popupClass", margin: "margin" }, outputs: { anchorViewportLeave: "anchorViewportLeave", close: "close", open: "open", positionChange: "positionChange" }, exportAs: ["kendo-popup"], features: [_angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵProvidersFeature"]([AlignService, AnimationService, DOMService, PositionService, ResizeService, ScrollableService]), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵNgOnChangesFeature"]], ngContentSelectors: _c1, decls: 5, vars: 4, consts: [[1, "k-popup", 3, "ngClass"], ["container", ""], [3, "ngTemplateOutlet", "ngIf"], [3, "rateLimit", "resize"]], template: function PopupComponent_Template(rf, ctx) { if (rf & 1) {
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵprojectionDef"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "div", 0, 1);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵprojection"](2);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](3, PopupComponent_ng_template_3_Template, 0, 0, "ng-template", 2);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](4, "kendo-resize-sensor", 3);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵlistener"]("resize", function PopupComponent_Template_kendo_resize_sensor_resize_4_listener() { return ctx.onResize(); });
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    } if (rf & 2) {
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngClass", ctx.popupClass);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](3);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngTemplateOutlet", ctx.content)("ngIf", ctx.content);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("rateLimit", 100);
    } }, directives: [_angular_common__WEBPACK_IMPORTED_MODULE_6__["NgClass"], _angular_common__WEBPACK_IMPORTED_MODULE_6__["NgTemplateOutlet"], _angular_common__WEBPACK_IMPORTED_MODULE_6__["NgIf"], _progress_kendo_angular_common__WEBPACK_IMPORTED_MODULE_2__["ResizeSensorComponent"]], encapsulation: 2 });
/** @nocollapse */
PopupComponent.ctorParameters = () => [
    { type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["ElementRef"] },
    { type: AlignService },
    { type: DOMService },
    { type: PositionService },
    { type: ResizeService },
    { type: ScrollableService },
    { type: AnimationService },
    { type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Renderer2"] },
    { type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["NgZone"] }
];
PopupComponent.propDecorators = {
    animate: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"] }],
    anchor: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"] }],
    anchorAlign: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"] }],
    collision: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"] }],
    popupAlign: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"] }],
    copyAnchorStyles: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"] }],
    popupClass: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"] }],
    positionMode: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"] }],
    offset: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"] }],
    margin: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"] }],
    anchorViewportLeave: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Output"] }],
    close: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Output"] }],
    open: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Output"] }],
    positionChange: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Output"] }],
    contentContainer: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["ViewChild"], args: ['container',] }],
    resizeSensor: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["ViewChild"], args: [_progress_kendo_angular_common__WEBPACK_IMPORTED_MODULE_2__["ResizeSensorComponent"],] }]
};
/*@__PURE__*/ (function () { _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵsetClassMetadata"](PopupComponent, [{
        type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Component"],
        args: [{
                exportAs: 'kendo-popup',
                providers: [AlignService, AnimationService, DOMService, PositionService, ResizeService, ScrollableService],
                selector: 'kendo-popup',
                template: `
        <div class="k-popup" [ngClass]="popupClass" #container>
            <ng-content></ng-content>
            <ng-template [ngTemplateOutlet]="content" [ngIf]="content"></ng-template>
            <kendo-resize-sensor [rateLimit]="100" (resize)="onResize()">
            </kendo-resize-sensor>
        </div>
     `
            }]
    }], function () { return [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["ElementRef"] }, { type: AlignService }, { type: DOMService }, { type: PositionService }, { type: ResizeService }, { type: ScrollableService }, { type: AnimationService }, { type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Renderer2"] }, { type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["NgZone"] }]; }, { animate: [{
            type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"]
        }], anchorAlign: [{
            type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"]
        }], collision: [{
            type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"]
        }], popupAlign: [{
            type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"]
        }], copyAnchorStyles: [{
            type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"]
        }], positionMode: [{
            type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"]
        }], offset: [{
            type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"]
        }], anchorViewportLeave: [{
            type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Output"]
        }], close: [{
            type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Output"]
        }], open: [{
            type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Output"]
        }], positionChange: [{
            type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Output"]
        }], anchor: [{
            type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"]
        }], popupClass: [{
            type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"]
        }], margin: [{
            type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"]
        }], contentContainer: [{
            type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["ViewChild"],
            args: ['container']
        }], resizeSensor: [{
            type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["ViewChild"],
            args: [_progress_kendo_angular_common__WEBPACK_IMPORTED_MODULE_2__["ResizeSensorComponent"]]
        }] }); })();

const removeElement = (element) => {
    if (element && element.parentNode) {
        element.parentNode.removeChild(element);
    }
};
/**
 * Used to inject the Popup container. If not provided, the first root component of
 * the application is used.
 *
 * > The `POPUP_CONTAINER` can be used only with the [`PopupService`]({% slug service_popup %}) class.
 *
 * @example
 *
 * ```ts-no-run
 * // Import the Popup module
 * import { PopupModule, POPUP_CONTAINER } from '@progress/kendo-angular-popup';
 *
 * // The browser platform with a compiler
 * import { platformBrowserDynamic } from '@angular/platform-browser-dynamic';
 *
 * import { ElementRef, NgModule } from '@angular/core';
 *
 * // Import the app component
 * import { AppComponent } from './app.component';
 *
 * // Define the app module
 * _@NgModule({
 *     declarations: [AppComponent], // declare app component
 *     imports:      [BrowserModule, PopupModule], // import Popup module
 *     bootstrap:    [AppComponent],
 *     providers: [{
 *       provide: POPUP_CONTAINER,
 *       useFactory: () => {
 *          //return the container ElementRef, where the popup will be injected
 *          return { nativeElement: document.body } as ElementRef;
 *       }
 *     }]
 * })
 * export class AppModule {}
 *
 * // Compile and launch the module
 * platformBrowserDynamic().bootstrapModule(AppModule);
 * ```
 */
const POPUP_CONTAINER = new _angular_core__WEBPACK_IMPORTED_MODULE_0__["InjectionToken"]('Popup Container');
/**
 * A service for opening Popup components dynamically
 * ([see example]({% slug service_popup %})).
 *
 * @export
 * @class PopupService
 */
class PopupService {
    constructor(applicationRef, componentFactoryResolver, injector, container) {
        this.applicationRef = applicationRef;
        this.componentFactoryResolver = componentFactoryResolver;
        this.injector = injector;
        this.container = container;
    }
    /**
     * Gets the root view container into which the component will be injected.
     *
     * @returns {ComponentRef<any>}
     */
    get rootViewContainer() {
        // https://github.com/angular/angular/blob/4.0.x/packages/core/src/application_ref.ts#L571
        const rootComponents = this.applicationRef.components || [];
        if (rootComponents[0]) {
            return rootComponents[0];
        }
        throw new Error(`
            View Container not found! Inject the POPUP_CONTAINER or define a specific ViewContainerRef via the appendTo option.
            See http://www.telerik.com/kendo-angular-ui/components/popup/api/POPUP_CONTAINER/ for more details.
        `);
    }
    /**
     * Sets or gets the HTML element of the root component container.
     *
     * @returns {HTMLElement}
     */
    get rootViewContainerNode() {
        return this.container ? this.container.nativeElement : this.getComponentRootNode(this.rootViewContainer);
    }
    /**
     * Opens a Popup component. Created Popups are mounted
     * in the DOM directly in the root application component.
     *
     * @param {PopupSettings} options - The options which define the Popup.
     * @returns {ComponentRef<PopupComponent>} - A reference to the Popup object.
     *
     * @example
     *
     * ```ts-no-run
     * _@Component({
     *   selector: 'my-app',
     *   template: `
     *     <ng-template #template>
     *      Popup content
     *     </ng-template>
     *     <button #anchor kendoButton (click)="open(anchor, template)">Open</button>
     *   `
     * })
     * export class AppComponent {
     *     public popupRef: PopupRef;
     *
     *     constructor( private popupService: PopupService ) {}
     *
     *     public open(anchor: ElementRef, template: TemplateRef<any>): void {
     *         if (this.popupRef) {
     *              this.popupRef.close();
     *              this.popupRef = null;
     *              return;
     *         }
     *
     *         this.popupRef = this.popupService.open({
     *           anchor: anchor,
     *           content: template
     *         });
     *     }
     * }
     * ```
     */
    open(options = {}) {
        const { component, nodes } = this.contentFrom(options.content);
        const popupComponentRef = this.appendPopup(nodes, options.appendTo);
        const popupInstance = popupComponentRef.instance;
        this.projectComponentInputs(popupComponentRef, options);
        popupComponentRef.changeDetectorRef.detectChanges();
        if (component) {
            component.changeDetectorRef.detectChanges();
        }
        const popupElement = this.getComponentRootNode(popupComponentRef);
        return {
            close: () => {
                if (component) {
                    component.destroy();
                }
                popupComponentRef.destroy();
                // Angular will not remove the element unless the change detection is triggered
                removeElement(popupElement);
            },
            content: component,
            popup: popupComponentRef,
            popupAnchorViewportLeave: popupInstance.anchorViewportLeave,
            popupClose: popupInstance.close,
            popupElement: popupElement,
            popupOpen: popupInstance.open,
            popupPositionChange: popupInstance.positionChange
        };
    }
    appendPopup(nodes, container) {
        const popupComponentRef = this.createComponent(PopupComponent, nodes, container);
        if (!container) {
            this.rootViewContainerNode.appendChild(this.getComponentRootNode(popupComponentRef));
        }
        return popupComponentRef;
    }
    /**
     * Gets the HTML element for a component reference.
     *
     * @param {ComponentRef<any>} componentRef
     * @returns {HTMLElement}
     */
    getComponentRootNode(componentRef) {
        return componentRef.location.nativeElement;
    }
    /**
     * Gets the `ComponentFactory` instance by its type.
     *
     * @param {*} componentClass
     * @param {*} nodes
     * @returns {ComponentRef<any>}
     */
    getComponentFactory(componentClass) {
        return this.componentFactoryResolver.resolveComponentFactory(componentClass);
    }
    /**
     * Creates a component reference from a `Component` type class.
     *
     * @param {*} componentClass
     * @param {*} nodes
     * @returns {ComponentRef<any>}
     */
    createComponent(componentClass, nodes, container) {
        const factory = this.getComponentFactory(componentClass);
        if (container) {
            return container.createComponent(factory, undefined, this.injector, nodes);
        }
        else {
            const component = factory.create(this.injector, nodes);
            this.applicationRef.attachView(component.hostView);
            return component;
        }
    }
    /**
     * Projects the inputs on the component.
     *
     * @param {ComponentRef<any>} component
     * @param {*} options
     * @returns {ComponentRef<any>}
     */
    projectComponentInputs(component, options) {
        Object.getOwnPropertyNames(options)
            .filter(prop => prop !== 'content' || options.content instanceof _angular_core__WEBPACK_IMPORTED_MODULE_0__["TemplateRef"])
            .map((prop) => {
            component.instance[prop] = options[prop];
        });
        return component;
    }
    /**
     * Gets the component and the nodes to append from the `content` option.
     *
     * @param {*} content
     * @returns {any}
     */
    contentFrom(content) {
        if (!content || content instanceof _angular_core__WEBPACK_IMPORTED_MODULE_0__["TemplateRef"]) {
            return { component: null, nodes: [[]] };
        }
        const component = this.createComponent(content);
        const nodes = component ? [component.location.nativeElement] : [];
        return {
            component: component,
            nodes: [
                nodes // <ng-content>
            ]
        };
    }
}
PopupService.ɵfac = function PopupService_Factory(t) { return new (t || PopupService)(_angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵinject"](_angular_core__WEBPACK_IMPORTED_MODULE_0__["ApplicationRef"]), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵinject"](_angular_core__WEBPACK_IMPORTED_MODULE_0__["ComponentFactoryResolver"]), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵinject"](_angular_core__WEBPACK_IMPORTED_MODULE_0__["Injector"]), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵinject"](POPUP_CONTAINER, 8)); };
PopupService.ɵprov = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdefineInjectable"]({ token: PopupService, factory: PopupService.ɵfac });
/** @nocollapse */
PopupService.ctorParameters = () => [
    { type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["ApplicationRef"] },
    { type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["ComponentFactoryResolver"] },
    { type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Injector"] },
    { type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["ElementRef"], decorators: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Inject"], args: [POPUP_CONTAINER,] }, { type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Optional"] }] }
];
/*@__PURE__*/ (function () { _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵsetClassMetadata"](PopupService, [{
        type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Injectable"]
    }], function () { return [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["ApplicationRef"] }, { type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["ComponentFactoryResolver"] }, { type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Injector"] }, { type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["ElementRef"], decorators: [{
                type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Inject"],
                args: [POPUP_CONTAINER]
            }, {
                type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Optional"]
            }] }]; }, null); })();

const POPUP_DIRECTIVES = [PopupComponent];
/**
 * Represents the [NgModule]({{ site.data.urls.angular['ngmoduleapi'] }})
 * definition for the Popup component.
 *
 * @example
 *
 * ```ts-no-run
 * // Import the Popup module
 * import { PopupModule } from '@progress/kendo-angular-popup';
 *
 * // The browser platform with a compiler
 * import { platformBrowserDynamic } from '@angular/platform-browser-dynamic';
 *
 * import { NgModule } from '@angular/core';
 *
 * // Import the app component
 * import { AppComponent } from './app.component';
 *
 * // Define the app module
 * _@NgModule({
 *     declarations: [AppComponent], // declare app component
 *     imports:      [BrowserModule, PopupModule], // import Popup module
 *     bootstrap:    [AppComponent]
 * })
 * export class AppModule {}
 *
 * // Compile and launch the module
 * platformBrowserDynamic().bootstrapModule(AppModule);
 *
 * ```
 */
class PopupModule {
}
PopupModule.ɵmod = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdefineNgModule"]({ type: PopupModule });
PopupModule.ɵinj = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdefineInjector"]({ factory: function PopupModule_Factory(t) { return new (t || PopupModule)(); }, providers: [PopupService], imports: [[_angular_common__WEBPACK_IMPORTED_MODULE_6__["CommonModule"], _progress_kendo_angular_common__WEBPACK_IMPORTED_MODULE_2__["ResizeSensorModule"]]] });
(function () { (typeof ngJitMode === "undefined" || ngJitMode) && _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵsetNgModuleScope"](PopupModule, { declarations: function () { return [PopupComponent]; }, imports: function () { return [_angular_common__WEBPACK_IMPORTED_MODULE_6__["CommonModule"], _progress_kendo_angular_common__WEBPACK_IMPORTED_MODULE_2__["ResizeSensorModule"]]; }, exports: function () { return [PopupComponent]; } }); })();
/*@__PURE__*/ (function () { _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵsetClassMetadata"](PopupModule, [{
        type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["NgModule"],
        args: [{
                declarations: [POPUP_DIRECTIVES],
                entryComponents: [POPUP_DIRECTIVES],
                exports: [POPUP_DIRECTIVES],
                imports: [_angular_common__WEBPACK_IMPORTED_MODULE_6__["CommonModule"], _progress_kendo_angular_common__WEBPACK_IMPORTED_MODULE_2__["ResizeSensorModule"]],
                providers: [PopupService]
            }]
    }], null, null); })();

/**
 * Generated bundle index. Do not edit.
 */



//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaW5kZXguanMiLCJzb3VyY2VzIjpbImluZGV4LmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7O0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7MEJBR0U7QUFDRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztvR0FHRTtBQUNGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7O2tDQUFFO0FBQ0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OzZHQUdFO0FBQ0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7a0NBQUU7QUFDRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzt1R0FHRTtBQUNGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs2RkFBRTtBQUNGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O21IQUdFO0FBQ0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7OzZGQUFFO0FBQ0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O2dIQUdFO0FBQ0Y7QUFDQTtBQUNBO0FBQ0E7OztpRkFBRTtBQUNGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OzsrSEFlRTtBQUNGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7b0JBQUU7QUFDRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztvR0FHRTtBQUNGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7OztrQ0FBRTtBQUNGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7Ozs7MEJBU0U7QUFDRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VzQ29udGVudCI6WyIvKiotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuKiBDb3B5cmlnaHQgwqkgMjAyMCBQcm9ncmVzcyBTb2Z0d2FyZSBDb3Jwb3JhdGlvbi4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiogTGljZW5zZWQgdW5kZXIgY29tbWVyY2lhbCBsaWNlbnNlLiBTZWUgTElDRU5TRS5tZCBpbiB0aGUgcHJvamVjdCByb290IGZvciBtb3JlIGluZm9ybWF0aW9uXG4qLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXG5pbXBvcnQgeyBBcHBsaWNhdGlvblJlZiwgQ29tcG9uZW50LCBDb21wb25lbnRGYWN0b3J5UmVzb2x2ZXIsIEVsZW1lbnRSZWYsIEV2ZW50RW1pdHRlciwgSW5qZWN0LCBJbmplY3RhYmxlLCBJbmplY3Rpb25Ub2tlbiwgSW5qZWN0b3IsIElucHV0LCBOZ01vZHVsZSwgTmdab25lLCBPcHRpb25hbCwgT3V0cHV0LCBSZW5kZXJlcjIsIFRlbXBsYXRlUmVmLCBWaWV3Q2hpbGQsIGlzRGV2TW9kZSB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuaW1wb3J0IHsgYWRkU2Nyb2xsLCBhbGlnbiwgYm91bmRpbmdPZmZzZXQsIGdldFdpbmRvd1ZpZXdQb3J0LCBvZmZzZXQsIHBhcmVudHMsIHBvc2l0aW9uV2l0aFNjcm9sbCwgcmVtb3ZlU2Nyb2xsLCByZXN0cmljdFRvVmlldywgc2Nyb2xsUG9zaXRpb24sIHNpYmxpbmdDb250YWluZXIgfSBmcm9tICdAcHJvZ3Jlc3Mva2VuZG8tcG9wdXAtY29tbW9uJztcbmltcG9ydCB7IFJlc2l6ZVNlbnNvckNvbXBvbmVudCwgUmVzaXplU2Vuc29yTW9kdWxlLCBoYXNPYnNlcnZlcnMsIGlzRG9jdW1lbnRBdmFpbGFibGUgfSBmcm9tICdAcHJvZ3Jlc3Mva2VuZG8tYW5ndWxhci1jb21tb24nO1xuaW1wb3J0IHsgZnJvbSwgZnJvbUV2ZW50LCBtZXJnZSB9IGZyb20gJ3J4anMnO1xuaW1wb3J0IHsgYXVkaXRUaW1lIH0gZnJvbSAncnhqcy9vcGVyYXRvcnMnO1xuaW1wb3J0IHsgQW5pbWF0aW9uQnVpbGRlciwgYW5pbWF0ZSwgc3R5bGUgfSBmcm9tICdAYW5ndWxhci9hbmltYXRpb25zJztcbmltcG9ydCB7IENvbW1vbk1vZHVsZSB9IGZyb20gJ0Bhbmd1bGFyL2NvbW1vbic7XG5cbi8qKlxuICogQGhpZGRlblxuICovXG5jb25zdCBlaXRoZXJSZWN0ID0gKHJlY3QsIG9mZnNldCQkMSkgPT4ge1xuICAgIGlmICghcmVjdCkge1xuICAgICAgICByZXR1cm4geyBoZWlnaHQ6IDAsIGxlZnQ6IG9mZnNldCQkMS5sZWZ0LCB0b3A6IG9mZnNldCQkMS50b3AsIHdpZHRoOiAwIH07XG4gICAgfVxuICAgIHJldHVybiByZWN0O1xufTtcbi8qKlxuICogQGhpZGRlblxuICovXG5cbi8qKlxuICogQGhpZGRlblxuICovXG5jb25zdCByZW1vdmVTdGFja2luZ09mZnNldCA9IChyZWN0LCBzdGFja2luZ09mZnNldCkgPT4ge1xuICAgIGlmICghc3RhY2tpbmdPZmZzZXQpIHtcbiAgICAgICAgcmV0dXJuIHJlY3Q7XG4gICAgfVxuICAgIGNvbnN0IHJlc3VsdCA9IHtcbiAgICAgICAgaGVpZ2h0OiByZWN0LmhlaWdodCxcbiAgICAgICAgbGVmdDogcmVjdC5sZWZ0IC0gc3RhY2tpbmdPZmZzZXQubGVmdCxcbiAgICAgICAgdG9wOiByZWN0LnRvcCAtIHN0YWNraW5nT2Zmc2V0LnRvcCxcbiAgICAgICAgd2lkdGg6IHJlY3Qud2lkdGhcbiAgICB9O1xuICAgIHJldHVybiByZXN1bHQ7XG59O1xuLyoqXG4gKiBAaGlkZGVuXG4gKi9cbmNvbnN0IGlzRGlmZmVyZW50T2Zmc2V0ID0gKG9sZE9mZnNldCwgbmV3T2Zmc2V0KSA9PiB7XG4gICAgY29uc3QgeyBsZWZ0OiBvbGRMZWZ0LCB0b3A6IG9sZFRvcCB9ID0gb2xkT2Zmc2V0O1xuICAgIGNvbnN0IHsgbGVmdDogbmV3TGVmdCwgdG9wOiBuZXdUb3AgfSA9IG5ld09mZnNldDtcbiAgICByZXR1cm4gTWF0aC5hYnMob2xkTGVmdCAtIG5ld0xlZnQpID49IDEgfHwgTWF0aC5hYnMob2xkVG9wIC0gbmV3VG9wKSA+PSAxO1xufTtcbi8qKlxuICogQGhpZGRlblxuICovXG5jb25zdCBpc1dpbmRvd0F2YWlsYWJsZSA9ICgpID0+IHtcbiAgICByZXR1cm4gdHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCc7XG59O1xuLyoqXG4gKiBAaGlkZGVuXG4gKi9cblxuLyoqXG4gKiBAaGlkZGVuXG4gKi9cbmNvbnN0IE9WRVJGTE9XX1JFR0VYUCA9IC9hdXRvfHNjcm9sbC87XG5jb25zdCBvdmVyZmxvd0VsZW1lbnRTdHlsZSA9IChlbGVtZW50KSA9PiB7XG4gICAgcmV0dXJuIGAke2VsZW1lbnQuc3R5bGUub3ZlcmZsb3d9JHtlbGVtZW50LnN0eWxlLm92ZXJmbG93WH0ke2VsZW1lbnQuc3R5bGUub3ZlcmZsb3dZfWA7XG59O1xuY29uc3Qgb3ZlcmZsb3dDb21wdXRlZFN0eWxlID0gKGVsZW1lbnQpID0+IHtcbiAgICBjb25zdCBzdHlsZXMgPSB3aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZShlbGVtZW50KTtcbiAgICByZXR1cm4gYCR7c3R5bGVzLm92ZXJmbG93fSR7c3R5bGVzLm92ZXJmbG93WH0ke3N0eWxlcy5vdmVyZmxvd1l9YDtcbn07XG5jb25zdCBvdmVyZmxvd1N0eWxlID0gKGVsZW1lbnQpID0+IHtcbiAgICByZXR1cm4gb3ZlcmZsb3dFbGVtZW50U3R5bGUoZWxlbWVudCkgfHwgb3ZlcmZsb3dDb21wdXRlZFN0eWxlKGVsZW1lbnQpO1xufTtcbi8qKlxuICogQGhpZGRlblxuICovXG5jb25zdCBzY3JvbGxhYmxlUGFyZW50cyA9IChlbGVtZW50KSA9PiB7XG4gICAgY29uc3QgcGFyZW50RWxlbWVudHMgPSBbXTtcbiAgICBpZiAoIWlzRG9jdW1lbnRBdmFpbGFibGUoKSB8fCAhaXNXaW5kb3dBdmFpbGFibGUoKSkge1xuICAgICAgICByZXR1cm4gcGFyZW50RWxlbWVudHM7XG4gICAgfVxuICAgIGxldCBwYXJlbnQgPSBlbGVtZW50LnBhcmVudEVsZW1lbnQ7XG4gICAgd2hpbGUgKHBhcmVudCkge1xuICAgICAgICBpZiAoT1ZFUkZMT1dfUkVHRVhQLnRlc3Qob3ZlcmZsb3dTdHlsZShwYXJlbnQpKSB8fCBwYXJlbnQuaGFzQXR0cmlidXRlKCdkYXRhLXNjcm9sbGFibGUnKSkge1xuICAgICAgICAgICAgcGFyZW50RWxlbWVudHMucHVzaChwYXJlbnQpO1xuICAgICAgICB9XG4gICAgICAgIHBhcmVudCA9IHBhcmVudC5wYXJlbnRFbGVtZW50O1xuICAgIH1cbiAgICBwYXJlbnRFbGVtZW50cy5wdXNoKHdpbmRvdyk7XG4gICAgcmV0dXJuIHBhcmVudEVsZW1lbnRzO1xufTtcbi8qKlxuICogQGhpZGRlblxuICovXG5jb25zdCBGUkFNRV9EVVJBVElPTiA9IDEwMDAgLyA2MDsgLy8xMDAwbXMgZGl2aWRlZCBieSA2MGZwc1xuZnVuY3Rpb24gbWVtb2l6ZShmdW4pIHtcbiAgICBsZXQgcmVzdWx0O1xuICAgIGxldCBjYWxsZWQgPSBmYWxzZTtcbiAgICByZXR1cm4gKC4uLmFyZ3MpID0+IHtcbiAgICAgICAgaWYgKGNhbGxlZCkge1xuICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICAgICAgfVxuICAgICAgICByZXN1bHQgPSBmdW4oLi4uYXJncyk7XG4gICAgICAgIGNhbGxlZCA9IHRydWU7XG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfTtcbn1cbi8qKlxuICogQGhpZGRlblxuICovXG5jb25zdCBoYXNSZWxhdGl2ZVN0YWNraW5nQ29udGV4dCA9IG1lbW9pemUoKCkgPT4ge1xuICAgIGlmICghaXNEb2N1bWVudEF2YWlsYWJsZSgpICYmIGRvY3VtZW50LmJvZHkgIT09IG51bGwpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICBjb25zdCB0b3AgPSAxMDtcbiAgICBjb25zdCBwYXJlbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgIHBhcmVudC5zdHlsZS50cmFuc2Zvcm0gPSBcIm1hdHJpeCgxMCwgMCwgMCwgMTAsIDAsIDApXCI7XG4gICAgcGFyZW50LmlubmVySFRNTCA9IGA8ZGl2IHN0eWxlPVwicG9zaXRpb246IGZpeGVkOyB0b3A6ICR7dG9wfXB4O1wiPmNoaWxkPC9kaXY+YDtcbiAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKHBhcmVudCk7XG4gICAgY29uc3QgaXNEaWZmZXJlbnQgPSBwYXJlbnQuY2hpbGRyZW5bMF0uZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkudG9wICE9PSB0b3A7XG4gICAgZG9jdW1lbnQuYm9keS5yZW1vdmVDaGlsZChwYXJlbnQpO1xuICAgIHJldHVybiBpc0RpZmZlcmVudDtcbn0pO1xuLyoqXG4gKiBAaGlkZGVuXG4gKi9cbmNvbnN0IHpJbmRleCA9IChhbmNob3IsIGNvbnRhaW5lcikgPT4ge1xuICAgIGlmICghYW5jaG9yIHx8ICFpc0RvY3VtZW50QXZhaWxhYmxlKCkgfHwgIWlzV2luZG93QXZhaWxhYmxlKCkpIHtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICAgIGNvbnN0IHNpYmxpbmcgPSBzaWJsaW5nQ29udGFpbmVyKGFuY2hvciwgY29udGFpbmVyKTtcbiAgICBpZiAoIXNpYmxpbmcpIHtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICAgIGNvbnN0IHJlc3VsdCA9IFthbmNob3JdLmNvbmNhdChwYXJlbnRzKGFuY2hvciwgc2libGluZykpLnJlZHVjZSgoaW5kZXgsIHApID0+IHtcbiAgICAgICAgY29uc3QgekluZGV4U3R5bGUgPSBwLnN0eWxlLnpJbmRleCB8fCB3aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZShwKS56SW5kZXg7XG4gICAgICAgIGNvbnN0IGN1cnJlbnQgPSBwYXJzZUludCh6SW5kZXhTdHlsZSwgMTApO1xuICAgICAgICByZXR1cm4gY3VycmVudCA+IGluZGV4ID8gY3VycmVudCA6IGluZGV4O1xuICAgIH0sIDApO1xuICAgIHJldHVybiByZXN1bHQgPyAocmVzdWx0ICsgMSkgOiBudWxsO1xufTtcbi8qKlxuICogQGhpZGRlblxuICovXG5jb25zdCBzY2FsZVJlY3QgPSAocmVjdCwgc2NhbGUpID0+IHtcbiAgICBpZiAoIXJlY3QgfHwgc2NhbGUgPT09IDEpIHtcbiAgICAgICAgcmV0dXJuIHJlY3Q7XG4gICAgfVxuICAgIHJldHVybiB7XG4gICAgICAgIGhlaWdodDogcmVjdC5oZWlnaHQgLyBzY2FsZSxcbiAgICAgICAgbGVmdDogcmVjdC5sZWZ0IC8gc2NhbGUsXG4gICAgICAgIHRvcDogcmVjdC50b3AgLyBzY2FsZSxcbiAgICAgICAgd2lkdGg6IHJlY3Qud2lkdGggLyBzY2FsZVxuICAgIH07XG59O1xuXG5jb25zdCBTVFlMRVMgPSBbXG4gICAgJ2ZvbnQtc2l6ZScsXG4gICAgJ2ZvbnQtZmFtaWx5JyxcbiAgICAnZm9udC1zdHJldGNoJyxcbiAgICAnZm9udC1zdHlsZScsXG4gICAgJ2ZvbnQtd2VpZ2h0JyxcbiAgICAnbGluZS1oZWlnaHQnXG5dO1xuLyoqXG4gKiBAaGlkZGVuXG4gKi9cbmNsYXNzIERPTVNlcnZpY2Uge1xuICAgIGFkZE9mZnNldChjdXJyZW50LCBhZGRpdGlvbikge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgbGVmdDogY3VycmVudC5sZWZ0ICsgYWRkaXRpb24ubGVmdCxcbiAgICAgICAgICAgIHRvcDogY3VycmVudC50b3AgKyBhZGRpdGlvbi50b3BcbiAgICAgICAgfTtcbiAgICB9XG4gICAgYWRkU2Nyb2xsKHJlY3QsIHNjcm9sbCkge1xuICAgICAgICByZXR1cm4gYWRkU2Nyb2xsKHJlY3QsIHNjcm9sbCk7XG4gICAgfVxuICAgIGFsaWduKHNldHRpbmdzKSB7XG4gICAgICAgIHJldHVybiBhbGlnbihzZXR0aW5ncyk7XG4gICAgfVxuICAgIGJvdW5kaW5nT2Zmc2V0KGVsKSB7XG4gICAgICAgIHJldHVybiBib3VuZGluZ09mZnNldCh0aGlzLm5hdGl2ZUVsZW1lbnQoZWwpKTtcbiAgICB9XG4gICAgZ2V0Rm9udFN0eWxlcyhlbCkge1xuICAgICAgICBjb25zdCB3aW5kb3cgPSB0aGlzLmdldFdpbmRvdygpO1xuICAgICAgICBpZiAoIXdpbmRvdyB8fCAhZWwpIHtcbiAgICAgICAgICAgIHJldHVybiBbXTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBjb21wdXRlZFN0eWxlcyA9IHdpbmRvdy5nZXRDb21wdXRlZFN0eWxlKHRoaXMubmF0aXZlRWxlbWVudChlbCkpO1xuICAgICAgICByZXR1cm4gU1RZTEVTLm1hcChmb250ID0+ICh7IGtleTogZm9udCwgdmFsdWU6IGNvbXB1dGVkU3R5bGVzW2ZvbnRdIH0pKTtcbiAgICB9XG4gICAgZ2V0V2luZG93KCkge1xuICAgICAgICByZXR1cm4gaXNXaW5kb3dBdmFpbGFibGUoKSA/IHdpbmRvdyA6IG51bGw7XG4gICAgfVxuICAgIGhhc09mZnNldFBhcmVudChlbCkge1xuICAgICAgICBpZiAoIWVsKSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuICEhdGhpcy5uYXRpdmVFbGVtZW50KGVsKS5vZmZzZXRQYXJlbnQ7XG4gICAgfVxuICAgIG9mZnNldChlbCkge1xuICAgICAgICBpZiAoIWVsKSB7XG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gb2Zmc2V0KHRoaXMubmF0aXZlRWxlbWVudChlbCkpO1xuICAgIH1cbiAgICBvZmZzZXRBdFBvaW50KGVsLCBjdXJyZW50TG9jYXRpb24pIHtcbiAgICAgICAgaWYgKCFlbCkge1xuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgZWxlbWVudCA9IHRoaXMubmF0aXZlRWxlbWVudChlbCk7XG4gICAgICAgIGNvbnN0IHsgbGVmdCwgdG9wLCB0cmFuc2l0aW9uIH0gPSBlbGVtZW50LnN0eWxlO1xuICAgICAgICBlbGVtZW50LnN0eWxlLnRyYW5zaXRpb24gPSAnbm9uZSc7XG4gICAgICAgIGVsZW1lbnQuc3R5bGUubGVmdCA9IGAke2N1cnJlbnRMb2NhdGlvbi5sZWZ0fXB4YDtcbiAgICAgICAgZWxlbWVudC5zdHlsZS50b3AgPSBgJHtjdXJyZW50TG9jYXRpb24udG9wfXB4YDtcbiAgICAgICAgY29uc3QgY3VycmVudE9mZnNldCA9IG9mZnNldChlbGVtZW50KTtcbiAgICAgICAgZWxlbWVudC5zdHlsZS5sZWZ0ID0gbGVmdDtcbiAgICAgICAgZWxlbWVudC5zdHlsZS50b3AgPSB0b3A7XG4gICAgICAgIC8vIHByZXZlbnRzIGVsZW1lbnRzIHdpdGggdHJhbnNpdGlvbiB0byBiZSBhbmltYXRlZCBiZWNhdXNlIG9mIHRoZSBjaGFuZ2VcbiAgICAgICAgLy8gdHNsaW50OmRpc2FibGUtbmV4dC1saW5lOm5vLXVudXNlZC1leHByZXNzaW9uXG4gICAgICAgIGVsZW1lbnQub2Zmc2V0SGVpZ2h0O1xuICAgICAgICBlbGVtZW50LnN0eWxlLnRyYW5zaXRpb24gPSB0cmFuc2l0aW9uO1xuICAgICAgICByZXR1cm4gY3VycmVudE9mZnNldDtcbiAgICB9XG4gICAgbmF0aXZlRWxlbWVudChlbCkge1xuICAgICAgICBpZiAoIWVsKSB7XG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZWwubmF0aXZlRWxlbWVudCB8fCBlbDtcbiAgICB9XG4gICAgcG9zaXRpb24oZWxlbWVudCwgcG9wdXAsIHNjYWxlID0gMSkge1xuICAgICAgICBpZiAoIWVsZW1lbnQgfHwgIXBvcHVwKSB7XG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcG9zaXRpb25XaXRoU2Nyb2xsKHRoaXMubmF0aXZlRWxlbWVudChlbGVtZW50KSwgdGhpcy5uYXRpdmVFbGVtZW50KHBvcHVwKSwgc2NhbGUpO1xuICAgIH1cbiAgICByZW1vdmVTY3JvbGwocmVjdCwgc2Nyb2xsKSB7XG4gICAgICAgIHJldHVybiByZW1vdmVTY3JvbGwocmVjdCwgc2Nyb2xsKTtcbiAgICB9XG4gICAgcmVzdHJpY3RUb1ZpZXcoc2V0dGluZ3MpIHtcbiAgICAgICAgcmV0dXJuIHJlc3RyaWN0VG9WaWV3KHNldHRpbmdzKTtcbiAgICB9XG4gICAgc2Nyb2xsUG9zaXRpb24oZWwpIHtcbiAgICAgICAgcmV0dXJuIHNjcm9sbFBvc2l0aW9uKHRoaXMubmF0aXZlRWxlbWVudChlbCkpO1xuICAgIH1cbiAgICBzY3JvbGxhYmxlUGFyZW50cyhlbCkge1xuICAgICAgICByZXR1cm4gc2Nyb2xsYWJsZVBhcmVudHModGhpcy5uYXRpdmVFbGVtZW50KGVsKSk7XG4gICAgfVxuICAgIHN0YWNraW5nRWxlbWVudE9mZnNldChlbCkge1xuICAgICAgICBjb25zdCByZWxhdGl2ZUNvbnRleHRFbGVtZW50ID0gdGhpcy5nZXRSZWxhdGl2ZUNvbnRleHRFbGVtZW50KGVsKTtcbiAgICAgICAgaWYgKCFyZWxhdGl2ZUNvbnRleHRFbGVtZW50KSB7XG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gb2Zmc2V0KHJlbGF0aXZlQ29udGV4dEVsZW1lbnQpO1xuICAgIH1cbiAgICBzdGFja2luZ0VsZW1lbnRTY3JvbGwoZWwpIHtcbiAgICAgICAgY29uc3QgcmVsYXRpdmVDb250ZXh0RWxlbWVudCA9IHRoaXMuZ2V0UmVsYXRpdmVDb250ZXh0RWxlbWVudChlbCk7XG4gICAgICAgIGlmICghcmVsYXRpdmVDb250ZXh0RWxlbWVudCkge1xuICAgICAgICAgICAgcmV0dXJuIHsgeDogMCwgeTogMCB9O1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICB4OiByZWxhdGl2ZUNvbnRleHRFbGVtZW50LnNjcm9sbExlZnQsXG4gICAgICAgICAgICB5OiByZWxhdGl2ZUNvbnRleHRFbGVtZW50LnNjcm9sbFRvcFxuICAgICAgICB9O1xuICAgIH1cbiAgICBnZXRSZWxhdGl2ZUNvbnRleHRFbGVtZW50KGVsKSB7XG4gICAgICAgIGlmICghZWwgfHwgIWhhc1JlbGF0aXZlU3RhY2tpbmdDb250ZXh0KCkpIHtcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9XG4gICAgICAgIGxldCBwYXJlbnQgPSB0aGlzLm5hdGl2ZUVsZW1lbnQoZWwpLnBhcmVudEVsZW1lbnQ7XG4gICAgICAgIHdoaWxlIChwYXJlbnQpIHtcbiAgICAgICAgICAgIGlmICh3aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZShwYXJlbnQpLnRyYW5zZm9ybSAhPT0gJ25vbmUnKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHBhcmVudDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHBhcmVudCA9IHBhcmVudC5wYXJlbnRFbGVtZW50O1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgICB1c2VSZWxhdGl2ZVBvc2l0aW9uKGVsKSB7XG4gICAgICAgIHJldHVybiAhIXRoaXMuZ2V0UmVsYXRpdmVDb250ZXh0RWxlbWVudChlbCk7XG4gICAgfVxuICAgIHdpbmRvd1ZpZXdQb3J0KGVsKSB7XG4gICAgICAgIHJldHVybiBnZXRXaW5kb3dWaWV3UG9ydCh0aGlzLm5hdGl2ZUVsZW1lbnQoZWwpKTtcbiAgICB9XG4gICAgekluZGV4KGFuY2hvciwgY29udGFpbmVyKSB7XG4gICAgICAgIHJldHVybiB6SW5kZXgodGhpcy5uYXRpdmVFbGVtZW50KGFuY2hvciksIHRoaXMubmF0aXZlRWxlbWVudChjb250YWluZXIpKTtcbiAgICB9XG4gICAgem9vbUxldmVsKCkge1xuICAgICAgICBpZiAoIWlzRG9jdW1lbnRBdmFpbGFibGUoKSB8fCAhaXNXaW5kb3dBdmFpbGFibGUoKSkge1xuICAgICAgICAgICAgcmV0dXJuIDE7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHBhcnNlRmxvYXQoKGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5jbGllbnRXaWR0aCAvIHdpbmRvdy5pbm5lcldpZHRoKS50b0ZpeGVkKDIpKSB8fCAxO1xuICAgIH1cbiAgICBpc1pvb21lZCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuem9vbUxldmVsKCkgPiAxO1xuICAgIH1cbn1cbkRPTVNlcnZpY2UuZGVjb3JhdG9ycyA9IFtcbiAgICB7IHR5cGU6IEluamVjdGFibGUgfSxcbl07XG5cbi8qKlxuICogVXNlZCB0byBzZXQgdGhlIGRvY3VtZW50IHNjYWxlIHdoZW4gdXNpbmcgYSBbc2NhbGUgdHJhbnNmb3JtXShodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9DU1MvdHJhbnNmb3JtLWZ1bmN0aW9uL3NjYWxlKS5cbiAqXG4gKiBUaGUgZG9jdW1lbnQgb3IgY29udGFpbmVyIHNjYWxlIGlzIHJlcXVpcmVkIHRvIGNvbXB1dGUgdGhlIHBvcHVwIHBvc2l0aW9uIGNvcnJlY3RseS4gRGV0ZWN0aW5nIHRoZSBzY2FsZSBpcyBub3QgcmVsaWFibGUgYW5kIG11c3QgYmUgc2V0IGJ5IHByb3ZpZGluZyBhIHZhbHVlIGZvciBTQ0FMRS4gU2VlIFtTdXBwb3J0IGZvciBEb2N1bWVudCBTY2FsZV0oeyUgc2x1ZyBkb2N1bWVudHNjYWxlX3BvcHVwICV9KS5cbiAqXG4gKiA+IFVzaW5nIHRoaXMgdG9rZW4gaXMgbm90IG5lY2Vzc2FyeSBmb3IgdXNlci1hcHBsaWVkIGJyb3dzZXIgem9vbS5cbiAqXG4gKiB7JSBtZXRhIGhlaWdodDozMDAgJX1cbiAqIHslIGVtYmVkX2ZpbGUgc2NhbGUvYXBwLmNvbXBvbmVudC50cyBwcmV2aWV3ICV9XG4gKiB7JSBlbWJlZF9maWxlIHNjYWxlL2FwcC5tb2R1bGUudHMgJX1cbiAqIHslIGVtYmVkX2ZpbGUgc2NhbGUvbWFpbi50cyAlfVxuICogeyUgZW5kbWV0YSAlfVxuICpcbiAqXG4gKi9cbmNvbnN0IFNDQUxFID0gbmV3IEluamVjdGlvblRva2VuKCdQb3B1cCBEb2N1bWVudCBTY2FsZScpO1xuXG4vKipcbiAqIEBoaWRkZW5cbiAqL1xuY2xhc3MgQWxpZ25TZXJ2aWNlIHtcbiAgICBjb25zdHJ1Y3RvcihfZG9tLCBzY2FsZSA9IDEpIHtcbiAgICAgICAgdGhpcy5fZG9tID0gX2RvbTtcbiAgICAgICAgdGhpcy5zY2FsZSA9IHNjYWxlO1xuICAgIH1cbiAgICBhbGlnbkVsZW1lbnQoc2V0dGluZ3MpIHtcbiAgICAgICAgY29uc3QgeyBhbmNob3IsIGVsZW1lbnQsIGFuY2hvckFsaWduLCBlbGVtZW50QWxpZ24sIG1hcmdpbiwgb2Zmc2V0OiBvZmZzZXQkJDEsIHBvc2l0aW9uTW9kZSB9ID0gc2V0dGluZ3M7XG4gICAgICAgIGNvbnN0IHNjYWxlID0gdGhpcy5zY2FsZSB8fCAxO1xuICAgICAgICBjb25zdCBmaXhlZE1vZGUgPSBwb3NpdGlvbk1vZGUgPT09ICdmaXhlZCcgfHwgIXRoaXMuX2RvbS5oYXNPZmZzZXRQYXJlbnQoZWxlbWVudCk7XG4gICAgICAgIGNvbnN0IGFuY2hvclJlY3QgPSBmaXhlZE1vZGUgPyB0aGlzLmFic29sdXRlUmVjdChhbmNob3IsIGVsZW1lbnQsIG9mZnNldCQkMSwgc2NhbGUpIDogdGhpcy5yZWxhdGl2ZVJlY3QoYW5jaG9yLCBlbGVtZW50LCBvZmZzZXQkJDEsIHNjYWxlKTtcbiAgICAgICAgY29uc3QgZWxlbWVudFJlY3QgPSBzY2FsZVJlY3QodGhpcy5fZG9tLm9mZnNldChlbGVtZW50KSwgc2NhbGUpO1xuICAgICAgICBjb25zdCByZXN1bHQgPSB0aGlzLl9kb20uYWxpZ24oe1xuICAgICAgICAgICAgYW5jaG9yQWxpZ246IGFuY2hvckFsaWduLFxuICAgICAgICAgICAgYW5jaG9yUmVjdDogYW5jaG9yUmVjdCxcbiAgICAgICAgICAgIGVsZW1lbnRBbGlnbjogZWxlbWVudEFsaWduLFxuICAgICAgICAgICAgZWxlbWVudFJlY3Q6IGVsZW1lbnRSZWN0LFxuICAgICAgICAgICAgbWFyZ2luXG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH1cbiAgICBhYnNvbHV0ZVJlY3QoYW5jaG9yLCBlbGVtZW50LCBvZmZzZXQkJDEsIHNjYWxlKSB7XG4gICAgICAgIGNvbnN0IHNjcm9sbFBvcyA9IHRoaXMuZWxlbWVudFNjcm9sbFBvc2l0aW9uKGFuY2hvciwgZWxlbWVudCk7XG4gICAgICAgIGNvbnN0IHJlY3QgPSBlaXRoZXJSZWN0KHRoaXMuX2RvbS5vZmZzZXQoYW5jaG9yKSwgb2Zmc2V0JCQxKTtcbiAgICAgICAgY29uc3Qgc3RhY2tTY2FsZSA9IDIgKiBzY2FsZTtcbiAgICAgICAgY29uc3Qgc3RhY2tTY3JvbGwgPSB0aGlzLl9kb20uc3RhY2tpbmdFbGVtZW50U2Nyb2xsKGVsZW1lbnQpO1xuICAgICAgICBpZiAoc2NhbGUgIT09IDEgJiYgc3RhY2tTY3JvbGwpIHtcbiAgICAgICAgICAgIHN0YWNrU2Nyb2xsLnggLz0gc3RhY2tTY2FsZTtcbiAgICAgICAgICAgIHN0YWNrU2Nyb2xsLnkgLz0gc3RhY2tTY2FsZTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBzdGFja09mZnNldCA9IHRoaXMuX2RvbS5zdGFja2luZ0VsZW1lbnRPZmZzZXQoZWxlbWVudCk7XG4gICAgICAgIGlmIChzY2FsZSAhPT0gMSAmJiBzdGFja09mZnNldCkge1xuICAgICAgICAgICAgc3RhY2tPZmZzZXQubGVmdCAvPSBzdGFja1NjYWxlO1xuICAgICAgICAgICAgc3RhY2tPZmZzZXQudG9wIC89IHN0YWNrU2NhbGU7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXMuX2RvbS5yZW1vdmVTY3JvbGwodGhpcy5fZG9tLmFkZFNjcm9sbChyZW1vdmVTdGFja2luZ09mZnNldChzY2FsZVJlY3QocmVjdCwgc2NhbGUpLCBzdGFja09mZnNldCksIHN0YWNrU2Nyb2xsKSwgc2Nyb2xsUG9zKTtcbiAgICB9XG4gICAgZWxlbWVudFNjcm9sbFBvc2l0aW9uKGFuY2hvciwgZWxlbWVudCkge1xuICAgICAgICByZXR1cm4gYW5jaG9yID8geyB4OiAwLCB5OiAwIH0gOiB0aGlzLl9kb20uc2Nyb2xsUG9zaXRpb24oZWxlbWVudCk7XG4gICAgfVxuICAgIHJlbGF0aXZlUmVjdChhbmNob3IsIGVsZW1lbnQsIG9mZnNldCQkMSwgc2NhbGUpIHtcbiAgICAgICAgY29uc3QgcmVjdCA9IGVpdGhlclJlY3QodGhpcy5fZG9tLnBvc2l0aW9uKGFuY2hvciwgZWxlbWVudCwgc2NhbGUpLCBvZmZzZXQkJDEpO1xuICAgICAgICByZXR1cm4gc2NhbGVSZWN0KHJlY3QsIHNjYWxlKTtcbiAgICB9XG59XG5BbGlnblNlcnZpY2UuZGVjb3JhdG9ycyA9IFtcbiAgICB7IHR5cGU6IEluamVjdGFibGUgfSxcbl07XG4vKiogQG5vY29sbGFwc2UgKi9cbkFsaWduU2VydmljZS5jdG9yUGFyYW1ldGVycyA9ICgpID0+IFtcbiAgICB7IHR5cGU6IERPTVNlcnZpY2UgfSxcbiAgICB7IHR5cGU6IE51bWJlciwgZGVjb3JhdG9yczogW3sgdHlwZTogSW5qZWN0LCBhcmdzOiBbU0NBTEUsXSB9LCB7IHR5cGU6IE9wdGlvbmFsIH1dIH1cbl07XG5cbi8qKlxuICogQGhpZGRlblxuICovXG5jbGFzcyBQb3NpdGlvblNlcnZpY2Uge1xuICAgIGNvbnN0cnVjdG9yKF9kb20sIHNjYWxlID0gMSkge1xuICAgICAgICB0aGlzLl9kb20gPSBfZG9tO1xuICAgICAgICB0aGlzLnNjYWxlID0gc2NhbGU7XG4gICAgfVxuICAgIHBvc2l0aW9uRWxlbWVudChzZXR0aW5ncykge1xuICAgICAgICBjb25zdCB7IGFuY2hvciwgY3VycmVudExvY2F0aW9uLCBlbGVtZW50LCBhbmNob3JBbGlnbiwgZWxlbWVudEFsaWduLCBjb2xsaXNpb25zLCBtYXJnaW4gfSA9IHNldHRpbmdzO1xuICAgICAgICBjb25zdCBkb20gPSB0aGlzLl9kb207XG4gICAgICAgIGNvbnN0IHNjYWxlID0gdGhpcy5zY2FsZSB8fCAxO1xuICAgICAgICBjb25zdCBlbGVtZW50T2Zmc2V0ID0gZG9tLm9mZnNldEF0UG9pbnQoZWxlbWVudCwgY3VycmVudExvY2F0aW9uKTtcbiAgICAgICAgY29uc3QgZWxlbWVudFJlY3QgPSBzY2FsZVJlY3QoZWxlbWVudE9mZnNldCwgc2NhbGUpO1xuICAgICAgICBjb25zdCBhbmNob3JPZmZzZXQgPSBzY2FsZVJlY3QoZG9tLm9mZnNldChhbmNob3IpLCBzY2FsZSk7XG4gICAgICAgIGNvbnN0IGFuY2hvclJlY3QgPSBlaXRoZXJSZWN0KGFuY2hvck9mZnNldCwgY3VycmVudExvY2F0aW9uKTtcbiAgICAgICAgY29uc3Qgdmlld1BvcnQgPSBzZXR0aW5ncy52aWV3UG9ydCB8fCBkb20ud2luZG93Vmlld1BvcnQoZWxlbWVudCk7XG4gICAgICAgIHZpZXdQb3J0LndpZHRoID0gdmlld1BvcnQud2lkdGggLyBzY2FsZTtcbiAgICAgICAgdmlld1BvcnQuaGVpZ2h0ID0gdmlld1BvcnQuaGVpZ2h0IC8gc2NhbGU7XG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IGRvbS5yZXN0cmljdFRvVmlldyh7XG4gICAgICAgICAgICBhbmNob3JBbGlnbixcbiAgICAgICAgICAgIGFuY2hvclJlY3QsXG4gICAgICAgICAgICBjb2xsaXNpb25zLFxuICAgICAgICAgICAgZWxlbWVudEFsaWduLFxuICAgICAgICAgICAgZWxlbWVudFJlY3QsXG4gICAgICAgICAgICBtYXJnaW4sXG4gICAgICAgICAgICB2aWV3UG9ydFxuICAgICAgICB9KTtcbiAgICAgICAgY29uc3Qgb2Zmc2V0JCQxID0gZG9tLmFkZE9mZnNldChjdXJyZW50TG9jYXRpb24sIHJlc3VsdC5vZmZzZXQpO1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgZmxpcDogcmVzdWx0LmZsaXAsXG4gICAgICAgICAgICBmbGlwcGVkOiByZXN1bHQuZmxpcHBlZCxcbiAgICAgICAgICAgIG9mZnNldDogb2Zmc2V0JCQxXG4gICAgICAgIH07XG4gICAgfVxufVxuUG9zaXRpb25TZXJ2aWNlLmRlY29yYXRvcnMgPSBbXG4gICAgeyB0eXBlOiBJbmplY3RhYmxlIH0sXG5dO1xuLyoqIEBub2NvbGxhcHNlICovXG5Qb3NpdGlvblNlcnZpY2UuY3RvclBhcmFtZXRlcnMgPSAoKSA9PiBbXG4gICAgeyB0eXBlOiBET01TZXJ2aWNlIH0sXG4gICAgeyB0eXBlOiBOdW1iZXIsIGRlY29yYXRvcnM6IFt7IHR5cGU6IEluamVjdCwgYXJnczogW1NDQUxFLF0gfSwgeyB0eXBlOiBPcHRpb25hbCB9XSB9XG5dO1xuXG4vKipcbiAqIEBoaWRkZW5cbiAqL1xuY2xhc3MgUmVzaXplU2VydmljZSB7XG4gICAgY29uc3RydWN0b3IoX2RvbSwgX3pvbmUpIHtcbiAgICAgICAgdGhpcy5fZG9tID0gX2RvbTtcbiAgICAgICAgdGhpcy5fem9uZSA9IF96b25lO1xuICAgIH1cbiAgICBzdWJzY3JpYmUoY2FsbGJhY2spIHtcbiAgICAgICAgaWYgKCFpc0RvY3VtZW50QXZhaWxhYmxlKCkpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLl96b25lLnJ1bk91dHNpZGVBbmd1bGFyKCgpID0+IHtcbiAgICAgICAgICAgIHRoaXMuc3Vic2NyaXB0aW9uID0gZnJvbUV2ZW50KHRoaXMuX2RvbS5nZXRXaW5kb3coKSwgXCJyZXNpemVcIilcbiAgICAgICAgICAgICAgICAucGlwZShhdWRpdFRpbWUoRlJBTUVfRFVSQVRJT04pKVxuICAgICAgICAgICAgICAgIC5zdWJzY3JpYmUoKCkgPT4gY2FsbGJhY2soKSk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICB1bnN1YnNjcmliZSgpIHtcbiAgICAgICAgaWYgKCF0aGlzLnN1YnNjcmlwdGlvbikge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuc3Vic2NyaXB0aW9uLnVuc3Vic2NyaWJlKCk7XG4gICAgfVxuICAgIGlzVW5zdWJzY3JpYmVkKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5zdWJzY3JpcHRpb24gJiYgdGhpcy5zdWJzY3JpcHRpb24uY2xvc2VkO1xuICAgIH1cbn1cblJlc2l6ZVNlcnZpY2UuZGVjb3JhdG9ycyA9IFtcbiAgICB7IHR5cGU6IEluamVjdGFibGUgfSxcbl07XG4vKiogQG5vY29sbGFwc2UgKi9cblJlc2l6ZVNlcnZpY2UuY3RvclBhcmFtZXRlcnMgPSAoKSA9PiBbXG4gICAgeyB0eXBlOiBET01TZXJ2aWNlIH0sXG4gICAgeyB0eXBlOiBOZ1pvbmUgfVxuXTtcblxuLyoqXG4gKiBAaGlkZGVuXG4gKi9cbmNvbnN0IFRIUkVTSE9MRF9ESUZGID0gMTtcbi8qKlxuICogQGhpZGRlblxuICovXG5jbGFzcyBTY3JvbGxhYmxlU2VydmljZSB7XG4gICAgY29uc3RydWN0b3IoX2RvbSwgX3pvbmUpIHtcbiAgICAgICAgdGhpcy5fZG9tID0gX2RvbTtcbiAgICAgICAgdGhpcy5fem9uZSA9IF96b25lO1xuICAgIH1cbiAgICBmb3JFbGVtZW50KGVsZW1lbnQpIHtcbiAgICAgICAgdGhpcy51bnN1YnNjcmliZSgpO1xuICAgICAgICB0aGlzLmVsZW1lbnQgPSBlbGVtZW50O1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG4gICAgc3Vic2NyaWJlKGNhbGxiYWNrKSB7XG4gICAgICAgIGlmICghY2FsbGJhY2sgfHwgIWlzRG9jdW1lbnRBdmFpbGFibGUoKSB8fCAhdGhpcy5lbGVtZW50KSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgbmF0aXZlRWxlbWVudCA9IHRoaXMuX2RvbS5uYXRpdmVFbGVtZW50KHRoaXMuZWxlbWVudCk7XG4gICAgICAgIGNvbnN0IHBhcmVudHMkJDEgPSB0aGlzLl9kb20uc2Nyb2xsYWJsZVBhcmVudHModGhpcy5lbGVtZW50KTtcbiAgICAgICAgdGhpcy5fem9uZS5ydW5PdXRzaWRlQW5ndWxhcigoKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBvYnNlcnZhYmxlcyA9IHBhcmVudHMkJDEubWFwKHAgPT4gZnJvbUV2ZW50KHAsIFwic2Nyb2xsXCIpLnBpcGUoYXVkaXRUaW1lKEZSQU1FX0RVUkFUSU9OKSkpO1xuICAgICAgICAgICAgY29uc3Qgc3Vic2NyaWJlciA9IChlKSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgdGFyZ2V0ID0gZS50YXJnZXQ7XG4gICAgICAgICAgICAgICAgY29uc3QgaXNQYXJlbnQgPSBwYXJlbnRzJCQxLmZpbHRlcihwID0+IHAgPT09IHRhcmdldCkubGVuZ3RoID4gMDtcbiAgICAgICAgICAgICAgICBjb25zdCBpc0RvY3VtZW50ID0gdGFyZ2V0ID09PSBkb2N1bWVudDtcbiAgICAgICAgICAgICAgICBjb25zdCBpc1dpbmRvdyA9IHRhcmdldCA9PT0gd2luZG93O1xuICAgICAgICAgICAgICAgIGlmIChpc1BhcmVudCB8fCBpc0RvY3VtZW50IHx8IGlzV2luZG93KSB7XG4gICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrKHRoaXMuaXNWaXNpYmxlKG5hdGl2ZUVsZW1lbnQsIHRhcmdldCkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICB0aGlzLnN1YnNjcmlwdGlvbiA9IG1lcmdlKC4uLm9ic2VydmFibGVzKS5zdWJzY3JpYmUoc3Vic2NyaWJlcik7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICB1bnN1YnNjcmliZSgpIHtcbiAgICAgICAgaWYgKCF0aGlzLnN1YnNjcmlwdGlvbikge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuc3Vic2NyaXB0aW9uLnVuc3Vic2NyaWJlKCk7XG4gICAgfVxuICAgIGlzVmlzaWJsZShlbGVtLCBjb250YWluZXIpIHtcbiAgICAgICAgY29uc3QgZWxlbVJlY3QgPSB0aGlzLl9kb20uYm91bmRpbmdPZmZzZXQoZWxlbSk7XG4gICAgICAgIGNvbnN0IGNvbnRhaW5lclJlY3QgPSB0aGlzLl9kb20uYm91bmRpbmdPZmZzZXQoY29udGFpbmVyKTtcbiAgICAgICAgaWYgKFRIUkVTSE9MRF9ESUZGIDwgKGNvbnRhaW5lclJlY3QudG9wIC0gZWxlbVJlY3QuYm90dG9tKSkge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIGlmIChUSFJFU0hPTERfRElGRiA8IChlbGVtUmVjdC50b3AgLSBjb250YWluZXJSZWN0LmJvdHRvbSkpIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoVEhSRVNIT0xEX0RJRkYgPCAoZWxlbVJlY3QubGVmdCAtIGNvbnRhaW5lclJlY3QucmlnaHQpKSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKFRIUkVTSE9MRF9ESUZGIDwgKGNvbnRhaW5lclJlY3QubGVmdCAtIGVsZW1SZWN0LnJpZ2h0KSkge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbn1cblNjcm9sbGFibGVTZXJ2aWNlLmRlY29yYXRvcnMgPSBbXG4gICAgeyB0eXBlOiBJbmplY3RhYmxlIH0sXG5dO1xuLyoqIEBub2NvbGxhcHNlICovXG5TY3JvbGxhYmxlU2VydmljZS5jdG9yUGFyYW1ldGVycyA9ICgpID0+IFtcbiAgICB7IHR5cGU6IERPTVNlcnZpY2UgfSxcbiAgICB7IHR5cGU6IE5nWm9uZSB9XG5dO1xuXG5jb25zdCBMRUZUID0gJ2xlZnQnO1xuY29uc3QgUklHSFQgPSAncmlnaHQnO1xuY29uc3QgRE9XTiA9ICdkb3duJztcbmNvbnN0IFVQID0gJ3VwJztcbmNvbnN0IERFRkFVTFRfVFlQRSA9ICdzbGlkZSc7XG5jb25zdCBERUZBVUxUX0RVUkFUSU9OID0gMTAwO1xuY29uc3QgYW5pbWF0aW9uVHlwZXMgPSB7fTtcbi8qIHRzbGludDpkaXNhYmxlOm9iamVjdC1saXRlcmFsLXNvcnQta2V5cyAqL1xuYW5pbWF0aW9uVHlwZXMuZXhwYW5kID0gKGRpcmVjdGlvbikgPT4ge1xuICAgIGNvbnN0IHNjYWxlID0gZGlyZWN0aW9uID09PSBVUCB8fCBkaXJlY3Rpb24gPT09IERPV04gPyAnc2NhbGVZJyA6ICdzY2FsZVgnO1xuICAgIGNvbnN0IHN0YXJ0U2NhbGUgPSAwO1xuICAgIGNvbnN0IGVuZFNjYWxlID0gMTtcbiAgICBsZXQgb3JpZ2luO1xuICAgIGlmIChkaXJlY3Rpb24gPT09IERPV04pIHtcbiAgICAgICAgb3JpZ2luID0gJ3RvcCc7XG4gICAgfVxuICAgIGVsc2UgaWYgKGRpcmVjdGlvbiA9PT0gTEVGVCkge1xuICAgICAgICBvcmlnaW4gPSBSSUdIVDtcbiAgICB9XG4gICAgZWxzZSBpZiAoZGlyZWN0aW9uID09PSBSSUdIVCkge1xuICAgICAgICBvcmlnaW4gPSBMRUZUO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgb3JpZ2luID0gJ2JvdHRvbSc7XG4gICAgfVxuICAgIHJldHVybiB7XG4gICAgICAgIHN0YXJ0OiB7IHRyYW5zZm9ybTogYCR7c2NhbGV9KCR7c3RhcnRTY2FsZX0pYCwgdHJhbnNmb3JtT3JpZ2luOiBvcmlnaW4gfSxcbiAgICAgICAgZW5kOiB7IHRyYW5zZm9ybTogYCR7c2NhbGV9KCR7ZW5kU2NhbGV9KWAgfVxuICAgIH07XG59O1xuYW5pbWF0aW9uVHlwZXMuc2xpZGUgPSAoZGlyZWN0aW9uKSA9PiB7XG4gICAgY29uc3QgdHJhbnNsYXRlID0gZGlyZWN0aW9uID09PSBMRUZUIHx8IGRpcmVjdGlvbiA9PT0gUklHSFQgPyAndHJhbnNsYXRlWCcgOiAndHJhbnNsYXRlWSc7XG4gICAgY29uc3Qgc3RhcnQgPSBkaXJlY3Rpb24gPT09IFJJR0hUIHx8IGRpcmVjdGlvbiA9PT0gRE9XTiA/IC0xMDAgOiAxMDA7XG4gICAgY29uc3QgZW5kID0gMDtcbiAgICByZXR1cm4ge1xuICAgICAgICBzdGFydDogeyB0cmFuc2Zvcm06IGAke3RyYW5zbGF0ZX0oJHtzdGFydH0lKWAgfSxcbiAgICAgICAgZW5kOiB7IHRyYW5zZm9ybTogYCR7dHJhbnNsYXRlfSgke2VuZH0lKWAgfVxuICAgIH07XG59O1xuYW5pbWF0aW9uVHlwZXMuZmFkZSA9ICgpID0+IHtcbiAgICByZXR1cm4ge1xuICAgICAgICBzdGFydDogeyBvcGFjaXR5OiAwIH0sXG4gICAgICAgIGVuZDogeyBvcGFjaXR5OiAxIH1cbiAgICB9O1xufTtcbmFuaW1hdGlvblR5cGVzLnpvb20gPSAoKSA9PiB7XG4gICAgY29uc3Qgc3RhcnQgPSAwO1xuICAgIGNvbnN0IGVuZCA9IDE7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgc3RhcnQ6IHsgdHJhbnNmb3JtOiBgc2NhbGUoJHtzdGFydH0pYCB9LFxuICAgICAgICBlbmQ6IHsgdHJhbnNmb3JtOiBgc2NhbGUoJHtlbmR9KWAgfVxuICAgIH07XG59O1xuLyoqXG4gKiBAaGlkZGVuXG4gKi9cbmNsYXNzIEFuaW1hdGlvblNlcnZpY2Uge1xuICAgIGNvbnN0cnVjdG9yKGFuaW1hdGlvbkJ1aWxkZXIpIHtcbiAgICAgICAgdGhpcy5hbmltYXRpb25CdWlsZGVyID0gYW5pbWF0aW9uQnVpbGRlcjtcbiAgICAgICAgdGhpcy5zdGFydCA9IG5ldyBFdmVudEVtaXR0ZXIoKTtcbiAgICAgICAgdGhpcy5lbmQgPSBuZXcgRXZlbnRFbWl0dGVyKCk7XG4gICAgfVxuICAgIHBsYXkoZWxlbWVudCwgb3B0aW9ucywgZmxpcCkge1xuICAgICAgICBpZiAoIXRoaXMuZmxpcCB8fCB0aGlzLmZsaXAuaG9yaXpvbnRhbCAhPT0gZmxpcC5ob3Jpem9udGFsIHx8XG4gICAgICAgICAgICB0aGlzLmZsaXAudmVydGljYWwgIT09IGZsaXAudmVydGljYWwpIHtcbiAgICAgICAgICAgIHRoaXMuZmxpcCA9IGZsaXA7XG4gICAgICAgICAgICBjb25zdCB0eXBlID0gb3B0aW9ucy50eXBlIHx8IERFRkFVTFRfVFlQRTtcbiAgICAgICAgICAgIGNvbnN0IHN0YXRlc0ZuID0gYW5pbWF0aW9uVHlwZXNbdHlwZV07XG4gICAgICAgICAgICBpZiAoc3RhdGVzRm4pIHtcbiAgICAgICAgICAgICAgICBjb25zdCBkaXJlY3Rpb24gPSB0aGlzLmdldERpcmVjdGlvbihmbGlwLCBvcHRpb25zKTtcbiAgICAgICAgICAgICAgICBjb25zdCBzdGF0ZXMgPSBzdGF0ZXNGbihkaXJlY3Rpb24pO1xuICAgICAgICAgICAgICAgIHRoaXMucGxheVN0YXRlcyhlbGVtZW50LCBzdGF0ZXMsIG9wdGlvbnMpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoaXNEZXZNb2RlKCkpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYFVuc3VwcG9ydGVkIGFuaW1hdGlvbiB0eXBlOiBcIiR7dHlwZX1cIi4gVGhlIHN1cHBvcnRlZCB0eXBlcyBhcmUgc2xpZGUsIGV4cGFuZCwgZmFkZSBhbmQgem9vbS5gKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICBuZ09uRGVzdHJveSgpIHtcbiAgICAgICAgdGhpcy5zdG9wUGxheWVyKCk7XG4gICAgfVxuICAgIHBsYXlTdGF0ZXMoZWxlbWVudCwgc3RhdGVzLCBvcHRpb25zKSB7XG4gICAgICAgIHRoaXMuc3RvcFBsYXllcigpO1xuICAgICAgICBjb25zdCBkdXJhdGlvbiA9IG9wdGlvbnMuZHVyYXRpb24gfHwgREVGQVVMVF9EVVJBVElPTjtcbiAgICAgICAgY29uc3QgZmFjdG9yeSA9IHRoaXMuYW5pbWF0aW9uQnVpbGRlci5idWlsZChbXG4gICAgICAgICAgICBzdHlsZShzdGF0ZXMuc3RhcnQpLFxuICAgICAgICAgICAgYW5pbWF0ZShgJHtkdXJhdGlvbn1tcyBlYXNlLWluYCwgc3R5bGUoc3RhdGVzLmVuZCkpXG4gICAgICAgIF0pO1xuICAgICAgICBjb25zdCBwbGF5ZXIgPSB0aGlzLnBsYXllciA9IGZhY3RvcnkuY3JlYXRlKGVsZW1lbnQpO1xuICAgICAgICBwbGF5ZXIub25Eb25lKCgpID0+IHtcbiAgICAgICAgICAgIHRoaXMuZW5kLmVtaXQoKTtcbiAgICAgICAgICAgIHRoaXMuc3RvcFBsYXllcigpO1xuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5zdGFydC5lbWl0KCk7XG4gICAgICAgIHBsYXllci5wbGF5KCk7XG4gICAgfVxuICAgIGdldERpcmVjdGlvbihmbGlwLCBvcHRpb25zKSB7XG4gICAgICAgIGxldCBkaXJlY3Rpb24gPSBvcHRpb25zLmRpcmVjdGlvbiB8fCBET1dOO1xuICAgICAgICBpZiAoZmxpcC5ob3Jpem9udGFsKSB7XG4gICAgICAgICAgICBpZiAoZGlyZWN0aW9uID09PSBMRUZUKSB7XG4gICAgICAgICAgICAgICAgZGlyZWN0aW9uID0gUklHSFQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChkaXJlY3Rpb24gPT09IFJJR0hUKSB7XG4gICAgICAgICAgICAgICAgZGlyZWN0aW9uID0gTEVGVDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAoZmxpcC52ZXJ0aWNhbCkge1xuICAgICAgICAgICAgaWYgKGRpcmVjdGlvbiA9PT0gRE9XTikge1xuICAgICAgICAgICAgICAgIGRpcmVjdGlvbiA9IFVQO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoZGlyZWN0aW9uID09PSBVUCkge1xuICAgICAgICAgICAgICAgIGRpcmVjdGlvbiA9IERPV047XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGRpcmVjdGlvbjtcbiAgICB9XG4gICAgc3RvcFBsYXllcigpIHtcbiAgICAgICAgaWYgKHRoaXMucGxheWVyKSB7XG4gICAgICAgICAgICB0aGlzLnBsYXllci5kZXN0cm95KCk7XG4gICAgICAgICAgICB0aGlzLnBsYXllciA9IG51bGw7XG4gICAgICAgIH1cbiAgICB9XG59XG5BbmltYXRpb25TZXJ2aWNlLmRlY29yYXRvcnMgPSBbXG4gICAgeyB0eXBlOiBJbmplY3RhYmxlIH0sXG5dO1xuLyoqIEBub2NvbGxhcHNlICovXG5BbmltYXRpb25TZXJ2aWNlLmN0b3JQYXJhbWV0ZXJzID0gKCkgPT4gW1xuICAgIHsgdHlwZTogQW5pbWF0aW9uQnVpbGRlciB9XG5dO1xuXG5jb25zdCBERUZBVUxUX09GRlNFVCA9IHsgbGVmdDogLTEwMDAwLCB0b3A6IDAgfTtcbmNvbnN0IEFOSU1BVElPTl9DT05UQUlORVIgPSAnay1hbmltYXRpb24tY29udGFpbmVyJztcbmNvbnN0IEFOSU1BVElPTl9DT05UQUlORVJfRklYRUQgPSAnay1hbmltYXRpb24tY29udGFpbmVyLWZpeGVkJztcbi8qKlxuICogUmVwcmVzZW50cyB0aGUgW0tlbmRvIFVJIFBvcHVwIGNvbXBvbmVudCBmb3IgQW5ndWxhcl0oeyUgc2x1ZyBvdmVydmlld19wb3B1cCAlfSkuXG4gKlxuICogQGV4YW1wbGVcbiAqIGBgYHRzXG4gKiBfQENvbXBvbmVudCh7XG4gKiBzZWxlY3RvcjogJ215LWFwcCcsXG4gKiB0ZW1wbGF0ZTogYFxuICogIDxidXR0b24gI2FuY2hvciAoY2xpY2spPVwic2hvdz0hc2hvd1wiPlRvZ2dsZTwvYnV0dG9uPlxuICogIDxrZW5kby1wb3B1cCAqbmdJZj1cInNob3dcIiBbYW5jaG9yXT1cImFuY2hvclwiPlxuICogICAgICA8c3Ryb25nPlBvcHVwIGNvbnRlbnQhPC9zdHJvbmc+XG4gKiAgPC9rZW5kby1wb3B1cD5cbiAqIGBcbiAqIH0pXG4gKiBjbGFzcyBBcHBDb21wb25lbnQge1xuICogICBwdWJsaWMgc2hvdzogYm9vbGVhbiA9IGZhbHNlO1xuICogfVxuICogYGBgXG4gKi9cbmNsYXNzIFBvcHVwQ29tcG9uZW50IHtcbiAgICBjb25zdHJ1Y3Rvcihjb250YWluZXIsIF9hbGlnblNlcnZpY2UsIGRvbVNlcnZpY2UsIF9wb3NpdGlvblNlcnZpY2UsIF9yZXNpemVTZXJ2aWNlLCBfc2Nyb2xsYWJsZVNlcnZpY2UsIGFuaW1hdGlvblNlcnZpY2UsIF9yZW5kZXJlciwgX3pvbmUpIHtcbiAgICAgICAgdGhpcy5jb250YWluZXIgPSBjb250YWluZXI7XG4gICAgICAgIHRoaXMuX2FsaWduU2VydmljZSA9IF9hbGlnblNlcnZpY2U7XG4gICAgICAgIHRoaXMuZG9tU2VydmljZSA9IGRvbVNlcnZpY2U7XG4gICAgICAgIHRoaXMuX3Bvc2l0aW9uU2VydmljZSA9IF9wb3NpdGlvblNlcnZpY2U7XG4gICAgICAgIHRoaXMuX3Jlc2l6ZVNlcnZpY2UgPSBfcmVzaXplU2VydmljZTtcbiAgICAgICAgdGhpcy5fc2Nyb2xsYWJsZVNlcnZpY2UgPSBfc2Nyb2xsYWJsZVNlcnZpY2U7XG4gICAgICAgIHRoaXMuYW5pbWF0aW9uU2VydmljZSA9IGFuaW1hdGlvblNlcnZpY2U7XG4gICAgICAgIHRoaXMuX3JlbmRlcmVyID0gX3JlbmRlcmVyO1xuICAgICAgICB0aGlzLl96b25lID0gX3pvbmU7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBDb250cm9scyB0aGUgUG9wdXAgYW5pbWF0aW9uLiBCeSBkZWZhdWx0LCB0aGUgb3BlbmluZyBhbmQgY2xvc2luZyBhbmltYXRpb25zXG4gICAgICAgICAqIGFyZSBlbmFibGVkIChbc2VlIGV4YW1wbGVdKHslIHNsdWcgYW5pbWF0aW9uc19wb3B1cCAlfSkpLlxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5hbmltYXRlID0gdHJ1ZTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFNwZWNpZmllcyB0aGUgYW5jaG9yIHBpdm90IHBvaW50XG4gICAgICAgICAqIChbc2VlIGV4YW1wbGVdKHslIHNsdWcgYWxpZ25tZW50cG9zaXRpb25pbmdfcG9wdXAgJX0jdG9jLXBvc2l0aW9uaW5nKSkuXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmFuY2hvckFsaWduID0geyBob3Jpem9udGFsOiAnbGVmdCcsIHZlcnRpY2FsOiAnYm90dG9tJyB9O1xuICAgICAgICAvKipcbiAgICAgICAgICogQ29uZmlndXJlcyB0aGUgY29sbGlzaW9uIGJlaGF2aW9yIG9mIHRoZSBQb3B1cFxuICAgICAgICAgKiAoW3NlZSBleGFtcGxlXSh7JSBzbHVnIHZpZXdwb3J0Ym91bmRhcnlkZXRlY3Rpb25fcG9wdXAgJX0pKS5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuY29sbGlzaW9uID0geyBob3Jpem9udGFsOiAnZml0JywgdmVydGljYWw6ICdmbGlwJyB9O1xuICAgICAgICAvKipcbiAgICAgICAgICogU3BlY2lmaWVzIHRoZSBwaXZvdCBwb2ludCBvZiB0aGUgUG9wdXBcbiAgICAgICAgICogKFtzZWUgZXhhbXBsZV0oeyUgc2x1ZyBhbGlnbm1lbnRwb3NpdGlvbmluZ19wb3B1cCAlfSN0b2MtcG9zaXRpb25pbmcpKS5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMucG9wdXBBbGlnbiA9IHsgaG9yaXpvbnRhbDogJ2xlZnQnLCB2ZXJ0aWNhbDogJ3RvcCcgfTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIENvbnRyb2xzIHdoZXRoZXIgdGhlIGNvbXBvbmVudCB3aWxsIGNvcHkgdGhlIGBhbmNob3JgIGZvbnQgc3R5bGVzLlxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5jb3B5QW5jaG9yU3R5bGVzID0gZmFsc2U7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBTcGVjaWZpZXMgdGhlIHBvc2l0aW9uIG1vZGUgb2YgdGhlIGNvbXBvbmVudC4gQnkgZGVmYXVsdCwgdGhlIFBvcHVwIHVzZXMgZml4ZWQgcG9zaXRpb25pbmcuXG4gICAgICAgICAqIFRvIG1ha2UgdGhlIFBvcHVwIGFjcXVpcmUgYWJzb2x1dGUgcG9zaXRpb25pbmcsIHNldCB0aGlzIG9wdGlvbiB0byBgYWJzb2x1dGVgLlxuICAgICAgICAgKlxuICAgICAgICAgKiA+IElmIHlvdSBuZWVkIHRvIHN1cHBvcnQgbW9iaWxlIGJyb3dzZXJzIHdpdGggdGhlIHpvb20gb3B0aW9uLFxuICAgICAgICAgKiB1c2UgdGhlIGBhYnNvbHV0ZWAgcG9zaXRpb25pbmcgb2YgdGhlIFBvcHVwLlxuICAgICAgICAgKlxuICAgICAgICAgKiBAZXhhbXBsZVxuICAgICAgICAgKiBgYGBodG1sXG4gICAgICAgICAqIDxzdHlsZT5cbiAgICAgICAgICogIC5wYXJlbnQtY29udGVudCB7XG4gICAgICAgICAqICAgICBwb3NpdGlvbjogcmVsYXRpdmU7XG4gICAgICAgICAqICAgICB3aWR0aDogMjAwcHg7XG4gICAgICAgICAqICAgICBoZWlnaHQ6IDIwMHB4O1xuICAgICAgICAgKiAgICAgb3ZlcmZsb3c6IGF1dG87XG4gICAgICAgICAqICAgICBtYXJnaW46IDIwMHB4IGF1dG87XG4gICAgICAgICAqICAgICBib3JkZXI6IDFweCBzb2xpZCByZWQ7XG4gICAgICAgICAqICB9XG4gICAgICAgICAqICAuY29udGVudCB7XG4gICAgICAgICAqICAgICBwb3NpdGlvbjogcmVsYXRpdmU7XG4gICAgICAgICAqICAgICB3aWR0aDogMTAwcHg7XG4gICAgICAgICAqICAgICBoZWlnaHQ6IDEwMHB4O1xuICAgICAgICAgKiAgICAgb3ZlcmZsb3c6IGF1dG87XG4gICAgICAgICAqICAgICBtYXJnaW46IDMwMHB4O1xuICAgICAgICAgKiAgICAgYm9yZGVyOiAxcHggc29saWQgYmx1ZTtcbiAgICAgICAgICogIH1cbiAgICAgICAgICogIC5hbmNob3Ige1xuICAgICAgICAgKiAgICAgcG9zaXRpb246IGFic29sdXRlO1xuICAgICAgICAgKiAgICAgdG9wOiAyMDBweDtcbiAgICAgICAgICogICAgIGxlZnQ6IDIwMHB4O1xuICAgICAgICAgKiAgfVxuICAgICAgICAgKiA8L3N0eWxlPlxuICAgICAgICAgKiBgYGBcbiAgICAgICAgICogYGBgdHNcbiAgICAgICAgICogX0BDb21wb25lbnQoe1xuICAgICAgICAgKiBzZWxlY3RvcjogJ215LWFwcCcsXG4gICAgICAgICAqIHRlbXBsYXRlOiBgXG4gICAgICAgICAqICAgPGRpdiBjbGFzcz1cImV4YW1wbGUtY29uZmlnXCI+XG4gICAgICAgICAqICAgICAgUG9zaXRpb24gbW9kZTpcbiAgICAgICAgICogICAgICA8bGFiZWw+PGlucHV0IHR5cGU9XCJyYWRpb1wiIHZhbHVlPVwiZml4ZWRcIiBbKG5nTW9kZWwpXT1cIm1vZGVcIiAvPiBGaXhlZDwvbGFiZWw+XG4gICAgICAgICAqICAgICAgPGxhYmVsPjxpbnB1dCB0eXBlPVwicmFkaW9cIiB2YWx1ZT1cImFic29sdXRlXCIgWyhuZ01vZGVsKV09XCJtb2RlXCIgLz4gQWJzb2x1dGU8L2xhYmVsPlxuICAgICAgICAgKiAgIDwvZGl2PlxuICAgICAgICAgKiAgIDxkaXYgY2xhc3M9XCJleGFtcGxlLWNvbmZpZ1wiPlxuICAgICAgICAgKiAgICAgICBBcHBlbmQgdG9cbiAgICAgICAgICogICAgICAgPGxhYmVsPlxuICAgICAgICAgKiAgICAgICAgICAgPGlucHV0IHR5cGU9XCJyYWRpb1wiIG5hbWU9XCJwbGFjZVwiIFt2YWx1ZV09XCIxXCIgWyhuZ01vZGVsKV09XCJjaGVja2VkXCIgLz5cbiAgICAgICAgICogICAgICAgICAgIFJvb3QgY29tcG9uZW50XG4gICAgICAgICAqICAgICAgIDwvbGFiZWw+XG4gICAgICAgICAqICAgICAgIDxsYWJlbD5cbiAgICAgICAgICogICAgICAgICAgIDxpbnB1dCB0eXBlPVwicmFkaW9cIiBuYW1lPVwicGxhY2VcIiBbdmFsdWVdPVwiMlwiIFsobmdNb2RlbCldPVwiY2hlY2tlZFwiIC8+XG4gICAgICAgICAqICAgICAgICAgICA8c3BhbiBzdHlsZT1cImNvbG9yOiByZWRcIj5SZWQgQ29udGFpbmVyPC9zcGFuPlxuICAgICAgICAgKiAgICAgICA8L2xhYmVsPlxuICAgICAgICAgKiAgICAgICA8bGFiZWw+XG4gICAgICAgICAqICAgICAgICAgICA8aW5wdXQgdHlwZT1cInJhZGlvXCIgbmFtZT1cInBsYWNlXCIgW3ZhbHVlXT1cIjNcIiBbKG5nTW9kZWwpXT1cImNoZWNrZWRcIiAvPlxuICAgICAgICAgKiAgICAgICAgICAgPHNwYW4gc3R5bGU9XCJjb2xvcjogYmx1ZVwiPkJsdWUgQ29udGFpbmVyPC9zcGFuPlxuICAgICAgICAgKiAgICAgICA8L2xhYmVsPlxuICAgICAgICAgKiAgIDwvZGl2PlxuICAgICAgICAgKiAgIDxkaXYgY2xhc3M9XCJleGFtcGxlXCI+XG4gICAgICAgICAqICAgICA8ZGl2IGNsYXNzPVwicGFyZW50LWNvbnRlbnRcIiBbc2Nyb2xsTGVmdF09XCIyNTBcIiBbc2Nyb2xsVG9wXT1cIjIzMFwiPlxuICAgICAgICAgKiAgICAgICAgIDxkaXYgY2xhc3M9XCJjb250ZW50XCIgW3Njcm9sbExlZnRdPVwiMTcwXCIgW3Njcm9sbFRvcF09XCIxNjVcIj5cbiAgICAgICAgICogICAgICAgICAgIDxidXR0b24gI2FuY2hvciBjbGFzcz1cImFuY2hvclwiIChjbGljayk9XCJzaG93ID0gIXNob3dcIj5Ub2dnbGU8L2J1dHRvbj5cbiAgICAgICAgICogICAgICAgICAgIDxrZW5kby1wb3B1cCBbcG9zaXRpb25Nb2RlXT1cIm1vZGVcIiBbYW5jaG9yXT1cImFuY2hvclwiIChhbmNob3JWaWV3cG9ydExlYXZlKT1cInNob3c9ZmFsc2VcIiAqbmdJZj1cInNob3cgJiYgY2hlY2tlZCA9PT0gM1wiPlxuICAgICAgICAgKiAgICAgICAgICAgICA8dWw+XG4gICAgICAgICAqICAgICAgICAgICAgICAgICA8bGk+SXRlbTE8L2xpPlxuICAgICAgICAgKiAgICAgICAgICAgICAgICAgPGxpPkl0ZW0yPC9saT5cbiAgICAgICAgICogICAgICAgICAgICAgICAgIDxsaT5JdGVtMzwvbGk+XG4gICAgICAgICAqICAgICAgICAgICAgIDwvdWw+XG4gICAgICAgICAqICAgICAgICAgICA8L2tlbmRvLXBvcHVwPlxuICAgICAgICAgKiAgICAgICAgICAgPHNwYW4gc3R5bGU9XCJwb3NpdGlvbjogYWJzb2x1dGU7IHRvcDogNDAwcHg7IGxlZnQ6IDQwMHB4XCI+Qm90dG9tL1JpZ2h0PC9zcGFuPlxuICAgICAgICAgKiAgICAgICAgIDwvZGl2PlxuICAgICAgICAgKiAgICAgICAgIDxrZW5kby1wb3B1cCBbcG9zaXRpb25Nb2RlXT1cIm1vZGVcIiBbYW5jaG9yXT1cImFuY2hvclwiIChhbmNob3JWaWV3cG9ydExlYXZlKT1cInNob3c9ZmFsc2VcIiAqbmdJZj1cInNob3cgJiYgY2hlY2tlZCA9PT0gMlwiPlxuICAgICAgICAgKiAgICAgICAgICAgPHVsPlxuICAgICAgICAgKiAgICAgICAgICAgICAgIDxsaT5JdGVtMTwvbGk+XG4gICAgICAgICAqICAgICAgICAgICAgICAgPGxpPkl0ZW0yPC9saT5cbiAgICAgICAgICogICAgICAgICAgICAgICA8bGk+SXRlbTM8L2xpPlxuICAgICAgICAgKiAgICAgICAgICAgPC91bD5cbiAgICAgICAgICogICAgICAgICA8L2tlbmRvLXBvcHVwPlxuICAgICAgICAgKiAgICAgICAgIDxzcGFuIHN0eWxlPVwicG9zaXRpb246IGFic29sdXRlOyB0b3A6IDYwMHB4OyBsZWZ0OiA2MDBweFwiPkJvdHRvbS9SaWdodDwvc3Bhbj5cbiAgICAgICAgICogICAgIDwvZGl2PlxuICAgICAgICAgKiAgICAgPGtlbmRvLXBvcHVwIFtwb3NpdGlvbk1vZGVdPVwibW9kZVwiIFthbmNob3JdPVwiYW5jaG9yXCIgKGFuY2hvclZpZXdwb3J0TGVhdmUpPVwic2hvdz1mYWxzZVwiICpuZ0lmPVwic2hvdyAmJiBjaGVja2VkID09PSAxXCI+XG4gICAgICAgICAqICAgICAgIDx1bD5cbiAgICAgICAgICogICAgICAgICAgIDxsaT5JdGVtMTwvbGk+XG4gICAgICAgICAqICAgICAgICAgICA8bGk+SXRlbTI8L2xpPlxuICAgICAgICAgKiAgICAgICAgICAgPGxpPkl0ZW0zPC9saT5cbiAgICAgICAgICogICAgICAgPC91bD5cbiAgICAgICAgICogICAgIDwva2VuZG8tcG9wdXA+XG4gICAgICAgICAqICAgPC9kaXY+XG4gICAgICAgICAqIGBcbiAgICAgICAgICogfSlcbiAgICAgICAgICogY2xhc3MgQXBwQ29tcG9uZW50IHtcbiAgICAgICAgICogICBwdWJsaWMgY2hlY2tlZDogbnVtYmVyID0gMztcbiAgICAgICAgICogICBwdWJsaWMgbW9kZTogc3RyaW5nID0gJ2Fic29sdXRlJztcbiAgICAgICAgICogICBwdWJsaWMgc2hvdzogYm9vbGVhbiA9IHRydWU7XG4gICAgICAgICAqIH1cbiAgICAgICAgICogYGBgXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLnBvc2l0aW9uTW9kZSA9ICdmaXhlZCc7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBTcGVjaWZpZXMgdGhlIGFic29sdXRlIHBvc2l0aW9uIG9mIHRoZSBlbGVtZW50XG4gICAgICAgICAqIChbc2VlIGV4YW1wbGVdKHslIHNsdWcgYWxpZ25tZW50cG9zaXRpb25pbmdfcG9wdXAgJX0jdG9jLWFsaWduaW5nLXRvLWFic29sdXRlLXBvaW50cykpLlxuICAgICAgICAgKiBUaGUgUG9wdXAgb3BlbnMgbmV4dCB0byB0aGF0IHBvaW50LiBUaGUgUG9wdXAgcGl2b3QgcG9pbnQgaXMgZGVmaW5lZCBieSB0aGUgYHBvcHVwQWxpZ25gIGNvbmZpZ3VyYXRpb24gb3B0aW9uLlxuICAgICAgICAgKiBUaGUgYm91bmRhcnkgZGV0ZWN0aW9uIGlzIGFwcGxpZWQgYnkgdXNpbmcgdGhlIHdpbmRvdyB2aWV3cG9ydC5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMub2Zmc2V0ID0gREVGQVVMVF9PRkZTRVQ7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBGaXJlcyB3aGVuIHRoZSBhbmNob3IgaXMgc2Nyb2xsZWQgb3V0c2lkZSB0aGUgc2NyZWVuIGJvdW5kYXJpZXMuXG4gICAgICAgICAqIChbc2VlIGV4YW1wbGVdKHslIHNsdWcgY2xvc2luZ19wb3B1cCAlfSN0b2MtYWZ0ZXItbGVhdmluZy10aGUtdmlld3BvcnQpKS5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuYW5jaG9yVmlld3BvcnRMZWF2ZSA9IG5ldyBFdmVudEVtaXR0ZXIoKTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEZpcmVzIGFmdGVyIHRoZSBjb21wb25lbnQgaXMgY2xvc2VkLlxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5jbG9zZSA9IG5ldyBFdmVudEVtaXR0ZXIoKTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEZpcmVzIGFmdGVyIHRoZSBjb21wb25lbnQgaXMgb3BlbmVkIGFuZCB0aGUgb3BlbmluZyBhbmltYXRpb24gZW5kcy5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMub3BlbiA9IG5ldyBFdmVudEVtaXR0ZXIoKTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEZpcmVzIGFmdGVyIHRoZSBjb21wb25lbnQgaXMgb3BlbmVkIGFuZCB0aGUgUG9wdXAgaXMgcG9zaXRpb25lZC5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMucG9zaXRpb25DaGFuZ2UgPSBuZXcgRXZlbnRFbWl0dGVyKCk7XG4gICAgICAgIHRoaXMucmVzb2x2ZWRQcm9taXNlID0gUHJvbWlzZS5yZXNvbHZlKG51bGwpO1xuICAgICAgICB0aGlzLmluaXRpYWxDaGVjayA9IHRydWU7XG4gICAgICAgIHRoaXMuX3JlbmRlcmVyLmFkZENsYXNzKGNvbnRhaW5lci5uYXRpdmVFbGVtZW50LCBBTklNQVRJT05fQ09OVEFJTkVSKTtcbiAgICAgICAgdGhpcy51cGRhdGVGaXhlZENsYXNzKCk7XG4gICAgfVxuICAgIG5nT25Jbml0KCkge1xuICAgICAgICB0aGlzLnJlcG9zaXRpb24gPSB0aGlzLnJlcG9zaXRpb24uYmluZCh0aGlzKTtcbiAgICAgICAgdGhpcy5fcmVzaXplU2VydmljZS5zdWJzY3JpYmUodGhpcy5yZXBvc2l0aW9uKTtcbiAgICAgICAgdGhpcy5hbmltYXRpb25TdWJzY3JpcHRpb25zID0gdGhpcy5hbmltYXRpb25TZXJ2aWNlLnN0YXJ0LnN1YnNjcmliZSh0aGlzLm9uQW5pbWF0aW9uU3RhcnQuYmluZCh0aGlzKSk7XG4gICAgICAgIHRoaXMuYW5pbWF0aW9uU3Vic2NyaXB0aW9ucy5hZGQodGhpcy5hbmltYXRpb25TZXJ2aWNlLmVuZC5zdWJzY3JpYmUodGhpcy5vbkFuaW1hdGlvbkVuZC5iaW5kKHRoaXMpKSk7XG4gICAgICAgIHRoaXMuX3Njcm9sbGFibGVTZXJ2aWNlLmZvckVsZW1lbnQodGhpcy5hbmNob3IgfHwgdGhpcy5jb250YWluZXIpLnN1YnNjcmliZSh0aGlzLm9uU2Nyb2xsLmJpbmQodGhpcykpO1xuICAgICAgICB0aGlzLmN1cnJlbnRPZmZzZXQgPSBERUZBVUxUX09GRlNFVDtcbiAgICAgICAgdGhpcy5zZXRaSW5kZXgoKTtcbiAgICAgICAgdGhpcy5jb3B5Rm9udFN0eWxlcygpO1xuICAgICAgICB0aGlzLnVwZGF0ZUZpeGVkQ2xhc3MoKTtcbiAgICB9XG4gICAgbmdPbkNoYW5nZXMoY2hhbmdlcykge1xuICAgICAgICBpZiAoY2hhbmdlcy5jb3B5QW5jaG9yU3R5bGVzKSB7XG4gICAgICAgICAgICB0aGlzLmNvcHlGb250U3R5bGVzKCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGNoYW5nZXMucG9zaXRpb25Nb2RlKSB7XG4gICAgICAgICAgICB0aGlzLnVwZGF0ZUZpeGVkQ2xhc3MoKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBuZ0FmdGVyVmlld0luaXQoKSB7XG4gICAgICAgIHRoaXMucmVwb3NpdGlvbigpO1xuICAgICAgICBpZiAoIXRoaXMuYW5pbWF0ZSkge1xuICAgICAgICAgICAgdGhpcy5yZXNvbHZlZFByb21pc2UudGhlbigoKSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5vbkFuaW1hdGlvbkVuZCgpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgbmdBZnRlclZpZXdDaGVja2VkKCkge1xuICAgICAgICBpZiAodGhpcy5pbml0aWFsQ2hlY2spIHtcbiAgICAgICAgICAgIHRoaXMuaW5pdGlhbENoZWNrID0gZmFsc2U7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5fem9uZS5ydW5PdXRzaWRlQW5ndWxhcigoKSA9PiB7XG4gICAgICAgICAgICAvLyB3b3JrYXJvdW5kcyBodHRwczovL2dpdGh1Yi5jb20vYW5ndWxhci9hbmd1bGFyL2lzc3Vlcy8xOTA5NFxuICAgICAgICAgICAgLy8gdXNlcyBwcm9taXNlIGJlY2F1c2UgaXQgaXMgZXhlY3V0ZWQgc3luY2hyb25vdXNseSBhZnRlciB0aGUgY29udGVudCBpcyB1cGRhdGVkXG4gICAgICAgICAgICAvLyBkb2VzIG5vdCB1c2Ugb25TdGFibGUgaW4gY2FzZSB0aGUgY3VycmVudCB6b25lIGlzIG5vdCB0aGUgYW5ndWxhciBvbmUuXG4gICAgICAgICAgICB0aGlzLnVuc3Vic2NyaWJlUmVwb3NpdGlvbigpO1xuICAgICAgICAgICAgdGhpcy5yZXBvc2l0aW9uU3Vic2NyaXB0aW9uID0gZnJvbSh0aGlzLnJlc29sdmVkUHJvbWlzZSlcbiAgICAgICAgICAgICAgICAuc3Vic2NyaWJlKHRoaXMucmVwb3NpdGlvbik7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBuZ09uRGVzdHJveSgpIHtcbiAgICAgICAgdGhpcy5hbmNob3JWaWV3cG9ydExlYXZlLmNvbXBsZXRlKCk7XG4gICAgICAgIHRoaXMucG9zaXRpb25DaGFuZ2UuY29tcGxldGUoKTtcbiAgICAgICAgdGhpcy5jbG9zZS5lbWl0KCk7XG4gICAgICAgIHRoaXMuY2xvc2UuY29tcGxldGUoKTtcbiAgICAgICAgdGhpcy5fcmVzaXplU2VydmljZS51bnN1YnNjcmliZSgpO1xuICAgICAgICB0aGlzLl9zY3JvbGxhYmxlU2VydmljZS51bnN1YnNjcmliZSgpO1xuICAgICAgICB0aGlzLmFuaW1hdGlvblN1YnNjcmlwdGlvbnMudW5zdWJzY3JpYmUoKTtcbiAgICAgICAgdGhpcy51bnN1YnNjcmliZVJlcG9zaXRpb24oKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQGhpZGRlblxuICAgICAqL1xuICAgIG9uUmVzaXplKCkge1xuICAgICAgICB0aGlzLnJlcG9zaXRpb24oKTtcbiAgICB9XG4gICAgb25BbmltYXRpb25TdGFydCgpIHtcbiAgICAgICAgdGhpcy5fcmVuZGVyZXIucmVtb3ZlQ2xhc3ModGhpcy5jb250YWluZXIubmF0aXZlRWxlbWVudCwgJ2stYW5pbWF0aW9uLWNvbnRhaW5lci1zaG93bicpO1xuICAgIH1cbiAgICBvbkFuaW1hdGlvbkVuZCgpIHtcbiAgICAgICAgdGhpcy5fcmVuZGVyZXIuYWRkQ2xhc3ModGhpcy5jb250YWluZXIubmF0aXZlRWxlbWVudCwgJ2stYW5pbWF0aW9uLWNvbnRhaW5lci1zaG93bicpO1xuICAgICAgICB0aGlzLm9wZW4uZW1pdCgpO1xuICAgICAgICB0aGlzLm9wZW4uY29tcGxldGUoKTtcbiAgICB9XG4gICAgZ2V0IGN1cnJlbnRPZmZzZXQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9jdXJyZW50T2Zmc2V0O1xuICAgIH1cbiAgICBzZXQgY3VycmVudE9mZnNldChvZmZzZXQkJDEpIHtcbiAgICAgICAgdGhpcy5zZXRDb250YWluZXJTdHlsZSgnbGVmdCcsIGAke29mZnNldCQkMS5sZWZ0fXB4YCk7XG4gICAgICAgIHRoaXMuc2V0Q29udGFpbmVyU3R5bGUoJ3RvcCcsIGAke29mZnNldCQkMS50b3B9cHhgKTtcbiAgICAgICAgdGhpcy5fY3VycmVudE9mZnNldCA9IG9mZnNldCQkMTtcbiAgICB9XG4gICAgc2V0WkluZGV4KCkge1xuICAgICAgICBpZiAodGhpcy5hbmNob3IpIHtcbiAgICAgICAgICAgIHRoaXMuc2V0Q29udGFpbmVyU3R5bGUoJ3otaW5kZXgnLCBTdHJpbmcodGhpcy5kb21TZXJ2aWNlLnpJbmRleCh0aGlzLmFuY2hvciwgdGhpcy5jb250YWluZXIpKSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmVwb3NpdGlvbigpIHtcbiAgICAgICAgaWYgKCFpc0RvY3VtZW50QXZhaWxhYmxlKCkpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCB7IGZsaXAsIG9mZnNldDogb2Zmc2V0JCQxIH0gPSB0aGlzLnBvc2l0aW9uKCk7XG4gICAgICAgIGlmICghdGhpcy5jdXJyZW50T2Zmc2V0IHx8IGlzRGlmZmVyZW50T2Zmc2V0KHRoaXMuY3VycmVudE9mZnNldCwgb2Zmc2V0JCQxKSkge1xuICAgICAgICAgICAgdGhpcy5jdXJyZW50T2Zmc2V0ID0gb2Zmc2V0JCQxO1xuICAgICAgICAgICAgaWYgKGhhc09ic2VydmVycyh0aGlzLnBvc2l0aW9uQ2hhbmdlKSkge1xuICAgICAgICAgICAgICAgIHRoaXMuX3pvbmUucnVuKCgpID0+IHRoaXMucG9zaXRpb25DaGFuZ2UuZW1pdCh7IG9mZnNldDogb2Zmc2V0JCQxLCBmbGlwIH0pKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5hbmltYXRlKSB7XG4gICAgICAgICAgICB0aGlzLmFuaW1hdGlvblNlcnZpY2UucGxheSh0aGlzLmNvbnRlbnRDb250YWluZXIubmF0aXZlRWxlbWVudCwgdGhpcy5hbmltYXRlLCBmbGlwKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnJlc2l6ZVNlbnNvci5hY2NlcHRTaXplKCk7XG4gICAgfVxuICAgIHBvc2l0aW9uKCkge1xuICAgICAgICBjb25zdCBhbGlnbmVkT2Zmc2V0ID0gdGhpcy5fYWxpZ25TZXJ2aWNlLmFsaWduRWxlbWVudCh7XG4gICAgICAgICAgICBhbmNob3I6IHRoaXMuYW5jaG9yLFxuICAgICAgICAgICAgYW5jaG9yQWxpZ246IHRoaXMuYW5jaG9yQWxpZ24sXG4gICAgICAgICAgICBlbGVtZW50OiB0aGlzLmNvbnRhaW5lcixcbiAgICAgICAgICAgIGVsZW1lbnRBbGlnbjogdGhpcy5wb3B1cEFsaWduLFxuICAgICAgICAgICAgbWFyZ2luOiB0aGlzLm1hcmdpbixcbiAgICAgICAgICAgIG9mZnNldDogdGhpcy5vZmZzZXQsXG4gICAgICAgICAgICBwb3NpdGlvbk1vZGU6IHRoaXMucG9zaXRpb25Nb2RlXG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gdGhpcy5fcG9zaXRpb25TZXJ2aWNlLnBvc2l0aW9uRWxlbWVudCh7XG4gICAgICAgICAgICBhbmNob3I6IHRoaXMuYW5jaG9yLFxuICAgICAgICAgICAgYW5jaG9yQWxpZ246IHRoaXMuYW5jaG9yQWxpZ24sXG4gICAgICAgICAgICBjb2xsaXNpb25zOiB0aGlzLmNvbGxpc2lvbixcbiAgICAgICAgICAgIGN1cnJlbnRMb2NhdGlvbjogYWxpZ25lZE9mZnNldCxcbiAgICAgICAgICAgIGVsZW1lbnQ6IHRoaXMuY29udGFpbmVyLFxuICAgICAgICAgICAgZWxlbWVudEFsaWduOiB0aGlzLnBvcHVwQWxpZ24sXG4gICAgICAgICAgICBtYXJnaW46IHRoaXMubWFyZ2luXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBvblNjcm9sbChpc0luVmlld1BvcnQpIHtcbiAgICAgICAgY29uc3QgaGFzTGVhdmVPYnNlcnZlcnMgPSBoYXNPYnNlcnZlcnModGhpcy5hbmNob3JWaWV3cG9ydExlYXZlKTtcbiAgICAgICAgaWYgKGlzSW5WaWV3UG9ydCB8fCAhaGFzTGVhdmVPYnNlcnZlcnMpIHtcbiAgICAgICAgICAgIHRoaXMucmVwb3NpdGlvbigpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGhhc0xlYXZlT2JzZXJ2ZXJzKSB7XG4gICAgICAgICAgICB0aGlzLl96b25lLnJ1bigoKSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5hbmNob3JWaWV3cG9ydExlYXZlLmVtaXQoKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfVxuICAgIGNvcHlGb250U3R5bGVzKCkge1xuICAgICAgICBpZiAoIXRoaXMuYW5jaG9yIHx8ICF0aGlzLmNvcHlBbmNob3JTdHlsZXMpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmRvbVNlcnZpY2UuZ2V0Rm9udFN0eWxlcyh0aGlzLmFuY2hvcilcbiAgICAgICAgICAgIC5mb3JFYWNoKHMgPT4gdGhpcy5zZXRDb250YWluZXJTdHlsZShzLmtleSwgcy52YWx1ZSkpO1xuICAgIH1cbiAgICB1cGRhdGVGaXhlZENsYXNzKCkge1xuICAgICAgICBjb25zdCBhY3Rpb24gPSB0aGlzLnBvc2l0aW9uTW9kZSA9PT0gJ2ZpeGVkJyA/ICdhZGRDbGFzcycgOiAncmVtb3ZlQ2xhc3MnO1xuICAgICAgICB0aGlzLl9yZW5kZXJlclthY3Rpb25dKHRoaXMuY29udGFpbmVyLm5hdGl2ZUVsZW1lbnQsIEFOSU1BVElPTl9DT05UQUlORVJfRklYRUQpO1xuICAgIH1cbiAgICBzZXRDb250YWluZXJTdHlsZShuYW1lLCB2YWx1ZSkge1xuICAgICAgICB0aGlzLl9yZW5kZXJlci5zZXRTdHlsZSh0aGlzLmNvbnRhaW5lci5uYXRpdmVFbGVtZW50LCBuYW1lLCB2YWx1ZSk7XG4gICAgfVxuICAgIHVuc3Vic2NyaWJlUmVwb3NpdGlvbigpIHtcbiAgICAgICAgaWYgKHRoaXMucmVwb3NpdGlvblN1YnNjcmlwdGlvbikge1xuICAgICAgICAgICAgdGhpcy5yZXBvc2l0aW9uU3Vic2NyaXB0aW9uLnVuc3Vic2NyaWJlKCk7XG4gICAgICAgIH1cbiAgICB9XG59XG5Qb3B1cENvbXBvbmVudC5kZWNvcmF0b3JzID0gW1xuICAgIHsgdHlwZTogQ29tcG9uZW50LCBhcmdzOiBbe1xuICAgICAgICAgICAgICAgIGV4cG9ydEFzOiAna2VuZG8tcG9wdXAnLFxuICAgICAgICAgICAgICAgIHByb3ZpZGVyczogW0FsaWduU2VydmljZSwgQW5pbWF0aW9uU2VydmljZSwgRE9NU2VydmljZSwgUG9zaXRpb25TZXJ2aWNlLCBSZXNpemVTZXJ2aWNlLCBTY3JvbGxhYmxlU2VydmljZV0sXG4gICAgICAgICAgICAgICAgc2VsZWN0b3I6ICdrZW5kby1wb3B1cCcsXG4gICAgICAgICAgICAgICAgdGVtcGxhdGU6IGBcbiAgICAgICAgPGRpdiBjbGFzcz1cImstcG9wdXBcIiBbbmdDbGFzc109XCJwb3B1cENsYXNzXCIgI2NvbnRhaW5lcj5cbiAgICAgICAgICAgIDxuZy1jb250ZW50PjwvbmctY29udGVudD5cbiAgICAgICAgICAgIDxuZy10ZW1wbGF0ZSBbbmdUZW1wbGF0ZU91dGxldF09XCJjb250ZW50XCIgW25nSWZdPVwiY29udGVudFwiPjwvbmctdGVtcGxhdGU+XG4gICAgICAgICAgICA8a2VuZG8tcmVzaXplLXNlbnNvciBbcmF0ZUxpbWl0XT1cIjEwMFwiIChyZXNpemUpPVwib25SZXNpemUoKVwiPlxuICAgICAgICAgICAgPC9rZW5kby1yZXNpemUtc2Vuc29yPlxuICAgICAgICA8L2Rpdj5cbiAgICAgYFxuICAgICAgICAgICAgfSxdIH0sXG5dO1xuLyoqIEBub2NvbGxhcHNlICovXG5Qb3B1cENvbXBvbmVudC5jdG9yUGFyYW1ldGVycyA9ICgpID0+IFtcbiAgICB7IHR5cGU6IEVsZW1lbnRSZWYgfSxcbiAgICB7IHR5cGU6IEFsaWduU2VydmljZSB9LFxuICAgIHsgdHlwZTogRE9NU2VydmljZSB9LFxuICAgIHsgdHlwZTogUG9zaXRpb25TZXJ2aWNlIH0sXG4gICAgeyB0eXBlOiBSZXNpemVTZXJ2aWNlIH0sXG4gICAgeyB0eXBlOiBTY3JvbGxhYmxlU2VydmljZSB9LFxuICAgIHsgdHlwZTogQW5pbWF0aW9uU2VydmljZSB9LFxuICAgIHsgdHlwZTogUmVuZGVyZXIyIH0sXG4gICAgeyB0eXBlOiBOZ1pvbmUgfVxuXTtcblBvcHVwQ29tcG9uZW50LnByb3BEZWNvcmF0b3JzID0ge1xuICAgIGFuaW1hdGU6IFt7IHR5cGU6IElucHV0IH1dLFxuICAgIGFuY2hvcjogW3sgdHlwZTogSW5wdXQgfV0sXG4gICAgYW5jaG9yQWxpZ246IFt7IHR5cGU6IElucHV0IH1dLFxuICAgIGNvbGxpc2lvbjogW3sgdHlwZTogSW5wdXQgfV0sXG4gICAgcG9wdXBBbGlnbjogW3sgdHlwZTogSW5wdXQgfV0sXG4gICAgY29weUFuY2hvclN0eWxlczogW3sgdHlwZTogSW5wdXQgfV0sXG4gICAgcG9wdXBDbGFzczogW3sgdHlwZTogSW5wdXQgfV0sXG4gICAgcG9zaXRpb25Nb2RlOiBbeyB0eXBlOiBJbnB1dCB9XSxcbiAgICBvZmZzZXQ6IFt7IHR5cGU6IElucHV0IH1dLFxuICAgIG1hcmdpbjogW3sgdHlwZTogSW5wdXQgfV0sXG4gICAgYW5jaG9yVmlld3BvcnRMZWF2ZTogW3sgdHlwZTogT3V0cHV0IH1dLFxuICAgIGNsb3NlOiBbeyB0eXBlOiBPdXRwdXQgfV0sXG4gICAgb3BlbjogW3sgdHlwZTogT3V0cHV0IH1dLFxuICAgIHBvc2l0aW9uQ2hhbmdlOiBbeyB0eXBlOiBPdXRwdXQgfV0sXG4gICAgY29udGVudENvbnRhaW5lcjogW3sgdHlwZTogVmlld0NoaWxkLCBhcmdzOiBbJ2NvbnRhaW5lcicsXSB9XSxcbiAgICByZXNpemVTZW5zb3I6IFt7IHR5cGU6IFZpZXdDaGlsZCwgYXJnczogW1Jlc2l6ZVNlbnNvckNvbXBvbmVudCxdIH1dXG59O1xuXG5jb25zdCByZW1vdmVFbGVtZW50ID0gKGVsZW1lbnQpID0+IHtcbiAgICBpZiAoZWxlbWVudCAmJiBlbGVtZW50LnBhcmVudE5vZGUpIHtcbiAgICAgICAgZWxlbWVudC5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKGVsZW1lbnQpO1xuICAgIH1cbn07XG4vKipcbiAqIFVzZWQgdG8gaW5qZWN0IHRoZSBQb3B1cCBjb250YWluZXIuIElmIG5vdCBwcm92aWRlZCwgdGhlIGZpcnN0IHJvb3QgY29tcG9uZW50IG9mXG4gKiB0aGUgYXBwbGljYXRpb24gaXMgdXNlZC5cbiAqXG4gKiA+IFRoZSBgUE9QVVBfQ09OVEFJTkVSYCBjYW4gYmUgdXNlZCBvbmx5IHdpdGggdGhlIFtgUG9wdXBTZXJ2aWNlYF0oeyUgc2x1ZyBzZXJ2aWNlX3BvcHVwICV9KSBjbGFzcy5cbiAqXG4gKiBAZXhhbXBsZVxuICpcbiAqIGBgYHRzLW5vLXJ1blxuICogLy8gSW1wb3J0IHRoZSBQb3B1cCBtb2R1bGVcbiAqIGltcG9ydCB7IFBvcHVwTW9kdWxlLCBQT1BVUF9DT05UQUlORVIgfSBmcm9tICdAcHJvZ3Jlc3Mva2VuZG8tYW5ndWxhci1wb3B1cCc7XG4gKlxuICogLy8gVGhlIGJyb3dzZXIgcGxhdGZvcm0gd2l0aCBhIGNvbXBpbGVyXG4gKiBpbXBvcnQgeyBwbGF0Zm9ybUJyb3dzZXJEeW5hbWljIH0gZnJvbSAnQGFuZ3VsYXIvcGxhdGZvcm0tYnJvd3Nlci1keW5hbWljJztcbiAqXG4gKiBpbXBvcnQgeyBFbGVtZW50UmVmLCBOZ01vZHVsZSB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuICpcbiAqIC8vIEltcG9ydCB0aGUgYXBwIGNvbXBvbmVudFxuICogaW1wb3J0IHsgQXBwQ29tcG9uZW50IH0gZnJvbSAnLi9hcHAuY29tcG9uZW50JztcbiAqXG4gKiAvLyBEZWZpbmUgdGhlIGFwcCBtb2R1bGVcbiAqIF9ATmdNb2R1bGUoe1xuICogICAgIGRlY2xhcmF0aW9uczogW0FwcENvbXBvbmVudF0sIC8vIGRlY2xhcmUgYXBwIGNvbXBvbmVudFxuICogICAgIGltcG9ydHM6ICAgICAgW0Jyb3dzZXJNb2R1bGUsIFBvcHVwTW9kdWxlXSwgLy8gaW1wb3J0IFBvcHVwIG1vZHVsZVxuICogICAgIGJvb3RzdHJhcDogICAgW0FwcENvbXBvbmVudF0sXG4gKiAgICAgcHJvdmlkZXJzOiBbe1xuICogICAgICAgcHJvdmlkZTogUE9QVVBfQ09OVEFJTkVSLFxuICogICAgICAgdXNlRmFjdG9yeTogKCkgPT4ge1xuICogICAgICAgICAgLy9yZXR1cm4gdGhlIGNvbnRhaW5lciBFbGVtZW50UmVmLCB3aGVyZSB0aGUgcG9wdXAgd2lsbCBiZSBpbmplY3RlZFxuICogICAgICAgICAgcmV0dXJuIHsgbmF0aXZlRWxlbWVudDogZG9jdW1lbnQuYm9keSB9IGFzIEVsZW1lbnRSZWY7XG4gKiAgICAgICB9XG4gKiAgICAgfV1cbiAqIH0pXG4gKiBleHBvcnQgY2xhc3MgQXBwTW9kdWxlIHt9XG4gKlxuICogLy8gQ29tcGlsZSBhbmQgbGF1bmNoIHRoZSBtb2R1bGVcbiAqIHBsYXRmb3JtQnJvd3NlckR5bmFtaWMoKS5ib290c3RyYXBNb2R1bGUoQXBwTW9kdWxlKTtcbiAqIGBgYFxuICovXG5jb25zdCBQT1BVUF9DT05UQUlORVIgPSBuZXcgSW5qZWN0aW9uVG9rZW4oJ1BvcHVwIENvbnRhaW5lcicpO1xuLyoqXG4gKiBBIHNlcnZpY2UgZm9yIG9wZW5pbmcgUG9wdXAgY29tcG9uZW50cyBkeW5hbWljYWxseVxuICogKFtzZWUgZXhhbXBsZV0oeyUgc2x1ZyBzZXJ2aWNlX3BvcHVwICV9KSkuXG4gKlxuICogQGV4cG9ydFxuICogQGNsYXNzIFBvcHVwU2VydmljZVxuICovXG5jbGFzcyBQb3B1cFNlcnZpY2Uge1xuICAgIGNvbnN0cnVjdG9yKGFwcGxpY2F0aW9uUmVmLCBjb21wb25lbnRGYWN0b3J5UmVzb2x2ZXIsIGluamVjdG9yLCBjb250YWluZXIpIHtcbiAgICAgICAgdGhpcy5hcHBsaWNhdGlvblJlZiA9IGFwcGxpY2F0aW9uUmVmO1xuICAgICAgICB0aGlzLmNvbXBvbmVudEZhY3RvcnlSZXNvbHZlciA9IGNvbXBvbmVudEZhY3RvcnlSZXNvbHZlcjtcbiAgICAgICAgdGhpcy5pbmplY3RvciA9IGluamVjdG9yO1xuICAgICAgICB0aGlzLmNvbnRhaW5lciA9IGNvbnRhaW5lcjtcbiAgICB9XG4gICAgLyoqXG4gICAgICogR2V0cyB0aGUgcm9vdCB2aWV3IGNvbnRhaW5lciBpbnRvIHdoaWNoIHRoZSBjb21wb25lbnQgd2lsbCBiZSBpbmplY3RlZC5cbiAgICAgKlxuICAgICAqIEByZXR1cm5zIHtDb21wb25lbnRSZWY8YW55Pn1cbiAgICAgKi9cbiAgICBnZXQgcm9vdFZpZXdDb250YWluZXIoKSB7XG4gICAgICAgIC8vIGh0dHBzOi8vZ2l0aHViLmNvbS9hbmd1bGFyL2FuZ3VsYXIvYmxvYi80LjAueC9wYWNrYWdlcy9jb3JlL3NyYy9hcHBsaWNhdGlvbl9yZWYudHMjTDU3MVxuICAgICAgICBjb25zdCByb290Q29tcG9uZW50cyA9IHRoaXMuYXBwbGljYXRpb25SZWYuY29tcG9uZW50cyB8fCBbXTtcbiAgICAgICAgaWYgKHJvb3RDb21wb25lbnRzWzBdKSB7XG4gICAgICAgICAgICByZXR1cm4gcm9vdENvbXBvbmVudHNbMF07XG4gICAgICAgIH1cbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBcbiAgICAgICAgICAgIFZpZXcgQ29udGFpbmVyIG5vdCBmb3VuZCEgSW5qZWN0IHRoZSBQT1BVUF9DT05UQUlORVIgb3IgZGVmaW5lIGEgc3BlY2lmaWMgVmlld0NvbnRhaW5lclJlZiB2aWEgdGhlIGFwcGVuZFRvIG9wdGlvbi5cbiAgICAgICAgICAgIFNlZSBodHRwOi8vd3d3LnRlbGVyaWsuY29tL2tlbmRvLWFuZ3VsYXItdWkvY29tcG9uZW50cy9wb3B1cC9hcGkvUE9QVVBfQ09OVEFJTkVSLyBmb3IgbW9yZSBkZXRhaWxzLlxuICAgICAgICBgKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogU2V0cyBvciBnZXRzIHRoZSBIVE1MIGVsZW1lbnQgb2YgdGhlIHJvb3QgY29tcG9uZW50IGNvbnRhaW5lci5cbiAgICAgKlxuICAgICAqIEByZXR1cm5zIHtIVE1MRWxlbWVudH1cbiAgICAgKi9cbiAgICBnZXQgcm9vdFZpZXdDb250YWluZXJOb2RlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5jb250YWluZXIgPyB0aGlzLmNvbnRhaW5lci5uYXRpdmVFbGVtZW50IDogdGhpcy5nZXRDb21wb25lbnRSb290Tm9kZSh0aGlzLnJvb3RWaWV3Q29udGFpbmVyKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogT3BlbnMgYSBQb3B1cCBjb21wb25lbnQuIENyZWF0ZWQgUG9wdXBzIGFyZSBtb3VudGVkXG4gICAgICogaW4gdGhlIERPTSBkaXJlY3RseSBpbiB0aGUgcm9vdCBhcHBsaWNhdGlvbiBjb21wb25lbnQuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge1BvcHVwU2V0dGluZ3N9IG9wdGlvbnMgLSBUaGUgb3B0aW9ucyB3aGljaCBkZWZpbmUgdGhlIFBvcHVwLlxuICAgICAqIEByZXR1cm5zIHtDb21wb25lbnRSZWY8UG9wdXBDb21wb25lbnQ+fSAtIEEgcmVmZXJlbmNlIHRvIHRoZSBQb3B1cCBvYmplY3QuXG4gICAgICpcbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogYGBgdHMtbm8tcnVuXG4gICAgICogX0BDb21wb25lbnQoe1xuICAgICAqICAgc2VsZWN0b3I6ICdteS1hcHAnLFxuICAgICAqICAgdGVtcGxhdGU6IGBcbiAgICAgKiAgICAgPG5nLXRlbXBsYXRlICN0ZW1wbGF0ZT5cbiAgICAgKiAgICAgIFBvcHVwIGNvbnRlbnRcbiAgICAgKiAgICAgPC9uZy10ZW1wbGF0ZT5cbiAgICAgKiAgICAgPGJ1dHRvbiAjYW5jaG9yIGtlbmRvQnV0dG9uIChjbGljayk9XCJvcGVuKGFuY2hvciwgdGVtcGxhdGUpXCI+T3BlbjwvYnV0dG9uPlxuICAgICAqICAgYFxuICAgICAqIH0pXG4gICAgICogZXhwb3J0IGNsYXNzIEFwcENvbXBvbmVudCB7XG4gICAgICogICAgIHB1YmxpYyBwb3B1cFJlZjogUG9wdXBSZWY7XG4gICAgICpcbiAgICAgKiAgICAgY29uc3RydWN0b3IoIHByaXZhdGUgcG9wdXBTZXJ2aWNlOiBQb3B1cFNlcnZpY2UgKSB7fVxuICAgICAqXG4gICAgICogICAgIHB1YmxpYyBvcGVuKGFuY2hvcjogRWxlbWVudFJlZiwgdGVtcGxhdGU6IFRlbXBsYXRlUmVmPGFueT4pOiB2b2lkIHtcbiAgICAgKiAgICAgICAgIGlmICh0aGlzLnBvcHVwUmVmKSB7XG4gICAgICogICAgICAgICAgICAgIHRoaXMucG9wdXBSZWYuY2xvc2UoKTtcbiAgICAgKiAgICAgICAgICAgICAgdGhpcy5wb3B1cFJlZiA9IG51bGw7XG4gICAgICogICAgICAgICAgICAgIHJldHVybjtcbiAgICAgKiAgICAgICAgIH1cbiAgICAgKlxuICAgICAqICAgICAgICAgdGhpcy5wb3B1cFJlZiA9IHRoaXMucG9wdXBTZXJ2aWNlLm9wZW4oe1xuICAgICAqICAgICAgICAgICBhbmNob3I6IGFuY2hvcixcbiAgICAgKiAgICAgICAgICAgY29udGVudDogdGVtcGxhdGVcbiAgICAgKiAgICAgICAgIH0pO1xuICAgICAqICAgICB9XG4gICAgICogfVxuICAgICAqIGBgYFxuICAgICAqL1xuICAgIG9wZW4ob3B0aW9ucyA9IHt9KSB7XG4gICAgICAgIGNvbnN0IHsgY29tcG9uZW50LCBub2RlcyB9ID0gdGhpcy5jb250ZW50RnJvbShvcHRpb25zLmNvbnRlbnQpO1xuICAgICAgICBjb25zdCBwb3B1cENvbXBvbmVudFJlZiA9IHRoaXMuYXBwZW5kUG9wdXAobm9kZXMsIG9wdGlvbnMuYXBwZW5kVG8pO1xuICAgICAgICBjb25zdCBwb3B1cEluc3RhbmNlID0gcG9wdXBDb21wb25lbnRSZWYuaW5zdGFuY2U7XG4gICAgICAgIHRoaXMucHJvamVjdENvbXBvbmVudElucHV0cyhwb3B1cENvbXBvbmVudFJlZiwgb3B0aW9ucyk7XG4gICAgICAgIHBvcHVwQ29tcG9uZW50UmVmLmNoYW5nZURldGVjdG9yUmVmLmRldGVjdENoYW5nZXMoKTtcbiAgICAgICAgaWYgKGNvbXBvbmVudCkge1xuICAgICAgICAgICAgY29tcG9uZW50LmNoYW5nZURldGVjdG9yUmVmLmRldGVjdENoYW5nZXMoKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBwb3B1cEVsZW1lbnQgPSB0aGlzLmdldENvbXBvbmVudFJvb3ROb2RlKHBvcHVwQ29tcG9uZW50UmVmKTtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGNsb3NlOiAoKSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKGNvbXBvbmVudCkge1xuICAgICAgICAgICAgICAgICAgICBjb21wb25lbnQuZGVzdHJveSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBwb3B1cENvbXBvbmVudFJlZi5kZXN0cm95KCk7XG4gICAgICAgICAgICAgICAgLy8gQW5ndWxhciB3aWxsIG5vdCByZW1vdmUgdGhlIGVsZW1lbnQgdW5sZXNzIHRoZSBjaGFuZ2UgZGV0ZWN0aW9uIGlzIHRyaWdnZXJlZFxuICAgICAgICAgICAgICAgIHJlbW92ZUVsZW1lbnQocG9wdXBFbGVtZW50KTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBjb250ZW50OiBjb21wb25lbnQsXG4gICAgICAgICAgICBwb3B1cDogcG9wdXBDb21wb25lbnRSZWYsXG4gICAgICAgICAgICBwb3B1cEFuY2hvclZpZXdwb3J0TGVhdmU6IHBvcHVwSW5zdGFuY2UuYW5jaG9yVmlld3BvcnRMZWF2ZSxcbiAgICAgICAgICAgIHBvcHVwQ2xvc2U6IHBvcHVwSW5zdGFuY2UuY2xvc2UsXG4gICAgICAgICAgICBwb3B1cEVsZW1lbnQ6IHBvcHVwRWxlbWVudCxcbiAgICAgICAgICAgIHBvcHVwT3BlbjogcG9wdXBJbnN0YW5jZS5vcGVuLFxuICAgICAgICAgICAgcG9wdXBQb3NpdGlvbkNoYW5nZTogcG9wdXBJbnN0YW5jZS5wb3NpdGlvbkNoYW5nZVxuICAgICAgICB9O1xuICAgIH1cbiAgICBhcHBlbmRQb3B1cChub2RlcywgY29udGFpbmVyKSB7XG4gICAgICAgIGNvbnN0IHBvcHVwQ29tcG9uZW50UmVmID0gdGhpcy5jcmVhdGVDb21wb25lbnQoUG9wdXBDb21wb25lbnQsIG5vZGVzLCBjb250YWluZXIpO1xuICAgICAgICBpZiAoIWNvbnRhaW5lcikge1xuICAgICAgICAgICAgdGhpcy5yb290Vmlld0NvbnRhaW5lck5vZGUuYXBwZW5kQ2hpbGQodGhpcy5nZXRDb21wb25lbnRSb290Tm9kZShwb3B1cENvbXBvbmVudFJlZikpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBwb3B1cENvbXBvbmVudFJlZjtcbiAgICB9XG4gICAgLyoqXG4gICAgICogR2V0cyB0aGUgSFRNTCBlbGVtZW50IGZvciBhIGNvbXBvbmVudCByZWZlcmVuY2UuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge0NvbXBvbmVudFJlZjxhbnk+fSBjb21wb25lbnRSZWZcbiAgICAgKiBAcmV0dXJucyB7SFRNTEVsZW1lbnR9XG4gICAgICovXG4gICAgZ2V0Q29tcG9uZW50Um9vdE5vZGUoY29tcG9uZW50UmVmKSB7XG4gICAgICAgIHJldHVybiBjb21wb25lbnRSZWYubG9jYXRpb24ubmF0aXZlRWxlbWVudDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogR2V0cyB0aGUgYENvbXBvbmVudEZhY3RvcnlgIGluc3RhbmNlIGJ5IGl0cyB0eXBlLlxuICAgICAqXG4gICAgICogQHBhcmFtIHsqfSBjb21wb25lbnRDbGFzc1xuICAgICAqIEBwYXJhbSB7Kn0gbm9kZXNcbiAgICAgKiBAcmV0dXJucyB7Q29tcG9uZW50UmVmPGFueT59XG4gICAgICovXG4gICAgZ2V0Q29tcG9uZW50RmFjdG9yeShjb21wb25lbnRDbGFzcykge1xuICAgICAgICByZXR1cm4gdGhpcy5jb21wb25lbnRGYWN0b3J5UmVzb2x2ZXIucmVzb2x2ZUNvbXBvbmVudEZhY3RvcnkoY29tcG9uZW50Q2xhc3MpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGEgY29tcG9uZW50IHJlZmVyZW5jZSBmcm9tIGEgYENvbXBvbmVudGAgdHlwZSBjbGFzcy5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7Kn0gY29tcG9uZW50Q2xhc3NcbiAgICAgKiBAcGFyYW0geyp9IG5vZGVzXG4gICAgICogQHJldHVybnMge0NvbXBvbmVudFJlZjxhbnk+fVxuICAgICAqL1xuICAgIGNyZWF0ZUNvbXBvbmVudChjb21wb25lbnRDbGFzcywgbm9kZXMsIGNvbnRhaW5lcikge1xuICAgICAgICBjb25zdCBmYWN0b3J5ID0gdGhpcy5nZXRDb21wb25lbnRGYWN0b3J5KGNvbXBvbmVudENsYXNzKTtcbiAgICAgICAgaWYgKGNvbnRhaW5lcikge1xuICAgICAgICAgICAgcmV0dXJuIGNvbnRhaW5lci5jcmVhdGVDb21wb25lbnQoZmFjdG9yeSwgdW5kZWZpbmVkLCB0aGlzLmluamVjdG9yLCBub2Rlcyk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBjb25zdCBjb21wb25lbnQgPSBmYWN0b3J5LmNyZWF0ZSh0aGlzLmluamVjdG9yLCBub2Rlcyk7XG4gICAgICAgICAgICB0aGlzLmFwcGxpY2F0aW9uUmVmLmF0dGFjaFZpZXcoY29tcG9uZW50Lmhvc3RWaWV3KTtcbiAgICAgICAgICAgIHJldHVybiBjb21wb25lbnQ7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogUHJvamVjdHMgdGhlIGlucHV0cyBvbiB0aGUgY29tcG9uZW50LlxuICAgICAqXG4gICAgICogQHBhcmFtIHtDb21wb25lbnRSZWY8YW55Pn0gY29tcG9uZW50XG4gICAgICogQHBhcmFtIHsqfSBvcHRpb25zXG4gICAgICogQHJldHVybnMge0NvbXBvbmVudFJlZjxhbnk+fVxuICAgICAqL1xuICAgIHByb2plY3RDb21wb25lbnRJbnB1dHMoY29tcG9uZW50LCBvcHRpb25zKSB7XG4gICAgICAgIE9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzKG9wdGlvbnMpXG4gICAgICAgICAgICAuZmlsdGVyKHByb3AgPT4gcHJvcCAhPT0gJ2NvbnRlbnQnIHx8IG9wdGlvbnMuY29udGVudCBpbnN0YW5jZW9mIFRlbXBsYXRlUmVmKVxuICAgICAgICAgICAgLm1hcCgocHJvcCkgPT4ge1xuICAgICAgICAgICAgY29tcG9uZW50Lmluc3RhbmNlW3Byb3BdID0gb3B0aW9uc1twcm9wXTtcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiBjb21wb25lbnQ7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEdldHMgdGhlIGNvbXBvbmVudCBhbmQgdGhlIG5vZGVzIHRvIGFwcGVuZCBmcm9tIHRoZSBgY29udGVudGAgb3B0aW9uLlxuICAgICAqXG4gICAgICogQHBhcmFtIHsqfSBjb250ZW50XG4gICAgICogQHJldHVybnMge2FueX1cbiAgICAgKi9cbiAgICBjb250ZW50RnJvbShjb250ZW50KSB7XG4gICAgICAgIGlmICghY29udGVudCB8fCBjb250ZW50IGluc3RhbmNlb2YgVGVtcGxhdGVSZWYpIHtcbiAgICAgICAgICAgIHJldHVybiB7IGNvbXBvbmVudDogbnVsbCwgbm9kZXM6IFtbXV0gfTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBjb21wb25lbnQgPSB0aGlzLmNyZWF0ZUNvbXBvbmVudChjb250ZW50KTtcbiAgICAgICAgY29uc3Qgbm9kZXMgPSBjb21wb25lbnQgPyBbY29tcG9uZW50LmxvY2F0aW9uLm5hdGl2ZUVsZW1lbnRdIDogW107XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBjb21wb25lbnQ6IGNvbXBvbmVudCxcbiAgICAgICAgICAgIG5vZGVzOiBbXG4gICAgICAgICAgICAgICAgbm9kZXMgLy8gPG5nLWNvbnRlbnQ+XG4gICAgICAgICAgICBdXG4gICAgICAgIH07XG4gICAgfVxufVxuUG9wdXBTZXJ2aWNlLmRlY29yYXRvcnMgPSBbXG4gICAgeyB0eXBlOiBJbmplY3RhYmxlIH0sXG5dO1xuLyoqIEBub2NvbGxhcHNlICovXG5Qb3B1cFNlcnZpY2UuY3RvclBhcmFtZXRlcnMgPSAoKSA9PiBbXG4gICAgeyB0eXBlOiBBcHBsaWNhdGlvblJlZiB9LFxuICAgIHsgdHlwZTogQ29tcG9uZW50RmFjdG9yeVJlc29sdmVyIH0sXG4gICAgeyB0eXBlOiBJbmplY3RvciB9LFxuICAgIHsgdHlwZTogRWxlbWVudFJlZiwgZGVjb3JhdG9yczogW3sgdHlwZTogSW5qZWN0LCBhcmdzOiBbUE9QVVBfQ09OVEFJTkVSLF0gfSwgeyB0eXBlOiBPcHRpb25hbCB9XSB9XG5dO1xuXG5jb25zdCBQT1BVUF9ESVJFQ1RJVkVTID0gW1BvcHVwQ29tcG9uZW50XTtcbi8qKlxuICogUmVwcmVzZW50cyB0aGUgW05nTW9kdWxlXSh7eyBzaXRlLmRhdGEudXJscy5hbmd1bGFyWyduZ21vZHVsZWFwaSddIH19KVxuICogZGVmaW5pdGlvbiBmb3IgdGhlIFBvcHVwIGNvbXBvbmVudC5cbiAqXG4gKiBAZXhhbXBsZVxuICpcbiAqIGBgYHRzLW5vLXJ1blxuICogLy8gSW1wb3J0IHRoZSBQb3B1cCBtb2R1bGVcbiAqIGltcG9ydCB7IFBvcHVwTW9kdWxlIH0gZnJvbSAnQHByb2dyZXNzL2tlbmRvLWFuZ3VsYXItcG9wdXAnO1xuICpcbiAqIC8vIFRoZSBicm93c2VyIHBsYXRmb3JtIHdpdGggYSBjb21waWxlclxuICogaW1wb3J0IHsgcGxhdGZvcm1Ccm93c2VyRHluYW1pYyB9IGZyb20gJ0Bhbmd1bGFyL3BsYXRmb3JtLWJyb3dzZXItZHluYW1pYyc7XG4gKlxuICogaW1wb3J0IHsgTmdNb2R1bGUgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcbiAqXG4gKiAvLyBJbXBvcnQgdGhlIGFwcCBjb21wb25lbnRcbiAqIGltcG9ydCB7IEFwcENvbXBvbmVudCB9IGZyb20gJy4vYXBwLmNvbXBvbmVudCc7XG4gKlxuICogLy8gRGVmaW5lIHRoZSBhcHAgbW9kdWxlXG4gKiBfQE5nTW9kdWxlKHtcbiAqICAgICBkZWNsYXJhdGlvbnM6IFtBcHBDb21wb25lbnRdLCAvLyBkZWNsYXJlIGFwcCBjb21wb25lbnRcbiAqICAgICBpbXBvcnRzOiAgICAgIFtCcm93c2VyTW9kdWxlLCBQb3B1cE1vZHVsZV0sIC8vIGltcG9ydCBQb3B1cCBtb2R1bGVcbiAqICAgICBib290c3RyYXA6ICAgIFtBcHBDb21wb25lbnRdXG4gKiB9KVxuICogZXhwb3J0IGNsYXNzIEFwcE1vZHVsZSB7fVxuICpcbiAqIC8vIENvbXBpbGUgYW5kIGxhdW5jaCB0aGUgbW9kdWxlXG4gKiBwbGF0Zm9ybUJyb3dzZXJEeW5hbWljKCkuYm9vdHN0cmFwTW9kdWxlKEFwcE1vZHVsZSk7XG4gKlxuICogYGBgXG4gKi9cbmNsYXNzIFBvcHVwTW9kdWxlIHtcbn1cblBvcHVwTW9kdWxlLmRlY29yYXRvcnMgPSBbXG4gICAgeyB0eXBlOiBOZ01vZHVsZSwgYXJnczogW3tcbiAgICAgICAgICAgICAgICBkZWNsYXJhdGlvbnM6IFtQT1BVUF9ESVJFQ1RJVkVTXSxcbiAgICAgICAgICAgICAgICBlbnRyeUNvbXBvbmVudHM6IFtQT1BVUF9ESVJFQ1RJVkVTXSxcbiAgICAgICAgICAgICAgICBleHBvcnRzOiBbUE9QVVBfRElSRUNUSVZFU10sXG4gICAgICAgICAgICAgICAgaW1wb3J0czogW0NvbW1vbk1vZHVsZSwgUmVzaXplU2Vuc29yTW9kdWxlXSxcbiAgICAgICAgICAgICAgICBwcm92aWRlcnM6IFtQb3B1cFNlcnZpY2VdXG4gICAgICAgICAgICB9LF0gfSxcbl07XG5cbi8qKlxuICogR2VuZXJhdGVkIGJ1bmRsZSBpbmRleC4gRG8gbm90IGVkaXQuXG4gKi9cblxuZXhwb3J0IHsgQWxpZ25TZXJ2aWNlLCBBbmltYXRpb25TZXJ2aWNlLCBET01TZXJ2aWNlLCBQb3NpdGlvblNlcnZpY2UsIFJlc2l6ZVNlcnZpY2UsIFNjcm9sbGFibGVTZXJ2aWNlLCBQb3B1cFNlcnZpY2UsIFBPUFVQX0NPTlRBSU5FUiwgUG9wdXBDb21wb25lbnQsIFBvcHVwTW9kdWxlLCBTQ0FMRSB9O1xuIl19

/***/ }),

/***/ "../../node_modules/@progress/kendo-popup-common/dist/es2015/add-scroll.js":
/*!**************************************************************************************************************!*\
  !*** /home/abdel/www/project/formly/lib/node_modules/@progress/kendo-popup-common/dist/es2015/add-scroll.js ***!
  \**************************************************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return addScroll; });
function addScroll(rect, scroll) {
    return {
        top: rect.top + scroll.y,
        left: rect.left + scroll.x,
        height: rect.height,
        width: rect.width
    };
}


/***/ }),

/***/ "../../node_modules/@progress/kendo-popup-common/dist/es2015/align-point.js":
/*!***************************************************************************************************************!*\
  !*** /home/abdel/www/project/formly/lib/node_modules/@progress/kendo-popup-common/dist/es2015/align-point.js ***!
  \***************************************************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony default export */ __webpack_exports__["default"] = ({
    "bottom": "bottom",
    "center": "center",
    "middle": "middle",
    "left": "left",
    "right": "right",
    "top": "top"
});


/***/ }),

/***/ "../../node_modules/@progress/kendo-popup-common/dist/es2015/align.js":
/*!*********************************************************************************************************!*\
  !*** /home/abdel/www/project/formly/lib/node_modules/@progress/kendo-popup-common/dist/es2015/align.js ***!
  \*********************************************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _align_point__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./align-point */ "../../node_modules/@progress/kendo-popup-common/dist/es2015/align-point.js");


const align = (options) => {
    const { anchorRect, anchorAlign, elementRect, elementAlign, margin = {} } = options;
    const anchorHorizontal = anchorAlign.horizontal;
    const anchorVertical = anchorAlign.vertical;
    const elementHorizontal = elementAlign.horizontal;
    const elementVertical = elementAlign.vertical;

    let horizontalMargin = margin.horizontal || 0;
    let verticalMargin = margin.vertical || 0;

    let top = anchorRect.top;
    let left = anchorRect.left;

    if (anchorVertical === _align_point__WEBPACK_IMPORTED_MODULE_0__["default"].bottom) {
        top += anchorRect.height;
    }

    if (anchorVertical === _align_point__WEBPACK_IMPORTED_MODULE_0__["default"].center || anchorVertical === _align_point__WEBPACK_IMPORTED_MODULE_0__["default"].middle) {
        top += Math.round(anchorRect.height / 2);
    }

    if (elementVertical === _align_point__WEBPACK_IMPORTED_MODULE_0__["default"].bottom) {
        top -= elementRect.height;
        verticalMargin *= -1;
    }

    if (elementVertical === _align_point__WEBPACK_IMPORTED_MODULE_0__["default"].center || elementVertical === _align_point__WEBPACK_IMPORTED_MODULE_0__["default"].middle) {
        top -= Math.round(elementRect.height / 2);
        verticalMargin *= -1;
    }

    if (anchorHorizontal === _align_point__WEBPACK_IMPORTED_MODULE_0__["default"].right) {
        left += anchorRect.width;
    }

    if (anchorHorizontal === _align_point__WEBPACK_IMPORTED_MODULE_0__["default"].center || anchorHorizontal === _align_point__WEBPACK_IMPORTED_MODULE_0__["default"].middle) {
        left += Math.round(anchorRect.width / 2);
    }

    if (elementHorizontal === _align_point__WEBPACK_IMPORTED_MODULE_0__["default"].right) {
        left -= elementRect.width;
        horizontalMargin *= -1;
    }

    if (elementHorizontal === _align_point__WEBPACK_IMPORTED_MODULE_0__["default"].center || elementHorizontal === _align_point__WEBPACK_IMPORTED_MODULE_0__["default"].middle) {
        left -= Math.round(elementRect.width / 2);
        horizontalMargin *= -1;
    }

    return {
        top: top + verticalMargin,
        left: left + horizontalMargin
    };
};

/* harmony default export */ __webpack_exports__["default"] = (align);


/***/ }),

/***/ "../../node_modules/@progress/kendo-popup-common/dist/es2015/apply-location-offset.js":
/*!*************************************************************************************************************************!*\
  !*** /home/abdel/www/project/formly/lib/node_modules/@progress/kendo-popup-common/dist/es2015/apply-location-offset.js ***!
  \*************************************************************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return applyLocationOffset; });
function applyLocationOffset(rect, location, isOffsetBody) {
    let { top, left } = rect;

    if (isOffsetBody) {
        left = 0;
        top = 0;
    }

    return {
        top: top + location.top,
        left: left + location.left,
        height: rect.height,
        width: rect.width
    };
}


/***/ }),

/***/ "../../node_modules/@progress/kendo-popup-common/dist/es2015/bounding-offset.js":
/*!*******************************************************************************************************************!*\
  !*** /home/abdel/www/project/formly/lib/node_modules/@progress/kendo-popup-common/dist/es2015/bounding-offset.js ***!
  \*******************************************************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _window_viewport__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./window-viewport */ "../../node_modules/@progress/kendo-popup-common/dist/es2015/window-viewport.js");


const boundingOffset = (element) => {
    if (!element.getBoundingClientRect) {
        const viewport = Object(_window_viewport__WEBPACK_IMPORTED_MODULE_0__["default"])(element);
        return {
            bottom: viewport.height,
            left: 0,
            right: viewport.width,
            top: 0
        };
    }

    const { bottom, left, right, top } = element.getBoundingClientRect();

    return {
        bottom,
        left,
        right,
        top
    };
};

/* harmony default export */ __webpack_exports__["default"] = (boundingOffset);


/***/ }),

/***/ "../../node_modules/@progress/kendo-popup-common/dist/es2015/collision.js":
/*!*************************************************************************************************************!*\
  !*** /home/abdel/www/project/formly/lib/node_modules/@progress/kendo-popup-common/dist/es2015/collision.js ***!
  \*************************************************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony default export */ __webpack_exports__["default"] = ({
    "fit": "fit",
    "flip": "flip"
});


/***/ }),

/***/ "../../node_modules/@progress/kendo-popup-common/dist/es2015/document.js":
/*!************************************************************************************************************!*\
  !*** /home/abdel/www/project/formly/lib/node_modules/@progress/kendo-popup-common/dist/es2015/document.js ***!
  \************************************************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _owner_document__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./owner-document */ "../../node_modules/@progress/kendo-popup-common/dist/es2015/owner-document.js");


const getDocument = (element) => Object(_owner_document__WEBPACK_IMPORTED_MODULE_0__["default"])(element).documentElement;

/* harmony default export */ __webpack_exports__["default"] = (getDocument);


/***/ }),

/***/ "../../node_modules/@progress/kendo-popup-common/dist/es2015/element-scroll-position.js":
/*!***************************************************************************************************************************!*\
  !*** /home/abdel/www/project/formly/lib/node_modules/@progress/kendo-popup-common/dist/es2015/element-scroll-position.js ***!
  \***************************************************************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _scroll_position__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./scroll-position */ "../../node_modules/@progress/kendo-popup-common/dist/es2015/scroll-position.js");


/* harmony default export */ __webpack_exports__["default"] = ((element) => {
    if (element === (element.ownerDocument || {}).body) {
        return Object(_scroll_position__WEBPACK_IMPORTED_MODULE_0__["default"])(element);
    }

    return {
        x: element.scrollLeft,
        y: element.scrollTop
    };
});


/***/ }),

/***/ "../../node_modules/@progress/kendo-popup-common/dist/es2015/is-body-offset.js":
/*!******************************************************************************************************************!*\
  !*** /home/abdel/www/project/formly/lib/node_modules/@progress/kendo-popup-common/dist/es2015/is-body-offset.js ***!
  \******************************************************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _offset_parent__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./offset-parent */ "../../node_modules/@progress/kendo-popup-common/dist/es2015/offset-parent.js");


const isBodyOffset = (element) => (Object(_offset_parent__WEBPACK_IMPORTED_MODULE_0__["default"])(element) === element.ownerDocument.body);

/* harmony default export */ __webpack_exports__["default"] = (isBodyOffset);


/***/ }),

/***/ "../../node_modules/@progress/kendo-popup-common/dist/es2015/main.js":
/*!********************************************************************************************************!*\
  !*** /home/abdel/www/project/formly/lib/node_modules/@progress/kendo-popup-common/dist/es2015/main.js ***!
  \********************************************************************************************************/
/*! exports provided: align, addScroll, applyLocationOffset, boundingOffset, isBodyOffset, offsetParent, offset, parents, parentScrollPosition, position, positionWithScroll, removeScroll, restrictToView, scrollPosition, siblingContainer, siblings, getDocumentElement, getWindow, getWindowViewPort, AlignPoint, Collision */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _align__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./align */ "../../node_modules/@progress/kendo-popup-common/dist/es2015/align.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "align", function() { return _align__WEBPACK_IMPORTED_MODULE_0__["default"]; });

/* harmony import */ var _add_scroll__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./add-scroll */ "../../node_modules/@progress/kendo-popup-common/dist/es2015/add-scroll.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "addScroll", function() { return _add_scroll__WEBPACK_IMPORTED_MODULE_1__["default"]; });

/* harmony import */ var _apply_location_offset__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./apply-location-offset */ "../../node_modules/@progress/kendo-popup-common/dist/es2015/apply-location-offset.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "applyLocationOffset", function() { return _apply_location_offset__WEBPACK_IMPORTED_MODULE_2__["default"]; });

/* harmony import */ var _bounding_offset__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./bounding-offset */ "../../node_modules/@progress/kendo-popup-common/dist/es2015/bounding-offset.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "boundingOffset", function() { return _bounding_offset__WEBPACK_IMPORTED_MODULE_3__["default"]; });

/* harmony import */ var _is_body_offset__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./is-body-offset */ "../../node_modules/@progress/kendo-popup-common/dist/es2015/is-body-offset.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "isBodyOffset", function() { return _is_body_offset__WEBPACK_IMPORTED_MODULE_4__["default"]; });

/* harmony import */ var _offset_parent__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./offset-parent */ "../../node_modules/@progress/kendo-popup-common/dist/es2015/offset-parent.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "offsetParent", function() { return _offset_parent__WEBPACK_IMPORTED_MODULE_5__["default"]; });

/* harmony import */ var _offset__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./offset */ "../../node_modules/@progress/kendo-popup-common/dist/es2015/offset.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "offset", function() { return _offset__WEBPACK_IMPORTED_MODULE_6__["default"]; });

/* harmony import */ var _parents__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./parents */ "../../node_modules/@progress/kendo-popup-common/dist/es2015/parents.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "parents", function() { return _parents__WEBPACK_IMPORTED_MODULE_7__["default"]; });

/* harmony import */ var _parent_scroll_position__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./parent-scroll-position */ "../../node_modules/@progress/kendo-popup-common/dist/es2015/parent-scroll-position.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "parentScrollPosition", function() { return _parent_scroll_position__WEBPACK_IMPORTED_MODULE_8__["default"]; });

/* harmony import */ var _position__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./position */ "../../node_modules/@progress/kendo-popup-common/dist/es2015/position.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "position", function() { return _position__WEBPACK_IMPORTED_MODULE_9__["default"]; });

/* harmony import */ var _position_with_scroll__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./position-with-scroll */ "../../node_modules/@progress/kendo-popup-common/dist/es2015/position-with-scroll.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "positionWithScroll", function() { return _position_with_scroll__WEBPACK_IMPORTED_MODULE_10__["default"]; });

/* harmony import */ var _remove_scroll__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ./remove-scroll */ "../../node_modules/@progress/kendo-popup-common/dist/es2015/remove-scroll.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "removeScroll", function() { return _remove_scroll__WEBPACK_IMPORTED_MODULE_11__["default"]; });

/* harmony import */ var _restrict_to_view__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ./restrict-to-view */ "../../node_modules/@progress/kendo-popup-common/dist/es2015/restrict-to-view.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "restrictToView", function() { return _restrict_to_view__WEBPACK_IMPORTED_MODULE_12__["default"]; });

/* harmony import */ var _scroll_position__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ./scroll-position */ "../../node_modules/@progress/kendo-popup-common/dist/es2015/scroll-position.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "scrollPosition", function() { return _scroll_position__WEBPACK_IMPORTED_MODULE_13__["default"]; });

/* harmony import */ var _sibling_container__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ./sibling-container */ "../../node_modules/@progress/kendo-popup-common/dist/es2015/sibling-container.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "siblingContainer", function() { return _sibling_container__WEBPACK_IMPORTED_MODULE_14__["default"]; });

/* harmony import */ var _siblings__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ./siblings */ "../../node_modules/@progress/kendo-popup-common/dist/es2015/siblings.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "siblings", function() { return _siblings__WEBPACK_IMPORTED_MODULE_15__["default"]; });

/* harmony import */ var _document__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ./document */ "../../node_modules/@progress/kendo-popup-common/dist/es2015/document.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "getDocumentElement", function() { return _document__WEBPACK_IMPORTED_MODULE_16__["default"]; });

/* harmony import */ var _window__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ./window */ "../../node_modules/@progress/kendo-popup-common/dist/es2015/window.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "getWindow", function() { return _window__WEBPACK_IMPORTED_MODULE_17__["default"]; });

/* harmony import */ var _window_viewport__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! ./window-viewport */ "../../node_modules/@progress/kendo-popup-common/dist/es2015/window-viewport.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "getWindowViewPort", function() { return _window_viewport__WEBPACK_IMPORTED_MODULE_18__["default"]; });

/* harmony import */ var _align_point__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! ./align-point */ "../../node_modules/@progress/kendo-popup-common/dist/es2015/align-point.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "AlignPoint", function() { return _align_point__WEBPACK_IMPORTED_MODULE_19__["default"]; });

/* harmony import */ var _collision__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! ./collision */ "../../node_modules/@progress/kendo-popup-common/dist/es2015/collision.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "Collision", function() { return _collision__WEBPACK_IMPORTED_MODULE_20__["default"]; });


























/***/ }),

/***/ "../../node_modules/@progress/kendo-popup-common/dist/es2015/offset-parent-scroll-position.js":
/*!*********************************************************************************************************************************!*\
  !*** /home/abdel/www/project/formly/lib/node_modules/@progress/kendo-popup-common/dist/es2015/offset-parent-scroll-position.js ***!
  \*********************************************************************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _element_scroll_position__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./element-scroll-position */ "../../node_modules/@progress/kendo-popup-common/dist/es2015/element-scroll-position.js");
/* harmony import */ var _parent_scroll_position__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./parent-scroll-position */ "../../node_modules/@progress/kendo-popup-common/dist/es2015/parent-scroll-position.js");



/* harmony default export */ __webpack_exports__["default"] = ((offsetParentElement, element) => ( // eslint-disable-line no-arrow-condition
    offsetParentElement ? Object(_element_scroll_position__WEBPACK_IMPORTED_MODULE_0__["default"])(offsetParentElement) : Object(_parent_scroll_position__WEBPACK_IMPORTED_MODULE_1__["default"])(element)
));


/***/ }),

/***/ "../../node_modules/@progress/kendo-popup-common/dist/es2015/offset-parent.js":
/*!*****************************************************************************************************************!*\
  !*** /home/abdel/www/project/formly/lib/node_modules/@progress/kendo-popup-common/dist/es2015/offset-parent.js ***!
  \*****************************************************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _document__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./document */ "../../node_modules/@progress/kendo-popup-common/dist/es2015/document.js");


const offsetParent = (element) => {
    let offsetParent = element.offsetParent;

    while (offsetParent && offsetParent.style.position === "static") {
        offsetParent = offsetParent.offsetParent;
    }

    return offsetParent || Object(_document__WEBPACK_IMPORTED_MODULE_0__["default"])(element);
};

/* harmony default export */ __webpack_exports__["default"] = (offsetParent);


/***/ }),

/***/ "../../node_modules/@progress/kendo-popup-common/dist/es2015/offset.js":
/*!**********************************************************************************************************!*\
  !*** /home/abdel/www/project/formly/lib/node_modules/@progress/kendo-popup-common/dist/es2015/offset.js ***!
  \**********************************************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
const rectOfHiddenElement = (element) => {
    const { display, left, position } = element.style;

    element.style.display = '';
    element.style.left = '-10000px';
    element.style.position = 'absolute';

    const rect = element.getBoundingClientRect();

    element.style.display = display;
    element.style.left = left;
    element.style.position = position;

    return rect;
};

const offset = (element) => {
    let rect = element.getBoundingClientRect();
    let { left, top } = rect;

    if (!rect.height && !rect.width) {
        rect = rectOfHiddenElement(element);
    }

    return {
        top: top,
        left: left,
        height: rect.height,
        width: rect.width
    };
};

/* harmony default export */ __webpack_exports__["default"] = (offset);


/***/ }),

/***/ "../../node_modules/@progress/kendo-popup-common/dist/es2015/owner-document.js":
/*!******************************************************************************************************************!*\
  !*** /home/abdel/www/project/formly/lib/node_modules/@progress/kendo-popup-common/dist/es2015/owner-document.js ***!
  \******************************************************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return ownerDocument; });
function ownerDocument(element) {
    return element.ownerDocument || element.document || element;
}


/***/ }),

/***/ "../../node_modules/@progress/kendo-popup-common/dist/es2015/parent-scroll-position.js":
/*!**************************************************************************************************************************!*\
  !*** /home/abdel/www/project/formly/lib/node_modules/@progress/kendo-popup-common/dist/es2015/parent-scroll-position.js ***!
  \**************************************************************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return parentScrollPosition; });
/* harmony import */ var _offset_parent__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./offset-parent */ "../../node_modules/@progress/kendo-popup-common/dist/es2015/offset-parent.js");
/* harmony import */ var _element_scroll_position__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./element-scroll-position */ "../../node_modules/@progress/kendo-popup-common/dist/es2015/element-scroll-position.js");



function parentScrollPosition(element) {
    const parent = Object(_offset_parent__WEBPACK_IMPORTED_MODULE_0__["default"])(element);

    return parent ? Object(_element_scroll_position__WEBPACK_IMPORTED_MODULE_1__["default"])(parent) : { x: 0, y: 0 };
}


/***/ }),

/***/ "../../node_modules/@progress/kendo-popup-common/dist/es2015/parents.js":
/*!***********************************************************************************************************!*\
  !*** /home/abdel/www/project/formly/lib/node_modules/@progress/kendo-popup-common/dist/es2015/parents.js ***!
  \***********************************************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony default export */ __webpack_exports__["default"] = ((element, until) => {
    const result = [];
    let next = element.parentNode;

    while (next) {
        result.push(next);

        if (next === until) { break; }

        next = next.parentNode;
    }

    return result;
});


/***/ }),

/***/ "../../node_modules/@progress/kendo-popup-common/dist/es2015/position-with-scroll.js":
/*!************************************************************************************************************************!*\
  !*** /home/abdel/www/project/formly/lib/node_modules/@progress/kendo-popup-common/dist/es2015/position-with-scroll.js ***!
  \************************************************************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _offset_parent_scroll_position__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./offset-parent-scroll-position */ "../../node_modules/@progress/kendo-popup-common/dist/es2015/offset-parent-scroll-position.js");
/* harmony import */ var _offset_parent__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./offset-parent */ "../../node_modules/@progress/kendo-popup-common/dist/es2015/offset-parent.js");
/* harmony import */ var _position__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./position */ "../../node_modules/@progress/kendo-popup-common/dist/es2015/position.js");




/* harmony default export */ __webpack_exports__["default"] = ((element, parent, scale = 1) => {
    const offsetParentElement = parent ? Object(_offset_parent__WEBPACK_IMPORTED_MODULE_1__["default"])(parent) : null;
    const { top, left, height, width } = Object(_position__WEBPACK_IMPORTED_MODULE_2__["default"])(element, offsetParentElement);
    const { x, y } = Object(_offset_parent_scroll_position__WEBPACK_IMPORTED_MODULE_0__["default"])(offsetParentElement, element);
    const ownerDocument = element.ownerDocument;
    const positionScale = offsetParentElement === ownerDocument.body || offsetParentElement === ownerDocument.documentElement ? 1 : scale;

    return {
        top: top + y * positionScale,
        left: left + x * positionScale,
        height: height,
        width: width
    };
});


/***/ }),

/***/ "../../node_modules/@progress/kendo-popup-common/dist/es2015/position.js":
/*!************************************************************************************************************!*\
  !*** /home/abdel/www/project/formly/lib/node_modules/@progress/kendo-popup-common/dist/es2015/position.js ***!
  \************************************************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _offset_parent__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./offset-parent */ "../../node_modules/@progress/kendo-popup-common/dist/es2015/offset-parent.js");
/* harmony import */ var _offset__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./offset */ "../../node_modules/@progress/kendo-popup-common/dist/es2015/offset.js");
/* harmony import */ var _window__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./window */ "../../node_modules/@progress/kendo-popup-common/dist/es2015/window.js");




const position = (element, parent) => {
    const win = Object(_window__WEBPACK_IMPORTED_MODULE_2__["default"])(element);
    const elementStyles = win.getComputedStyle(element);
    const offset = Object(_offset__WEBPACK_IMPORTED_MODULE_1__["default"])(element);
    const parentElement = parent || Object(_offset_parent__WEBPACK_IMPORTED_MODULE_0__["default"])(element);

    const ownerDocument = element.ownerDocument;
    const useRelative = parentElement !== ownerDocument.body && parentElement !== ownerDocument.documentElement;

    let parentOffset = { top: 0, left: 0 };

    if (elementStyles.position !== "fixed" && useRelative) {
        const parentStyles = win.getComputedStyle(parentElement);

        parentOffset = Object(_offset__WEBPACK_IMPORTED_MODULE_1__["default"])(parentElement);
        parentOffset.top += parseInt(parentStyles.borderTopWidth, 10);
        parentOffset.left += parseInt(parentStyles.borderLeftWidth, 10);
    }

    return {
        top: offset.top - parentOffset.top,
        left: offset.left - parentOffset.left,
        height: offset.height,
        width: offset.width
    };
};

/* harmony default export */ __webpack_exports__["default"] = (position);


/***/ }),

/***/ "../../node_modules/@progress/kendo-popup-common/dist/es2015/remove-scroll.js":
/*!*****************************************************************************************************************!*\
  !*** /home/abdel/www/project/formly/lib/node_modules/@progress/kendo-popup-common/dist/es2015/remove-scroll.js ***!
  \*****************************************************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return removeScroll; });
function removeScroll(rect, scroll) {
    return {
        top: rect.top - scroll.y,
        left: rect.left - scroll.x,
        height: rect.height,
        width: rect.width
    };
}


/***/ }),

/***/ "../../node_modules/@progress/kendo-popup-common/dist/es2015/restrict-to-view.js":
/*!********************************************************************************************************************!*\
  !*** /home/abdel/www/project/formly/lib/node_modules/@progress/kendo-popup-common/dist/es2015/restrict-to-view.js ***!
  \********************************************************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _align_point__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./align-point */ "../../node_modules/@progress/kendo-popup-common/dist/es2015/align-point.js");
/* harmony import */ var _collision__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./collision */ "../../node_modules/@progress/kendo-popup-common/dist/es2015/collision.js");



const fit = function(position, size, viewPortSize) {
    let output = 0;

    if (position + size > viewPortSize) {
        output = viewPortSize - (position + size);
    }

    if (position < 0) {
        output = -position;
    }

    return output;
};

const flip = function({ offset, size, anchorSize, viewPortSize, anchorAlignPoint, elementAlignPoint, margin }) {
    let output = 0;

    const isPositionCentered = elementAlignPoint === _align_point__WEBPACK_IMPORTED_MODULE_0__["default"].center || elementAlignPoint === _align_point__WEBPACK_IMPORTED_MODULE_0__["default"].middle;
    const isOriginCentered = anchorAlignPoint === _align_point__WEBPACK_IMPORTED_MODULE_0__["default"].center || anchorAlignPoint === _align_point__WEBPACK_IMPORTED_MODULE_0__["default"].middle;
    const marginToAdd = 2 * margin; //2x to keep margin after flip

    if (elementAlignPoint !== anchorAlignPoint && !isPositionCentered && !isOriginCentered) {
        const isBeforeAnchor = anchorAlignPoint === _align_point__WEBPACK_IMPORTED_MODULE_0__["default"].top || anchorAlignPoint === _align_point__WEBPACK_IMPORTED_MODULE_0__["default"].left;
        if (offset < 0 && isBeforeAnchor) {
            output = size + anchorSize + marginToAdd;
            if (offset + output + size > viewPortSize) {
                output = 0; //skip flip
            }
        } else if (offset >= 0 && !isBeforeAnchor) {
            if (offset + size > viewPortSize) {
                output += -(anchorSize + size + marginToAdd);
            }

            if (offset + output < 0) {
                output = 0; //skip flip
            }
        }
    }

    return output;
};

const restrictToView = (options) => {
    const { anchorRect, anchorAlign, elementRect, elementAlign, collisions, viewPort, margin = {} } = options;
    const { top: elementTop, left: elementLeft, height: elementHeight, width: elementWidth } = elementRect;
    const { height: viewPortHeight, width: viewPortWidth } = viewPort;
    const horizontalMargin = margin.horizontal || 0;
    const verticalMargin = margin.vertical || 0;

    let left = 0;
    let top = 0;

    const isHorizontalFlip = collisions.horizontal === _collision__WEBPACK_IMPORTED_MODULE_1__["default"].flip;
    const isVerticalFlip = collisions.vertical === _collision__WEBPACK_IMPORTED_MODULE_1__["default"].flip;

    if (collisions.vertical === _collision__WEBPACK_IMPORTED_MODULE_1__["default"].fit) {
        top += fit(elementTop, elementHeight, viewPortHeight);
    }

    if (collisions.horizontal === _collision__WEBPACK_IMPORTED_MODULE_1__["default"].fit) {
        left += fit(elementLeft, elementWidth, viewPortWidth);
    }

    if (isVerticalFlip) {
        top += flip({
            margin: verticalMargin,
            offset: elementTop,
            size: elementHeight,
            anchorSize: anchorRect.height,
            viewPortSize: viewPortHeight,
            anchorAlignPoint: anchorAlign.vertical,
            elementAlignPoint: elementAlign.vertical
        });
    }

    if (isHorizontalFlip) {
        left += flip({
            margin: horizontalMargin,
            offset: elementLeft,
            size: elementWidth,
            anchorSize: anchorRect.width,
            viewPortSize: viewPortWidth,
            anchorAlignPoint: anchorAlign.horizontal,
            elementAlignPoint: elementAlign.horizontal
        });
    }
    const flippedHorizontal = isHorizontalFlip && left !== 0;
    const flippedVertical = isVerticalFlip && top !== 0;

    return {
        flipped: flippedHorizontal || flippedVertical,
        flip: {
            horizontal: flippedHorizontal,
            vertical: flippedVertical
        },
        offset: {
            left: left,
            top: top
        }
    };
};

/* harmony default export */ __webpack_exports__["default"] = (restrictToView);


/***/ }),

/***/ "../../node_modules/@progress/kendo-popup-common/dist/es2015/scroll-position.js":
/*!*******************************************************************************************************************!*\
  !*** /home/abdel/www/project/formly/lib/node_modules/@progress/kendo-popup-common/dist/es2015/scroll-position.js ***!
  \*******************************************************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return scrollPosition; });
/* harmony import */ var _document__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./document */ "../../node_modules/@progress/kendo-popup-common/dist/es2015/document.js");
/* harmony import */ var _window__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./window */ "../../node_modules/@progress/kendo-popup-common/dist/es2015/window.js");



function scrollPosition(element) {
    const documentElement = Object(_document__WEBPACK_IMPORTED_MODULE_0__["default"])(element);
    const win = Object(_window__WEBPACK_IMPORTED_MODULE_1__["default"])(element);

    return {
        x: win.pageXOffset || documentElement.scrollLeft || 0,
        y: win.pageYOffset || documentElement.scrollTop || 0
    };
}


/***/ }),

/***/ "../../node_modules/@progress/kendo-popup-common/dist/es2015/scrollbar-width.js":
/*!*******************************************************************************************************************!*\
  !*** /home/abdel/www/project/formly/lib/node_modules/@progress/kendo-popup-common/dist/es2015/scrollbar-width.js ***!
  \*******************************************************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return scrollbarWidth; });
let cachedWidth = 0;

function scrollbarWidth() {
    if (!cachedWidth && typeof document !== 'undefined') {
        const div = document.createElement("div");

        div.style.cssText = "overflow:scroll;overflow-x:hidden;zoom:1;clear:both;display:block";
        div.innerHTML = "&nbsp;";
        document.body.appendChild(div);

        cachedWidth = div.offsetWidth - div.scrollWidth;

        document.body.removeChild(div);
    }

    return cachedWidth;
}


/***/ }),

/***/ "../../node_modules/@progress/kendo-popup-common/dist/es2015/sibling-container.js":
/*!*********************************************************************************************************************!*\
  !*** /home/abdel/www/project/formly/lib/node_modules/@progress/kendo-popup-common/dist/es2015/sibling-container.js ***!
  \*********************************************************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _parents__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./parents */ "../../node_modules/@progress/kendo-popup-common/dist/es2015/parents.js");
/* harmony import */ var _siblings__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./siblings */ "../../node_modules/@progress/kendo-popup-common/dist/es2015/siblings.js");
/* eslint-disable no-loop-func */




/* harmony default export */ __webpack_exports__["default"] = ((anchor, container) => {
    const parentElements = Object(_parents__WEBPACK_IMPORTED_MODULE_0__["default"])(anchor);
    let containerElement = container;
    let siblingElements;
    let result;

    while (containerElement) {
        siblingElements = Object(_siblings__WEBPACK_IMPORTED_MODULE_1__["default"])(containerElement);

        result = parentElements.reduce(
            (list, p) => list.concat(siblingElements.filter(s => s === p)),
            []
        )[0];

        if (result) { break; }

        containerElement = containerElement.parentElement;
    }

    return result;
});



/***/ }),

/***/ "../../node_modules/@progress/kendo-popup-common/dist/es2015/siblings.js":
/*!************************************************************************************************************!*\
  !*** /home/abdel/www/project/formly/lib/node_modules/@progress/kendo-popup-common/dist/es2015/siblings.js ***!
  \************************************************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony default export */ __webpack_exports__["default"] = ((element) => {
    const result = [];

    let sibling = element.parentNode.firstElementChild;

    while (sibling) {
        if (sibling !== element) {
            result.push(sibling);
        }

        sibling = sibling.nextElementSibling;
    }
    return result;
});


/***/ }),

/***/ "../../node_modules/@progress/kendo-popup-common/dist/es2015/window-viewport.js":
/*!*******************************************************************************************************************!*\
  !*** /home/abdel/www/project/formly/lib/node_modules/@progress/kendo-popup-common/dist/es2015/window-viewport.js ***!
  \*******************************************************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return windowViewport; });
/* harmony import */ var _window__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./window */ "../../node_modules/@progress/kendo-popup-common/dist/es2015/window.js");
/* harmony import */ var _document__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./document */ "../../node_modules/@progress/kendo-popup-common/dist/es2015/document.js");
/* harmony import */ var _scrollbar_width__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./scrollbar-width */ "../../node_modules/@progress/kendo-popup-common/dist/es2015/scrollbar-width.js");




function windowViewport(element) {
    const win = Object(_window__WEBPACK_IMPORTED_MODULE_0__["default"])(element);
    const document = Object(_document__WEBPACK_IMPORTED_MODULE_1__["default"])(element);
    const result = {
        height: win.innerHeight,
        width: win.innerWidth
    };

    if (document.scrollHeight - document.clientHeight > 0) {
        result.width -= Object(_scrollbar_width__WEBPACK_IMPORTED_MODULE_2__["default"])();
    }

    return result;
}


/***/ }),

/***/ "../../node_modules/@progress/kendo-popup-common/dist/es2015/window.js":
/*!**********************************************************************************************************!*\
  !*** /home/abdel/www/project/formly/lib/node_modules/@progress/kendo-popup-common/dist/es2015/window.js ***!
  \**********************************************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _owner_document__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./owner-document */ "../../node_modules/@progress/kendo-popup-common/dist/es2015/owner-document.js");


const getWindow = (element) => Object(_owner_document__WEBPACK_IMPORTED_MODULE_0__["default"])(element).defaultView;

/* harmony default export */ __webpack_exports__["default"] = (getWindow);


/***/ }),

/***/ "../../node_modules/@telerik/kendo-draggable/dist/es2015/main.js":
/*!****************************************************************************************************!*\
  !*** /home/abdel/www/project/formly/lib/node_modules/@telerik/kendo-draggable/dist/es2015/main.js ***!
  \****************************************************************************************************/
/*! exports provided: Draggable, default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Draggable", function() { return Draggable; });
const proxy = (a, b) => (e) => b(a(e));

const bind = (el, event, callback) =>
    el.addEventListener && el.addEventListener(event, callback);

const unbind = (el, event, callback) =>
    el && el.removeEventListener && el.removeEventListener(event, callback);

const noop = () => { /* empty */ };

const preventDefault = e => e.preventDefault();

const touchRegExp = /touch/;

// 300ms is the usual mouse interval;
// // However, an underpowered mobile device under a heavy load may queue mouse events for a longer period.
const IGNORE_MOUSE_TIMEOUT = 2000;

function normalizeEvent(e) {
    if (e.type.match(touchRegExp)) {
        return {
            pageX: e.changedTouches[0].pageX,
            pageY: e.changedTouches[0].pageY,
            clientX: e.changedTouches[0].clientX,
            clientY: e.changedTouches[0].clientY,
            type: e.type,
            originalEvent: e,
            isTouch: true
        };
    }

    return {
        pageX: e.pageX,
        pageY: e.pageY,
        clientX: e.clientX,
        clientY: e.clientY,
        offsetX: e.offsetX,
        offsetY: e.offsetY,
        type: e.type,
        ctrlKey: e.ctrlKey,
        shiftKey: e.shiftKey,
        altKey: e.altKey,
        originalEvent: e
    };
}

class Draggable {
    static supportPointerEvent() {
        return (typeof window !== 'undefined') && window.PointerEvent;
    }

    constructor({ press = noop, drag = noop, release = noop, mouseOnly = false }) {
        this._pressHandler = proxy(normalizeEvent, press);
        this._dragHandler = proxy(normalizeEvent, drag);
        this._releaseHandler = proxy(normalizeEvent, release);
        this._ignoreMouse = false;
        this._mouseOnly = mouseOnly;

        this._touchstart = (e) => {
            if (e.touches.length === 1) {
                this._pressHandler(e);
            }
        };

        this._touchmove = (e) => {
            if (e.touches.length === 1) {
                this._dragHandler(e);
            }
        };

        this._touchend = (e) => {
            // the last finger has been lifted, and the user is not doing gesture.
            // there might be a better way to handle this.
            if (e.touches.length === 0 && e.changedTouches.length === 1) {
                this._releaseHandler(e);
                this._ignoreMouse = true;
                setTimeout(this._restoreMouse, IGNORE_MOUSE_TIMEOUT);
            }
        };

        this._restoreMouse = () => {
            this._ignoreMouse = false;
        };

        this._mousedown = (e) => {
            const { which } = e;

            if ((which && which > 1) || this._ignoreMouse) {
                return;
            }

            bind(document, "mousemove", this._mousemove);
            bind(document, "mouseup", this._mouseup);
            this._pressHandler(e);
        };

        this._mousemove = (e) => {
            this._dragHandler(e);
        };

        this._mouseup = (e) => {
            unbind(document, "mousemove", this._mousemove);
            unbind(document, "mouseup", this._mouseup);
            this._releaseHandler(e);
        };

        this._pointerdown = (e) => {
            if (e.isPrimary && e.button === 0) {
                bind(document, "pointermove", this._pointermove);
                bind(document, "pointerup", this._pointerup);
                bind(document, "pointercancel", this._pointerup);
                bind(document, "contextmenu", preventDefault);

                this._pressHandler(e);
            }
        };

        this._pointermove = (e) => {
            if (e.isPrimary) {
                this._dragHandler(e);
            }
        };

        this._pointerup = (e) => {
            if (e.isPrimary) {
                unbind(document, "pointermove", this._pointermove);
                unbind(document, "pointerup", this._pointerup);
                unbind(document, "pointercancel", this._pointerup);
                unbind(document, "contextmenu", preventDefault);

                this._releaseHandler(e);
            }
        };
    }

    bindTo(element) {
        if (element === this._element) {
            return;
        }

        if (this._element) {
            this._unbindFromCurrent();
        }

        this._element = element;
        this._bindToCurrent();
    }

    _bindToCurrent() {
        const element = this._element;

        if (this._usePointers()) {
            bind(element, "pointerdown", this._pointerdown);
            return;
        }

        bind(element, "mousedown", this._mousedown);

        if (!this._mouseOnly) {
            bind(element, "touchstart", this._touchstart);
            bind(element, "touchmove", this._touchmove);
            bind(element, "touchend", this._touchend);
        }
    }

    _unbindFromCurrent() {
        const element = this._element;

        if (this._usePointers()) {
            unbind(element, "pointerdown", this._pointerdown);
            unbind(document, "pointermove", this._pointermove);
            unbind(document, "pointerup", this._pointerup);
            unbind(document, "contextmenu", preventDefault);
            unbind(document, "pointercancel", this._pointerup);
            return;
        }

        unbind(element, "mousedown", this._mousedown);

        if (!this._mouseOnly) {
            unbind(element, "touchstart", this._touchstart);
            unbind(element, "touchmove", this._touchmove);
            unbind(element, "touchend", this._touchend);
        }
    }

    _usePointers() {
        return !this._mouseOnly && Draggable.supportPointerEvent();
    }

    update({ press = noop, drag = noop, release = noop, mouseOnly = false }) {
        this._pressHandler = proxy(normalizeEvent, press);
        this._dragHandler = proxy(normalizeEvent, drag);
        this._releaseHandler = proxy(normalizeEvent, release);
        this._mouseOnly = mouseOnly;
    }

    destroy() {
        this._unbindFromCurrent();
        this._element = null;
    }
}

// Re-export as "default" field to address a bug
// where the ES Module is imported by CommonJS code.
//
// See https://github.com/telerik/kendo-angular/issues/1314
Draggable.default = Draggable;

// Rollup won't output exports['default'] otherwise
/* harmony default export */ __webpack_exports__["default"] = (Draggable);



/***/ }),

/***/ "../../src/ui/kendo/checkbox/src/checkbox.module.ts":
/*!***************************************************************************************!*\
  !*** /home/abdel/www/project/formly/lib/src/ui/kendo/checkbox/src/checkbox.module.ts ***!
  \***************************************************************************************/
/*! exports provided: FormlyCheckboxModule */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "FormlyCheckboxModule", function() { return FormlyCheckboxModule; });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/core */ "../../node_modules/@angular/core/__ivy_ngcc__/fesm2015/core.js");
/* harmony import */ var _angular_common__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/common */ "../../node_modules/@angular/common/__ivy_ngcc__/fesm2015/common.js");
/* harmony import */ var _ngx_formly_core__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @ngx-formly/core */ "../../src/core/src/public_api.ts");
/* harmony import */ var _angular_forms__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @angular/forms */ "../../node_modules/@angular/forms/__ivy_ngcc__/fesm2015/forms.js");
/* harmony import */ var _ngx_formly_kendo_form_field__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @ngx-formly/kendo/form-field */ "../../src/ui/kendo/form-field/src/public_api.ts");
/* harmony import */ var _checkbox_type__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./checkbox.type */ "../../src/ui/kendo/checkbox/src/checkbox.type.ts");
/* harmony import */ var _core_src_lib_core_module__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../../../core/src/lib/core.module */ "../../src/core/src/lib/core.module.ts");








class FormlyCheckboxModule {
}
FormlyCheckboxModule.ɵmod = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdefineNgModule"]({ type: FormlyCheckboxModule });
FormlyCheckboxModule.ɵinj = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdefineInjector"]({ factory: function FormlyCheckboxModule_Factory(t) { return new (t || FormlyCheckboxModule)(); }, imports: [[
            _angular_common__WEBPACK_IMPORTED_MODULE_1__["CommonModule"],
            _angular_forms__WEBPACK_IMPORTED_MODULE_3__["ReactiveFormsModule"],
            _ngx_formly_kendo_form_field__WEBPACK_IMPORTED_MODULE_4__["FormlyFormFieldModule"],
            _ngx_formly_core__WEBPACK_IMPORTED_MODULE_2__["FormlyModule"].forChild({
                types: [
                    {
                        name: 'checkbox',
                        component: _checkbox_type__WEBPACK_IMPORTED_MODULE_5__["FormlyFieldCheckbox"],
                        wrappers: ['form-field'],
                    },
                    {
                        name: 'boolean',
                        extends: 'checkbox',
                    },
                ],
            }),
        ]] });
(function () { (typeof ngJitMode === "undefined" || ngJitMode) && _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵsetNgModuleScope"](FormlyCheckboxModule, { declarations: [_checkbox_type__WEBPACK_IMPORTED_MODULE_5__["FormlyFieldCheckbox"]], imports: [_angular_common__WEBPACK_IMPORTED_MODULE_1__["CommonModule"],
        _angular_forms__WEBPACK_IMPORTED_MODULE_3__["ReactiveFormsModule"],
        _ngx_formly_kendo_form_field__WEBPACK_IMPORTED_MODULE_4__["FormlyFormFieldModule"], _core_src_lib_core_module__WEBPACK_IMPORTED_MODULE_6__["FormlyModule"]] }); })();
/*@__PURE__*/ (function () { _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵsetClassMetadata"](FormlyCheckboxModule, [{
        type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["NgModule"],
        args: [{
                declarations: [_checkbox_type__WEBPACK_IMPORTED_MODULE_5__["FormlyFieldCheckbox"]],
                imports: [
                    _angular_common__WEBPACK_IMPORTED_MODULE_1__["CommonModule"],
                    _angular_forms__WEBPACK_IMPORTED_MODULE_3__["ReactiveFormsModule"],
                    _ngx_formly_kendo_form_field__WEBPACK_IMPORTED_MODULE_4__["FormlyFormFieldModule"],
                    _ngx_formly_core__WEBPACK_IMPORTED_MODULE_2__["FormlyModule"].forChild({
                        types: [
                            {
                                name: 'checkbox',
                                component: _checkbox_type__WEBPACK_IMPORTED_MODULE_5__["FormlyFieldCheckbox"],
                                wrappers: ['form-field'],
                            },
                            {
                                name: 'boolean',
                                extends: 'checkbox',
                            },
                        ],
                    }),
                ],
            }]
    }], null, null); })();


/***/ }),

/***/ "../../src/ui/kendo/checkbox/src/checkbox.type.ts":
/*!*************************************************************************************!*\
  !*** /home/abdel/www/project/formly/lib/src/ui/kendo/checkbox/src/checkbox.type.ts ***!
  \*************************************************************************************/
/*! exports provided: FormlyFieldCheckbox */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "FormlyFieldCheckbox", function() { return FormlyFieldCheckbox; });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/core */ "../../node_modules/@angular/core/__ivy_ngcc__/fesm2015/core.js");
/* harmony import */ var _ngx_formly_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @ngx-formly/core */ "../../src/core/src/public_api.ts");
/* harmony import */ var _angular_forms__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @angular/forms */ "../../node_modules/@angular/forms/__ivy_ngcc__/fesm2015/forms.js");
/* harmony import */ var _core_src_lib_templates_formly_attributes__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../../core/src/lib/templates/formly.attributes */ "../../src/core/src/lib/templates/formly.attributes.ts");
/* harmony import */ var _angular_common__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @angular/common */ "../../node_modules/@angular/common/__ivy_ngcc__/fesm2015/common.js");






function FormlyFieldCheckbox_span_4_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "span", 3);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](1, "*");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
} }
class FormlyFieldCheckbox extends _ngx_formly_core__WEBPACK_IMPORTED_MODULE_1__["FieldType"] {
    constructor() {
        super(...arguments);
        this.defaultOptions = {
            templateOptions: {
                hideLabel: true,
            },
        };
    }
}
FormlyFieldCheckbox.ɵfac = function FormlyFieldCheckbox_Factory(t) { return ɵFormlyFieldCheckbox_BaseFactory(t || FormlyFieldCheckbox); };
FormlyFieldCheckbox.ɵcmp = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdefineComponent"]({ type: FormlyFieldCheckbox, selectors: [["formly-field-kendo-checkbox"]], features: [_angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵInheritDefinitionFeature"]], decls: 5, vars: 7, consts: [["type", "checkbox", 1, "k-checkbox", 3, "formControl", "formlyAttributes"], [1, "k-checkbox-label", 3, "for"], ["class", "k-required", 4, "ngIf"], [1, "k-required"]], template: function FormlyFieldCheckbox_Template(rf, ctx) { if (rf & 1) {
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](0, "input", 0);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](1, "label", 1);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](2, "span");
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](3);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](4, FormlyFieldCheckbox_span_4_Template, 2, 0, "span", 2);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    } if (rf & 2) {
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵclassProp"]("k-state-invalid", ctx.showError);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("formControl", ctx.formControl)("formlyAttributes", ctx.field);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("for", ctx.id);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](2);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtextInterpolate1"](" ", ctx.to.label, " ");
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngIf", ctx.to.required && ctx.to.hideRequiredMarker !== true);
    } }, directives: [_angular_forms__WEBPACK_IMPORTED_MODULE_2__["CheckboxControlValueAccessor"], _angular_forms__WEBPACK_IMPORTED_MODULE_2__["NgControlStatus"], _angular_forms__WEBPACK_IMPORTED_MODULE_2__["FormControlDirective"], _core_src_lib_templates_formly_attributes__WEBPACK_IMPORTED_MODULE_3__["FormlyAttributes"], _angular_common__WEBPACK_IMPORTED_MODULE_4__["NgIf"]], encapsulation: 2, changeDetection: 0 });
const ɵFormlyFieldCheckbox_BaseFactory = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵgetInheritedFactory"](FormlyFieldCheckbox);
/*@__PURE__*/ (function () { _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵsetClassMetadata"](FormlyFieldCheckbox, [{
        type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Component"],
        args: [{
                selector: 'formly-field-kendo-checkbox',
                template: `
    <input
      type="checkbox"
      class="k-checkbox"
      [class.k-state-invalid]="showError"
      [formControl]="formControl"
      [formlyAttributes]="field"
    />

    <label [for]="id" class="k-checkbox-label">
      <span>
        {{ to.label }}
        <span *ngIf="to.required && to.hideRequiredMarker !== true" class="k-required">*</span>
      </span>
    </label>
  `,
                changeDetection: _angular_core__WEBPACK_IMPORTED_MODULE_0__["ChangeDetectionStrategy"].OnPush,
            }]
    }], null, null); })();


/***/ }),

/***/ "../../src/ui/kendo/checkbox/src/public_api.ts":
/*!**********************************************************************************!*\
  !*** /home/abdel/www/project/formly/lib/src/ui/kendo/checkbox/src/public_api.ts ***!
  \**********************************************************************************/
/*! exports provided: FormlyCheckboxModule, FormlyFieldCheckbox */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _checkbox_module__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./checkbox.module */ "../../src/ui/kendo/checkbox/src/checkbox.module.ts");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "FormlyCheckboxModule", function() { return _checkbox_module__WEBPACK_IMPORTED_MODULE_0__["FormlyCheckboxModule"]; });

/* harmony import */ var _checkbox_type__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./checkbox.type */ "../../src/ui/kendo/checkbox/src/checkbox.type.ts");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "FormlyFieldCheckbox", function() { return _checkbox_type__WEBPACK_IMPORTED_MODULE_1__["FormlyFieldCheckbox"]; });





/***/ }),

/***/ "../../src/ui/kendo/form-field/src/form-field.module.ts":
/*!*******************************************************************************************!*\
  !*** /home/abdel/www/project/formly/lib/src/ui/kendo/form-field/src/form-field.module.ts ***!
  \*******************************************************************************************/
/*! exports provided: FormlyFormFieldModule */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "FormlyFormFieldModule", function() { return FormlyFormFieldModule; });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/core */ "../../node_modules/@angular/core/__ivy_ngcc__/fesm2015/core.js");
/* harmony import */ var _angular_common__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/common */ "../../node_modules/@angular/common/__ivy_ngcc__/fesm2015/common.js");
/* harmony import */ var _ngx_formly_core__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @ngx-formly/core */ "../../src/core/src/public_api.ts");
/* harmony import */ var _angular_forms__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @angular/forms */ "../../node_modules/@angular/forms/__ivy_ngcc__/fesm2015/forms.js");
/* harmony import */ var _form_field_wrapper__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./form-field.wrapper */ "../../src/ui/kendo/form-field/src/form-field.wrapper.ts");
/* harmony import */ var _core_src_lib_core_module__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../../core/src/lib/core.module */ "../../src/core/src/lib/core.module.ts");







class FormlyFormFieldModule {
}
FormlyFormFieldModule.ɵmod = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdefineNgModule"]({ type: FormlyFormFieldModule });
FormlyFormFieldModule.ɵinj = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdefineInjector"]({ factory: function FormlyFormFieldModule_Factory(t) { return new (t || FormlyFormFieldModule)(); }, imports: [[
            _angular_common__WEBPACK_IMPORTED_MODULE_1__["CommonModule"],
            _angular_forms__WEBPACK_IMPORTED_MODULE_3__["ReactiveFormsModule"],
            _ngx_formly_core__WEBPACK_IMPORTED_MODULE_2__["FormlyModule"].forChild({
                wrappers: [
                    {
                        name: 'form-field',
                        component: _form_field_wrapper__WEBPACK_IMPORTED_MODULE_4__["FormlyWrapperFormField"],
                    },
                ],
            }),
        ]] });
(function () { (typeof ngJitMode === "undefined" || ngJitMode) && _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵsetNgModuleScope"](FormlyFormFieldModule, { declarations: [_form_field_wrapper__WEBPACK_IMPORTED_MODULE_4__["FormlyWrapperFormField"]], imports: [_angular_common__WEBPACK_IMPORTED_MODULE_1__["CommonModule"],
        _angular_forms__WEBPACK_IMPORTED_MODULE_3__["ReactiveFormsModule"], _core_src_lib_core_module__WEBPACK_IMPORTED_MODULE_5__["FormlyModule"]] }); })();
/*@__PURE__*/ (function () { _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵsetClassMetadata"](FormlyFormFieldModule, [{
        type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["NgModule"],
        args: [{
                declarations: [_form_field_wrapper__WEBPACK_IMPORTED_MODULE_4__["FormlyWrapperFormField"]],
                imports: [
                    _angular_common__WEBPACK_IMPORTED_MODULE_1__["CommonModule"],
                    _angular_forms__WEBPACK_IMPORTED_MODULE_3__["ReactiveFormsModule"],
                    _ngx_formly_core__WEBPACK_IMPORTED_MODULE_2__["FormlyModule"].forChild({
                        wrappers: [
                            {
                                name: 'form-field',
                                component: _form_field_wrapper__WEBPACK_IMPORTED_MODULE_4__["FormlyWrapperFormField"],
                            },
                        ],
                    }),
                ],
            }]
    }], null, null); })();


/***/ }),

/***/ "../../src/ui/kendo/form-field/src/form-field.wrapper.ts":
/*!********************************************************************************************!*\
  !*** /home/abdel/www/project/formly/lib/src/ui/kendo/form-field/src/form-field.wrapper.ts ***!
  \********************************************************************************************/
/*! exports provided: FormlyWrapperFormField */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "FormlyWrapperFormField", function() { return FormlyWrapperFormField; });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/core */ "../../node_modules/@angular/core/__ivy_ngcc__/fesm2015/core.js");
/* harmony import */ var _ngx_formly_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @ngx-formly/core */ "../../src/core/src/public_api.ts");
/* harmony import */ var _angular_common__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @angular/common */ "../../node_modules/@angular/common/__ivy_ngcc__/fesm2015/common.js");
/* harmony import */ var _core_src_lib_templates_formly_validation_message__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../../core/src/lib/templates/formly.validation-message */ "../../src/core/src/lib/templates/formly.validation-message.ts");





function FormlyWrapperFormField_span_1_span_2_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "span", 5);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](1, "*");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
} }
function FormlyWrapperFormField_span_1_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "span");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](2, FormlyWrapperFormField_span_1_span_2_Template, 2, 0, "span", 4);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
} if (rf & 2) {
    const ctx_r0 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtextInterpolate1"](" ", ctx_r0.to.label, " ");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngIf", ctx_r0.to.required && ctx_r0.to.hideRequiredMarker !== true);
} }
function FormlyWrapperFormField_formly_validation_message_4_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](0, "formly-validation-message", 6);
} if (rf & 2) {
    const ctx_r2 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("field", ctx_r2.field);
} }
class FormlyWrapperFormField extends _ngx_formly_core__WEBPACK_IMPORTED_MODULE_1__["FieldWrapper"] {
}
FormlyWrapperFormField.ɵfac = function FormlyWrapperFormField_Factory(t) { return ɵFormlyWrapperFormField_BaseFactory(t || FormlyWrapperFormField); };
FormlyWrapperFormField.ɵcmp = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdefineComponent"]({ type: FormlyWrapperFormField, selectors: [["formly-wrapper-kendo-form-field"]], features: [_angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵInheritDefinitionFeature"]], decls: 5, vars: 3, consts: [[1, "k-form-field", 3, "for"], [4, "ngIf"], ["fieldComponent", ""], ["class", "k-field-info k-required", 3, "field", 4, "ngIf"], ["class", "k-required", 4, "ngIf"], [1, "k-required"], [1, "k-field-info", "k-required", 3, "field"]], template: function FormlyWrapperFormField_Template(rf, ctx) { if (rf & 1) {
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "label", 0);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](1, FormlyWrapperFormField_span_1_Template, 3, 2, "span", 1);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementContainer"](2, null, 2);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](4, FormlyWrapperFormField_formly_validation_message_4_Template, 1, 1, "formly-validation-message", 3);
    } if (rf & 2) {
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("for", ctx.id);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngIf", ctx.to.label && ctx.to.hideLabel !== true);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](3);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngIf", ctx.showError);
    } }, directives: [_angular_common__WEBPACK_IMPORTED_MODULE_2__["NgIf"], _core_src_lib_templates_formly_validation_message__WEBPACK_IMPORTED_MODULE_3__["FormlyValidationMessage"]], encapsulation: 2, changeDetection: 0 });
const ɵFormlyWrapperFormField_BaseFactory = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵgetInheritedFactory"](FormlyWrapperFormField);
/*@__PURE__*/ (function () { _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵsetClassMetadata"](FormlyWrapperFormField, [{
        type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Component"],
        args: [{
                selector: 'formly-wrapper-kendo-form-field',
                template: `
    <label [for]="id" class="k-form-field">
      <span *ngIf="to.label && to.hideLabel !== true">
        {{ to.label }}
        <span *ngIf="to.required && to.hideRequiredMarker !== true" class="k-required">*</span>
      </span>
      <ng-container #fieldComponent></ng-container>
    </label>

    <formly-validation-message *ngIf="showError" class="k-field-info k-required" [field]="field">
    </formly-validation-message>
  `,
                changeDetection: _angular_core__WEBPACK_IMPORTED_MODULE_0__["ChangeDetectionStrategy"].OnPush,
            }]
    }], null, null); })();


/***/ }),

/***/ "../../src/ui/kendo/form-field/src/public_api.ts":
/*!************************************************************************************!*\
  !*** /home/abdel/www/project/formly/lib/src/ui/kendo/form-field/src/public_api.ts ***!
  \************************************************************************************/
/*! exports provided: FormlyFormFieldModule */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _form_field_module__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./form-field.module */ "../../src/ui/kendo/form-field/src/form-field.module.ts");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "FormlyFormFieldModule", function() { return _form_field_module__WEBPACK_IMPORTED_MODULE_0__["FormlyFormFieldModule"]; });




/***/ }),

/***/ "../../src/ui/kendo/input/src/input.module.ts":
/*!*********************************************************************************!*\
  !*** /home/abdel/www/project/formly/lib/src/ui/kendo/input/src/input.module.ts ***!
  \*********************************************************************************/
/*! exports provided: FormlyInputModule */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "FormlyInputModule", function() { return FormlyInputModule; });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/core */ "../../node_modules/@angular/core/__ivy_ngcc__/fesm2015/core.js");
/* harmony import */ var _angular_common__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/common */ "../../node_modules/@angular/common/__ivy_ngcc__/fesm2015/common.js");
/* harmony import */ var _ngx_formly_core__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @ngx-formly/core */ "../../src/core/src/public_api.ts");
/* harmony import */ var _angular_forms__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @angular/forms */ "../../node_modules/@angular/forms/__ivy_ngcc__/fesm2015/forms.js");
/* harmony import */ var _ngx_formly_kendo_form_field__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @ngx-formly/kendo/form-field */ "../../src/ui/kendo/form-field/src/public_api.ts");
/* harmony import */ var _input_type__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./input.type */ "../../src/ui/kendo/input/src/input.type.ts");
/* harmony import */ var _core_src_lib_core_module__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../../../core/src/lib/core.module */ "../../src/core/src/lib/core.module.ts");








class FormlyInputModule {
}
FormlyInputModule.ɵmod = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdefineNgModule"]({ type: FormlyInputModule });
FormlyInputModule.ɵinj = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdefineInjector"]({ factory: function FormlyInputModule_Factory(t) { return new (t || FormlyInputModule)(); }, imports: [[
            _angular_common__WEBPACK_IMPORTED_MODULE_1__["CommonModule"],
            _angular_forms__WEBPACK_IMPORTED_MODULE_3__["ReactiveFormsModule"],
            _ngx_formly_kendo_form_field__WEBPACK_IMPORTED_MODULE_4__["FormlyFormFieldModule"],
            _ngx_formly_core__WEBPACK_IMPORTED_MODULE_2__["FormlyModule"].forChild({
                types: [
                    {
                        name: 'input',
                        component: _input_type__WEBPACK_IMPORTED_MODULE_5__["FormlyFieldInput"],
                        wrappers: ['form-field'],
                    },
                    { name: 'string', extends: 'input' },
                    {
                        name: 'number',
                        extends: 'input',
                        defaultOptions: {
                            templateOptions: {
                                type: 'number',
                            },
                        },
                    },
                    {
                        name: 'integer',
                        extends: 'input',
                        defaultOptions: {
                            templateOptions: {
                                type: 'number',
                            },
                        },
                    },
                ],
            }),
        ]] });
(function () { (typeof ngJitMode === "undefined" || ngJitMode) && _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵsetNgModuleScope"](FormlyInputModule, { declarations: [_input_type__WEBPACK_IMPORTED_MODULE_5__["FormlyFieldInput"]], imports: [_angular_common__WEBPACK_IMPORTED_MODULE_1__["CommonModule"],
        _angular_forms__WEBPACK_IMPORTED_MODULE_3__["ReactiveFormsModule"],
        _ngx_formly_kendo_form_field__WEBPACK_IMPORTED_MODULE_4__["FormlyFormFieldModule"], _core_src_lib_core_module__WEBPACK_IMPORTED_MODULE_6__["FormlyModule"]] }); })();
/*@__PURE__*/ (function () { _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵsetClassMetadata"](FormlyInputModule, [{
        type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["NgModule"],
        args: [{
                declarations: [_input_type__WEBPACK_IMPORTED_MODULE_5__["FormlyFieldInput"]],
                imports: [
                    _angular_common__WEBPACK_IMPORTED_MODULE_1__["CommonModule"],
                    _angular_forms__WEBPACK_IMPORTED_MODULE_3__["ReactiveFormsModule"],
                    _ngx_formly_kendo_form_field__WEBPACK_IMPORTED_MODULE_4__["FormlyFormFieldModule"],
                    _ngx_formly_core__WEBPACK_IMPORTED_MODULE_2__["FormlyModule"].forChild({
                        types: [
                            {
                                name: 'input',
                                component: _input_type__WEBPACK_IMPORTED_MODULE_5__["FormlyFieldInput"],
                                wrappers: ['form-field'],
                            },
                            { name: 'string', extends: 'input' },
                            {
                                name: 'number',
                                extends: 'input',
                                defaultOptions: {
                                    templateOptions: {
                                        type: 'number',
                                    },
                                },
                            },
                            {
                                name: 'integer',
                                extends: 'input',
                                defaultOptions: {
                                    templateOptions: {
                                        type: 'number',
                                    },
                                },
                            },
                        ],
                    }),
                ],
            }]
    }], null, null); })();


/***/ }),

/***/ "../../src/ui/kendo/input/src/input.type.ts":
/*!*******************************************************************************!*\
  !*** /home/abdel/www/project/formly/lib/src/ui/kendo/input/src/input.type.ts ***!
  \*******************************************************************************/
/*! exports provided: FormlyFieldInput */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "FormlyFieldInput", function() { return FormlyFieldInput; });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/core */ "../../node_modules/@angular/core/__ivy_ngcc__/fesm2015/core.js");
/* harmony import */ var _ngx_formly_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @ngx-formly/core */ "../../src/core/src/public_api.ts");
/* harmony import */ var _angular_common__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @angular/common */ "../../node_modules/@angular/common/__ivy_ngcc__/fesm2015/common.js");
/* harmony import */ var _angular_forms__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @angular/forms */ "../../node_modules/@angular/forms/__ivy_ngcc__/fesm2015/forms.js");
/* harmony import */ var _core_src_lib_templates_formly_attributes__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../../core/src/lib/templates/formly.attributes */ "../../src/core/src/lib/templates/formly.attributes.ts");






function FormlyFieldInput_input_0_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](0, "input", 2);
} if (rf & 2) {
    const ctx_r0 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵclassProp"]("k-state-invalid", ctx_r0.showError);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("type", ctx_r0.to.type || "text")("formControl", ctx_r0.formControl)("formlyAttributes", ctx_r0.field);
} }
function FormlyFieldInput_ng_template_1_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](0, "input", 3);
} if (rf & 2) {
    const ctx_r2 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵclassProp"]("k-state-invalid", ctx_r2.showError);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("formControl", ctx_r2.formControl)("formlyAttributes", ctx_r2.field);
} }
class FormlyFieldInput extends _ngx_formly_core__WEBPACK_IMPORTED_MODULE_1__["FieldType"] {
}
FormlyFieldInput.ɵfac = function FormlyFieldInput_Factory(t) { return ɵFormlyFieldInput_BaseFactory(t || FormlyFieldInput); };
FormlyFieldInput.ɵcmp = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdefineComponent"]({ type: FormlyFieldInput, selectors: [["formly-field-kendo-input"]], features: [_angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵInheritDefinitionFeature"]], decls: 3, vars: 2, consts: [["class", "k-textbox", 3, "type", "formControl", "formlyAttributes", "k-state-invalid", 4, "ngIf", "ngIfElse"], ["numberTmp", ""], [1, "k-textbox", 3, "type", "formControl", "formlyAttributes"], ["type", "number", 1, "k-textbox", 3, "formControl", "formlyAttributes"]], template: function FormlyFieldInput_Template(rf, ctx) { if (rf & 1) {
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](0, FormlyFieldInput_input_0_Template, 1, 5, "input", 0);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](1, FormlyFieldInput_ng_template_1_Template, 1, 4, "ng-template", null, 1, _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplateRefExtractor"]);
    } if (rf & 2) {
        const _r1 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵreference"](2);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngIf", ctx.to.type !== "number")("ngIfElse", _r1);
    } }, directives: [_angular_common__WEBPACK_IMPORTED_MODULE_2__["NgIf"], _angular_forms__WEBPACK_IMPORTED_MODULE_3__["DefaultValueAccessor"], _angular_forms__WEBPACK_IMPORTED_MODULE_3__["NgControlStatus"], _angular_forms__WEBPACK_IMPORTED_MODULE_3__["FormControlDirective"], _core_src_lib_templates_formly_attributes__WEBPACK_IMPORTED_MODULE_4__["FormlyAttributes"], _angular_forms__WEBPACK_IMPORTED_MODULE_3__["NumberValueAccessor"]], encapsulation: 2, changeDetection: 0 });
const ɵFormlyFieldInput_BaseFactory = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵgetInheritedFactory"](FormlyFieldInput);
/*@__PURE__*/ (function () { _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵsetClassMetadata"](FormlyFieldInput, [{
        type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Component"],
        args: [{
                selector: 'formly-field-kendo-input',
                template: `
    <input
      *ngIf="to.type !== 'number'; else numberTmp"
      [type]="to.type || 'text'"
      [formControl]="formControl"
      class="k-textbox"
      [formlyAttributes]="field"
      [class.k-state-invalid]="showError"
    />
    <ng-template #numberTmp>
      <input
        type="number"
        [formControl]="formControl"
        class="k-textbox"
        [formlyAttributes]="field"
        [class.k-state-invalid]="showError"
      />
    </ng-template>
  `,
                changeDetection: _angular_core__WEBPACK_IMPORTED_MODULE_0__["ChangeDetectionStrategy"].OnPush,
            }]
    }], null, null); })();


/***/ }),

/***/ "../../src/ui/kendo/input/src/public_api.ts":
/*!*******************************************************************************!*\
  !*** /home/abdel/www/project/formly/lib/src/ui/kendo/input/src/public_api.ts ***!
  \*******************************************************************************/
/*! exports provided: FormlyInputModule, FormlyFieldInput */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _input_module__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./input.module */ "../../src/ui/kendo/input/src/input.module.ts");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "FormlyInputModule", function() { return _input_module__WEBPACK_IMPORTED_MODULE_0__["FormlyInputModule"]; });

/* harmony import */ var _input_type__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./input.type */ "../../src/ui/kendo/input/src/input.type.ts");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "FormlyFieldInput", function() { return _input_type__WEBPACK_IMPORTED_MODULE_1__["FormlyFieldInput"]; });





/***/ }),

/***/ "../../src/ui/kendo/radio/src/public_api.ts":
/*!*******************************************************************************!*\
  !*** /home/abdel/www/project/formly/lib/src/ui/kendo/radio/src/public_api.ts ***!
  \*******************************************************************************/
/*! exports provided: FormlyRadioModule, FormlyFieldRadio */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _radio_module__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./radio.module */ "../../src/ui/kendo/radio/src/radio.module.ts");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "FormlyRadioModule", function() { return _radio_module__WEBPACK_IMPORTED_MODULE_0__["FormlyRadioModule"]; });

/* harmony import */ var _radio_type__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./radio.type */ "../../src/ui/kendo/radio/src/radio.type.ts");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "FormlyFieldRadio", function() { return _radio_type__WEBPACK_IMPORTED_MODULE_1__["FormlyFieldRadio"]; });





/***/ }),

/***/ "../../src/ui/kendo/radio/src/radio.module.ts":
/*!*********************************************************************************!*\
  !*** /home/abdel/www/project/formly/lib/src/ui/kendo/radio/src/radio.module.ts ***!
  \*********************************************************************************/
/*! exports provided: FormlyRadioModule */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "FormlyRadioModule", function() { return FormlyRadioModule; });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/core */ "../../node_modules/@angular/core/__ivy_ngcc__/fesm2015/core.js");
/* harmony import */ var _angular_common__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/common */ "../../node_modules/@angular/common/__ivy_ngcc__/fesm2015/common.js");
/* harmony import */ var _ngx_formly_core__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @ngx-formly/core */ "../../src/core/src/public_api.ts");
/* harmony import */ var _angular_forms__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @angular/forms */ "../../node_modules/@angular/forms/__ivy_ngcc__/fesm2015/forms.js");
/* harmony import */ var _ngx_formly_core_select__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @ngx-formly/core/select */ "../../src/core/select/src/public_api.ts");
/* harmony import */ var _ngx_formly_kendo_form_field__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @ngx-formly/kendo/form-field */ "../../src/ui/kendo/form-field/src/public_api.ts");
/* harmony import */ var _radio_type__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./radio.type */ "../../src/ui/kendo/radio/src/radio.type.ts");
/* harmony import */ var _core_src_lib_core_module__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../../../core/src/lib/core.module */ "../../src/core/src/lib/core.module.ts");









class FormlyRadioModule {
}
FormlyRadioModule.ɵmod = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdefineNgModule"]({ type: FormlyRadioModule });
FormlyRadioModule.ɵinj = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdefineInjector"]({ factory: function FormlyRadioModule_Factory(t) { return new (t || FormlyRadioModule)(); }, imports: [[
            _angular_common__WEBPACK_IMPORTED_MODULE_1__["CommonModule"],
            _angular_forms__WEBPACK_IMPORTED_MODULE_3__["ReactiveFormsModule"],
            _ngx_formly_kendo_form_field__WEBPACK_IMPORTED_MODULE_5__["FormlyFormFieldModule"],
            _ngx_formly_core_select__WEBPACK_IMPORTED_MODULE_4__["FormlySelectModule"],
            _ngx_formly_core__WEBPACK_IMPORTED_MODULE_2__["FormlyModule"].forChild({
                types: [
                    {
                        name: 'radio',
                        component: _radio_type__WEBPACK_IMPORTED_MODULE_6__["FormlyFieldRadio"],
                        wrappers: ['form-field'],
                    },
                ],
            }),
        ]] });
(function () { (typeof ngJitMode === "undefined" || ngJitMode) && _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵsetNgModuleScope"](FormlyRadioModule, { declarations: [_radio_type__WEBPACK_IMPORTED_MODULE_6__["FormlyFieldRadio"]], imports: [_angular_common__WEBPACK_IMPORTED_MODULE_1__["CommonModule"],
        _angular_forms__WEBPACK_IMPORTED_MODULE_3__["ReactiveFormsModule"],
        _ngx_formly_kendo_form_field__WEBPACK_IMPORTED_MODULE_5__["FormlyFormFieldModule"],
        _ngx_formly_core_select__WEBPACK_IMPORTED_MODULE_4__["FormlySelectModule"], _core_src_lib_core_module__WEBPACK_IMPORTED_MODULE_7__["FormlyModule"]] }); })();
/*@__PURE__*/ (function () { _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵsetClassMetadata"](FormlyRadioModule, [{
        type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["NgModule"],
        args: [{
                declarations: [_radio_type__WEBPACK_IMPORTED_MODULE_6__["FormlyFieldRadio"]],
                imports: [
                    _angular_common__WEBPACK_IMPORTED_MODULE_1__["CommonModule"],
                    _angular_forms__WEBPACK_IMPORTED_MODULE_3__["ReactiveFormsModule"],
                    _ngx_formly_kendo_form_field__WEBPACK_IMPORTED_MODULE_5__["FormlyFormFieldModule"],
                    _ngx_formly_core_select__WEBPACK_IMPORTED_MODULE_4__["FormlySelectModule"],
                    _ngx_formly_core__WEBPACK_IMPORTED_MODULE_2__["FormlyModule"].forChild({
                        types: [
                            {
                                name: 'radio',
                                component: _radio_type__WEBPACK_IMPORTED_MODULE_6__["FormlyFieldRadio"],
                                wrappers: ['form-field'],
                            },
                        ],
                    }),
                ],
            }]
    }], null, null); })();


/***/ }),

/***/ "../../src/ui/kendo/radio/src/radio.type.ts":
/*!*******************************************************************************!*\
  !*** /home/abdel/www/project/formly/lib/src/ui/kendo/radio/src/radio.type.ts ***!
  \*******************************************************************************/
/*! exports provided: FormlyFieldRadio */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "FormlyFieldRadio", function() { return FormlyFieldRadio; });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/core */ "../../node_modules/@angular/core/__ivy_ngcc__/fesm2015/core.js");
/* harmony import */ var _ngx_formly_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @ngx-formly/core */ "../../src/core/src/public_api.ts");
/* harmony import */ var _angular_common__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @angular/common */ "../../node_modules/@angular/common/__ivy_ngcc__/fesm2015/common.js");
/* harmony import */ var _angular_forms__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @angular/forms */ "../../node_modules/@angular/forms/__ivy_ngcc__/fesm2015/forms.js");
/* harmony import */ var _core_src_lib_templates_formly_attributes__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../../core/src/lib/templates/formly.attributes */ "../../src/core/src/lib/templates/formly.attributes.ts");
/* harmony import */ var _core_select_src_select_options_pipe__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../../core/select/src/select-options.pipe */ "../../src/core/select/src/select-options.pipe.ts");







function FormlyFieldRadio_ng_container_0_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementContainerStart"](0);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](1, "input", 1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](2, "label", 2);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementContainerEnd"]();
} if (rf & 2) {
    const option_r1 = ctx.$implicit;
    const i_r2 = ctx.index;
    const ctx_r0 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("id", ctx_r0.id + "_" + i_r2)("name", ctx_r0.field.name || ctx_r0.id)("value", option_r1.value)("formControl", ctx_r0.formControl)("formlyAttributes", ctx_r0.field);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("for", ctx_r0.id + "_" + i_r2);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtextInterpolate1"](" ", option_r1.label, " ");
} }
class FormlyFieldRadio extends _ngx_formly_core__WEBPACK_IMPORTED_MODULE_1__["FieldType"] {
    constructor() {
        super(...arguments);
        this.defaultOptions = {
            templateOptions: { options: [] },
        };
    }
}
FormlyFieldRadio.ɵfac = function FormlyFieldRadio_Factory(t) { return ɵFormlyFieldRadio_BaseFactory(t || FormlyFieldRadio); };
FormlyFieldRadio.ɵcmp = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdefineComponent"]({ type: FormlyFieldRadio, selectors: [["formly-field-kendo-radio"]], features: [_angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵInheritDefinitionFeature"]], decls: 3, vars: 6, consts: [[4, "ngFor", "ngForOf"], ["type", "radio", 1, "k-radio", 3, "id", "name", "value", "formControl", "formlyAttributes"], [1, "k-radio-label", 3, "for"]], template: function FormlyFieldRadio_Template(rf, ctx) { if (rf & 1) {
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](0, FormlyFieldRadio_ng_container_0_Template, 4, 7, "ng-container", 0);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipe"](1, "async");
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipe"](2, "formlySelectOptions");
    } if (rf & 2) {
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngForOf", _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipeBind1"](1, 1, _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipeBind2"](2, 3, ctx.to.options, ctx.field)));
    } }, directives: [_angular_common__WEBPACK_IMPORTED_MODULE_2__["NgForOf"], _angular_forms__WEBPACK_IMPORTED_MODULE_3__["RadioControlValueAccessor"], _angular_forms__WEBPACK_IMPORTED_MODULE_3__["DefaultValueAccessor"], _angular_forms__WEBPACK_IMPORTED_MODULE_3__["NgControlStatus"], _angular_forms__WEBPACK_IMPORTED_MODULE_3__["FormControlDirective"], _core_src_lib_templates_formly_attributes__WEBPACK_IMPORTED_MODULE_4__["FormlyAttributes"]], pipes: [_angular_common__WEBPACK_IMPORTED_MODULE_2__["AsyncPipe"], _core_select_src_select_options_pipe__WEBPACK_IMPORTED_MODULE_5__["FormlySelectOptionsPipe"]], encapsulation: 2, changeDetection: 0 });
const ɵFormlyFieldRadio_BaseFactory = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵgetInheritedFactory"](FormlyFieldRadio);
/*@__PURE__*/ (function () { _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵsetClassMetadata"](FormlyFieldRadio, [{
        type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Component"],
        args: [{
                selector: 'formly-field-kendo-radio',
                template: `
    <ng-container *ngFor="let option of to.options | formlySelectOptions: field | async; let i = index">
      <input
        type="radio"
        [id]="id + '_' + i"
        [name]="field.name || id"
        [value]="option.value"
        [formControl]="formControl"
        [formlyAttributes]="field"
        class="k-radio"
      />
      <label class="k-radio-label" [for]="id + '_' + i">
        {{ option.label }}
      </label>
    </ng-container>
  `,
                changeDetection: _angular_core__WEBPACK_IMPORTED_MODULE_0__["ChangeDetectionStrategy"].OnPush,
            }]
    }], null, null); })();


/***/ }),

/***/ "../../src/ui/kendo/select/src/public_api.ts":
/*!********************************************************************************!*\
  !*** /home/abdel/www/project/formly/lib/src/ui/kendo/select/src/public_api.ts ***!
  \********************************************************************************/
/*! exports provided: FormlySelectModule, FormlyFieldSelect */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _select_module__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./select.module */ "../../src/ui/kendo/select/src/select.module.ts");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "FormlySelectModule", function() { return _select_module__WEBPACK_IMPORTED_MODULE_0__["FormlySelectModule"]; });

/* harmony import */ var _select_type__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./select.type */ "../../src/ui/kendo/select/src/select.type.ts");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "FormlyFieldSelect", function() { return _select_type__WEBPACK_IMPORTED_MODULE_1__["FormlyFieldSelect"]; });





/***/ }),

/***/ "../../src/ui/kendo/select/src/select.module.ts":
/*!***********************************************************************************!*\
  !*** /home/abdel/www/project/formly/lib/src/ui/kendo/select/src/select.module.ts ***!
  \***********************************************************************************/
/*! exports provided: FormlySelectModule */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "FormlySelectModule", function() { return FormlySelectModule; });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/core */ "../../node_modules/@angular/core/__ivy_ngcc__/fesm2015/core.js");
/* harmony import */ var _angular_common__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/common */ "../../node_modules/@angular/common/__ivy_ngcc__/fesm2015/common.js");
/* harmony import */ var _angular_forms__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @angular/forms */ "../../node_modules/@angular/forms/__ivy_ngcc__/fesm2015/forms.js");
/* harmony import */ var _ngx_formly_core__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @ngx-formly/core */ "../../src/core/src/public_api.ts");
/* harmony import */ var _progress_kendo_angular_dropdowns__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @progress/kendo-angular-dropdowns */ "../../node_modules/@progress/kendo-angular-dropdowns/dist/fesm2015/index.js");
/* harmony import */ var _ngx_formly_core_select__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @ngx-formly/core/select */ "../../src/core/select/src/public_api.ts");
/* harmony import */ var _ngx_formly_kendo_form_field__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @ngx-formly/kendo/form-field */ "../../src/ui/kendo/form-field/src/public_api.ts");
/* harmony import */ var _select_type__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./select.type */ "../../src/ui/kendo/select/src/select.type.ts");
/* harmony import */ var _core_src_lib_core_module__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../../../core/src/lib/core.module */ "../../src/core/src/lib/core.module.ts");










class FormlySelectModule {
}
FormlySelectModule.ɵmod = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdefineNgModule"]({ type: FormlySelectModule });
FormlySelectModule.ɵinj = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdefineInjector"]({ factory: function FormlySelectModule_Factory(t) { return new (t || FormlySelectModule)(); }, imports: [[
            _angular_common__WEBPACK_IMPORTED_MODULE_1__["CommonModule"],
            _angular_forms__WEBPACK_IMPORTED_MODULE_2__["ReactiveFormsModule"],
            _progress_kendo_angular_dropdowns__WEBPACK_IMPORTED_MODULE_4__["DropDownsModule"],
            _ngx_formly_kendo_form_field__WEBPACK_IMPORTED_MODULE_6__["FormlyFormFieldModule"],
            _ngx_formly_core_select__WEBPACK_IMPORTED_MODULE_5__["FormlySelectModule"],
            _ngx_formly_core__WEBPACK_IMPORTED_MODULE_3__["FormlyModule"].forChild({
                types: [
                    {
                        name: 'select',
                        component: _select_type__WEBPACK_IMPORTED_MODULE_7__["FormlyFieldSelect"],
                        wrappers: ['form-field'],
                    },
                    { name: 'enum', extends: 'select' },
                ],
            }),
        ]] });
(function () { (typeof ngJitMode === "undefined" || ngJitMode) && _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵsetNgModuleScope"](FormlySelectModule, { declarations: [_select_type__WEBPACK_IMPORTED_MODULE_7__["FormlyFieldSelect"]], imports: [_angular_common__WEBPACK_IMPORTED_MODULE_1__["CommonModule"],
        _angular_forms__WEBPACK_IMPORTED_MODULE_2__["ReactiveFormsModule"],
        _progress_kendo_angular_dropdowns__WEBPACK_IMPORTED_MODULE_4__["DropDownsModule"],
        _ngx_formly_kendo_form_field__WEBPACK_IMPORTED_MODULE_6__["FormlyFormFieldModule"],
        _ngx_formly_core_select__WEBPACK_IMPORTED_MODULE_5__["FormlySelectModule"], _core_src_lib_core_module__WEBPACK_IMPORTED_MODULE_8__["FormlyModule"]] }); })();
/*@__PURE__*/ (function () { _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵsetClassMetadata"](FormlySelectModule, [{
        type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["NgModule"],
        args: [{
                declarations: [_select_type__WEBPACK_IMPORTED_MODULE_7__["FormlyFieldSelect"]],
                imports: [
                    _angular_common__WEBPACK_IMPORTED_MODULE_1__["CommonModule"],
                    _angular_forms__WEBPACK_IMPORTED_MODULE_2__["ReactiveFormsModule"],
                    _progress_kendo_angular_dropdowns__WEBPACK_IMPORTED_MODULE_4__["DropDownsModule"],
                    _ngx_formly_kendo_form_field__WEBPACK_IMPORTED_MODULE_6__["FormlyFormFieldModule"],
                    _ngx_formly_core_select__WEBPACK_IMPORTED_MODULE_5__["FormlySelectModule"],
                    _ngx_formly_core__WEBPACK_IMPORTED_MODULE_3__["FormlyModule"].forChild({
                        types: [
                            {
                                name: 'select',
                                component: _select_type__WEBPACK_IMPORTED_MODULE_7__["FormlyFieldSelect"],
                                wrappers: ['form-field'],
                            },
                            { name: 'enum', extends: 'select' },
                        ],
                    }),
                ],
            }]
    }], null, null); })();


/***/ }),

/***/ "../../src/ui/kendo/select/src/select.type.ts":
/*!*********************************************************************************!*\
  !*** /home/abdel/www/project/formly/lib/src/ui/kendo/select/src/select.type.ts ***!
  \*********************************************************************************/
/*! exports provided: FormlyFieldSelect */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "FormlyFieldSelect", function() { return FormlyFieldSelect; });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/core */ "../../node_modules/@angular/core/__ivy_ngcc__/fesm2015/core.js");
/* harmony import */ var _ngx_formly_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @ngx-formly/core */ "../../src/core/src/public_api.ts");
/* harmony import */ var _progress_kendo_angular_dropdowns__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @progress/kendo-angular-dropdowns */ "../../node_modules/@progress/kendo-angular-dropdowns/dist/fesm2015/index.js");
/* harmony import */ var _angular_forms__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @angular/forms */ "../../node_modules/@angular/forms/__ivy_ngcc__/fesm2015/forms.js");
/* harmony import */ var _core_src_lib_templates_formly_attributes__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../../core/src/lib/templates/formly.attributes */ "../../src/core/src/lib/templates/formly.attributes.ts");
/* harmony import */ var _angular_common__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @angular/common */ "../../node_modules/@angular/common/__ivy_ngcc__/fesm2015/common.js");
/* harmony import */ var _core_select_src_select_options_pipe__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../../../core/select/src/select-options.pipe */ "../../src/core/select/src/select-options.pipe.ts");








class FormlyFieldSelect extends _ngx_formly_core__WEBPACK_IMPORTED_MODULE_1__["FieldType"] {
    constructor() {
        super(...arguments);
        this.defaultOptions = {
            templateOptions: { options: [] },
        };
    }
}
FormlyFieldSelect.ɵfac = function FormlyFieldSelect_Factory(t) { return ɵFormlyFieldSelect_BaseFactory(t || FormlyFieldSelect); };
FormlyFieldSelect.ɵcmp = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdefineComponent"]({ type: FormlyFieldSelect, selectors: [["formly-field-kendo-select"]], features: [_angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵInheritDefinitionFeature"]], decls: 3, vars: 13, consts: [[3, "formControl", "formlyAttributes", "data", "textField", "valueField", "valuePrimitive", "valueChange"]], template: function FormlyFieldSelect_Template(rf, ctx) { if (rf & 1) {
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "kendo-dropdownlist", 0);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵlistener"]("valueChange", function FormlyFieldSelect_Template_kendo_dropdownlist_valueChange_0_listener($event) { return ctx.to.change && ctx.to.change(ctx.field, $event); });
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipe"](1, "async");
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipe"](2, "formlySelectOptions");
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    } if (rf & 2) {
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵclassProp"]("k-state-invalid", ctx.showError);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("formControl", ctx.formControl)("formlyAttributes", ctx.field)("data", _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipeBind1"](1, 8, _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipeBind2"](2, 10, ctx.to.options, ctx.field)))("textField", "label")("valueField", "value")("valuePrimitive", true);
    } }, directives: [_progress_kendo_angular_dropdowns__WEBPACK_IMPORTED_MODULE_2__["DropDownListComponent"], _angular_forms__WEBPACK_IMPORTED_MODULE_3__["NgControlStatus"], _angular_forms__WEBPACK_IMPORTED_MODULE_3__["FormControlDirective"], _core_src_lib_templates_formly_attributes__WEBPACK_IMPORTED_MODULE_4__["FormlyAttributes"]], pipes: [_angular_common__WEBPACK_IMPORTED_MODULE_5__["AsyncPipe"], _core_select_src_select_options_pipe__WEBPACK_IMPORTED_MODULE_6__["FormlySelectOptionsPipe"]], encapsulation: 2, changeDetection: 0 });
const ɵFormlyFieldSelect_BaseFactory = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵgetInheritedFactory"](FormlyFieldSelect);
/*@__PURE__*/ (function () { _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵsetClassMetadata"](FormlyFieldSelect, [{
        type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Component"],
        args: [{
                selector: 'formly-field-kendo-select',
                template: `
    <kendo-dropdownlist
      [class.k-state-invalid]="showError"
      [formControl]="formControl"
      [formlyAttributes]="field"
      [data]="to.options | formlySelectOptions: field | async"
      [textField]="'label'"
      [valueField]="'value'"
      [valuePrimitive]="true"
      (valueChange)="to.change && to.change(field, $event)"
    >
    </kendo-dropdownlist>
  `,
                changeDetection: _angular_core__WEBPACK_IMPORTED_MODULE_0__["ChangeDetectionStrategy"].OnPush,
            }]
    }], null, null); })();


/***/ }),

/***/ "../../src/ui/kendo/src/lib/ui-kendo.module.ts":
/*!**********************************************************************************!*\
  !*** /home/abdel/www/project/formly/lib/src/ui/kendo/src/lib/ui-kendo.module.ts ***!
  \**********************************************************************************/
/*! exports provided: FormlyKendoModule */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "FormlyKendoModule", function() { return FormlyKendoModule; });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/core */ "../../node_modules/@angular/core/__ivy_ngcc__/fesm2015/core.js");
/* harmony import */ var _ngx_formly_kendo_form_field__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @ngx-formly/kendo/form-field */ "../../src/ui/kendo/form-field/src/public_api.ts");
/* harmony import */ var _ngx_formly_kendo_input__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @ngx-formly/kendo/input */ "../../src/ui/kendo/input/src/public_api.ts");
/* harmony import */ var _ngx_formly_kendo_textarea__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @ngx-formly/kendo/textarea */ "../../src/ui/kendo/textarea/src/public_api.ts");
/* harmony import */ var _ngx_formly_kendo_radio__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @ngx-formly/kendo/radio */ "../../src/ui/kendo/radio/src/public_api.ts");
/* harmony import */ var _ngx_formly_kendo_checkbox__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @ngx-formly/kendo/checkbox */ "../../src/ui/kendo/checkbox/src/public_api.ts");
/* harmony import */ var _ngx_formly_kendo_select__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @ngx-formly/kendo/select */ "../../src/ui/kendo/select/src/public_api.ts");








class FormlyKendoModule {
}
FormlyKendoModule.ɵmod = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdefineNgModule"]({ type: FormlyKendoModule });
FormlyKendoModule.ɵinj = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdefineInjector"]({ factory: function FormlyKendoModule_Factory(t) { return new (t || FormlyKendoModule)(); }, imports: [[
            _ngx_formly_kendo_form_field__WEBPACK_IMPORTED_MODULE_1__["FormlyFormFieldModule"],
            _ngx_formly_kendo_input__WEBPACK_IMPORTED_MODULE_2__["FormlyInputModule"],
            _ngx_formly_kendo_textarea__WEBPACK_IMPORTED_MODULE_3__["FormlyTextAreaModule"],
            _ngx_formly_kendo_radio__WEBPACK_IMPORTED_MODULE_4__["FormlyRadioModule"],
            _ngx_formly_kendo_checkbox__WEBPACK_IMPORTED_MODULE_5__["FormlyCheckboxModule"],
            _ngx_formly_kendo_select__WEBPACK_IMPORTED_MODULE_6__["FormlySelectModule"],
        ]] });
(function () { (typeof ngJitMode === "undefined" || ngJitMode) && _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵsetNgModuleScope"](FormlyKendoModule, { imports: [_ngx_formly_kendo_form_field__WEBPACK_IMPORTED_MODULE_1__["FormlyFormFieldModule"],
        _ngx_formly_kendo_input__WEBPACK_IMPORTED_MODULE_2__["FormlyInputModule"],
        _ngx_formly_kendo_textarea__WEBPACK_IMPORTED_MODULE_3__["FormlyTextAreaModule"],
        _ngx_formly_kendo_radio__WEBPACK_IMPORTED_MODULE_4__["FormlyRadioModule"],
        _ngx_formly_kendo_checkbox__WEBPACK_IMPORTED_MODULE_5__["FormlyCheckboxModule"],
        _ngx_formly_kendo_select__WEBPACK_IMPORTED_MODULE_6__["FormlySelectModule"]] }); })();
/*@__PURE__*/ (function () { _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵsetClassMetadata"](FormlyKendoModule, [{
        type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["NgModule"],
        args: [{
                imports: [
                    _ngx_formly_kendo_form_field__WEBPACK_IMPORTED_MODULE_1__["FormlyFormFieldModule"],
                    _ngx_formly_kendo_input__WEBPACK_IMPORTED_MODULE_2__["FormlyInputModule"],
                    _ngx_formly_kendo_textarea__WEBPACK_IMPORTED_MODULE_3__["FormlyTextAreaModule"],
                    _ngx_formly_kendo_radio__WEBPACK_IMPORTED_MODULE_4__["FormlyRadioModule"],
                    _ngx_formly_kendo_checkbox__WEBPACK_IMPORTED_MODULE_5__["FormlyCheckboxModule"],
                    _ngx_formly_kendo_select__WEBPACK_IMPORTED_MODULE_6__["FormlySelectModule"],
                ],
            }]
    }], null, null); })();


/***/ }),

/***/ "../../src/ui/kendo/src/lib/ui-kendo.ts":
/*!***************************************************************************!*\
  !*** /home/abdel/www/project/formly/lib/src/ui/kendo/src/lib/ui-kendo.ts ***!
  \***************************************************************************/
/*! exports provided: FormlyKendoModule */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _ui_kendo_module__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./ui-kendo.module */ "../../src/ui/kendo/src/lib/ui-kendo.module.ts");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "FormlyKendoModule", function() { return _ui_kendo_module__WEBPACK_IMPORTED_MODULE_0__["FormlyKendoModule"]; });




/***/ }),

/***/ "../../src/ui/kendo/src/public_api.ts":
/*!*************************************************************************!*\
  !*** /home/abdel/www/project/formly/lib/src/ui/kendo/src/public_api.ts ***!
  \*************************************************************************/
/*! exports provided: FormlyKendoModule */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _lib_ui_kendo__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./lib/ui-kendo */ "../../src/ui/kendo/src/lib/ui-kendo.ts");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "FormlyKendoModule", function() { return _lib_ui_kendo__WEBPACK_IMPORTED_MODULE_0__["FormlyKendoModule"]; });

/*
 * Public API Surface of kendo
 */



/***/ }),

/***/ "../../src/ui/kendo/textarea/src/public_api.ts":
/*!**********************************************************************************!*\
  !*** /home/abdel/www/project/formly/lib/src/ui/kendo/textarea/src/public_api.ts ***!
  \**********************************************************************************/
/*! exports provided: FormlyTextAreaModule, FormlyFieldTextArea */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _textarea_module__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./textarea.module */ "../../src/ui/kendo/textarea/src/textarea.module.ts");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "FormlyTextAreaModule", function() { return _textarea_module__WEBPACK_IMPORTED_MODULE_0__["FormlyTextAreaModule"]; });

/* harmony import */ var _textarea_type__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./textarea.type */ "../../src/ui/kendo/textarea/src/textarea.type.ts");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "FormlyFieldTextArea", function() { return _textarea_type__WEBPACK_IMPORTED_MODULE_1__["FormlyFieldTextArea"]; });





/***/ }),

/***/ "../../src/ui/kendo/textarea/src/textarea.module.ts":
/*!***************************************************************************************!*\
  !*** /home/abdel/www/project/formly/lib/src/ui/kendo/textarea/src/textarea.module.ts ***!
  \***************************************************************************************/
/*! exports provided: FormlyTextAreaModule */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "FormlyTextAreaModule", function() { return FormlyTextAreaModule; });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/core */ "../../node_modules/@angular/core/__ivy_ngcc__/fesm2015/core.js");
/* harmony import */ var _angular_common__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/common */ "../../node_modules/@angular/common/__ivy_ngcc__/fesm2015/common.js");
/* harmony import */ var _ngx_formly_core__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @ngx-formly/core */ "../../src/core/src/public_api.ts");
/* harmony import */ var _angular_forms__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @angular/forms */ "../../node_modules/@angular/forms/__ivy_ngcc__/fesm2015/forms.js");
/* harmony import */ var _ngx_formly_kendo_form_field__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @ngx-formly/kendo/form-field */ "../../src/ui/kendo/form-field/src/public_api.ts");
/* harmony import */ var _textarea_type__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./textarea.type */ "../../src/ui/kendo/textarea/src/textarea.type.ts");
/* harmony import */ var _core_src_lib_core_module__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../../../core/src/lib/core.module */ "../../src/core/src/lib/core.module.ts");








class FormlyTextAreaModule {
}
FormlyTextAreaModule.ɵmod = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdefineNgModule"]({ type: FormlyTextAreaModule });
FormlyTextAreaModule.ɵinj = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdefineInjector"]({ factory: function FormlyTextAreaModule_Factory(t) { return new (t || FormlyTextAreaModule)(); }, imports: [[
            _angular_common__WEBPACK_IMPORTED_MODULE_1__["CommonModule"],
            _angular_forms__WEBPACK_IMPORTED_MODULE_3__["ReactiveFormsModule"],
            _ngx_formly_kendo_form_field__WEBPACK_IMPORTED_MODULE_4__["FormlyFormFieldModule"],
            _ngx_formly_core__WEBPACK_IMPORTED_MODULE_2__["FormlyModule"].forChild({
                types: [
                    {
                        name: 'textarea',
                        component: _textarea_type__WEBPACK_IMPORTED_MODULE_5__["FormlyFieldTextArea"],
                        wrappers: ['form-field'],
                    },
                ],
            }),
        ]] });
(function () { (typeof ngJitMode === "undefined" || ngJitMode) && _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵsetNgModuleScope"](FormlyTextAreaModule, { declarations: [_textarea_type__WEBPACK_IMPORTED_MODULE_5__["FormlyFieldTextArea"]], imports: [_angular_common__WEBPACK_IMPORTED_MODULE_1__["CommonModule"],
        _angular_forms__WEBPACK_IMPORTED_MODULE_3__["ReactiveFormsModule"],
        _ngx_formly_kendo_form_field__WEBPACK_IMPORTED_MODULE_4__["FormlyFormFieldModule"], _core_src_lib_core_module__WEBPACK_IMPORTED_MODULE_6__["FormlyModule"]] }); })();
/*@__PURE__*/ (function () { _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵsetClassMetadata"](FormlyTextAreaModule, [{
        type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["NgModule"],
        args: [{
                declarations: [_textarea_type__WEBPACK_IMPORTED_MODULE_5__["FormlyFieldTextArea"]],
                imports: [
                    _angular_common__WEBPACK_IMPORTED_MODULE_1__["CommonModule"],
                    _angular_forms__WEBPACK_IMPORTED_MODULE_3__["ReactiveFormsModule"],
                    _ngx_formly_kendo_form_field__WEBPACK_IMPORTED_MODULE_4__["FormlyFormFieldModule"],
                    _ngx_formly_core__WEBPACK_IMPORTED_MODULE_2__["FormlyModule"].forChild({
                        types: [
                            {
                                name: 'textarea',
                                component: _textarea_type__WEBPACK_IMPORTED_MODULE_5__["FormlyFieldTextArea"],
                                wrappers: ['form-field'],
                            },
                        ],
                    }),
                ],
            }]
    }], null, null); })();


/***/ }),

/***/ "../../src/ui/kendo/textarea/src/textarea.type.ts":
/*!*************************************************************************************!*\
  !*** /home/abdel/www/project/formly/lib/src/ui/kendo/textarea/src/textarea.type.ts ***!
  \*************************************************************************************/
/*! exports provided: FormlyFieldTextArea */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "FormlyFieldTextArea", function() { return FormlyFieldTextArea; });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/core */ "../../node_modules/@angular/core/__ivy_ngcc__/fesm2015/core.js");
/* harmony import */ var _ngx_formly_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @ngx-formly/core */ "../../src/core/src/public_api.ts");
/* harmony import */ var _angular_forms__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @angular/forms */ "../../node_modules/@angular/forms/__ivy_ngcc__/fesm2015/forms.js");
/* harmony import */ var _core_src_lib_templates_formly_attributes__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../../core/src/lib/templates/formly.attributes */ "../../src/core/src/lib/templates/formly.attributes.ts");





class FormlyFieldTextArea extends _ngx_formly_core__WEBPACK_IMPORTED_MODULE_1__["FieldType"] {
}
FormlyFieldTextArea.ɵfac = function FormlyFieldTextArea_Factory(t) { return ɵFormlyFieldTextArea_BaseFactory(t || FormlyFieldTextArea); };
FormlyFieldTextArea.ɵcmp = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdefineComponent"]({ type: FormlyFieldTextArea, selectors: [["formly-field-kendo-textarea"]], features: [_angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵInheritDefinitionFeature"]], decls: 1, vars: 4, consts: [[1, "k-textarea", 3, "formControl", "formlyAttributes"]], template: function FormlyFieldTextArea_Template(rf, ctx) { if (rf & 1) {
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](0, "textarea", 0);
    } if (rf & 2) {
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵclassProp"]("k-state-invalid", ctx.showError);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("formControl", ctx.formControl)("formlyAttributes", ctx.field);
    } }, directives: [_angular_forms__WEBPACK_IMPORTED_MODULE_2__["DefaultValueAccessor"], _angular_forms__WEBPACK_IMPORTED_MODULE_2__["NgControlStatus"], _angular_forms__WEBPACK_IMPORTED_MODULE_2__["FormControlDirective"], _core_src_lib_templates_formly_attributes__WEBPACK_IMPORTED_MODULE_3__["FormlyAttributes"]], encapsulation: 2, changeDetection: 0 });
const ɵFormlyFieldTextArea_BaseFactory = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵgetInheritedFactory"](FormlyFieldTextArea);
/*@__PURE__*/ (function () { _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵsetClassMetadata"](FormlyFieldTextArea, [{
        type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Component"],
        args: [{
                selector: 'formly-field-kendo-textarea',
                template: `
    <textarea
      class="k-textarea"
      [class.k-state-invalid]="showError"
      [formControl]="formControl"
      [formlyAttributes]="field"
    ></textarea>
  `,
                changeDetection: _angular_core__WEBPACK_IMPORTED_MODULE_0__["ChangeDetectionStrategy"].OnPush,
            }]
    }], null, null); })();


/***/ }),

/***/ "./src/app/ui/kendo.module.ts":
/*!************************************!*\
  !*** ./src/app/ui/kendo.module.ts ***!
  \************************************/
/*! exports provided: UIKendoModule */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "UIKendoModule", function() { return UIKendoModule; });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/core */ "../../node_modules/@angular/core/__ivy_ngcc__/fesm2015/core.js");
/* harmony import */ var _angular_router__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/router */ "../../node_modules/@angular/router/__ivy_ngcc__/fesm2015/router.js");
/* harmony import */ var _ngx_formly_kendo__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @ngx-formly/kendo */ "../../src/ui/kendo/src/public_api.ts");
/* harmony import */ var _ui_module__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./ui.module */ "./src/app/ui/ui.module.ts");
/* harmony import */ var _ui_component__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./ui.component */ "./src/app/ui/ui.component.ts");







class UIKendoModule {
}
UIKendoModule.ɵmod = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdefineNgModule"]({ type: UIKendoModule });
UIKendoModule.ɵinj = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdefineInjector"]({ factory: function UIKendoModule_Factory(t) { return new (t || UIKendoModule)(); }, providers: [], imports: [[
            _ui_module__WEBPACK_IMPORTED_MODULE_3__["UIModule"],
            _ngx_formly_kendo__WEBPACK_IMPORTED_MODULE_2__["FormlyKendoModule"],
            _angular_router__WEBPACK_IMPORTED_MODULE_1__["RouterModule"].forChild([
                {
                    path: '',
                    component: _ui_component__WEBPACK_IMPORTED_MODULE_4__["UIComponent"],
                },
            ]),
        ]] });
(function () { (typeof ngJitMode === "undefined" || ngJitMode) && _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵsetNgModuleScope"](UIKendoModule, { imports: [_ui_module__WEBPACK_IMPORTED_MODULE_3__["UIModule"],
        _ngx_formly_kendo__WEBPACK_IMPORTED_MODULE_2__["FormlyKendoModule"], _angular_router__WEBPACK_IMPORTED_MODULE_1__["RouterModule"]] }); })();
/*@__PURE__*/ (function () { _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵsetClassMetadata"](UIKendoModule, [{
        type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["NgModule"],
        args: [{
                imports: [
                    _ui_module__WEBPACK_IMPORTED_MODULE_3__["UIModule"],
                    _ngx_formly_kendo__WEBPACK_IMPORTED_MODULE_2__["FormlyKendoModule"],
                    _angular_router__WEBPACK_IMPORTED_MODULE_1__["RouterModule"].forChild([
                        {
                            path: '',
                            component: _ui_component__WEBPACK_IMPORTED_MODULE_4__["UIComponent"],
                        },
                    ]),
                ],
                providers: [],
            }]
    }], null, null); })();


/***/ })

}]);
//# sourceMappingURL=ui-kendo-module.js.map